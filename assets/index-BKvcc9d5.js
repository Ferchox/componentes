function YH(e,t){for(var n=0;n<t.length;n++){const g=t[n];if(typeof g!="string"&&!Array.isArray(g)){for(const r in g)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(g,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>g[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))g(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&g(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function g(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ba(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function g(){return this instanceof g?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(g){var r=Object.getOwnPropertyDescriptor(e,g);Object.defineProperty(n,g,r.get?r:{enumerable:!0,get:function(){return e[g]}})}),n}var nR={exports:{}},s0={},gR={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.element"),NH=Symbol.for("react.portal"),HH=Symbol.for("react.fragment"),FH=Symbol.for("react.strict_mode"),xH=Symbol.for("react.profiler"),KH=Symbol.for("react.provider"),LH=Symbol.for("react.context"),EH=Symbol.for("react.forward_ref"),MH=Symbol.for("react.suspense"),zH=Symbol.for("react.memo"),UH=Symbol.for("react.lazy"),JS=Symbol.iterator;function TH(e){return e===null||typeof e!="object"?null:(e=JS&&e[JS]||e["@@iterator"],typeof e=="function"?e:null)}var rR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iR=Object.assign,aR={};function mc(e,t,n){this.props=e,this.context=t,this.refs=aR,this.updater=n||rR}mc.prototype.isReactComponent={};mc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oR(){}oR.prototype=mc.prototype;function T2(e,t,n){this.props=e,this.context=t,this.refs=aR,this.updater=n||rR}var D2=T2.prototype=new oR;D2.constructor=T2;iR(D2,mc.prototype);D2.isPureReactComponent=!0;var YS=Array.isArray,lR=Object.prototype.hasOwnProperty,j2={current:null},sR={key:!0,ref:!0,__self:!0,__source:!0};function IR(e,t,n){var g,r={},i=null,a=null;if(t!=null)for(g in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)lR.call(t,g)&&!sR.hasOwnProperty(g)&&(r[g]=t[g]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var l=Array(o),s=0;s<o;s++)l[s]=arguments[s+2];r.children=l}if(e&&e.defaultProps)for(g in o=e.defaultProps,o)r[g]===void 0&&(r[g]=o[g]);return{$$typeof:Id,type:e,key:i,ref:a,props:r,_owner:j2.current}}function DH(e,t){return{$$typeof:Id,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Q2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Id}function jH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var NS=/\/+/g;function _p(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jH(""+e.key):t.toString(36)}function fh(e,t,n,g,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Id:case NH:a=!0}}if(a)return a=e,r=r(a),e=g===""?"."+_p(a,0):g,YS(r)?(n="",e!=null&&(n=e.replace(NS,"$&/")+"/"),fh(r,t,n,"",function(s){return s})):r!=null&&(Q2(r)&&(r=DH(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(NS,"$&/")+"/")+e)),t.push(r)),1;if(a=0,g=g===""?".":g+":",YS(e))for(var o=0;o<e.length;o++){i=e[o];var l=g+_p(i,o);a+=fh(i,t,n,l,r)}else if(l=TH(e),typeof l=="function")for(e=l.call(e),o=0;!(i=e.next()).done;)i=i.value,l=g+_p(i,o++),a+=fh(i,t,n,l,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function SA(e,t,n){if(e==null)return e;var g=[],r=0;return fh(e,g,"","",function(i){return t.call(n,i,r++)}),g}function QH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ug={current:null},ph={transition:null},PH={ReactCurrentDispatcher:Ug,ReactCurrentBatchConfig:ph,ReactCurrentOwner:j2};function cR(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:SA,forEach:function(e,t,n){SA(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return SA(e,function(){t++}),t},toArray:function(e){return SA(e,function(t){return t})||[]},only:function(e){if(!Q2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kt.Component=mc;kt.Fragment=HH;kt.Profiler=xH;kt.PureComponent=T2;kt.StrictMode=FH;kt.Suspense=MH;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PH;kt.act=cR;kt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var g=iR({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=j2.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)lR.call(t,l)&&!sR.hasOwnProperty(l)&&(g[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)g.children=n;else if(1<l){o=Array(l);for(var s=0;s<l;s++)o[s]=arguments[s+2];g.children=o}return{$$typeof:Id,type:e.type,key:r,ref:i,props:g,_owner:a}};kt.createContext=function(e){return e={$$typeof:LH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KH,_context:e},e.Consumer=e};kt.createElement=IR;kt.createFactory=function(e){var t=IR.bind(null,e);return t.type=e,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(e){return{$$typeof:EH,render:e}};kt.isValidElement=Q2;kt.lazy=function(e){return{$$typeof:UH,_payload:{_status:-1,_result:e},_init:QH}};kt.memo=function(e,t){return{$$typeof:zH,type:e,compare:t===void 0?null:t}};kt.startTransition=function(e){var t=ph.transition;ph.transition={};try{e()}finally{ph.transition=t}};kt.unstable_act=cR;kt.useCallback=function(e,t){return Ug.current.useCallback(e,t)};kt.useContext=function(e){return Ug.current.useContext(e)};kt.useDebugValue=function(){};kt.useDeferredValue=function(e){return Ug.current.useDeferredValue(e)};kt.useEffect=function(e,t){return Ug.current.useEffect(e,t)};kt.useId=function(){return Ug.current.useId()};kt.useImperativeHandle=function(e,t,n){return Ug.current.useImperativeHandle(e,t,n)};kt.useInsertionEffect=function(e,t){return Ug.current.useInsertionEffect(e,t)};kt.useLayoutEffect=function(e,t){return Ug.current.useLayoutEffect(e,t)};kt.useMemo=function(e,t){return Ug.current.useMemo(e,t)};kt.useReducer=function(e,t,n){return Ug.current.useReducer(e,t,n)};kt.useRef=function(e){return Ug.current.useRef(e)};kt.useState=function(e){return Ug.current.useState(e)};kt.useSyncExternalStore=function(e,t,n){return Ug.current.useSyncExternalStore(e,t,n)};kt.useTransition=function(){return Ug.current.useTransition()};kt.version="18.3.1";gR.exports=kt;var _=gR.exports;const I0=l0(_),Ph=YH({__proto__:null,default:I0},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OH=_,_H=Symbol.for("react.element"),qH=Symbol.for("react.fragment"),$H=Object.prototype.hasOwnProperty,eF=OH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tF={key:!0,ref:!0,__self:!0,__source:!0};function CR(e,t,n){var g,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(g in t)$H.call(t,g)&&!tF.hasOwnProperty(g)&&(r[g]=t[g]);if(e&&e.defaultProps)for(g in t=e.defaultProps,t)r[g]===void 0&&(r[g]=t[g]);return{$$typeof:_H,type:e,key:i,ref:a,props:r,_owner:eF.current}}s0.Fragment=qH;s0.jsx=CR;s0.jsxs=CR;nR.exports=s0;var G=nR.exports,Vy={},uR={exports:{}},Wr={},dR={exports:{}},AR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,P){var N=U.length;U.push(P);e:for(;0<N;){var le=N-1>>>1,Y=U[le];if(0<r(Y,P))U[le]=P,U[N]=Y,N=le;else break e}}function n(U){return U.length===0?null:U[0]}function g(U){if(U.length===0)return null;var P=U[0],N=U.pop();if(N!==P){U[0]=N;e:for(var le=0,Y=U.length,J=Y>>>1;le<J;){var O=2*(le+1)-1,ee=U[O],te=O+1,se=U[te];if(0>r(ee,N))te<Y&&0>r(se,ee)?(U[le]=se,U[te]=N,le=te):(U[le]=ee,U[O]=N,le=O);else if(te<Y&&0>r(se,N))U[le]=se,U[te]=N,le=te;else break e}}return P}function r(U,P){var N=U.sortIndex-P.sortIndex;return N!==0?N:U.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],s=[],I=1,c=null,d=3,u=!1,m=!1,f=!1,y=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var P=n(s);P!==null;){if(P.callback===null)g(s);else if(P.startTime<=U)g(s),P.sortIndex=P.expirationTime,t(l,P);else break;P=n(s)}}function S(U){if(f=!1,b(U),!m)if(n(l)!==null)m=!0,Q(X);else{var P=n(s);P!==null&&D(S,P.startTime-U)}}function X(U,P){m=!1,f&&(f=!1,h(R),R=-1),u=!0;var N=d;try{for(b(P),c=n(l);c!==null&&(!(c.expirationTime>P)||U&&!k());){var le=c.callback;if(typeof le=="function"){c.callback=null,d=c.priorityLevel;var Y=le(c.expirationTime<=P);P=e.unstable_now(),typeof Y=="function"?c.callback=Y:c===n(l)&&g(l),b(P)}else g(l);c=n(l)}if(c!==null)var J=!0;else{var O=n(s);O!==null&&D(S,O.startTime-P),J=!1}return J}finally{c=null,d=N,u=!1}}var W=!1,V=null,R=-1,z=5,L=-1;function k(){return!(e.unstable_now()-L<z)}function v(){if(V!==null){var U=e.unstable_now();L=U;var P=!0;try{P=V(!0,U)}finally{P?K():(W=!1,V=null)}}else W=!1}var K;if(typeof p=="function")K=function(){p(v)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,q=x.port2;x.port1.onmessage=v,K=function(){q.postMessage(null)}}else K=function(){y(v,0)};function Q(U){V=U,W||(W=!0,K())}function D(U,P){R=y(function(){U(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){m||u||(m=!0,Q(X))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var P=3;break;default:P=d}var N=d;d=P;try{return U()}finally{d=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,P){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var N=d;d=U;try{return P()}finally{d=N}},e.unstable_scheduleCallback=function(U,P,N){var le=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?le+N:le):N=le,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=N+Y,U={id:I++,callback:P,priorityLevel:U,startTime:N,expirationTime:Y,sortIndex:-1},N>le?(U.sortIndex=N,t(s,U),n(l)===null&&U===n(s)&&(f?(h(R),R=-1):f=!0,D(S,N-le))):(U.sortIndex=Y,t(l,U),m||u||(m=!0,Q(X))),U},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(U){var P=d;return function(){var N=d;d=P;try{return U.apply(this,arguments)}finally{d=N}}}})(AR);dR.exports=AR;var nF=dR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR=_,vr=nF;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mR=new Set,Cu={};function bs(e,t){$I(e,t),$I(e+"Capture",t)}function $I(e,t){for(Cu[e]=t,e=0;e<t.length;e++)mR.add(t[e])}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ky=Object.prototype.hasOwnProperty,gF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HS={},FS={};function rF(e){return ky.call(FS,e)?!0:ky.call(HS,e)?!1:gF.test(e)?FS[e]=!0:(HS[e]=!0,!1)}function iF(e,t,n,g){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return g?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aF(e,t,n,g){if(t===null||typeof t>"u"||iF(e,t,n,g))return!0;if(g)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tg(e,t,n,g,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=g,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var yg={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yg[e]=new Tg(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yg[t]=new Tg(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yg[e]=new Tg(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yg[e]=new Tg(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yg[e]=new Tg(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yg[e]=new Tg(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yg[e]=new Tg(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yg[e]=new Tg(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yg[e]=new Tg(e,5,!1,e.toLowerCase(),null,!1,!1)});var P2=/[\-:]([a-z])/g;function O2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P2,O2);yg[t]=new Tg(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P2,O2);yg[t]=new Tg(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P2,O2);yg[t]=new Tg(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yg[e]=new Tg(e,1,!1,e.toLowerCase(),null,!1,!1)});yg.xlinkHref=new Tg("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yg[e]=new Tg(e,1,!1,e.toLowerCase(),null,!0,!0)});function _2(e,t,n,g){var r=yg.hasOwnProperty(t)?yg[t]:null;(r!==null?r.type!==0:g||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aF(t,n,r,g)&&(n=null),g||r===null?rF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,g=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,g?e.setAttributeNS(g,t,n):e.setAttribute(t,n))))}var Io=hR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vA=Symbol.for("react.element"),bI=Symbol.for("react.portal"),yI=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),Ry=Symbol.for("react.profiler"),fR=Symbol.for("react.provider"),pR=Symbol.for("react.context"),$2=Symbol.for("react.forward_ref"),wy=Symbol.for("react.suspense"),Xy=Symbol.for("react.suspense_list"),eG=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),bR=Symbol.for("react.offscreen"),xS=Symbol.iterator;function cC(e){return e===null||typeof e!="object"?null:(e=xS&&e[xS]||e["@@iterator"],typeof e=="function"?e:null)}var Gn=Object.assign,qp;function YC(e){if(qp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qp=t&&t[1]||""}return`
`+qp+e}var $p=!1;function eb(e,t){if(!e||$p)return"";$p=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var g=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){g=s}e.call(t.prototype)}else{try{throw Error()}catch(s){g=s}e()}}catch(s){if(s&&g&&typeof s.stack=="string"){for(var r=s.stack.split(`
`),i=g.stack.split(`
`),a=r.length-1,o=i.length-1;1<=a&&0<=o&&r[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==i[o]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{$p=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?YC(e):""}function oF(e){switch(e.tag){case 5:return YC(e.type);case 16:return YC("Lazy");case 13:return YC("Suspense");case 19:return YC("SuspenseList");case 0:case 2:case 15:return e=eb(e.type,!1),e;case 11:return e=eb(e.type.render,!1),e;case 1:return e=eb(e.type,!0),e;default:return""}}function Jy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yI:return"Fragment";case bI:return"Portal";case Ry:return"Profiler";case q2:return"StrictMode";case wy:return"Suspense";case Xy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pR:return(e.displayName||"Context")+".Consumer";case fR:return(e._context.displayName||"Context")+".Provider";case $2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case eG:return t=e.displayName||null,t!==null?t:Jy(e.type)||"Memo";case Ko:t=e._payload,e=e._init;try{return Jy(e(t))}catch{}}return null}function lF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jy(t);case 8:return t===q2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ul(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sF(e){var t=yR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),g=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){g=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return g},setValue:function(a){g=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function WA(e){e._valueTracker||(e._valueTracker=sF(e))}function ZR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),g="";return e&&(g=yR(e)?e.checked?"true":"false":e.value),e=g,e!==n?(t.setValue(e),!0):!1}function Oh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yy(e,t){var n=t.checked;return Gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function KS(e,t){var n=t.defaultValue==null?"":t.defaultValue,g=t.checked!=null?t.checked:t.defaultChecked;n=ul(t.value!=null?t.value:n),e._wrapperState={initialChecked:g,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GR(e,t){t=t.checked,t!=null&&_2(e,"checked",t,!1)}function Ny(e,t){GR(e,t);var n=ul(t.value),g=t.type;if(n!=null)g==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(g==="submit"||g==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hy(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hy(e,t.type,ul(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function LS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var g=t.type;if(!(g!=="submit"&&g!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hy(e,t,n){(t!=="number"||Oh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var NC=Array.isArray;function HI(e,t,n,g){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&g&&(e[n].defaultSelected=!0)}else{for(n=""+ul(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,g&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Fy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ES(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Xe(92));if(NC(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ul(n)}}function BR(e,t){var n=ul(t.value),g=ul(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),g!=null&&(e.defaultValue=""+g)}function MS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var VA,vR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,g,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,g,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(VA=VA||document.createElement("div"),VA.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=VA.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var MC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IF=["Webkit","ms","Moz","O"];Object.keys(MC).forEach(function(e){IF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),MC[t]=MC[e]})});function WR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||MC.hasOwnProperty(e)&&MC[e]?(""+t).trim():t+"px"}function VR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var g=n.indexOf("--")===0,r=WR(n,t[n],g);n==="float"&&(n="cssFloat"),g?e.setProperty(n,r):e[n]=r}}var cF=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ky(e,t){if(t){if(cF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function Ly(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ey=null;function tG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var My=null,FI=null,xI=null;function zS(e){if(e=ud(e)){if(typeof My!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=A0(t),My(e.stateNode,e.type,t))}}function kR(e){FI?xI?xI.push(e):xI=[e]:FI=e}function RR(){if(FI){var e=FI,t=xI;if(xI=FI=null,zS(e),t)for(e=0;e<t.length;e++)zS(t[e])}}function wR(e,t){return e(t)}function XR(){}var tb=!1;function JR(e,t,n){if(tb)return e(t,n);tb=!0;try{return wR(e,t,n)}finally{tb=!1,(FI!==null||xI!==null)&&(XR(),RR())}}function du(e,t){var n=e.stateNode;if(n===null)return null;var g=A0(n);if(g===null)return null;n=g[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(e=e.type,g=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!g;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Xe(231,t,typeof n));return n}var zy=!1;if(_a)try{var CC={};Object.defineProperty(CC,"passive",{get:function(){zy=!0}}),window.addEventListener("test",CC,CC),window.removeEventListener("test",CC,CC)}catch{zy=!1}function CF(e,t,n,g,r,i,a,o,l){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(I){this.onError(I)}}var zC=!1,_h=null,qh=!1,Uy=null,uF={onError:function(e){zC=!0,_h=e}};function dF(e,t,n,g,r,i,a,o,l){zC=!1,_h=null,CF.apply(uF,arguments)}function AF(e,t,n,g,r,i,a,o,l){if(dF.apply(this,arguments),zC){if(zC){var s=_h;zC=!1,_h=null}else throw Error(Xe(198));qh||(qh=!0,Uy=s)}}function ys(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function YR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function US(e){if(ys(e)!==e)throw Error(Xe(188))}function hF(e){var t=e.alternate;if(!t){if(t=ys(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var n=e,g=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(g=r.return,g!==null){n=g;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return US(r),e;if(i===g)return US(r),t;i=i.sibling}throw Error(Xe(188))}if(n.return!==g.return)n=r,g=i;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,g=i;break}if(o===g){a=!0,g=r,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,g=r;break}if(o===g){a=!0,g=i,n=r;break}o=o.sibling}if(!a)throw Error(Xe(189))}}if(n.alternate!==g)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?e:t}function NR(e){return e=hF(e),e!==null?HR(e):null}function HR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=HR(e);if(t!==null)return t;e=e.sibling}return null}var FR=vr.unstable_scheduleCallback,TS=vr.unstable_cancelCallback,mF=vr.unstable_shouldYield,fF=vr.unstable_requestPaint,Fn=vr.unstable_now,pF=vr.unstable_getCurrentPriorityLevel,nG=vr.unstable_ImmediatePriority,xR=vr.unstable_UserBlockingPriority,$h=vr.unstable_NormalPriority,bF=vr.unstable_LowPriority,KR=vr.unstable_IdlePriority,c0=null,Ca=null;function yF(e){if(Ca&&typeof Ca.onCommitFiberRoot=="function")try{Ca.onCommitFiberRoot(c0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ni=Math.clz32?Math.clz32:BF,ZF=Math.log,GF=Math.LN2;function BF(e){return e>>>=0,e===0?32:31-(ZF(e)/GF|0)|0}var kA=64,RA=4194304;function HC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function em(e,t){var n=e.pendingLanes;if(n===0)return 0;var g=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~r;o!==0?g=HC(o):(i&=a,i!==0&&(g=HC(i)))}else a=n&~r,a!==0?g=HC(a):i!==0&&(g=HC(i));if(g===0)return 0;if(t!==0&&t!==g&&!(t&r)&&(r=g&-g,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(g&4&&(g|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=g;0<t;)n=31-Ni(t),r=1<<n,g|=e[n],t&=~r;return g}function SF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vF(e,t){for(var n=e.suspendedLanes,g=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ni(i),o=1<<a,l=r[a];l===-1?(!(o&n)||o&g)&&(r[a]=SF(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}function Ty(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function LR(){var e=kA;return kA<<=1,!(kA&4194240)&&(kA=64),e}function nb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function cd(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ni(t),e[t]=n}function WF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var g=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Ni(n),i=1<<r;t[r]=0,g[r]=-1,e[r]=-1,n&=~i}}function gG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var g=31-Ni(n),r=1<<g;r&t|e[g]&t&&(e[g]|=t),n&=~r}}var Qt=0;function ER(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var MR,rG,zR,UR,TR,Dy=!1,wA=[],tl=null,nl=null,gl=null,Au=new Map,hu=new Map,zo=[],VF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DS(e,t){switch(e){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Au.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(t.pointerId)}}function uC(e,t,n,g,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:g,nativeEvent:i,targetContainers:[r]},t!==null&&(t=ud(t),t!==null&&rG(t)),e):(e.eventSystemFlags|=g,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function kF(e,t,n,g,r){switch(t){case"focusin":return tl=uC(tl,e,t,n,g,r),!0;case"dragenter":return nl=uC(nl,e,t,n,g,r),!0;case"mouseover":return gl=uC(gl,e,t,n,g,r),!0;case"pointerover":var i=r.pointerId;return Au.set(i,uC(Au.get(i)||null,e,t,n,g,r)),!0;case"gotpointercapture":return i=r.pointerId,hu.set(i,uC(hu.get(i)||null,e,t,n,g,r)),!0}return!1}function DR(e){var t=Tl(e.target);if(t!==null){var n=ys(t);if(n!==null){if(t=n.tag,t===13){if(t=YR(n),t!==null){e.blockedOn=t,TR(e.priority,function(){zR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var g=new n.constructor(n.type,n);Ey=g,n.target.dispatchEvent(g),Ey=null}else return t=ud(n),t!==null&&rG(t),e.blockedOn=n,!1;t.shift()}return!0}function jS(e,t,n){bh(e)&&n.delete(t)}function RF(){Dy=!1,tl!==null&&bh(tl)&&(tl=null),nl!==null&&bh(nl)&&(nl=null),gl!==null&&bh(gl)&&(gl=null),Au.forEach(jS),hu.forEach(jS)}function dC(e,t){e.blockedOn===t&&(e.blockedOn=null,Dy||(Dy=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,RF)))}function mu(e){function t(r){return dC(r,e)}if(0<wA.length){dC(wA[0],e);for(var n=1;n<wA.length;n++){var g=wA[n];g.blockedOn===e&&(g.blockedOn=null)}}for(tl!==null&&dC(tl,e),nl!==null&&dC(nl,e),gl!==null&&dC(gl,e),Au.forEach(t),hu.forEach(t),n=0;n<zo.length;n++)g=zo[n],g.blockedOn===e&&(g.blockedOn=null);for(;0<zo.length&&(n=zo[0],n.blockedOn===null);)DR(n),n.blockedOn===null&&zo.shift()}var KI=Io.ReactCurrentBatchConfig,tm=!0;function wF(e,t,n,g){var r=Qt,i=KI.transition;KI.transition=null;try{Qt=1,iG(e,t,n,g)}finally{Qt=r,KI.transition=i}}function XF(e,t,n,g){var r=Qt,i=KI.transition;KI.transition=null;try{Qt=4,iG(e,t,n,g)}finally{Qt=r,KI.transition=i}}function iG(e,t,n,g){if(tm){var r=jy(e,t,n,g);if(r===null)Cb(e,t,g,nm,n),DS(e,g);else if(kF(r,e,t,n,g))g.stopPropagation();else if(DS(e,g),t&4&&-1<VF.indexOf(e)){for(;r!==null;){var i=ud(r);if(i!==null&&MR(i),i=jy(e,t,n,g),i===null&&Cb(e,t,g,nm,n),i===r)break;r=i}r!==null&&g.stopPropagation()}else Cb(e,t,g,null,n)}}var nm=null;function jy(e,t,n,g){if(nm=null,e=tG(g),e=Tl(e),e!==null)if(t=ys(e),t===null)e=null;else if(n=t.tag,n===13){if(e=YR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nm=e,null}function jR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pF()){case nG:return 1;case xR:return 4;case $h:case bF:return 16;case KR:return 536870912;default:return 16}default:return 16}}var jo=null,aG=null,yh=null;function QR(){if(yh)return yh;var e,t=aG,n=t.length,g,r="value"in jo?jo.value:jo.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(g=1;g<=a&&t[n-g]===r[i-g];g++);return yh=r.slice(e,1<g?1-g:void 0)}function Zh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function XA(){return!0}function QS(){return!1}function Vr(e){function t(n,g,r,i,a){this._reactName=n,this._targetInst=r,this.type=g,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?XA:QS,this.isPropagationStopped=QS,this}return Gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=XA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=XA)},persist:function(){},isPersistent:XA}),t}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oG=Vr(fc),Cd=Gn({},fc,{view:0,detail:0}),JF=Vr(Cd),gb,rb,AC,C0=Gn({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==AC&&(AC&&e.type==="mousemove"?(gb=e.screenX-AC.screenX,rb=e.screenY-AC.screenY):rb=gb=0,AC=e),gb)},movementY:function(e){return"movementY"in e?e.movementY:rb}}),PS=Vr(C0),YF=Gn({},C0,{dataTransfer:0}),NF=Vr(YF),HF=Gn({},Cd,{relatedTarget:0}),ib=Vr(HF),FF=Gn({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),xF=Vr(FF),KF=Gn({},fc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LF=Vr(KF),EF=Gn({},fc,{data:0}),OS=Vr(EF),MF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=UF[e])?!!t[e]:!1}function lG(){return TF}var DF=Gn({},Cd,{key:function(e){if(e.key){var t=MF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lG,charCode:function(e){return e.type==="keypress"?Zh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jF=Vr(DF),QF=Gn({},C0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_S=Vr(QF),PF=Gn({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lG}),OF=Vr(PF),_F=Gn({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),qF=Vr(_F),$F=Gn({},C0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ex=Vr($F),tx=[9,13,27,32],sG=_a&&"CompositionEvent"in window,UC=null;_a&&"documentMode"in document&&(UC=document.documentMode);var nx=_a&&"TextEvent"in window&&!UC,PR=_a&&(!sG||UC&&8<UC&&11>=UC),qS=" ",$S=!1;function OR(e,t){switch(e){case"keyup":return tx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _R(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ZI=!1;function gx(e,t){switch(e){case"compositionend":return _R(t);case"keypress":return t.which!==32?null:($S=!0,qS);case"textInput":return e=t.data,e===qS&&$S?null:e;default:return null}}function rx(e,t){if(ZI)return e==="compositionend"||!sG&&OR(e,t)?(e=QR(),yh=aG=jo=null,ZI=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PR&&t.locale!=="ko"?null:t.data;default:return null}}var ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ix[e.type]:t==="textarea"}function qR(e,t,n,g){kR(g),t=gm(t,"onChange"),0<t.length&&(n=new oG("onChange","change",null,n,g),e.push({event:n,listeners:t}))}var TC=null,fu=null;function ax(e){sw(e,0)}function u0(e){var t=SI(e);if(ZR(t))return e}function ox(e,t){if(e==="change")return t}var $R=!1;if(_a){var ab;if(_a){var ob="oninput"in document;if(!ob){var t5=document.createElement("div");t5.setAttribute("oninput","return;"),ob=typeof t5.oninput=="function"}ab=ob}else ab=!1;$R=ab&&(!document.documentMode||9<document.documentMode)}function n5(){TC&&(TC.detachEvent("onpropertychange",ew),fu=TC=null)}function ew(e){if(e.propertyName==="value"&&u0(fu)){var t=[];qR(t,fu,e,tG(e)),JR(ax,t)}}function lx(e,t,n){e==="focusin"?(n5(),TC=t,fu=n,TC.attachEvent("onpropertychange",ew)):e==="focusout"&&n5()}function sx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return u0(fu)}function Ix(e,t){if(e==="click")return u0(t)}function cx(e,t){if(e==="input"||e==="change")return u0(t)}function Cx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xi=typeof Object.is=="function"?Object.is:Cx;function pu(e,t){if(xi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),g=Object.keys(t);if(n.length!==g.length)return!1;for(g=0;g<n.length;g++){var r=n[g];if(!ky.call(t,r)||!xi(e[r],t[r]))return!1}return!0}function g5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r5(e,t){var n=g5(e);e=0;for(var g;n;){if(n.nodeType===3){if(g=e+n.textContent.length,e<=t&&g>=t)return{node:n,offset:t-e};e=g}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=g5(n)}}function tw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nw(){for(var e=window,t=Oh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oh(e.document)}return t}function IG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ux(e){var t=nw(),n=e.focusedElem,g=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tw(n.ownerDocument.documentElement,n)){if(g!==null&&IG(n)){if(t=g.start,e=g.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(g.start,r);g=g.end===void 0?i:Math.min(g.end,r),!e.extend&&i>g&&(r=g,g=i,i=r),r=r5(n,i);var a=r5(n,g);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>g?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dx=_a&&"documentMode"in document&&11>=document.documentMode,GI=null,Qy=null,DC=null,Py=!1;function i5(e,t,n){var g=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Py||GI==null||GI!==Oh(g)||(g=GI,"selectionStart"in g&&IG(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),DC&&pu(DC,g)||(DC=g,g=gm(Qy,"onSelect"),0<g.length&&(t=new oG("onSelect","select",null,t,n),e.push({event:t,listeners:g}),t.target=GI)))}function JA(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var BI={animationend:JA("Animation","AnimationEnd"),animationiteration:JA("Animation","AnimationIteration"),animationstart:JA("Animation","AnimationStart"),transitionend:JA("Transition","TransitionEnd")},lb={},gw={};_a&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete BI.animationend.animation,delete BI.animationiteration.animation,delete BI.animationstart.animation),"TransitionEvent"in window||delete BI.transitionend.transition);function d0(e){if(lb[e])return lb[e];if(!BI[e])return e;var t=BI[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gw)return lb[e]=t[n];return e}var rw=d0("animationend"),iw=d0("animationiteration"),aw=d0("animationstart"),ow=d0("transitionend"),lw=new Map,a5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bl(e,t){lw.set(e,t),bs(t,[e])}for(var sb=0;sb<a5.length;sb++){var Ib=a5[sb],Ax=Ib.toLowerCase(),hx=Ib[0].toUpperCase()+Ib.slice(1);bl(Ax,"on"+hx)}bl(rw,"onAnimationEnd");bl(iw,"onAnimationIteration");bl(aw,"onAnimationStart");bl("dblclick","onDoubleClick");bl("focusin","onFocus");bl("focusout","onBlur");bl(ow,"onTransitionEnd");$I("onMouseEnter",["mouseout","mouseover"]);$I("onMouseLeave",["mouseout","mouseover"]);$I("onPointerEnter",["pointerout","pointerover"]);$I("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var FC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(FC));function o5(e,t,n){var g=e.type||"unknown-event";e.currentTarget=n,AF(g,t,void 0,e),e.currentTarget=null}function sw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var g=e[n],r=g.event;g=g.listeners;e:{var i=void 0;if(t)for(var a=g.length-1;0<=a;a--){var o=g[a],l=o.instance,s=o.currentTarget;if(o=o.listener,l!==i&&r.isPropagationStopped())break e;o5(r,o,s),i=l}else for(a=0;a<g.length;a++){if(o=g[a],l=o.instance,s=o.currentTarget,o=o.listener,l!==i&&r.isPropagationStopped())break e;o5(r,o,s),i=l}}}if(qh)throw e=Uy,qh=!1,Uy=null,e}function ln(e,t){var n=t[eZ];n===void 0&&(n=t[eZ]=new Set);var g=e+"__bubble";n.has(g)||(Iw(t,e,2,!1),n.add(g))}function cb(e,t,n){var g=0;t&&(g|=4),Iw(n,e,g,t)}var YA="_reactListening"+Math.random().toString(36).slice(2);function bu(e){if(!e[YA]){e[YA]=!0,mR.forEach(function(n){n!=="selectionchange"&&(mx.has(n)||cb(n,!1,e),cb(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[YA]||(t[YA]=!0,cb("selectionchange",!1,t))}}function Iw(e,t,n,g){switch(jR(t)){case 1:var r=wF;break;case 4:r=XF;break;default:r=iG}n=r.bind(null,t,n,e),r=void 0,!zy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),g?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Cb(e,t,n,g,r){var i=g;if(!(t&1)&&!(t&2)&&g!==null)e:for(;;){if(g===null)return;var a=g.tag;if(a===3||a===4){var o=g.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=g.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Tl(o),a===null)return;if(l=a.tag,l===5||l===6){g=i=a;continue e}o=o.parentNode}}g=g.return}JR(function(){var s=i,I=tG(n),c=[];e:{var d=lw.get(e);if(d!==void 0){var u=oG,m=e;switch(e){case"keypress":if(Zh(n)===0)break e;case"keydown":case"keyup":u=jF;break;case"focusin":m="focus",u=ib;break;case"focusout":m="blur",u=ib;break;case"beforeblur":case"afterblur":u=ib;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=PS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=NF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=OF;break;case rw:case iw:case aw:u=xF;break;case ow:u=qF;break;case"scroll":u=JF;break;case"wheel":u=ex;break;case"copy":case"cut":case"paste":u=LF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=_S}var f=(t&4)!==0,y=!f&&e==="scroll",h=f?d!==null?d+"Capture":null:d;f=[];for(var p=s,b;p!==null;){b=p;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,h!==null&&(S=du(p,h),S!=null&&f.push(yu(p,S,b)))),y)break;p=p.return}0<f.length&&(d=new u(d,m,null,n,I),c.push({event:d,listeners:f}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout",d&&n!==Ey&&(m=n.relatedTarget||n.fromElement)&&(Tl(m)||m[qa]))break e;if((u||d)&&(d=I.window===I?I:(d=I.ownerDocument)?d.defaultView||d.parentWindow:window,u?(m=n.relatedTarget||n.toElement,u=s,m=m?Tl(m):null,m!==null&&(y=ys(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(u=null,m=s),u!==m)){if(f=PS,S="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(f=_S,S="onPointerLeave",h="onPointerEnter",p="pointer"),y=u==null?d:SI(u),b=m==null?d:SI(m),d=new f(S,p+"leave",u,n,I),d.target=y,d.relatedTarget=b,S=null,Tl(I)===s&&(f=new f(h,p+"enter",m,n,I),f.target=b,f.relatedTarget=y,S=f),y=S,u&&m)t:{for(f=u,h=m,p=0,b=f;b;b=tI(b))p++;for(b=0,S=h;S;S=tI(S))b++;for(;0<p-b;)f=tI(f),p--;for(;0<b-p;)h=tI(h),b--;for(;p--;){if(f===h||h!==null&&f===h.alternate)break t;f=tI(f),h=tI(h)}f=null}else f=null;u!==null&&l5(c,d,u,f,!1),m!==null&&y!==null&&l5(c,y,m,f,!0)}}e:{if(d=s?SI(s):window,u=d.nodeName&&d.nodeName.toLowerCase(),u==="select"||u==="input"&&d.type==="file")var X=ox;else if(e5(d))if($R)X=cx;else{X=sx;var W=lx}else(u=d.nodeName)&&u.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(X=Ix);if(X&&(X=X(e,s))){qR(c,X,n,I);break e}W&&W(e,d,s),e==="focusout"&&(W=d._wrapperState)&&W.controlled&&d.type==="number"&&Hy(d,"number",d.value)}switch(W=s?SI(s):window,e){case"focusin":(e5(W)||W.contentEditable==="true")&&(GI=W,Qy=s,DC=null);break;case"focusout":DC=Qy=GI=null;break;case"mousedown":Py=!0;break;case"contextmenu":case"mouseup":case"dragend":Py=!1,i5(c,n,I);break;case"selectionchange":if(dx)break;case"keydown":case"keyup":i5(c,n,I)}var V;if(sG)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ZI?OR(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(PR&&n.locale!=="ko"&&(ZI||R!=="onCompositionStart"?R==="onCompositionEnd"&&ZI&&(V=QR()):(jo=I,aG="value"in jo?jo.value:jo.textContent,ZI=!0)),W=gm(s,R),0<W.length&&(R=new OS(R,e,null,n,I),c.push({event:R,listeners:W}),V?R.data=V:(V=_R(n),V!==null&&(R.data=V)))),(V=nx?gx(e,n):rx(e,n))&&(s=gm(s,"onBeforeInput"),0<s.length&&(I=new OS("onBeforeInput","beforeinput",null,n,I),c.push({event:I,listeners:s}),I.data=V))}sw(c,t)})}function yu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gm(e,t){for(var n=t+"Capture",g=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=du(e,n),i!=null&&g.unshift(yu(e,i,r)),i=du(e,t),i!=null&&g.push(yu(e,i,r))),e=e.return}return g}function tI(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function l5(e,t,n,g,r){for(var i=t._reactName,a=[];n!==null&&n!==g;){var o=n,l=o.alternate,s=o.stateNode;if(l!==null&&l===g)break;o.tag===5&&s!==null&&(o=s,r?(l=du(n,i),l!=null&&a.unshift(yu(n,l,o))):r||(l=du(n,i),l!=null&&a.push(yu(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var fx=/\r\n?/g,px=/\u0000|\uFFFD/g;function s5(e){return(typeof e=="string"?e:""+e).replace(fx,`
`).replace(px,"")}function NA(e,t,n){if(t=s5(t),s5(e)!==t&&n)throw Error(Xe(425))}function rm(){}var Oy=null,_y=null;function qy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $y=typeof setTimeout=="function"?setTimeout:void 0,bx=typeof clearTimeout=="function"?clearTimeout:void 0,I5=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof I5<"u"?function(e){return I5.resolve(null).then(e).catch(Zx)}:$y;function Zx(e){setTimeout(function(){throw e})}function ub(e,t){var n=t,g=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(g===0){e.removeChild(r),mu(t);return}g--}else n!=="$"&&n!=="$?"&&n!=="$!"||g++;n=r}while(n);mu(t)}function rl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pc=Math.random().toString(36).slice(2),oa="__reactFiber$"+pc,Zu="__reactProps$"+pc,qa="__reactContainer$"+pc,eZ="__reactEvents$"+pc,Gx="__reactListeners$"+pc,Bx="__reactHandles$"+pc;function Tl(e){var t=e[oa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qa]||n[oa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=c5(e);e!==null;){if(n=e[oa])return n;e=c5(e)}return t}e=n,n=e.parentNode}return null}function ud(e){return e=e[oa]||e[qa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function SI(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function A0(e){return e[Zu]||null}var tZ=[],vI=-1;function yl(e){return{current:e}}function cn(e){0>vI||(e.current=tZ[vI],tZ[vI]=null,vI--)}function an(e,t){vI++,tZ[vI]=e.current,e.current=t}var dl={},Jg=yl(dl),or=yl(!1),Is=dl;function ec(e,t){var n=e.type.contextTypes;if(!n)return dl;var g=e.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===t)return g.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return g&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function lr(e){return e=e.childContextTypes,e!=null}function im(){cn(or),cn(Jg)}function C5(e,t,n){if(Jg.current!==dl)throw Error(Xe(168));an(Jg,t),an(or,n)}function cw(e,t,n){var g=e.stateNode;if(t=t.childContextTypes,typeof g.getChildContext!="function")return n;g=g.getChildContext();for(var r in g)if(!(r in t))throw Error(Xe(108,lF(e)||"Unknown",r));return Gn({},n,g)}function am(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dl,Is=Jg.current,an(Jg,e),an(or,or.current),!0}function u5(e,t,n){var g=e.stateNode;if(!g)throw Error(Xe(169));n?(e=cw(e,t,Is),g.__reactInternalMemoizedMergedChildContext=e,cn(or),cn(Jg),an(Jg,e)):cn(or),an(or,n)}var Ea=null,h0=!1,db=!1;function Cw(e){Ea===null?Ea=[e]:Ea.push(e)}function Sx(e){h0=!0,Cw(e)}function Zl(){if(!db&&Ea!==null){db=!0;var e=0,t=Qt;try{var n=Ea;for(Qt=1;e<n.length;e++){var g=n[e];do g=g(!0);while(g!==null)}Ea=null,h0=!1}catch(r){throw Ea!==null&&(Ea=Ea.slice(e+1)),FR(nG,Zl),r}finally{Qt=t,db=!1}}return null}var WI=[],VI=0,om=null,lm=0,Lr=[],Er=0,cs=null,Ma=1,za="";function El(e,t){WI[VI++]=lm,WI[VI++]=om,om=e,lm=t}function uw(e,t,n){Lr[Er++]=Ma,Lr[Er++]=za,Lr[Er++]=cs,cs=e;var g=Ma;e=za;var r=32-Ni(g)-1;g&=~(1<<r),n+=1;var i=32-Ni(t)+r;if(30<i){var a=r-r%5;i=(g&(1<<a)-1).toString(32),g>>=a,r-=a,Ma=1<<32-Ni(t)+r|n<<r|g,za=i+e}else Ma=1<<i|n<<r|g,za=e}function cG(e){e.return!==null&&(El(e,1),uw(e,1,0))}function CG(e){for(;e===om;)om=WI[--VI],WI[VI]=null,lm=WI[--VI],WI[VI]=null;for(;e===cs;)cs=Lr[--Er],Lr[Er]=null,za=Lr[--Er],Lr[Er]=null,Ma=Lr[--Er],Lr[Er]=null}var Br=null,Zr=null,fn=!1,Vi=null;function dw(e,t){var n=jr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function d5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Br=e,Zr=rl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Br=e,Zr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cs!==null?{id:Ma,overflow:za}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Br=e,Zr=null,!0):!1;default:return!1}}function nZ(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gZ(e){if(fn){var t=Zr;if(t){var n=t;if(!d5(e,t)){if(nZ(e))throw Error(Xe(418));t=rl(n.nextSibling);var g=Br;t&&d5(e,t)?dw(g,n):(e.flags=e.flags&-4097|2,fn=!1,Br=e)}}else{if(nZ(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,fn=!1,Br=e}}}function A5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Br=e}function HA(e){if(e!==Br)return!1;if(!fn)return A5(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qy(e.type,e.memoizedProps)),t&&(t=Zr)){if(nZ(e))throw Aw(),Error(Xe(418));for(;t;)dw(e,t),t=rl(t.nextSibling)}if(A5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zr=rl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zr=null}}else Zr=Br?rl(e.stateNode.nextSibling):null;return!0}function Aw(){for(var e=Zr;e;)e=rl(e.nextSibling)}function tc(){Zr=Br=null,fn=!1}function uG(e){Vi===null?Vi=[e]:Vi.push(e)}var vx=Io.ReactCurrentBatchConfig;function Si(e,t){if(e&&e.defaultProps){t=Gn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var sm=yl(null),Im=null,kI=null,dG=null;function AG(){dG=kI=Im=null}function hG(e){var t=sm.current;cn(sm),e._currentValue=t}function rZ(e,t,n){for(;e!==null;){var g=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,g!==null&&(g.childLanes|=t)):g!==null&&(g.childLanes&t)!==t&&(g.childLanes|=t),e===n)break;e=e.return}}function LI(e,t){Im=e,dG=kI=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rr=!0),e.firstContext=null)}function qr(e){var t=e._currentValue;if(dG!==e)if(e={context:e,memoizedValue:t,next:null},kI===null){if(Im===null)throw Error(Xe(308));kI=e,Im.dependencies={lanes:0,firstContext:e}}else kI=kI.next=e;return t}var Dl=null;function mG(e){Dl===null?Dl=[e]:Dl.push(e)}function hw(e,t,n,g){var r=t.interleaved;return r===null?(n.next=n,mG(t)):(n.next=r.next,r.next=n),t.interleaved=n,$a(e,g)}function $a(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lo=!1;function fG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function il(e,t,n){var g=e.updateQueue;if(g===null)return null;if(g=g.shared,Ht&2){var r=g.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),g.pending=t,$a(e,n)}return r=g.interleaved,r===null?(t.next=t,mG(g)):(t.next=r.next,r.next=t),g.interleaved=t,$a(e,n)}function Gh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var g=t.lanes;g&=e.pendingLanes,n|=g,t.lanes=n,gG(e,n)}}function h5(e,t){var n=e.updateQueue,g=e.alternate;if(g!==null&&(g=g.updateQueue,n===g)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:g.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:g.shared,effects:g.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cm(e,t,n,g){var r=e.updateQueue;Lo=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,s=l.next;l.next=null,a===null?i=s:a.next=s,a=l;var I=e.alternate;I!==null&&(I=I.updateQueue,o=I.lastBaseUpdate,o!==a&&(o===null?I.firstBaseUpdate=s:o.next=s,I.lastBaseUpdate=l))}if(i!==null){var c=r.baseState;a=0,I=s=l=null,o=i;do{var d=o.lane,u=o.eventTime;if((g&d)===d){I!==null&&(I=I.next={eventTime:u,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(d=t,u=n,f.tag){case 1:if(m=f.payload,typeof m=="function"){c=m.call(u,c,d);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=f.payload,d=typeof m=="function"?m.call(u,c,d):m,d==null)break e;c=Gn({},c,d);break e;case 2:Lo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=r.effects,d===null?r.effects=[o]:d.push(o))}else u={eventTime:u,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},I===null?(s=I=u,l=c):I=I.next=u,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(I===null&&(l=c),r.baseState=l,r.firstBaseUpdate=s,r.lastBaseUpdate=I,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);us|=a,e.lanes=a,e.memoizedState=c}}function m5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var g=e[t],r=g.callback;if(r!==null){if(g.callback=null,g=n,typeof r!="function")throw Error(Xe(191,r));r.call(g)}}}var fw=new hR.Component().refs;function iZ(e,t,n,g){t=e.memoizedState,n=n(g,t),n=n==null?t:Gn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var m0={isMounted:function(e){return(e=e._reactInternals)?ys(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var g=Mg(),r=ol(e),i=Qa(g,r);i.payload=t,n!=null&&(i.callback=n),t=il(e,i,r),t!==null&&(Hi(t,e,r,g),Gh(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var g=Mg(),r=ol(e),i=Qa(g,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=il(e,i,r),t!==null&&(Hi(t,e,r,g),Gh(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mg(),g=ol(e),r=Qa(n,g);r.tag=2,t!=null&&(r.callback=t),t=il(e,r,g),t!==null&&(Hi(t,e,g,n),Gh(t,e,g))}};function f5(e,t,n,g,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(g,i,a):t.prototype&&t.prototype.isPureReactComponent?!pu(n,g)||!pu(r,i):!0}function pw(e,t,n){var g=!1,r=dl,i=t.contextType;return typeof i=="object"&&i!==null?i=qr(i):(r=lr(t)?Is:Jg.current,g=t.contextTypes,i=(g=g!=null)?ec(e,r):dl),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=m0,e.stateNode=t,t._reactInternals=e,g&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function p5(e,t,n,g){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,g),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,g),t.state!==e&&m0.enqueueReplaceState(t,t.state,null)}function aZ(e,t,n,g){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=fw,fG(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=qr(i):(i=lr(t)?Is:Jg.current,r.context=ec(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(iZ(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&m0.enqueueReplaceState(r,r.state,null),cm(e,n,r,g),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function hC(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var g=n.stateNode}if(!g)throw Error(Xe(147,e));var r=g,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=r.refs;o===fw&&(o=r.refs={}),a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,e))}return e}function FA(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b5(e){var t=e._init;return t(e._payload)}function bw(e){function t(h,p){if(e){var b=h.deletions;b===null?(h.deletions=[p],h.flags|=16):b.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function g(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function r(h,p){return h=ll(h,p),h.index=0,h.sibling=null,h}function i(h,p,b){return h.index=b,e?(b=h.alternate,b!==null?(b=b.index,b<p?(h.flags|=2,p):b):(h.flags|=2,p)):(h.flags|=1048576,p)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function o(h,p,b,S){return p===null||p.tag!==6?(p=yb(b,h.mode,S),p.return=h,p):(p=r(p,b),p.return=h,p)}function l(h,p,b,S){var X=b.type;return X===yI?I(h,p,b.props.children,S,b.key):p!==null&&(p.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ko&&b5(X)===p.type)?(S=r(p,b.props),S.ref=hC(h,p,b),S.return=h,S):(S=kh(b.type,b.key,b.props,null,h.mode,S),S.ref=hC(h,p,b),S.return=h,S)}function s(h,p,b,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=Zb(b,h.mode,S),p.return=h,p):(p=r(p,b.children||[]),p.return=h,p)}function I(h,p,b,S,X){return p===null||p.tag!==7?(p=ns(b,h.mode,S,X),p.return=h,p):(p=r(p,b),p.return=h,p)}function c(h,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=yb(""+p,h.mode,b),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case vA:return b=kh(p.type,p.key,p.props,null,h.mode,b),b.ref=hC(h,null,p),b.return=h,b;case bI:return p=Zb(p,h.mode,b),p.return=h,p;case Ko:var S=p._init;return c(h,S(p._payload),b)}if(NC(p)||cC(p))return p=ns(p,h.mode,b,null),p.return=h,p;FA(h,p)}return null}function d(h,p,b,S){var X=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return X!==null?null:o(h,p,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vA:return b.key===X?l(h,p,b,S):null;case bI:return b.key===X?s(h,p,b,S):null;case Ko:return X=b._init,d(h,p,X(b._payload),S)}if(NC(b)||cC(b))return X!==null?null:I(h,p,b,S,null);FA(h,b)}return null}function u(h,p,b,S,X){if(typeof S=="string"&&S!==""||typeof S=="number")return h=h.get(b)||null,o(p,h,""+S,X);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vA:return h=h.get(S.key===null?b:S.key)||null,l(p,h,S,X);case bI:return h=h.get(S.key===null?b:S.key)||null,s(p,h,S,X);case Ko:var W=S._init;return u(h,p,b,W(S._payload),X)}if(NC(S)||cC(S))return h=h.get(b)||null,I(p,h,S,X,null);FA(p,S)}return null}function m(h,p,b,S){for(var X=null,W=null,V=p,R=p=0,z=null;V!==null&&R<b.length;R++){V.index>R?(z=V,V=null):z=V.sibling;var L=d(h,V,b[R],S);if(L===null){V===null&&(V=z);break}e&&V&&L.alternate===null&&t(h,V),p=i(L,p,R),W===null?X=L:W.sibling=L,W=L,V=z}if(R===b.length)return n(h,V),fn&&El(h,R),X;if(V===null){for(;R<b.length;R++)V=c(h,b[R],S),V!==null&&(p=i(V,p,R),W===null?X=V:W.sibling=V,W=V);return fn&&El(h,R),X}for(V=g(h,V);R<b.length;R++)z=u(V,h,R,b[R],S),z!==null&&(e&&z.alternate!==null&&V.delete(z.key===null?R:z.key),p=i(z,p,R),W===null?X=z:W.sibling=z,W=z);return e&&V.forEach(function(k){return t(h,k)}),fn&&El(h,R),X}function f(h,p,b,S){var X=cC(b);if(typeof X!="function")throw Error(Xe(150));if(b=X.call(b),b==null)throw Error(Xe(151));for(var W=X=null,V=p,R=p=0,z=null,L=b.next();V!==null&&!L.done;R++,L=b.next()){V.index>R?(z=V,V=null):z=V.sibling;var k=d(h,V,L.value,S);if(k===null){V===null&&(V=z);break}e&&V&&k.alternate===null&&t(h,V),p=i(k,p,R),W===null?X=k:W.sibling=k,W=k,V=z}if(L.done)return n(h,V),fn&&El(h,R),X;if(V===null){for(;!L.done;R++,L=b.next())L=c(h,L.value,S),L!==null&&(p=i(L,p,R),W===null?X=L:W.sibling=L,W=L);return fn&&El(h,R),X}for(V=g(h,V);!L.done;R++,L=b.next())L=u(V,h,R,L.value,S),L!==null&&(e&&L.alternate!==null&&V.delete(L.key===null?R:L.key),p=i(L,p,R),W===null?X=L:W.sibling=L,W=L);return e&&V.forEach(function(v){return t(h,v)}),fn&&El(h,R),X}function y(h,p,b,S){if(typeof b=="object"&&b!==null&&b.type===yI&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case vA:e:{for(var X=b.key,W=p;W!==null;){if(W.key===X){if(X=b.type,X===yI){if(W.tag===7){n(h,W.sibling),p=r(W,b.props.children),p.return=h,h=p;break e}}else if(W.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ko&&b5(X)===W.type){n(h,W.sibling),p=r(W,b.props),p.ref=hC(h,W,b),p.return=h,h=p;break e}n(h,W);break}else t(h,W);W=W.sibling}b.type===yI?(p=ns(b.props.children,h.mode,S,b.key),p.return=h,h=p):(S=kh(b.type,b.key,b.props,null,h.mode,S),S.ref=hC(h,p,b),S.return=h,h=S)}return a(h);case bI:e:{for(W=b.key;p!==null;){if(p.key===W)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){n(h,p.sibling),p=r(p,b.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Zb(b,h.mode,S),p.return=h,h=p}return a(h);case Ko:return W=b._init,y(h,p,W(b._payload),S)}if(NC(b))return m(h,p,b,S);if(cC(b))return f(h,p,b,S);FA(h,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(n(h,p.sibling),p=r(p,b),p.return=h,h=p):(n(h,p),p=yb(b,h.mode,S),p.return=h,h=p),a(h)):n(h,p)}return y}var nc=bw(!0),yw=bw(!1),dd={},ua=yl(dd),Gu=yl(dd),Bu=yl(dd);function jl(e){if(e===dd)throw Error(Xe(174));return e}function pG(e,t){switch(an(Bu,t),an(Gu,e),an(ua,dd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xy(t,e)}cn(ua),an(ua,t)}function gc(){cn(ua),cn(Gu),cn(Bu)}function Zw(e){jl(Bu.current);var t=jl(ua.current),n=xy(t,e.type);t!==n&&(an(Gu,e),an(ua,n))}function bG(e){Gu.current===e&&(cn(ua),cn(Gu))}var bn=yl(0);function Cm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ab=[];function yG(){for(var e=0;e<Ab.length;e++)Ab[e]._workInProgressVersionPrimary=null;Ab.length=0}var Bh=Io.ReactCurrentDispatcher,hb=Io.ReactCurrentBatchConfig,Cs=0,yn=null,$n=null,lg=null,um=!1,jC=!1,Su=0,Wx=0;function Bg(){throw Error(Xe(321))}function ZG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xi(e[n],t[n]))return!1;return!0}function GG(e,t,n,g,r,i){if(Cs=i,yn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bh.current=e===null||e.memoizedState===null?wx:Xx,e=n(g,r),jC){i=0;do{if(jC=!1,Su=0,25<=i)throw Error(Xe(301));i+=1,lg=$n=null,t.updateQueue=null,Bh.current=Jx,e=n(g,r)}while(jC)}if(Bh.current=dm,t=$n!==null&&$n.next!==null,Cs=0,lg=$n=yn=null,um=!1,t)throw Error(Xe(300));return e}function BG(){var e=Su!==0;return Su=0,e}function ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lg===null?yn.memoizedState=lg=e:lg=lg.next=e,lg}function $r(){if($n===null){var e=yn.alternate;e=e!==null?e.memoizedState:null}else e=$n.next;var t=lg===null?yn.memoizedState:lg.next;if(t!==null)lg=t,$n=e;else{if(e===null)throw Error(Xe(310));$n=e,e={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},lg===null?yn.memoizedState=lg=e:lg=lg.next=e}return lg}function vu(e,t){return typeof t=="function"?t(e):t}function mb(e){var t=$r(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var g=$n,r=g.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}g.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,g=g.baseState;var o=a=null,l=null,s=i;do{var I=s.lane;if((Cs&I)===I)l!==null&&(l=l.next={lane:0,action:s.action,hasEagerState:s.hasEagerState,eagerState:s.eagerState,next:null}),g=s.hasEagerState?s.eagerState:e(g,s.action);else{var c={lane:I,action:s.action,hasEagerState:s.hasEagerState,eagerState:s.eagerState,next:null};l===null?(o=l=c,a=g):l=l.next=c,yn.lanes|=I,us|=I}s=s.next}while(s!==null&&s!==i);l===null?a=g:l.next=o,xi(g,t.memoizedState)||(rr=!0),t.memoizedState=g,t.baseState=a,t.baseQueue=l,n.lastRenderedState=g}if(e=n.interleaved,e!==null){r=e;do i=r.lane,yn.lanes|=i,us|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fb(e){var t=$r(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var g=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);xi(i,t.memoizedState)||(rr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,g]}function Gw(){}function Bw(e,t){var n=yn,g=$r(),r=t(),i=!xi(g.memoizedState,r);if(i&&(g.memoizedState=r,rr=!0),g=g.queue,SG(Ww.bind(null,n,g,e),[e]),g.getSnapshot!==t||i||lg!==null&&lg.memoizedState.tag&1){if(n.flags|=2048,Wu(9,vw.bind(null,n,g,r,t),void 0,null),sg===null)throw Error(Xe(349));Cs&30||Sw(n,t,r)}return r}function Sw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vw(e,t,n,g){t.value=n,t.getSnapshot=g,Vw(t)&&kw(e)}function Ww(e,t,n){return n(function(){Vw(t)&&kw(e)})}function Vw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xi(e,n)}catch{return!0}}function kw(e){var t=$a(e,1);t!==null&&Hi(t,e,1,-1)}function y5(e){var t=ta();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:e},t.queue=e,e=e.dispatch=Rx.bind(null,yn,e),[t.memoizedState,e]}function Wu(e,t,n,g){return e={tag:e,create:t,destroy:n,deps:g,next:null},t=yn.updateQueue,t===null?(t={lastEffect:null,stores:null},yn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(g=n.next,n.next=e,e.next=g,t.lastEffect=e)),e}function Rw(){return $r().memoizedState}function Sh(e,t,n,g){var r=ta();yn.flags|=e,r.memoizedState=Wu(1|t,n,void 0,g===void 0?null:g)}function f0(e,t,n,g){var r=$r();g=g===void 0?null:g;var i=void 0;if($n!==null){var a=$n.memoizedState;if(i=a.destroy,g!==null&&ZG(g,a.deps)){r.memoizedState=Wu(t,n,i,g);return}}yn.flags|=e,r.memoizedState=Wu(1|t,n,i,g)}function Z5(e,t){return Sh(8390656,8,e,t)}function SG(e,t){return f0(2048,8,e,t)}function ww(e,t){return f0(4,2,e,t)}function Xw(e,t){return f0(4,4,e,t)}function Jw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yw(e,t,n){return n=n!=null?n.concat([e]):null,f0(4,4,Jw.bind(null,t,e),n)}function vG(){}function Nw(e,t){var n=$r();t=t===void 0?null:t;var g=n.memoizedState;return g!==null&&t!==null&&ZG(t,g[1])?g[0]:(n.memoizedState=[e,t],e)}function Hw(e,t){var n=$r();t=t===void 0?null:t;var g=n.memoizedState;return g!==null&&t!==null&&ZG(t,g[1])?g[0]:(e=e(),n.memoizedState=[e,t],e)}function Fw(e,t,n){return Cs&21?(xi(n,t)||(n=LR(),yn.lanes|=n,us|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rr=!0),e.memoizedState=n)}function Vx(e,t){var n=Qt;Qt=n!==0&&4>n?n:4,e(!0);var g=hb.transition;hb.transition={};try{e(!1),t()}finally{Qt=n,hb.transition=g}}function xw(){return $r().memoizedState}function kx(e,t,n){var g=ol(e);if(n={lane:g,action:n,hasEagerState:!1,eagerState:null,next:null},Kw(e))Lw(t,n);else if(n=hw(e,t,n,g),n!==null){var r=Mg();Hi(n,e,g,r),Ew(n,t,g)}}function Rx(e,t,n){var g=ol(e),r={lane:g,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kw(e))Lw(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,xi(o,a)){var l=t.interleaved;l===null?(r.next=r,mG(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=hw(e,t,r,g),n!==null&&(r=Mg(),Hi(n,e,g,r),Ew(n,t,g))}}function Kw(e){var t=e.alternate;return e===yn||t!==null&&t===yn}function Lw(e,t){jC=um=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ew(e,t,n){if(n&4194240){var g=t.lanes;g&=e.pendingLanes,n|=g,t.lanes=n,gG(e,n)}}var dm={readContext:qr,useCallback:Bg,useContext:Bg,useEffect:Bg,useImperativeHandle:Bg,useInsertionEffect:Bg,useLayoutEffect:Bg,useMemo:Bg,useReducer:Bg,useRef:Bg,useState:Bg,useDebugValue:Bg,useDeferredValue:Bg,useTransition:Bg,useMutableSource:Bg,useSyncExternalStore:Bg,useId:Bg,unstable_isNewReconciler:!1},wx={readContext:qr,useCallback:function(e,t){return ta().memoizedState=[e,t===void 0?null:t],e},useContext:qr,useEffect:Z5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Sh(4194308,4,Jw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sh(4,2,e,t)},useMemo:function(e,t){var n=ta();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var g=ta();return t=n!==void 0?n(t):t,g.memoizedState=g.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},g.queue=e,e=e.dispatch=kx.bind(null,yn,e),[g.memoizedState,e]},useRef:function(e){var t=ta();return e={current:e},t.memoizedState=e},useState:y5,useDebugValue:vG,useDeferredValue:function(e){return ta().memoizedState=e},useTransition:function(){var e=y5(!1),t=e[0];return e=Vx.bind(null,e[1]),ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var g=yn,r=ta();if(fn){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=t(),sg===null)throw Error(Xe(349));Cs&30||Sw(g,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Z5(Ww.bind(null,g,i,e),[e]),g.flags|=2048,Wu(9,vw.bind(null,g,i,n,t),void 0,null),n},useId:function(){var e=ta(),t=sg.identifierPrefix;if(fn){var n=za,g=Ma;n=(g&~(1<<32-Ni(g)-1)).toString(32)+n,t=":"+t+"R"+n,n=Su++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Wx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xx={readContext:qr,useCallback:Nw,useContext:qr,useEffect:SG,useImperativeHandle:Yw,useInsertionEffect:ww,useLayoutEffect:Xw,useMemo:Hw,useReducer:mb,useRef:Rw,useState:function(){return mb(vu)},useDebugValue:vG,useDeferredValue:function(e){var t=$r();return Fw(t,$n.memoizedState,e)},useTransition:function(){var e=mb(vu)[0],t=$r().memoizedState;return[e,t]},useMutableSource:Gw,useSyncExternalStore:Bw,useId:xw,unstable_isNewReconciler:!1},Jx={readContext:qr,useCallback:Nw,useContext:qr,useEffect:SG,useImperativeHandle:Yw,useInsertionEffect:ww,useLayoutEffect:Xw,useMemo:Hw,useReducer:fb,useRef:Rw,useState:function(){return fb(vu)},useDebugValue:vG,useDeferredValue:function(e){var t=$r();return $n===null?t.memoizedState=e:Fw(t,$n.memoizedState,e)},useTransition:function(){var e=fb(vu)[0],t=$r().memoizedState;return[e,t]},useMutableSource:Gw,useSyncExternalStore:Bw,useId:xw,unstable_isNewReconciler:!1};function rc(e,t){try{var n="",g=t;do n+=oF(g),g=g.return;while(g);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function pb(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function oZ(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yx=typeof WeakMap=="function"?WeakMap:Map;function Mw(e,t,n){n=Qa(-1,n),n.tag=3,n.payload={element:null};var g=t.value;return n.callback=function(){hm||(hm=!0,mZ=g),oZ(e,t)},n}function zw(e,t,n){n=Qa(-1,n),n.tag=3;var g=e.type.getDerivedStateFromError;if(typeof g=="function"){var r=t.value;n.payload=function(){return g(r)},n.callback=function(){oZ(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){oZ(e,t),typeof g!="function"&&(al===null?al=new Set([this]):al.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function G5(e,t,n){var g=e.pingCache;if(g===null){g=e.pingCache=new Yx;var r=new Set;g.set(t,r)}else r=g.get(t),r===void 0&&(r=new Set,g.set(t,r));r.has(n)||(r.add(n),e=Qx.bind(null,e,t,n),t.then(e,e))}function B5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S5(e,t,n,g,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qa(-1,1),t.tag=2,il(n,t,1))),n.lanes|=1),e)}var Nx=Io.ReactCurrentOwner,rr=!1;function Kg(e,t,n,g){t.child=e===null?yw(t,null,n,g):nc(t,e.child,n,g)}function v5(e,t,n,g,r){n=n.render;var i=t.ref;return LI(t,r),g=GG(e,t,n,g,i,r),n=BG(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,eo(e,t,r)):(fn&&n&&cG(t),t.flags|=1,Kg(e,t,g,r),t.child)}function W5(e,t,n,g,r){if(e===null){var i=n.type;return typeof i=="function"&&!YG(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Uw(e,t,i,g,r)):(e=kh(n.type,null,g,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:pu,n(a,g)&&e.ref===t.ref)return eo(e,t,r)}return t.flags|=1,e=ll(i,g),e.ref=t.ref,e.return=t,t.child=e}function Uw(e,t,n,g,r){if(e!==null){var i=e.memoizedProps;if(pu(i,g)&&e.ref===t.ref)if(rr=!1,t.pendingProps=g=i,(e.lanes&r)!==0)e.flags&131072&&(rr=!0);else return t.lanes=e.lanes,eo(e,t,r)}return lZ(e,t,n,g,r)}function Tw(e,t,n){var g=t.pendingProps,r=g.children,i=e!==null?e.memoizedState:null;if(g.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(wI,br),br|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(wI,br),br|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=i!==null?i.baseLanes:n,an(wI,br),br|=g}else i!==null?(g=i.baseLanes|n,t.memoizedState=null):g=n,an(wI,br),br|=g;return Kg(e,t,r,n),t.child}function Dw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lZ(e,t,n,g,r){var i=lr(n)?Is:Jg.current;return i=ec(t,i),LI(t,r),n=GG(e,t,n,g,i,r),g=BG(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,eo(e,t,r)):(fn&&g&&cG(t),t.flags|=1,Kg(e,t,n,r),t.child)}function V5(e,t,n,g,r){if(lr(n)){var i=!0;am(t)}else i=!1;if(LI(t,r),t.stateNode===null)vh(e,t),pw(t,n,g),aZ(t,n,g,r),g=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,s=n.contextType;typeof s=="object"&&s!==null?s=qr(s):(s=lr(n)?Is:Jg.current,s=ec(t,s));var I=n.getDerivedStateFromProps,c=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==g||l!==s)&&p5(t,a,g,s),Lo=!1;var d=t.memoizedState;a.state=d,cm(t,g,a,r),l=t.memoizedState,o!==g||d!==l||or.current||Lo?(typeof I=="function"&&(iZ(t,n,I,g),l=t.memoizedState),(o=Lo||f5(t,n,o,g,d,l,s))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=g,t.memoizedState=l),a.props=g,a.state=l,a.context=s,g=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),g=!1)}else{a=t.stateNode,mw(e,t),o=t.memoizedProps,s=t.type===t.elementType?o:Si(t.type,o),a.props=s,c=t.pendingProps,d=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=lr(n)?Is:Jg.current,l=ec(t,l));var u=n.getDerivedStateFromProps;(I=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||d!==l)&&p5(t,a,g,l),Lo=!1,d=t.memoizedState,a.state=d,cm(t,g,a,r);var m=t.memoizedState;o!==c||d!==m||or.current||Lo?(typeof u=="function"&&(iZ(t,n,u,g),m=t.memoizedState),(s=Lo||f5(t,n,s,g,d,m,l)||!1)?(I||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(g,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(g,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=g,t.memoizedState=m),a.props=g,a.state=m,a.context=l,g=s):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),g=!1)}return sZ(e,t,n,g,i,r)}function sZ(e,t,n,g,r,i){Dw(e,t);var a=(t.flags&128)!==0;if(!g&&!a)return r&&u5(t,n,!1),eo(e,t,i);g=t.stateNode,Nx.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:g.render();return t.flags|=1,e!==null&&a?(t.child=nc(t,e.child,null,i),t.child=nc(t,null,o,i)):Kg(e,t,o,i),t.memoizedState=g.state,r&&u5(t,n,!0),t.child}function jw(e){var t=e.stateNode;t.pendingContext?C5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&C5(e,t.context,!1),pG(e,t.containerInfo)}function k5(e,t,n,g,r){return tc(),uG(r),t.flags|=256,Kg(e,t,n,g),t.child}var IZ={dehydrated:null,treeContext:null,retryLane:0};function cZ(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qw(e,t,n){var g=t.pendingProps,r=bn.current,i=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(r&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),an(bn,r&1),e===null)return gZ(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=g.children,e=g.fallback,i?(g=t.mode,i=t.child,a={mode:"hidden",children:a},!(g&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=y0(a,g,0,null),e=ns(e,g,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cZ(n),t.memoizedState=IZ,e):WG(t,a));if(r=e.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Hx(e,t,a,g,o,r,n);if(i){i=g.fallback,a=t.mode,r=e.child,o=r.sibling;var l={mode:"hidden",children:g.children};return!(a&1)&&t.child!==r?(g=t.child,g.childLanes=0,g.pendingProps=l,t.deletions=null):(g=ll(r,l),g.subtreeFlags=r.subtreeFlags&14680064),o!==null?i=ll(o,i):(i=ns(i,a,n,null),i.flags|=2),i.return=t,g.return=t,g.sibling=i,t.child=g,g=i,i=t.child,a=e.child.memoizedState,a=a===null?cZ(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=IZ,g}return i=e.child,e=i.sibling,g=ll(i,{mode:"visible",children:g.children}),!(t.mode&1)&&(g.lanes=n),g.return=t,g.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=g,t.memoizedState=null,g}function WG(e,t){return t=y0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xA(e,t,n,g){return g!==null&&uG(g),nc(t,e.child,null,n),e=WG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hx(e,t,n,g,r,i,a){if(n)return t.flags&256?(t.flags&=-257,g=pb(Error(Xe(422))),xA(e,t,a,g)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=g.fallback,r=t.mode,g=y0({mode:"visible",children:g.children},r,0,null),i=ns(i,r,a,null),i.flags|=2,g.return=t,i.return=t,g.sibling=i,t.child=g,t.mode&1&&nc(t,e.child,null,a),t.child.memoizedState=cZ(a),t.memoizedState=IZ,i);if(!(t.mode&1))return xA(e,t,a,null);if(r.data==="$!"){if(g=r.nextSibling&&r.nextSibling.dataset,g)var o=g.dgst;return g=o,i=Error(Xe(419)),g=pb(i,g,void 0),xA(e,t,a,g)}if(o=(a&e.childLanes)!==0,rr||o){if(g=sg,g!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(g.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,$a(e,r),Hi(g,e,r,-1))}return JG(),g=pb(Error(Xe(421))),xA(e,t,a,g)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Px.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,Zr=rl(r.nextSibling),Br=t,fn=!0,Vi=null,e!==null&&(Lr[Er++]=Ma,Lr[Er++]=za,Lr[Er++]=cs,Ma=e.id,za=e.overflow,cs=t),t=WG(t,g.children),t.flags|=4096,t)}function R5(e,t,n){e.lanes|=t;var g=e.alternate;g!==null&&(g.lanes|=t),rZ(e.return,t,n)}function bb(e,t,n,g,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:g,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=g,i.tail=n,i.tailMode=r)}function Pw(e,t,n){var g=t.pendingProps,r=g.revealOrder,i=g.tail;if(Kg(e,t,g.children,n),g=bn.current,g&2)g=g&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&R5(e,n,t);else if(e.tag===19)R5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}g&=1}if(an(bn,g),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Cm(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),bb(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Cm(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}bb(t,!0,n,null,i);break;case"together":bb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function eo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),us|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,n=ll(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ll(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fx(e,t,n){switch(t.tag){case 3:jw(t),tc();break;case 5:Zw(t);break;case 1:lr(t.type)&&am(t);break;case 4:pG(t,t.stateNode.containerInfo);break;case 10:var g=t.type._context,r=t.memoizedProps.value;an(sm,g._currentValue),g._currentValue=r;break;case 13:if(g=t.memoizedState,g!==null)return g.dehydrated!==null?(an(bn,bn.current&1),t.flags|=128,null):n&t.child.childLanes?Qw(e,t,n):(an(bn,bn.current&1),e=eo(e,t,n),e!==null?e.sibling:null);an(bn,bn.current&1);break;case 19:if(g=(n&t.childLanes)!==0,e.flags&128){if(g)return Pw(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),an(bn,bn.current),g)break;return null;case 22:case 23:return t.lanes=0,Tw(e,t,n)}return eo(e,t,n)}var Ow,CZ,_w,qw;Ow=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};CZ=function(){};_w=function(e,t,n,g){var r=e.memoizedProps;if(r!==g){e=t.stateNode,jl(ua.current);var i=null;switch(n){case"input":r=Yy(e,r),g=Yy(e,g),i=[];break;case"select":r=Gn({},r,{value:void 0}),g=Gn({},g,{value:void 0}),i=[];break;case"textarea":r=Fy(e,r),g=Fy(e,g),i=[];break;default:typeof r.onClick!="function"&&typeof g.onClick=="function"&&(e.onclick=rm)}Ky(n,g);var a;n=null;for(s in r)if(!g.hasOwnProperty(s)&&r.hasOwnProperty(s)&&r[s]!=null)if(s==="style"){var o=r[s];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else s!=="dangerouslySetInnerHTML"&&s!=="children"&&s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cu.hasOwnProperty(s)?i||(i=[]):(i=i||[]).push(s,null));for(s in g){var l=g[s];if(o=r!=null?r[s]:void 0,g.hasOwnProperty(s)&&l!==o&&(l!=null||o!=null))if(s==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(s,n)),n=l;else s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(s,l)):s==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(s,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&(Cu.hasOwnProperty(s)?(l!=null&&s==="onScroll"&&ln("scroll",e),i||o===l||(i=[])):(i=i||[]).push(s,l))}n&&(i=i||[]).push("style",n);var s=i;(t.updateQueue=s)&&(t.flags|=4)}};qw=function(e,t,n,g){n!==g&&(t.flags|=4)};function mC(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var g=null;n!==null;)n.alternate!==null&&(g=n),n=n.sibling;g===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:g.sibling=null}}function Sg(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,g=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,g|=r.subtreeFlags&14680064,g|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,g|=r.subtreeFlags,g|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=g,e.childLanes=n,t}function xx(e,t,n){var g=t.pendingProps;switch(CG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sg(t),null;case 1:return lr(t.type)&&im(),Sg(t),null;case 3:return g=t.stateNode,gc(),cn(or),cn(Jg),yG(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(e===null||e.child===null)&&(HA(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vi!==null&&(bZ(Vi),Vi=null))),CZ(e,t),Sg(t),null;case 5:bG(t);var r=jl(Bu.current);if(n=t.type,e!==null&&t.stateNode!=null)_w(e,t,n,g,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!g){if(t.stateNode===null)throw Error(Xe(166));return Sg(t),null}if(e=jl(ua.current),HA(t)){g=t.stateNode,n=t.type;var i=t.memoizedProps;switch(g[oa]=t,g[Zu]=i,e=(t.mode&1)!==0,n){case"dialog":ln("cancel",g),ln("close",g);break;case"iframe":case"object":case"embed":ln("load",g);break;case"video":case"audio":for(r=0;r<FC.length;r++)ln(FC[r],g);break;case"source":ln("error",g);break;case"img":case"image":case"link":ln("error",g),ln("load",g);break;case"details":ln("toggle",g);break;case"input":KS(g,i),ln("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!i.multiple},ln("invalid",g);break;case"textarea":ES(g,i),ln("invalid",g)}Ky(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?g.textContent!==o&&(i.suppressHydrationWarning!==!0&&NA(g.textContent,o,e),r=["children",o]):typeof o=="number"&&g.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&NA(g.textContent,o,e),r=["children",""+o]):Cu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ln("scroll",g)}switch(n){case"input":WA(g),LS(g,i,!0);break;case"textarea":WA(g),MS(g);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(g.onclick=rm)}g=r,t.updateQueue=g,g!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof g.is=="string"?e=a.createElement(n,{is:g.is}):(e=a.createElement(n),n==="select"&&(a=e,g.multiple?a.multiple=!0:g.size&&(a.size=g.size))):e=a.createElementNS(e,n),e[oa]=t,e[Zu]=g,Ow(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ly(n,g),n){case"dialog":ln("cancel",e),ln("close",e),r=g;break;case"iframe":case"object":case"embed":ln("load",e),r=g;break;case"video":case"audio":for(r=0;r<FC.length;r++)ln(FC[r],e);r=g;break;case"source":ln("error",e),r=g;break;case"img":case"image":case"link":ln("error",e),ln("load",e),r=g;break;case"details":ln("toggle",e),r=g;break;case"input":KS(e,g),r=Yy(e,g),ln("invalid",e);break;case"option":r=g;break;case"select":e._wrapperState={wasMultiple:!!g.multiple},r=Gn({},g,{value:void 0}),ln("invalid",e);break;case"textarea":ES(e,g),r=Fy(e,g),ln("invalid",e);break;default:r=g}Ky(n,r),o=r;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?VR(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vR(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uu(e,l):typeof l=="number"&&uu(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ln("scroll",e):l!=null&&_2(e,i,l,a))}switch(n){case"input":WA(e),LS(e,g,!1);break;case"textarea":WA(e),MS(e);break;case"option":g.value!=null&&e.setAttribute("value",""+ul(g.value));break;case"select":e.multiple=!!g.multiple,i=g.value,i!=null?HI(e,!!g.multiple,i,!1):g.defaultValue!=null&&HI(e,!!g.multiple,g.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=rm)}switch(n){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sg(t),null;case 6:if(e&&t.stateNode!=null)qw(e,t,e.memoizedProps,g);else{if(typeof g!="string"&&t.stateNode===null)throw Error(Xe(166));if(n=jl(Bu.current),jl(ua.current),HA(t)){if(g=t.stateNode,n=t.memoizedProps,g[oa]=t,(i=g.nodeValue!==n)&&(e=Br,e!==null))switch(e.tag){case 3:NA(g.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&NA(g.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else g=(n.nodeType===9?n:n.ownerDocument).createTextNode(g),g[oa]=t,t.stateNode=g}return Sg(t),null;case 13:if(cn(bn),g=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&Zr!==null&&t.mode&1&&!(t.flags&128))Aw(),tc(),t.flags|=98560,i=!1;else if(i=HA(t),g!==null&&g.dehydrated!==null){if(e===null){if(!i)throw Error(Xe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));i[oa]=t}else tc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sg(t),i=!1}else Vi!==null&&(bZ(Vi),Vi=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(g=g!==null,g!==(e!==null&&e.memoizedState!==null)&&g&&(t.child.flags|=8192,t.mode&1&&(e===null||bn.current&1?tg===0&&(tg=3):JG())),t.updateQueue!==null&&(t.flags|=4),Sg(t),null);case 4:return gc(),CZ(e,t),e===null&&bu(t.stateNode.containerInfo),Sg(t),null;case 10:return hG(t.type._context),Sg(t),null;case 17:return lr(t.type)&&im(),Sg(t),null;case 19:if(cn(bn),i=t.memoizedState,i===null)return Sg(t),null;if(g=(t.flags&128)!==0,a=i.rendering,a===null)if(g)mC(i,!1);else{if(tg!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cm(e),a!==null){for(t.flags|=128,mC(i,!1),g=a.updateQueue,g!==null&&(t.updateQueue=g,t.flags|=4),t.subtreeFlags=0,g=n,n=t.child;n!==null;)i=n,e=g,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(bn,bn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fn()>ic&&(t.flags|=128,g=!0,mC(i,!1),t.lanes=4194304)}else{if(!g)if(e=Cm(a),e!==null){if(t.flags|=128,g=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mC(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!fn)return Sg(t),null}else 2*Fn()-i.renderingStartTime>ic&&n!==1073741824&&(t.flags|=128,g=!0,mC(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fn(),t.sibling=null,n=bn.current,an(bn,g?n&1|2:n&1),t):(Sg(t),null);case 22:case 23:return XG(),g=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==g&&(t.flags|=8192),g&&t.mode&1?br&1073741824&&(Sg(t),t.subtreeFlags&6&&(t.flags|=8192)):Sg(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function Kx(e,t){switch(CG(t),t.tag){case 1:return lr(t.type)&&im(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gc(),cn(or),cn(Jg),yG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bG(t),null;case 13:if(cn(bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));tc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(bn),null;case 4:return gc(),null;case 10:return hG(t.type._context),null;case 22:case 23:return XG(),null;case 24:return null;default:return null}}var KA=!1,wg=!1,Lx=typeof WeakSet=="function"?WeakSet:Set,_e=null;function RI(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(g){wn(e,t,g)}else n.current=null}function uZ(e,t,n){try{n()}catch(g){wn(e,t,g)}}var w5=!1;function Ex(e,t){if(Oy=tm,e=nw(),IG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var g=n.getSelection&&n.getSelection();if(g&&g.rangeCount!==0){n=g.anchorNode;var r=g.anchorOffset,i=g.focusNode;g=g.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,s=0,I=0,c=e,d=null;t:for(;;){for(var u;c!==n||r!==0&&c.nodeType!==3||(o=a+r),c!==i||g!==0&&c.nodeType!==3||(l=a+g),c.nodeType===3&&(a+=c.nodeValue.length),(u=c.firstChild)!==null;)d=c,c=u;for(;;){if(c===e)break t;if(d===n&&++s===r&&(o=a),d===i&&++I===g&&(l=a),(u=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=u}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_y={focusedElem:e,selectionRange:n},tm=!1,_e=t;_e!==null;)if(t=_e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_e=e;else for(;_e!==null;){t=_e;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var f=m.memoizedProps,y=m.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?f:Si(t.type,f),y);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(S){wn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,_e=e;break}_e=t.return}return m=w5,w5=!1,m}function QC(e,t,n){var g=t.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var r=g=g.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&uZ(t,n,i)}r=r.next}while(r!==g)}}function p0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var g=n.create;n.destroy=g()}n=n.next}while(n!==t)}}function dZ(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $w(e){var t=e.alternate;t!==null&&(e.alternate=null,$w(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oa],delete t[Zu],delete t[eZ],delete t[Gx],delete t[Bx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eX(e){return e.tag===5||e.tag===3||e.tag===4}function X5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eX(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function AZ(e,t,n){var g=e.tag;if(g===5||g===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rm));else if(g!==4&&(e=e.child,e!==null))for(AZ(e,t,n),e=e.sibling;e!==null;)AZ(e,t,n),e=e.sibling}function hZ(e,t,n){var g=e.tag;if(g===5||g===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(g!==4&&(e=e.child,e!==null))for(hZ(e,t,n),e=e.sibling;e!==null;)hZ(e,t,n),e=e.sibling}var fg=null,vi=!1;function Xo(e,t,n){for(n=n.child;n!==null;)tX(e,t,n),n=n.sibling}function tX(e,t,n){if(Ca&&typeof Ca.onCommitFiberUnmount=="function")try{Ca.onCommitFiberUnmount(c0,n)}catch{}switch(n.tag){case 5:wg||RI(n,t);case 6:var g=fg,r=vi;fg=null,Xo(e,t,n),fg=g,vi=r,fg!==null&&(vi?(e=fg,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fg.removeChild(n.stateNode));break;case 18:fg!==null&&(vi?(e=fg,n=n.stateNode,e.nodeType===8?ub(e.parentNode,n):e.nodeType===1&&ub(e,n),mu(e)):ub(fg,n.stateNode));break;case 4:g=fg,r=vi,fg=n.stateNode.containerInfo,vi=!0,Xo(e,t,n),fg=g,vi=r;break;case 0:case 11:case 14:case 15:if(!wg&&(g=n.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){r=g=g.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&uZ(n,t,a),r=r.next}while(r!==g)}Xo(e,t,n);break;case 1:if(!wg&&(RI(n,t),g=n.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=n.memoizedProps,g.state=n.memoizedState,g.componentWillUnmount()}catch(o){wn(n,t,o)}Xo(e,t,n);break;case 21:Xo(e,t,n);break;case 22:n.mode&1?(wg=(g=wg)||n.memoizedState!==null,Xo(e,t,n),wg=g):Xo(e,t,n);break;default:Xo(e,t,n)}}function J5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lx),t.forEach(function(g){var r=Ox.bind(null,e,g);n.has(g)||(n.add(g),g.then(r,r))})}}function yi(e,t){var n=t.deletions;if(n!==null)for(var g=0;g<n.length;g++){var r=n[g];try{var i=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:fg=o.stateNode,vi=!1;break e;case 3:fg=o.stateNode.containerInfo,vi=!0;break e;case 4:fg=o.stateNode.containerInfo,vi=!0;break e}o=o.return}if(fg===null)throw Error(Xe(160));tX(i,a,r),fg=null,vi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(s){wn(r,t,s)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nX(t,e),t=t.sibling}function nX(e,t){var n=e.alternate,g=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yi(t,e),$i(e),g&4){try{QC(3,e,e.return),p0(3,e)}catch(f){wn(e,e.return,f)}try{QC(5,e,e.return)}catch(f){wn(e,e.return,f)}}break;case 1:yi(t,e),$i(e),g&512&&n!==null&&RI(n,n.return);break;case 5:if(yi(t,e),$i(e),g&512&&n!==null&&RI(n,n.return),e.flags&32){var r=e.stateNode;try{uu(r,"")}catch(f){wn(e,e.return,f)}}if(g&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&GR(r,i),Ly(o,a);var s=Ly(o,i);for(a=0;a<l.length;a+=2){var I=l[a],c=l[a+1];I==="style"?VR(r,c):I==="dangerouslySetInnerHTML"?vR(r,c):I==="children"?uu(r,c):_2(r,I,c,s)}switch(o){case"input":Ny(r,i);break;case"textarea":BR(r,i);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?HI(r,!!i.multiple,u,!1):d!==!!i.multiple&&(i.defaultValue!=null?HI(r,!!i.multiple,i.defaultValue,!0):HI(r,!!i.multiple,i.multiple?[]:"",!1))}r[Zu]=i}catch(f){wn(e,e.return,f)}}break;case 6:if(yi(t,e),$i(e),g&4){if(e.stateNode===null)throw Error(Xe(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(f){wn(e,e.return,f)}}break;case 3:if(yi(t,e),$i(e),g&4&&n!==null&&n.memoizedState.isDehydrated)try{mu(t.containerInfo)}catch(f){wn(e,e.return,f)}break;case 4:yi(t,e),$i(e);break;case 13:yi(t,e),$i(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(RG=Fn())),g&4&&J5(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(wg=(s=wg)||I,yi(t,e),wg=s):yi(t,e),$i(e),g&8192){if(s=e.memoizedState!==null,(e.stateNode.isHidden=s)&&!I&&e.mode&1)for(_e=e,I=e.child;I!==null;){for(c=_e=I;_e!==null;){switch(d=_e,u=d.child,d.tag){case 0:case 11:case 14:case 15:QC(4,d,d.return);break;case 1:RI(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){g=d,n=d.return;try{t=g,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){wn(g,n,f)}}break;case 5:RI(d,d.return);break;case 22:if(d.memoizedState!==null){N5(c);continue}}u!==null?(u.return=d,_e=u):N5(c)}I=I.sibling}e:for(I=null,c=e;;){if(c.tag===5){if(I===null){I=c;try{r=c.stateNode,s?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=WR("display",a))}catch(f){wn(e,e.return,f)}}}else if(c.tag===6){if(I===null)try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(f){wn(e,e.return,f)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;I===c&&(I=null),c=c.return}I===c&&(I=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:yi(t,e),$i(e),g&4&&J5(e);break;case 21:break;default:yi(t,e),$i(e)}}function $i(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(eX(n)){var g=n;break e}n=n.return}throw Error(Xe(160))}switch(g.tag){case 5:var r=g.stateNode;g.flags&32&&(uu(r,""),g.flags&=-33);var i=X5(e);hZ(e,i,r);break;case 3:case 4:var a=g.stateNode.containerInfo,o=X5(e);AZ(e,o,a);break;default:throw Error(Xe(161))}}catch(l){wn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mx(e,t,n){_e=e,gX(e)}function gX(e,t,n){for(var g=(e.mode&1)!==0;_e!==null;){var r=_e,i=r.child;if(r.tag===22&&g){var a=r.memoizedState!==null||KA;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||wg;o=KA;var s=wg;if(KA=a,(wg=l)&&!s)for(_e=r;_e!==null;)a=_e,l=a.child,a.tag===22&&a.memoizedState!==null?H5(r):l!==null?(l.return=a,_e=l):H5(r);for(;i!==null;)_e=i,gX(i),i=i.sibling;_e=r,KA=o,wg=s}Y5(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,_e=i):Y5(e)}}function Y5(e){for(;_e!==null;){var t=_e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wg||p0(5,t);break;case 1:var g=t.stateNode;if(t.flags&4&&!wg)if(n===null)g.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Si(t.type,n.memoizedProps);g.componentDidUpdate(r,n.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&m5(t,i,g);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}m5(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var s=t.alternate;if(s!==null){var I=s.memoizedState;if(I!==null){var c=I.dehydrated;c!==null&&mu(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}wg||t.flags&512&&dZ(t)}catch(d){wn(t,t.return,d)}}if(t===e){_e=null;break}if(n=t.sibling,n!==null){n.return=t.return,_e=n;break}_e=t.return}}function N5(e){for(;_e!==null;){var t=_e;if(t===e){_e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_e=n;break}_e=t.return}}function H5(e){for(;_e!==null;){var t=_e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{p0(4,t)}catch(l){wn(t,n,l)}break;case 1:var g=t.stateNode;if(typeof g.componentDidMount=="function"){var r=t.return;try{g.componentDidMount()}catch(l){wn(t,r,l)}}var i=t.return;try{dZ(t)}catch(l){wn(t,i,l)}break;case 5:var a=t.return;try{dZ(t)}catch(l){wn(t,a,l)}}}catch(l){wn(t,t.return,l)}if(t===e){_e=null;break}var o=t.sibling;if(o!==null){o.return=t.return,_e=o;break}_e=t.return}}var zx=Math.ceil,Am=Io.ReactCurrentDispatcher,VG=Io.ReactCurrentOwner,Or=Io.ReactCurrentBatchConfig,Ht=0,sg=null,On=null,bg=0,br=0,wI=yl(0),tg=0,Vu=null,us=0,b0=0,kG=0,PC=null,nr=null,RG=0,ic=1/0,xa=null,hm=!1,mZ=null,al=null,LA=!1,Qo=null,mm=0,OC=0,fZ=null,Wh=-1,Vh=0;function Mg(){return Ht&6?Fn():Wh!==-1?Wh:Wh=Fn()}function ol(e){return e.mode&1?Ht&2&&bg!==0?bg&-bg:vx.transition!==null?(Vh===0&&(Vh=LR()),Vh):(e=Qt,e!==0||(e=window.event,e=e===void 0?16:jR(e.type)),e):1}function Hi(e,t,n,g){if(50<OC)throw OC=0,fZ=null,Error(Xe(185));cd(e,n,g),(!(Ht&2)||e!==sg)&&(e===sg&&(!(Ht&2)&&(b0|=n),tg===4&&Uo(e,bg)),sr(e,g),n===1&&Ht===0&&!(t.mode&1)&&(ic=Fn()+500,h0&&Zl()))}function sr(e,t){var n=e.callbackNode;vF(e,t);var g=em(e,e===sg?bg:0);if(g===0)n!==null&&TS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=g&-g,e.callbackPriority!==t){if(n!=null&&TS(n),t===1)e.tag===0?Sx(F5.bind(null,e)):Cw(F5.bind(null,e)),yx(function(){!(Ht&6)&&Zl()}),n=null;else{switch(ER(g)){case 1:n=nG;break;case 4:n=xR;break;case 16:n=$h;break;case 536870912:n=KR;break;default:n=$h}n=cX(n,rX.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rX(e,t){if(Wh=-1,Vh=0,Ht&6)throw Error(Xe(327));var n=e.callbackNode;if(EI()&&e.callbackNode!==n)return null;var g=em(e,e===sg?bg:0);if(g===0)return null;if(g&30||g&e.expiredLanes||t)t=fm(e,g);else{t=g;var r=Ht;Ht|=2;var i=aX();(sg!==e||bg!==t)&&(xa=null,ic=Fn()+500,ts(e,t));do try{Dx();break}catch(o){iX(e,o)}while(!0);AG(),Am.current=i,Ht=r,On!==null?t=0:(sg=null,bg=0,t=tg)}if(t!==0){if(t===2&&(r=Ty(e),r!==0&&(g=r,t=pZ(e,r))),t===1)throw n=Vu,ts(e,0),Uo(e,g),sr(e,Fn()),n;if(t===6)Uo(e,g);else{if(r=e.current.alternate,!(g&30)&&!Ux(r)&&(t=fm(e,g),t===2&&(i=Ty(e),i!==0&&(g=i,t=pZ(e,i))),t===1))throw n=Vu,ts(e,0),Uo(e,g),sr(e,Fn()),n;switch(e.finishedWork=r,e.finishedLanes=g,t){case 0:case 1:throw Error(Xe(345));case 2:Ml(e,nr,xa);break;case 3:if(Uo(e,g),(g&130023424)===g&&(t=RG+500-Fn(),10<t)){if(em(e,0)!==0)break;if(r=e.suspendedLanes,(r&g)!==g){Mg(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$y(Ml.bind(null,e,nr,xa),t);break}Ml(e,nr,xa);break;case 4:if(Uo(e,g),(g&4194240)===g)break;for(t=e.eventTimes,r=-1;0<g;){var a=31-Ni(g);i=1<<a,a=t[a],a>r&&(r=a),g&=~i}if(g=r,g=Fn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*zx(g/1960))-g,10<g){e.timeoutHandle=$y(Ml.bind(null,e,nr,xa),g);break}Ml(e,nr,xa);break;case 5:Ml(e,nr,xa);break;default:throw Error(Xe(329))}}}return sr(e,Fn()),e.callbackNode===n?rX.bind(null,e):null}function pZ(e,t){var n=PC;return e.current.memoizedState.isDehydrated&&(ts(e,t).flags|=256),e=fm(e,t),e!==2&&(t=nr,nr=n,t!==null&&bZ(t)),e}function bZ(e){nr===null?nr=e:nr.push.apply(nr,e)}function Ux(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var g=0;g<n.length;g++){var r=n[g],i=r.getSnapshot;r=r.value;try{if(!xi(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uo(e,t){for(t&=~kG,t&=~b0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ni(t),g=1<<n;e[n]=-1,t&=~g}}function F5(e){if(Ht&6)throw Error(Xe(327));EI();var t=em(e,0);if(!(t&1))return sr(e,Fn()),null;var n=fm(e,t);if(e.tag!==0&&n===2){var g=Ty(e);g!==0&&(t=g,n=pZ(e,g))}if(n===1)throw n=Vu,ts(e,0),Uo(e,t),sr(e,Fn()),n;if(n===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ml(e,nr,xa),sr(e,Fn()),null}function wG(e,t){var n=Ht;Ht|=1;try{return e(t)}finally{Ht=n,Ht===0&&(ic=Fn()+500,h0&&Zl())}}function ds(e){Qo!==null&&Qo.tag===0&&!(Ht&6)&&EI();var t=Ht;Ht|=1;var n=Or.transition,g=Qt;try{if(Or.transition=null,Qt=1,e)return e()}finally{Qt=g,Or.transition=n,Ht=t,!(Ht&6)&&Zl()}}function XG(){br=wI.current,cn(wI)}function ts(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bx(n)),On!==null)for(n=On.return;n!==null;){var g=n;switch(CG(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&im();break;case 3:gc(),cn(or),cn(Jg),yG();break;case 5:bG(g);break;case 4:gc();break;case 13:cn(bn);break;case 19:cn(bn);break;case 10:hG(g.type._context);break;case 22:case 23:XG()}n=n.return}if(sg=e,On=e=ll(e.current,null),bg=br=t,tg=0,Vu=null,kG=b0=us=0,nr=PC=null,Dl!==null){for(t=0;t<Dl.length;t++)if(n=Dl[t],g=n.interleaved,g!==null){n.interleaved=null;var r=g.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,g.next=a}n.pending=g}Dl=null}return e}function iX(e,t){do{var n=On;try{if(AG(),Bh.current=dm,um){for(var g=yn.memoizedState;g!==null;){var r=g.queue;r!==null&&(r.pending=null),g=g.next}um=!1}if(Cs=0,lg=$n=yn=null,jC=!1,Su=0,VG.current=null,n===null||n.return===null){tg=1,Vu=t,On=null;break}e:{var i=e,a=n.return,o=n,l=t;if(t=bg,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var s=l,I=o,c=I.tag;if(!(I.mode&1)&&(c===0||c===11||c===15)){var d=I.alternate;d?(I.updateQueue=d.updateQueue,I.memoizedState=d.memoizedState,I.lanes=d.lanes):(I.updateQueue=null,I.memoizedState=null)}var u=B5(a);if(u!==null){u.flags&=-257,S5(u,a,o,i,t),u.mode&1&&G5(i,s,t),t=u,l=s;var m=t.updateQueue;if(m===null){var f=new Set;f.add(l),t.updateQueue=f}else m.add(l);break e}else{if(!(t&1)){G5(i,s,t),JG();break e}l=Error(Xe(426))}}else if(fn&&o.mode&1){var y=B5(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),S5(y,a,o,i,t),uG(rc(l,o));break e}}i=l=rc(l,o),tg!==4&&(tg=2),PC===null?PC=[i]:PC.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=Mw(i,l,t);h5(i,h);break e;case 1:o=l;var p=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(al===null||!al.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=zw(i,o,t);h5(i,S);break e}}i=i.return}while(i!==null)}lX(n)}catch(X){t=X,On===n&&n!==null&&(On=n=n.return);continue}break}while(!0)}function aX(){var e=Am.current;return Am.current=dm,e===null?dm:e}function JG(){(tg===0||tg===3||tg===2)&&(tg=4),sg===null||!(us&268435455)&&!(b0&268435455)||Uo(sg,bg)}function fm(e,t){var n=Ht;Ht|=2;var g=aX();(sg!==e||bg!==t)&&(xa=null,ts(e,t));do try{Tx();break}catch(r){iX(e,r)}while(!0);if(AG(),Ht=n,Am.current=g,On!==null)throw Error(Xe(261));return sg=null,bg=0,tg}function Tx(){for(;On!==null;)oX(On)}function Dx(){for(;On!==null&&!mF();)oX(On)}function oX(e){var t=IX(e.alternate,e,br);e.memoizedProps=e.pendingProps,t===null?lX(e):On=t,VG.current=null}function lX(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Kx(n,t),n!==null){n.flags&=32767,On=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tg=6,On=null;return}}else if(n=xx(n,t,br),n!==null){On=n;return}if(t=t.sibling,t!==null){On=t;return}On=t=e}while(t!==null);tg===0&&(tg=5)}function Ml(e,t,n){var g=Qt,r=Or.transition;try{Or.transition=null,Qt=1,jx(e,t,n,g)}finally{Or.transition=r,Qt=g}return null}function jx(e,t,n,g){do EI();while(Qo!==null);if(Ht&6)throw Error(Xe(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(WF(e,i),e===sg&&(On=sg=null,bg=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||LA||(LA=!0,cX($h,function(){return EI(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Or.transition,Or.transition=null;var a=Qt;Qt=1;var o=Ht;Ht|=4,VG.current=null,Ex(e,n),nX(n,e),ux(_y),tm=!!Oy,_y=Oy=null,e.current=n,Mx(n),fF(),Ht=o,Qt=a,Or.transition=i}else e.current=n;if(LA&&(LA=!1,Qo=e,mm=r),i=e.pendingLanes,i===0&&(al=null),yF(n.stateNode),sr(e,Fn()),t!==null)for(g=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],g(r.value,{componentStack:r.stack,digest:r.digest});if(hm)throw hm=!1,e=mZ,mZ=null,e;return mm&1&&e.tag!==0&&EI(),i=e.pendingLanes,i&1?e===fZ?OC++:(OC=0,fZ=e):OC=0,Zl(),null}function EI(){if(Qo!==null){var e=ER(mm),t=Or.transition,n=Qt;try{if(Or.transition=null,Qt=16>e?16:e,Qo===null)var g=!1;else{if(e=Qo,Qo=null,mm=0,Ht&6)throw Error(Xe(331));var r=Ht;for(Ht|=4,_e=e.current;_e!==null;){var i=_e,a=i.child;if(_e.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var s=o[l];for(_e=s;_e!==null;){var I=_e;switch(I.tag){case 0:case 11:case 15:QC(8,I,i)}var c=I.child;if(c!==null)c.return=I,_e=c;else for(;_e!==null;){I=_e;var d=I.sibling,u=I.return;if($w(I),I===s){_e=null;break}if(d!==null){d.return=u,_e=d;break}_e=u}}}var m=i.alternate;if(m!==null){var f=m.child;if(f!==null){m.child=null;do{var y=f.sibling;f.sibling=null,f=y}while(f!==null)}}_e=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,_e=a;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:QC(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,_e=h;break e}_e=i.return}}var p=e.current;for(_e=p;_e!==null;){a=_e;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,_e=b;else e:for(a=p;_e!==null;){if(o=_e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:p0(9,o)}}catch(X){wn(o,o.return,X)}if(o===a){_e=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,_e=S;break e}_e=o.return}}if(Ht=r,Zl(),Ca&&typeof Ca.onPostCommitFiberRoot=="function")try{Ca.onPostCommitFiberRoot(c0,e)}catch{}g=!0}return g}finally{Qt=n,Or.transition=t}}return!1}function x5(e,t,n){t=rc(n,t),t=Mw(e,t,1),e=il(e,t,1),t=Mg(),e!==null&&(cd(e,1,t),sr(e,t))}function wn(e,t,n){if(e.tag===3)x5(e,e,n);else for(;t!==null;){if(t.tag===3){x5(t,e,n);break}else if(t.tag===1){var g=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(al===null||!al.has(g))){e=rc(n,e),e=zw(t,e,1),t=il(t,e,1),e=Mg(),t!==null&&(cd(t,1,e),sr(t,e));break}}t=t.return}}function Qx(e,t,n){var g=e.pingCache;g!==null&&g.delete(t),t=Mg(),e.pingedLanes|=e.suspendedLanes&n,sg===e&&(bg&n)===n&&(tg===4||tg===3&&(bg&130023424)===bg&&500>Fn()-RG?ts(e,0):kG|=n),sr(e,t)}function sX(e,t){t===0&&(e.mode&1?(t=RA,RA<<=1,!(RA&130023424)&&(RA=4194304)):t=1);var n=Mg();e=$a(e,t),e!==null&&(cd(e,t,n),sr(e,n))}function Px(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sX(e,n)}function Ox(e,t){var n=0;switch(e.tag){case 13:var g=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:g=e.stateNode;break;default:throw Error(Xe(314))}g!==null&&g.delete(t),sX(e,n)}var IX;IX=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||or.current)rr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rr=!1,Fx(e,t,n);rr=!!(e.flags&131072)}else rr=!1,fn&&t.flags&1048576&&uw(t,lm,t.index);switch(t.lanes=0,t.tag){case 2:var g=t.type;vh(e,t),e=t.pendingProps;var r=ec(t,Jg.current);LI(t,n),r=GG(null,t,g,e,r,n);var i=BG();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lr(g)?(i=!0,am(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fG(t),r.updater=m0,t.stateNode=r,r._reactInternals=t,aZ(t,g,e,n),t=sZ(null,t,g,!0,i,n)):(t.tag=0,fn&&i&&cG(t),Kg(null,t,r,n),t=t.child),t;case 16:g=t.elementType;e:{switch(vh(e,t),e=t.pendingProps,r=g._init,g=r(g._payload),t.type=g,r=t.tag=qx(g),e=Si(g,e),r){case 0:t=lZ(null,t,g,e,n);break e;case 1:t=V5(null,t,g,e,n);break e;case 11:t=v5(null,t,g,e,n);break e;case 14:t=W5(null,t,g,Si(g.type,e),n);break e}throw Error(Xe(306,g,""))}return t;case 0:return g=t.type,r=t.pendingProps,r=t.elementType===g?r:Si(g,r),lZ(e,t,g,r,n);case 1:return g=t.type,r=t.pendingProps,r=t.elementType===g?r:Si(g,r),V5(e,t,g,r,n);case 3:e:{if(jw(t),e===null)throw Error(Xe(387));g=t.pendingProps,i=t.memoizedState,r=i.element,mw(e,t),cm(t,g,null,n);var a=t.memoizedState;if(g=a.element,i.isDehydrated)if(i={element:g,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=rc(Error(Xe(423)),t),t=k5(e,t,g,n,r);break e}else if(g!==r){r=rc(Error(Xe(424)),t),t=k5(e,t,g,n,r);break e}else for(Zr=rl(t.stateNode.containerInfo.firstChild),Br=t,fn=!0,Vi=null,n=yw(t,null,g,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tc(),g===r){t=eo(e,t,n);break e}Kg(e,t,g,n)}t=t.child}return t;case 5:return Zw(t),e===null&&gZ(t),g=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,qy(g,r)?a=null:i!==null&&qy(g,i)&&(t.flags|=32),Dw(e,t),Kg(e,t,a,n),t.child;case 6:return e===null&&gZ(t),null;case 13:return Qw(e,t,n);case 4:return pG(t,t.stateNode.containerInfo),g=t.pendingProps,e===null?t.child=nc(t,null,g,n):Kg(e,t,g,n),t.child;case 11:return g=t.type,r=t.pendingProps,r=t.elementType===g?r:Si(g,r),v5(e,t,g,r,n);case 7:return Kg(e,t,t.pendingProps,n),t.child;case 8:return Kg(e,t,t.pendingProps.children,n),t.child;case 12:return Kg(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(g=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,an(sm,g._currentValue),g._currentValue=a,i!==null)if(xi(i.value,a)){if(i.children===r.children&&!or.current){t=eo(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===g){if(i.tag===1){l=Qa(-1,n&-n),l.tag=2;var s=i.updateQueue;if(s!==null){s=s.shared;var I=s.pending;I===null?l.next=l:(l.next=I.next,I.next=l),s.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),rZ(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Xe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),rZ(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Kg(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,g=t.pendingProps.children,LI(t,n),r=qr(r),g=g(r),t.flags|=1,Kg(e,t,g,n),t.child;case 14:return g=t.type,r=Si(g,t.pendingProps),r=Si(g.type,r),W5(e,t,g,r,n);case 15:return Uw(e,t,t.type,t.pendingProps,n);case 17:return g=t.type,r=t.pendingProps,r=t.elementType===g?r:Si(g,r),vh(e,t),t.tag=1,lr(g)?(e=!0,am(t)):e=!1,LI(t,n),pw(t,g,r),aZ(t,g,r,n),sZ(null,t,g,!0,e,n);case 19:return Pw(e,t,n);case 22:return Tw(e,t,n)}throw Error(Xe(156,t.tag))};function cX(e,t){return FR(e,t)}function _x(e,t,n,g){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,g){return new _x(e,t,n,g)}function YG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qx(e){if(typeof e=="function")return YG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$2)return 11;if(e===eG)return 14}return 2}function ll(e,t){var n=e.alternate;return n===null?(n=jr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kh(e,t,n,g,r,i){var a=2;if(g=e,typeof e=="function")YG(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yI:return ns(n.children,r,i,t);case q2:a=8,r|=8;break;case Ry:return e=jr(12,n,t,r|2),e.elementType=Ry,e.lanes=i,e;case wy:return e=jr(13,n,t,r),e.elementType=wy,e.lanes=i,e;case Xy:return e=jr(19,n,t,r),e.elementType=Xy,e.lanes=i,e;case bR:return y0(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fR:a=10;break e;case pR:a=9;break e;case $2:a=11;break e;case eG:a=14;break e;case Ko:a=16,g=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=jr(a,n,t,r),t.elementType=e,t.type=g,t.lanes=i,t}function ns(e,t,n,g){return e=jr(7,e,g,t),e.lanes=n,e}function y0(e,t,n,g){return e=jr(22,e,g,t),e.elementType=bR,e.lanes=n,e.stateNode={isHidden:!1},e}function yb(e,t,n){return e=jr(6,e,null,t),e.lanes=n,e}function Zb(e,t,n){return t=jr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $x(e,t,n,g,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nb(0),this.expirationTimes=nb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nb(0),this.identifierPrefix=g,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function NG(e,t,n,g,r,i,a,o,l){return e=new $x(e,t,n,o,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:g,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fG(i),e}function eK(e,t,n){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bI,key:g==null?null:""+g,children:e,containerInfo:t,implementation:n}}function CX(e){if(!e)return dl;e=e._reactInternals;e:{if(ys(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var n=e.type;if(lr(n))return cw(e,n,t)}return t}function uX(e,t,n,g,r,i,a,o,l){return e=NG(n,g,!0,e,r,i,a,o,l),e.context=CX(null),n=e.current,g=Mg(),r=ol(n),i=Qa(g,r),i.callback=t??null,il(n,i,r),e.current.lanes=r,cd(e,r,g),sr(e,g),e}function Z0(e,t,n,g){var r=t.current,i=Mg(),a=ol(r);return n=CX(n),t.context===null?t.context=n:t.pendingContext=n,t=Qa(i,a),t.payload={element:e},g=g===void 0?null:g,g!==null&&(t.callback=g),e=il(r,t,a),e!==null&&(Hi(e,r,a,i),Gh(e,r,a)),a}function pm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function K5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function HG(e,t){K5(e,t),(e=e.alternate)&&K5(e,t)}function tK(){return null}var dX=typeof reportError=="function"?reportError:function(e){console.error(e)};function FG(e){this._internalRoot=e}G0.prototype.render=FG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));Z0(e,t,null,null)};G0.prototype.unmount=FG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ds(function(){Z0(null,e,null,null)}),t[qa]=null}};function G0(e){this._internalRoot=e}G0.prototype.unstable_scheduleHydration=function(e){if(e){var t=UR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zo.length&&t!==0&&t<zo[n].priority;n++);zo.splice(n,0,e),n===0&&DR(e)}};function xG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function B0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function L5(){}function nK(e,t,n,g,r){if(r){if(typeof g=="function"){var i=g;g=function(){var s=pm(a);i.call(s)}}var a=uX(t,g,e,0,null,!1,!1,"",L5);return e._reactRootContainer=a,e[qa]=a.current,bu(e.nodeType===8?e.parentNode:e),ds(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof g=="function"){var o=g;g=function(){var s=pm(l);o.call(s)}}var l=NG(e,0,!1,null,null,!1,!1,"",L5);return e._reactRootContainer=l,e[qa]=l.current,bu(e.nodeType===8?e.parentNode:e),ds(function(){Z0(t,l,n,g)}),l}function S0(e,t,n,g,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var o=r;r=function(){var l=pm(a);o.call(l)}}Z0(t,a,e,r)}else a=nK(n,t,e,r,g);return pm(a)}MR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=HC(t.pendingLanes);n!==0&&(gG(t,n|1),sr(t,Fn()),!(Ht&6)&&(ic=Fn()+500,Zl()))}break;case 13:ds(function(){var g=$a(e,1);if(g!==null){var r=Mg();Hi(g,e,1,r)}}),HG(e,1)}};rG=function(e){if(e.tag===13){var t=$a(e,134217728);if(t!==null){var n=Mg();Hi(t,e,134217728,n)}HG(e,134217728)}};zR=function(e){if(e.tag===13){var t=ol(e),n=$a(e,t);if(n!==null){var g=Mg();Hi(n,e,t,g)}HG(e,t)}};UR=function(){return Qt};TR=function(e,t){var n=Qt;try{return Qt=e,t()}finally{Qt=n}};My=function(e,t,n){switch(t){case"input":if(Ny(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var g=n[t];if(g!==e&&g.form===e.form){var r=A0(g);if(!r)throw Error(Xe(90));ZR(g),Ny(g,r)}}}break;case"textarea":BR(e,n);break;case"select":t=n.value,t!=null&&HI(e,!!n.multiple,t,!1)}};wR=wG;XR=ds;var gK={usingClientEntryPoint:!1,Events:[ud,SI,A0,kR,RR,wG]},fC={findFiberByHostInstance:Tl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rK={bundleType:fC.bundleType,version:fC.version,rendererPackageName:fC.rendererPackageName,rendererConfig:fC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Io.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=NR(e),e===null?null:e.stateNode},findFiberByHostInstance:fC.findFiberByHostInstance||tK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var EA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!EA.isDisabled&&EA.supportsFiber)try{c0=EA.inject(rK),Ca=EA}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gK;Wr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xG(t))throw Error(Xe(200));return eK(e,t,null,n)};Wr.createRoot=function(e,t){if(!xG(e))throw Error(Xe(299));var n=!1,g="",r=dX;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(g=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=NG(e,1,!1,null,null,n,!1,g,r),e[qa]=t.current,bu(e.nodeType===8?e.parentNode:e),new FG(t)};Wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=NR(t),e=e===null?null:e.stateNode,e};Wr.flushSync=function(e){return ds(e)};Wr.hydrate=function(e,t,n){if(!B0(t))throw Error(Xe(200));return S0(null,e,t,!0,n)};Wr.hydrateRoot=function(e,t,n){if(!xG(e))throw Error(Xe(405));var g=n!=null&&n.hydratedSources||null,r=!1,i="",a=dX;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=uX(t,null,e,1,n??null,r,!1,i,a),e[qa]=t.current,bu(e),g)for(e=0;e<g.length;e++)n=g[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new G0(t)};Wr.render=function(e,t,n){if(!B0(t))throw Error(Xe(200));return S0(null,e,t,!1,n)};Wr.unmountComponentAtNode=function(e){if(!B0(e))throw Error(Xe(40));return e._reactRootContainer?(ds(function(){S0(null,null,e,!1,function(){e._reactRootContainer=null,e[qa]=null})}),!0):!1};Wr.unstable_batchedUpdates=wG;Wr.unstable_renderSubtreeIntoContainer=function(e,t,n,g){if(!B0(n))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return S0(e,t,n,!1,g)};Wr.version="18.2.0-next-9e3b772b8-20220608";function AX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AX)}catch(e){console.error(e)}}AX(),uR.exports=Wr;var hX=uR.exports,E5=hX;Vy.createRoot=E5.createRoot,Vy.hydrateRoot=E5.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},ku.apply(this,arguments)}var Po;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Po||(Po={}));const M5="popstate";function iK(e){e===void 0&&(e={});function t(g,r){let{pathname:i,search:a,hash:o}=g.location;return yZ("",{pathname:i,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(g,r){return typeof r=="string"?r:bm(r)}return oK(t,n,null,e)}function Zn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mX(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aK(){return Math.random().toString(36).substr(2,8)}function z5(e,t){return{usr:e.state,key:e.key,idx:t}}function yZ(e,t,n,g){return n===void 0&&(n=null),ku({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bc(t):t,{state:n,key:t&&t.key||g||aK()})}function bm(e){let{pathname:t="/",search:n="",hash:g=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),g&&g!=="#"&&(t+=g.charAt(0)==="#"?g:"#"+g),t}function bc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let g=e.indexOf("?");g>=0&&(t.search=e.substr(g),e=e.substr(0,g)),e&&(t.pathname=e)}return t}function oK(e,t,n,g){g===void 0&&(g={});let{window:r=document.defaultView,v5Compat:i=!1}=g,a=r.history,o=Po.Pop,l=null,s=I();s==null&&(s=0,a.replaceState(ku({},a.state,{idx:s}),""));function I(){return(a.state||{idx:null}).idx}function c(){o=Po.Pop;let y=I(),h=y==null?null:y-s;s=y,l&&l({action:o,location:f.location,delta:h})}function d(y,h){o=Po.Push;let p=yZ(f.location,y,h);s=I()+1;let b=z5(p,s),S=f.createHref(p);try{a.pushState(b,"",S)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(S)}i&&l&&l({action:o,location:f.location,delta:1})}function u(y,h){o=Po.Replace;let p=yZ(f.location,y,h);s=I();let b=z5(p,s),S=f.createHref(p);a.replaceState(b,"",S),i&&l&&l({action:o,location:f.location,delta:0})}function m(y){let h=r.location.origin!=="null"?r.location.origin:r.location.href,p=typeof y=="string"?y:bm(y);return p=p.replace(/ $/,"%20"),Zn(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let f={get action(){return o},get location(){return e(r,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(M5,c),l=y,()=>{r.removeEventListener(M5,c),l=null}},createHref(y){return t(r,y)},createURL:m,encodeLocation(y){let h=m(y);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:d,replace:u,go(y){return a.go(y)}};return f}var U5;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U5||(U5={}));function lK(e,t,n){n===void 0&&(n="/");let g=typeof t=="string"?bc(t):t,r=ac(g.pathname||"/",n);if(r==null)return null;let i=fX(e);sK(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let l=bK(r);a=fK(i[o],l)}return a}function fX(e,t,n,g){t===void 0&&(t=[]),n===void 0&&(n=[]),g===void 0&&(g="");let r=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Zn(l.relativePath.startsWith(g),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+g+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(g.length));let s=sl([g,l.relativePath]),I=n.concat(l);i.children&&i.children.length>0&&(Zn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),fX(i.children,t,I,s)),!(i.path==null&&!i.index)&&t.push({path:s,score:hK(s,i.index),routesMeta:I})};return e.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))r(i,a);else for(let l of pX(i.path))r(i,a,l)}),t}function pX(e){let t=e.split("/");if(t.length===0)return[];let[n,...g]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(g.length===0)return r?[i,""]:[i];let a=pX(g.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),r&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function sK(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mK(t.routesMeta.map(g=>g.childrenIndex),n.routesMeta.map(g=>g.childrenIndex)))}const IK=/^:[\w-]+$/,cK=3,CK=2,uK=1,dK=10,AK=-2,T5=e=>e==="*";function hK(e,t){let n=e.split("/"),g=n.length;return n.some(T5)&&(g+=AK),t&&(g+=CK),n.filter(r=>!T5(r)).reduce((r,i)=>r+(IK.test(i)?cK:i===""?uK:dK),g)}function mK(e,t){return e.length===t.length&&e.slice(0,-1).every((g,r)=>g===t[r])?e[e.length-1]-t[t.length-1]:0}function fK(e,t){let{routesMeta:n}=e,g={},r="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],l=a===n.length-1,s=r==="/"?t:t.slice(r.length)||"/",I=ZZ({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},s);if(!I)return null;Object.assign(g,I.params);let c=o.route;i.push({params:g,pathname:sl([r,I.pathname]),pathnameBase:BK(sl([r,I.pathnameBase])),route:c}),I.pathnameBase!=="/"&&(r=sl([r,I.pathnameBase]))}return i}function ZZ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,g]=pK(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:g.reduce((s,I,c)=>{let{paramName:d,isOptional:u}=I;if(d==="*"){let f=o[c]||"";a=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const m=o[c];return u&&!m?s[d]=void 0:s[d]=(m||"").replace(/%2F/g,"/"),s},{}),pathname:i,pathnameBase:a,pattern:e}}function pK(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mX(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let g=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(g.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(g.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),g]}function bK(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mX(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ac(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,g=e.charAt(n);return g&&g!=="/"?null:e.slice(n)||"/"}function yK(e,t){t===void 0&&(t="/");let{pathname:n,search:g="",hash:r=""}=typeof e=="string"?bc(e):e;return{pathname:n?n.startsWith("/")?n:ZK(n,t):t,search:SK(g),hash:vK(r)}}function ZK(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Gb(e,t,n,g){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(g)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GK(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function KG(e,t){let n=GK(e);return t?n.map((g,r)=>r===e.length-1?g.pathname:g.pathnameBase):n.map(g=>g.pathnameBase)}function LG(e,t,n,g){g===void 0&&(g=!1);let r;typeof e=="string"?r=bc(e):(r=ku({},e),Zn(!r.pathname||!r.pathname.includes("?"),Gb("?","pathname","search",r)),Zn(!r.pathname||!r.pathname.includes("#"),Gb("#","pathname","hash",r)),Zn(!r.search||!r.search.includes("#"),Gb("#","search","hash",r)));let i=e===""||r.pathname==="",a=i?"/":r.pathname,o;if(a==null)o=n;else{let c=t.length-1;if(!g&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),c-=1;r.pathname=d.join("/")}o=c>=0?t[c]:"/"}let l=yK(r,o),s=a&&a!=="/"&&a.endsWith("/"),I=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(s||I)&&(l.pathname+="/"),l}const sl=e=>e.join("/").replace(/\/\/+/g,"/"),BK=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SK=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vK=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bX=["post","put","patch","delete"];new Set(bX);const VK=["get",...bX];new Set(VK);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},Ru.apply(this,arguments)}const v0=_.createContext(null),yX=_.createContext(null),co=_.createContext(null),W0=_.createContext(null),Gl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),ZX=_.createContext(null);function kK(e,t){let{relative:n}=t===void 0?{}:t;yc()||Zn(!1);let{basename:g,navigator:r}=_.useContext(co),{hash:i,pathname:a,search:o}=V0(e,{relative:n}),l=a;return g!=="/"&&(l=a==="/"?g:sl([g,a])),r.createHref({pathname:l,search:o,hash:i})}function yc(){return _.useContext(W0)!=null}function Zc(){return yc()||Zn(!1),_.useContext(W0).location}function GX(e){_.useContext(co).static||_.useLayoutEffect(e)}function Bl(){let{isDataRoute:e}=_.useContext(Gl);return e?MK():RK()}function RK(){yc()||Zn(!1);let e=_.useContext(v0),{basename:t,future:n,navigator:g}=_.useContext(co),{matches:r}=_.useContext(Gl),{pathname:i}=Zc(),a=JSON.stringify(KG(r,n.v7_relativeSplatPath)),o=_.useRef(!1);return GX(()=>{o.current=!0}),_.useCallback(function(s,I){if(I===void 0&&(I={}),!o.current)return;if(typeof s=="number"){g.go(s);return}let c=LG(s,JSON.parse(a),i,I.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:sl([t,c.pathname])),(I.replace?g.replace:g.push)(c,I.state,I)},[t,g,a,i,e])}function V0(e,t){let{relative:n}=t===void 0?{}:t,{future:g}=_.useContext(co),{matches:r}=_.useContext(Gl),{pathname:i}=Zc(),a=JSON.stringify(KG(r,g.v7_relativeSplatPath));return _.useMemo(()=>LG(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function wK(e,t){return XK(e,t)}function XK(e,t,n,g){yc()||Zn(!1);let{navigator:r}=_.useContext(co),{matches:i}=_.useContext(Gl),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let s=Zc(),I;if(t){var c;let y=typeof t=="string"?bc(t):t;l==="/"||(c=y.pathname)!=null&&c.startsWith(l)||Zn(!1),I=y}else I=s;let d=I.pathname||"/",u=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");u="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=lK(e,{pathname:u}),f=FK(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:sl([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:sl([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,g);return t&&f?_.createElement(W0.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Po.Pop}},f):f}function JK(){let e=EK(),t=WK(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:r},n):null,null)}const YK=_.createElement(JK,null);class NK extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(Gl.Provider,{value:this.props.routeContext},_.createElement(ZX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HK(e){let{routeContext:t,match:n,children:g}=e,r=_.useContext(v0);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Gl.Provider,{value:t},g)}function FK(e,t,n,g){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),g===void 0&&(g=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let I=a.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);I>=0||Zn(!1),a=a.slice(0,Math.min(a.length,I+1))}let l=!1,s=-1;if(n&&g&&g.v7_partialHydration)for(let I=0;I<a.length;I++){let c=a[I];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=I),c.route.id){let{loaderData:d,errors:u}=n,m=c.route.loader&&d[c.route.id]===void 0&&(!u||u[c.route.id]===void 0);if(c.route.lazy||m){l=!0,s>=0?a=a.slice(0,s+1):a=[a[0]];break}}}return a.reduceRight((I,c,d)=>{let u,m=!1,f=null,y=null;n&&(u=o&&c.route.id?o[c.route.id]:void 0,f=c.route.errorElement||YK,l&&(s<0&&d===0?(m=!0,y=null):s===d&&(m=!0,y=c.route.hydrateFallbackElement||null)));let h=t.concat(a.slice(0,d+1)),p=()=>{let b;return u?b=f:m?b=y:c.route.Component?b=_.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=I,_.createElement(HK,{match:c,routeContext:{outlet:I,matches:h,isDataRoute:n!=null},children:b})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?_.createElement(NK,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}var BX=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BX||{}),ym=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ym||{});function xK(e){let t=_.useContext(v0);return t||Zn(!1),t}function KK(e){let t=_.useContext(yX);return t||Zn(!1),t}function LK(e){let t=_.useContext(Gl);return t||Zn(!1),t}function SX(e){let t=LK(),n=t.matches[t.matches.length-1];return n.route.id||Zn(!1),n.route.id}function EK(){var e;let t=_.useContext(ZX),n=KK(ym.UseRouteError),g=SX(ym.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[g]}function MK(){let{router:e}=xK(BX.UseNavigateStable),t=SX(ym.UseNavigateStable),n=_.useRef(!1);return GX(()=>{n.current=!0}),_.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Ru({fromRouteId:t},i)))},[e,t])}function vX(e){let{to:t,replace:n,state:g,relative:r}=e;yc()||Zn(!1);let{future:i,static:a}=_.useContext(co),{matches:o}=_.useContext(Gl),{pathname:l}=Zc(),s=Bl(),I=LG(t,KG(o,i.v7_relativeSplatPath),l,r==="path"),c=JSON.stringify(I);return _.useEffect(()=>s(JSON.parse(c),{replace:n,state:g,relative:r}),[s,c,r,n,g]),null}function mg(e){Zn(!1)}function zK(e){let{basename:t="/",children:n=null,location:g,navigationType:r=Po.Pop,navigator:i,static:a=!1,future:o}=e;yc()&&Zn(!1);let l=t.replace(/^\/*/,"/"),s=_.useMemo(()=>({basename:l,navigator:i,static:a,future:Ru({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof g=="string"&&(g=bc(g));let{pathname:I="/",search:c="",hash:d="",state:u=null,key:m="default"}=g,f=_.useMemo(()=>{let y=ac(I,l);return y==null?null:{location:{pathname:y,search:c,hash:d,state:u,key:m},navigationType:r}},[l,I,c,d,u,m,r]);return f==null?null:_.createElement(co.Provider,{value:s},_.createElement(W0.Provider,{children:n,value:f}))}function UK(e){let{children:t,location:n}=e;return wK(GZ(t),n)}new Promise(()=>{});function GZ(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(g,r)=>{if(!_.isValidElement(g))return;let i=[...t,r];if(g.type===_.Fragment){n.push.apply(n,GZ(g.props.children,i));return}g.type!==mg&&Zn(!1),!g.props.index||!g.props.children||Zn(!1);let a={id:g.props.id||i.join("-"),caseSensitive:g.props.caseSensitive,element:g.props.element,Component:g.props.Component,index:g.props.index,path:g.props.path,loader:g.props.loader,action:g.props.action,errorElement:g.props.errorElement,ErrorBoundary:g.props.ErrorBoundary,hasErrorBoundary:g.props.ErrorBoundary!=null||g.props.errorElement!=null,shouldRevalidate:g.props.shouldRevalidate,handle:g.props.handle,lazy:g.props.lazy};g.props.children&&(a.children=GZ(g.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},Zm.apply(this,arguments)}function WX(e,t){if(e==null)return{};var n={},g=Object.keys(e),r,i;for(i=0;i<g.length;i++)r=g[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function TK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function DK(e,t){return e.button===0&&(!t||t==="_self")&&!TK(e)}const jK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],QK=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],PK="6";try{window.__reactRouterVersion=PK}catch{}const OK=_.createContext({isTransitioning:!1}),_K="startTransition",D5=Ph[_K];function qK(e){let{basename:t,children:n,future:g,window:r}=e,i=_.useRef();i.current==null&&(i.current=iK({window:r,v5Compat:!0}));let a=i.current,[o,l]=_.useState({action:a.action,location:a.location}),{v7_startTransition:s}=g||{},I=_.useCallback(c=>{s&&D5?D5(()=>l(c)):l(c)},[l,s]);return _.useLayoutEffect(()=>a.listen(I),[a,I]),_.createElement(zK,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:g})}const $K=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tL=_.forwardRef(function(t,n){let{onClick:g,relative:r,reloadDocument:i,replace:a,state:o,target:l,to:s,preventScrollReset:I,unstable_viewTransition:c}=t,d=WX(t,jK),{basename:u}=_.useContext(co),m,f=!1;if(typeof s=="string"&&eL.test(s)&&(m=s,$K))try{let b=new URL(window.location.href),S=s.startsWith("//")?new URL(b.protocol+s):new URL(s),X=ac(S.pathname,u);S.origin===b.origin&&X!=null?s=X+S.search+S.hash:f=!0}catch{}let y=kK(s,{relative:r}),h=gL(s,{replace:a,state:o,target:l,preventScrollReset:I,relative:r,unstable_viewTransition:c});function p(b){g&&g(b),b.defaultPrevented||h(b)}return _.createElement("a",Zm({},d,{href:m||y,onClick:f||i?g:p,ref:n,target:l}))}),Qn=_.forwardRef(function(t,n){let{"aria-current":g="page",caseSensitive:r=!1,className:i="",end:a=!1,style:o,to:l,unstable_viewTransition:s,children:I}=t,c=WX(t,QK),d=V0(l,{relative:c.relative}),u=Zc(),m=_.useContext(yX),{navigator:f,basename:y}=_.useContext(co),h=m!=null&&rL(d)&&s===!0,p=f.encodeLocation?f.encodeLocation(d).pathname:d.pathname,b=u.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(b=b.toLowerCase(),S=S?S.toLowerCase():null,p=p.toLowerCase()),S&&y&&(S=ac(S,y)||S);const X=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let W=b===p||!a&&b.startsWith(p)&&b.charAt(X)==="/",V=S!=null&&(S===p||!a&&S.startsWith(p)&&S.charAt(p.length)==="/"),R={isActive:W,isPending:V,isTransitioning:h},z=W?g:void 0,L;typeof i=="function"?L=i(R):L=[i,W?"active":null,V?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(R):o;return _.createElement(tL,Zm({},c,{"aria-current":z,className:L,ref:n,style:k,to:l,unstable_viewTransition:s}),typeof I=="function"?I(R):I)});var BZ;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BZ||(BZ={}));var j5;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(j5||(j5={}));function nL(e){let t=_.useContext(v0);return t||Zn(!1),t}function gL(e,t){let{target:n,replace:g,state:r,preventScrollReset:i,relative:a,unstable_viewTransition:o}=t===void 0?{}:t,l=Bl(),s=Zc(),I=V0(e,{relative:a});return _.useCallback(c=>{if(DK(c,n)){c.preventDefault();let d=g!==void 0?g:bm(s)===bm(I);l(e,{replace:d,state:r,preventScrollReset:i,relative:a,unstable_viewTransition:o})}},[s,l,I,g,r,n,e,i,a,o])}function rL(e,t){t===void 0&&(t={});let n=_.useContext(OK);n==null&&Zn(!1);let{basename:g}=nL(BZ.useViewTransitionState),r=V0(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=ac(n.currentLocation.pathname,g)||n.currentLocation.pathname,a=ac(n.nextLocation.pathname,g)||n.nextLocation.pathname;return ZZ(r.pathname,a)!=null||ZZ(r.pathname,i)!=null}var VX={exports:{}},iL="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aL=iL,oL=aL;function kX(){}function RX(){}RX.resetWarningCache=kX;var lL=function(){function e(g,r,i,a,o,l){if(l!==oL){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RX,resetWarningCache:kX};return n.PropTypes=n,n};VX.exports=lL();var sL=VX.exports;const Gt=l0(sL),EG=({imagen:e,descripcion:t})=>G.jsxs("div",{className:"tarjeta",children:[G.jsx("img",{src:e,alt:"Imagen de tarjeta",className:"imagen-tarjeta"}),G.jsx("div",{className:"contenido-tarjeta",children:G.jsx("p",{className:"descripcion-tarjeta",children:t})})]});EG.propTypes={imagen:Gt.string.isRequired,descripcion:Gt.string.isRequired};const k0=({titulo:e})=>G.jsx("div",{className:"contenedor-etiqueta-sub-titulo",children:e});k0.propTypes={titulo:Gt.string.isRequired};const IL=()=>G.jsx("div",{className:"contenedor-cargando",children:G.jsx("div",{className:"cargando"})}),zg=({titulo:e})=>G.jsx("div",{className:"contenedor-etiqueta-titulo",children:e});zg.propTypes={titulo:Gt.string.isRequired};const cL=()=>{const[e,t]=_.useState([]),[n,g]=_.useState(!0);return _.useEffect(()=>{(async()=>{try{const a=await(await fetch("https://6668e270f53957909ff9675e.mockapi.io/informacionInicial")).json();t(a)}catch(i){console.error("Error al obtener los datos: ",i)}finally{g(!1)}})()},[]),n?G.jsx(IL,{}):G.jsxs("div",{className:"pantalla-inicial",children:[G.jsx(zg,{titulo:"Inicio"}),e.map(r=>G.jsxs("div",{className:"contenedor-tarjeta",children:[G.jsx(k0,{titulo:r.titulo}),G.jsx(EG,{imagen:r.imagen,descripcion:r.descripcion})]},r.id))]})};function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,g)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(g){gg(e,g,n[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(n,g))})}return e}function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function CL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uL(e,t){for(var n=0;n<t.length;n++){var g=t[n];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function dL(e,t,n){return t&&uL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e,t){return hL(e)||fL(e,t)||wX(e,t)||bL()}function Ad(e){return AL(e)||mL(e)||wX(e)||pL()}function AL(e){if(Array.isArray(e))return SZ(e)}function hL(e){if(Array.isArray(e))return e}function mL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fL(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var g=[],r=!0,i=!1,a,o;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(g.push(a.value),!(t&&g.length===t));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw o}}return g}}function wX(e,t){if(e){if(typeof e=="string")return SZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SZ(e,t)}}function SZ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,g=new Array(t);n<t;n++)g[n]=e[n];return g}function pL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P5=function(){},zG={},XX={},JX=null,YX={mark:P5,measure:P5};try{typeof window<"u"&&(zG=window),typeof document<"u"&&(XX=document),typeof MutationObserver<"u"&&(JX=MutationObserver),typeof performance<"u"&&(YX=performance)}catch{}var yL=zG.navigator||{},O5=yL.userAgent,_5=O5===void 0?"":O5,Al=zG,Cn=XX,q5=JX,MA=YX;Al.document;var Co=!!Cn.documentElement&&!!Cn.head&&typeof Cn.addEventListener=="function"&&typeof Cn.createElement=="function",NX=~_5.indexOf("MSIE")||~_5.indexOf("Trident/"),zA,UA,TA,DA,jA,to="___FONT_AWESOME___",vZ=16,HX="fa",FX="svg-inline--fa",As="data-fa-i2svg",WZ="data-fa-pseudo-element",ZL="data-fa-pseudo-element-pending",UG="data-prefix",TG="data-icon",$5="fontawesome-i2svg",GL="async",BL=["HTML","HEAD","STYLE","SCRIPT"],xX=function(){try{return!0}catch{return!1}}(),sn="classic",Xn="sharp",DG=[sn,Xn];function hd(e){return new Proxy(e,{get:function(n,g){return g in n?n[g]:n[sn]}})}var wu=hd((zA={},gg(zA,sn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),gg(zA,Xn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),zA)),Xu=hd((UA={},gg(UA,sn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),gg(UA,Xn,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),UA)),Ju=hd((TA={},gg(TA,sn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),gg(TA,Xn,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),TA)),SL=hd((DA={},gg(DA,sn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),gg(DA,Xn,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),DA)),vL=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,KX="fa-layers-text",WL=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,VL=hd((jA={},gg(jA,sn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),gg(jA,Xn,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),jA)),LX=[1,2,3,4,5,6,7,8,9,10],kL=LX.concat([11,12,13,14,15,16,17,18,19,20]),RL=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ql={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Yu=new Set;Object.keys(Xu[sn]).map(Yu.add.bind(Yu));Object.keys(Xu[Xn]).map(Yu.add.bind(Yu));var wL=[].concat(DG,Ad(Yu),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ql.GROUP,Ql.SWAP_OPACITY,Ql.PRIMARY,Ql.SECONDARY]).concat(LX.map(function(e){return"".concat(e,"x")})).concat(kL.map(function(e){return"w-".concat(e)})),_C=Al.FontAwesomeConfig||{};function XL(e){var t=Cn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function JL(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Cn&&typeof Cn.querySelector=="function"){var YL=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];YL.forEach(function(e){var t=MG(e,2),n=t[0],g=t[1],r=JL(XL(n));r!=null&&(_C[g]=r)})}var EX={styleDefault:"solid",familyDefault:"classic",cssPrefix:HX,replacementClass:FX,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_C.familyPrefix&&(_C.cssPrefix=_C.familyPrefix);var oc=Pe(Pe({},EX),_C);oc.autoReplaceSvg||(oc.observeMutations=!1);var tt={};Object.keys(EX).forEach(function(e){Object.defineProperty(tt,e,{enumerable:!0,set:function(n){oc[e]=n,qC.forEach(function(g){return g(tt)})},get:function(){return oc[e]}})});Object.defineProperty(tt,"familyPrefix",{enumerable:!0,set:function(t){oc.cssPrefix=t,qC.forEach(function(n){return n(tt)})},get:function(){return oc.cssPrefix}});Al.FontAwesomeConfig=tt;var qC=[];function NL(e){return qC.push(e),function(){qC.splice(qC.indexOf(e),1)}}var Jo=vZ,Ia={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function HL(e){if(!(!e||!Co)){var t=Cn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Cn.head.childNodes,g=null,r=n.length-1;r>-1;r--){var i=n[r],a=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(g=i)}return Cn.head.insertBefore(t,g),e}}var FL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Nu(){for(var e=12,t="";e-- >0;)t+=FL[Math.random()*62|0];return t}function Gc(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function jG(e){return e.classList?Gc(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function MX(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xL(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,'="').concat(MX(e[n]),'" ')},"").trim()}function R0(e){return Object.keys(e||{}).reduce(function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")},"")}function QG(e){return e.size!==Ia.size||e.x!==Ia.x||e.y!==Ia.y||e.rotate!==Ia.rotate||e.flipX||e.flipY}function KL(e){var t=e.transform,n=e.containerWidth,g=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(t.x*32,", ").concat(t.y*32,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)"),l={transform:"".concat(i," ").concat(a," ").concat(o)},s={transform:"translate(".concat(g/2*-1," -256)")};return{outer:r,inner:l,path:s}}function LL(e){var t=e.transform,n=e.width,g=n===void 0?vZ:n,r=e.height,i=r===void 0?vZ:r,a=e.startCentered,o=a===void 0?!1:a,l="";return o&&NX?l+="translate(".concat(t.x/Jo-g/2,"em, ").concat(t.y/Jo-i/2,"em) "):o?l+="translate(calc(-50% + ".concat(t.x/Jo,"em), calc(-50% + ").concat(t.y/Jo,"em)) "):l+="translate(".concat(t.x/Jo,"em, ").concat(t.y/Jo,"em) "),l+="scale(".concat(t.size/Jo*(t.flipX?-1:1),", ").concat(t.size/Jo*(t.flipY?-1:1),") "),l+="rotate(".concat(t.rotate,"deg) "),l}var EL=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function zX(){var e=HX,t=FX,n=tt.cssPrefix,g=tt.replacementClass,r=EL;if(n!==e||g!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");r=r.replace(i,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(o,".".concat(g))}return r}var ev=!1;function Bb(){tt.autoAddCss&&!ev&&(HL(zX()),ev=!0)}var ML={mixout:function(){return{dom:{css:zX,insertCss:Bb}}},hooks:function(){return{beforeDOMElementCreation:function(){Bb()},beforeI2svg:function(){Bb()}}}},no=Al||{};no[to]||(no[to]={});no[to].styles||(no[to].styles={});no[to].hooks||(no[to].hooks={});no[to].shims||(no[to].shims=[]);var Xi=no[to],UX=[],zL=function e(){Cn.removeEventListener("DOMContentLoaded",e),Bm=1,UX.map(function(t){return t()})},Bm=!1;Co&&(Bm=(Cn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Cn.readyState),Bm||Cn.addEventListener("DOMContentLoaded",zL));function UL(e){Co&&(Bm?setTimeout(e,0):UX.push(e))}function md(e){var t=e.tag,n=e.attributes,g=n===void 0?{}:n,r=e.children,i=r===void 0?[]:r;return typeof e=="string"?MX(e):"<".concat(t," ").concat(xL(g),">").concat(i.map(md).join(""),"</").concat(t,">")}function tv(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var Sb=function(t,n,g,r){var i=Object.keys(t),a=i.length,o=n,l,s,I;for(g===void 0?(l=1,I=t[i[0]]):(l=0,I=g);l<a;l++)s=i[l],I=o(I,t[s],s,t);return I};function TL(e){for(var t=[],n=0,g=e.length;n<g;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<g){var i=e.charCodeAt(n++);(i&64512)==56320?t.push(((r&1023)<<10)+(i&1023)+65536):(t.push(r),n--)}else t.push(r)}return t}function VZ(e){var t=TL(e);return t.length===1?t[0].toString(16):null}function DL(e,t){var n=e.length,g=e.charCodeAt(t),r;return g>=55296&&g<=56319&&n>t+1&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(g-55296)*1024+r-56320+65536:g}function nv(e){return Object.keys(e).reduce(function(t,n){var g=e[n],r=!!g.icon;return r?t[g.iconName]=g.icon:t[n]=g,t},{})}function kZ(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=n.skipHooks,r=g===void 0?!1:g,i=nv(t);typeof Xi.hooks.addPack=="function"&&!r?Xi.hooks.addPack(e,nv(t)):Xi.styles[e]=Pe(Pe({},Xi.styles[e]||{}),i),e==="fas"&&kZ("fa",t)}var QA,PA,OA,XI=Xi.styles,jL=Xi.shims,QL=(QA={},gg(QA,sn,Object.values(Ju[sn])),gg(QA,Xn,Object.values(Ju[Xn])),QA),PG=null,TX={},DX={},jX={},QX={},PX={},PL=(PA={},gg(PA,sn,Object.keys(wu[sn])),gg(PA,Xn,Object.keys(wu[Xn])),PA);function OL(e){return~wL.indexOf(e)}function _L(e,t){var n=t.split("-"),g=n[0],r=n.slice(1).join("-");return g===e&&r!==""&&!OL(r)?r:null}var OX=function(){var t=function(i){return Sb(XI,function(a,o,l){return a[l]=Sb(o,i,{}),a},{})};TX=t(function(r,i,a){if(i[3]&&(r[i[3]]=a),i[2]){var o=i[2].filter(function(l){return typeof l=="number"});o.forEach(function(l){r[l.toString(16)]=a})}return r}),DX=t(function(r,i,a){if(r[a]=a,i[2]){var o=i[2].filter(function(l){return typeof l=="string"});o.forEach(function(l){r[l]=a})}return r}),PX=t(function(r,i,a){var o=i[2];return r[a]=a,o.forEach(function(l){r[l]=a}),r});var n="far"in XI||tt.autoFetchSvg,g=Sb(jL,function(r,i){var a=i[0],o=i[1],l=i[2];return o==="far"&&!n&&(o="fas"),typeof a=="string"&&(r.names[a]={prefix:o,iconName:l}),typeof a=="number"&&(r.unicodes[a.toString(16)]={prefix:o,iconName:l}),r},{names:{},unicodes:{}});jX=g.names,QX=g.unicodes,PG=w0(tt.styleDefault,{family:tt.familyDefault})};NL(function(e){PG=w0(e.styleDefault,{family:tt.familyDefault})});OX();function OG(e,t){return(TX[e]||{})[t]}function qL(e,t){return(DX[e]||{})[t]}function Pl(e,t){return(PX[e]||{})[t]}function _X(e){return jX[e]||{prefix:null,iconName:null}}function $L(e){var t=QX[e],n=OG("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function hl(){return PG}var _G=function(){return{prefix:null,iconName:null,rest:[]}};function w0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.family,g=n===void 0?sn:n,r=wu[g][e],i=Xu[g][e]||Xu[g][r],a=e in Xi.styles?e:null;return i||a||null}var gv=(OA={},gg(OA,sn,Object.keys(Ju[sn])),gg(OA,Xn,Object.keys(Ju[Xn])),OA);function X0(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=n.skipLookups,r=g===void 0?!1:g,i=(t={},gg(t,sn,"".concat(tt.cssPrefix,"-").concat(sn)),gg(t,Xn,"".concat(tt.cssPrefix,"-").concat(Xn)),t),a=null,o=sn;(e.includes(i[sn])||e.some(function(s){return gv[sn].includes(s)}))&&(o=sn),(e.includes(i[Xn])||e.some(function(s){return gv[Xn].includes(s)}))&&(o=Xn);var l=e.reduce(function(s,I){var c=_L(tt.cssPrefix,I);if(XI[I]?(I=QL[o].includes(I)?SL[o][I]:I,a=I,s.prefix=I):PL[o].indexOf(I)>-1?(a=I,s.prefix=w0(I,{family:o})):c?s.iconName=c:I!==tt.replacementClass&&I!==i[sn]&&I!==i[Xn]&&s.rest.push(I),!r&&s.prefix&&s.iconName){var d=a==="fa"?_X(s.iconName):{},u=Pl(s.prefix,s.iconName);d.prefix&&(a=null),s.iconName=d.iconName||u||s.iconName,s.prefix=d.prefix||s.prefix,s.prefix==="far"&&!XI.far&&XI.fas&&!tt.autoFetchSvg&&(s.prefix="fas")}return s},_G());return(e.includes("fa-brands")||e.includes("fab"))&&(l.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(l.prefix="fad"),!l.prefix&&o===Xn&&(XI.fass||tt.autoFetchSvg)&&(l.prefix="fass",l.iconName=Pl(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||a==="fa")&&(l.prefix=hl()||"fas"),l}var eE=function(){function e(){CL(this,e),this.definitions={}}return dL(e,[{key:"add",value:function(){for(var n=this,g=arguments.length,r=new Array(g),i=0;i<g;i++)r[i]=arguments[i];var a=r.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(o){n.definitions[o]=Pe(Pe({},n.definitions[o]||{}),a[o]),kZ(o,a[o]);var l=Ju[sn][o];l&&kZ(l,a[o]),OX()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,g){var r=g.prefix&&g.iconName&&g.icon?{0:g}:g;return Object.keys(r).map(function(i){var a=r[i],o=a.prefix,l=a.iconName,s=a.icon,I=s[2];n[o]||(n[o]={}),I.length>0&&I.forEach(function(c){typeof c=="string"&&(n[o][c]=s)}),n[o][l]=s}),n}}]),e}(),rv=[],JI={},MI={},tE=Object.keys(MI);function nE(e,t){var n=t.mixoutsTo;return rv=e,JI={},Object.keys(MI).forEach(function(g){tE.indexOf(g)===-1&&delete MI[g]}),rv.forEach(function(g){var r=g.mixout?g.mixout():{};if(Object.keys(r).forEach(function(a){typeof r[a]=="function"&&(n[a]=r[a]),Gm(r[a])==="object"&&Object.keys(r[a]).forEach(function(o){n[a]||(n[a]={}),n[a][o]=r[a][o]})}),g.hooks){var i=g.hooks();Object.keys(i).forEach(function(a){JI[a]||(JI[a]=[]),JI[a].push(i[a])})}g.provides&&g.provides(MI)}),n}function RZ(e,t){for(var n=arguments.length,g=new Array(n>2?n-2:0),r=2;r<n;r++)g[r-2]=arguments[r];var i=JI[e]||[];return i.forEach(function(a){t=a.apply(null,[t].concat(g))}),t}function hs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),g=1;g<t;g++)n[g-1]=arguments[g];var r=JI[e]||[];r.forEach(function(i){i.apply(null,n)})}function go(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return MI[e]?MI[e].apply(null,t):void 0}function wZ(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,n=e.prefix||hl();if(t)return t=Pl(n,t)||t,tv(qX.definitions,n,t)||tv(Xi.styles,n,t)}var qX=new eE,gE=function(){tt.autoReplaceSvg=!1,tt.observeMutations=!1,hs("noAuto")},rE={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Co?(hs("beforeI2svg",t),go("pseudoElements2svg",t),go("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot;tt.autoReplaceSvg===!1&&(tt.autoReplaceSvg=!0),tt.observeMutations=!0,UL(function(){aE({autoReplaceSvgRoot:n}),hs("watch",t)})}},iE={icon:function(t){if(t===null)return null;if(Gm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Pl(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var n=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],g=w0(t[0]);return{prefix:g,iconName:Pl(g,n)||n}}if(typeof t=="string"&&(t.indexOf("".concat(tt.cssPrefix,"-"))>-1||t.match(vL))){var r=X0(t.split(" "),{skipLookups:!0});return{prefix:r.prefix||hl(),iconName:Pl(r.prefix,r.iconName)||r.iconName}}if(typeof t=="string"){var i=hl();return{prefix:i,iconName:Pl(i,t)||t}}}},kr={noAuto:gE,config:tt,dom:rE,parse:iE,library:qX,findIconDefinition:wZ,toHtml:md},aE=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.autoReplaceSvgRoot,g=n===void 0?Cn:n;(Object.keys(Xi.styles).length>0||tt.autoFetchSvg)&&Co&&tt.autoReplaceSvg&&kr.dom.i2svg({node:g})};function J0(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(g){return md(g)})}}),Object.defineProperty(e,"node",{get:function(){if(Co){var g=Cn.createElement("div");return g.innerHTML=e.html,g.children}}}),e}function oE(e){var t=e.children,n=e.main,g=e.mask,r=e.attributes,i=e.styles,a=e.transform;if(QG(a)&&n.found&&!g.found){var o=n.width,l=n.height,s={x:o/l/2,y:.5};r.style=R0(Pe(Pe({},i),{},{"transform-origin":"".concat(s.x+a.x/16,"em ").concat(s.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}function lE(e){var t=e.prefix,n=e.iconName,g=e.children,r=e.attributes,i=e.symbol,a=i===!0?"".concat(t,"-").concat(tt.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Pe(Pe({},r),{},{id:a}),children:g}]}]}function qG(e){var t=e.icons,n=t.main,g=t.mask,r=e.prefix,i=e.iconName,a=e.transform,o=e.symbol,l=e.title,s=e.maskId,I=e.titleId,c=e.extra,d=e.watchable,u=d===void 0?!1:d,m=g.found?g:n,f=m.width,y=m.height,h=r==="fak",p=[tt.replacementClass,i?"".concat(tt.cssPrefix,"-").concat(i):""].filter(function(z){return c.classes.indexOf(z)===-1}).filter(function(z){return z!==""||!!z}).concat(c.classes).join(" "),b={children:[],attributes:Pe(Pe({},c.attributes),{},{"data-prefix":r,"data-icon":i,class:p,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(y)})},S=h&&!~c.classes.indexOf("fa-fw")?{width:"".concat(f/y*16*.0625,"em")}:{};u&&(b.attributes[As]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(I||Nu())},children:[l]}),delete b.attributes.title);var X=Pe(Pe({},b),{},{prefix:r,iconName:i,main:n,mask:g,maskId:s,transform:a,symbol:o,styles:Pe(Pe({},S),c.styles)}),W=g.found&&n.found?go("generateAbstractMask",X)||{children:[],attributes:{}}:go("generateAbstractIcon",X)||{children:[],attributes:{}},V=W.children,R=W.attributes;return X.children=V,X.attributes=R,o?lE(X):oE(X)}function iv(e){var t=e.content,n=e.width,g=e.height,r=e.transform,i=e.title,a=e.extra,o=e.watchable,l=o===void 0?!1:o,s=Pe(Pe(Pe({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")});l&&(s[As]="");var I=Pe({},a.styles);QG(r)&&(I.transform=LL({transform:r,startCentered:!0,width:n,height:g}),I["-webkit-transform"]=I.transform);var c=R0(I);c.length>0&&(s.style=c);var d=[];return d.push({tag:"span",attributes:s,children:[t]}),i&&d.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),d}function sE(e){var t=e.content,n=e.title,g=e.extra,r=Pe(Pe(Pe({},g.attributes),n?{title:n}:{}),{},{class:g.classes.join(" ")}),i=R0(g.styles);i.length>0&&(r.style=i);var a=[];return a.push({tag:"span",attributes:r,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var vb=Xi.styles;function XZ(e){var t=e[0],n=e[1],g=e.slice(4),r=MG(g,1),i=r[0],a=null;return Array.isArray(i)?a={tag:"g",attributes:{class:"".concat(tt.cssPrefix,"-").concat(Ql.GROUP)},children:[{tag:"path",attributes:{class:"".concat(tt.cssPrefix,"-").concat(Ql.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(tt.cssPrefix,"-").concat(Ql.PRIMARY),fill:"currentColor",d:i[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:t,height:n,icon:a}}var IE={found:!1,width:512,height:512};function cE(e,t){!xX&&!tt.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function JZ(e,t){var n=t;return t==="fa"&&tt.styleDefault!==null&&(t=hl()),new Promise(function(g,r){if(go("missingIconAbstract"),n==="fa"){var i=_X(e)||{};e=i.iconName||e,t=i.prefix||t}if(e&&t&&vb[t]&&vb[t][e]){var a=vb[t][e];return g(XZ(a))}cE(e,t),g(Pe(Pe({},IE),{},{icon:tt.showMissingIcons&&e?go("missingIconAbstract")||{}:{}}))})}var av=function(){},YZ=tt.measurePerformance&&MA&&MA.mark&&MA.measure?MA:{mark:av,measure:av},xC='FA "6.5.2"',CE=function(t){return YZ.mark("".concat(xC," ").concat(t," begins")),function(){return $X(t)}},$X=function(t){YZ.mark("".concat(xC," ").concat(t," ends")),YZ.measure("".concat(xC," ").concat(t),"".concat(xC," ").concat(t," begins"),"".concat(xC," ").concat(t," ends"))},$G={begin:CE,end:$X},Rh=function(){};function ov(e){var t=e.getAttribute?e.getAttribute(As):null;return typeof t=="string"}function uE(e){var t=e.getAttribute?e.getAttribute(UG):null,n=e.getAttribute?e.getAttribute(TG):null;return t&&n}function dE(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(tt.replacementClass)}function AE(){if(tt.autoReplaceSvg===!0)return wh.replace;var e=wh[tt.autoReplaceSvg];return e||wh.replace}function hE(e){return Cn.createElementNS("http://www.w3.org/2000/svg",e)}function mE(e){return Cn.createElement(e)}function eJ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.ceFn,g=n===void 0?e.tag==="svg"?hE:mE:n;if(typeof e=="string")return Cn.createTextNode(e);var r=g(e.tag);Object.keys(e.attributes||[]).forEach(function(a){r.setAttribute(a,e.attributes[a])});var i=e.children||[];return i.forEach(function(a){r.appendChild(eJ(a,{ceFn:g}))}),r}function fE(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var wh={replace:function(t){var n=t[0];if(n.parentNode)if(t[1].forEach(function(r){n.parentNode.insertBefore(eJ(r),n)}),n.getAttribute(As)===null&&tt.keepOriginalSource){var g=Cn.createComment(fE(n));n.parentNode.replaceChild(g,n)}else n.remove()},nest:function(t){var n=t[0],g=t[1];if(~jG(n).indexOf(tt.replacementClass))return wh.replace(t);var r=new RegExp("".concat(tt.cssPrefix,"-.*"));if(delete g[0].attributes.id,g[0].attributes.class){var i=g[0].attributes.class.split(" ").reduce(function(o,l){return l===tt.replacementClass||l.match(r)?o.toSvg.push(l):o.toNode.push(l),o},{toNode:[],toSvg:[]});g[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",i.toNode.join(" "))}var a=g.map(function(o){return md(o)}).join(`
`);n.setAttribute(As,""),n.innerHTML=a}};function lv(e){e()}function tJ(e,t){var n=typeof t=="function"?t:Rh;if(e.length===0)n();else{var g=lv;tt.mutateApproach===GL&&(g=Al.requestAnimationFrame||lv),g(function(){var r=AE(),i=$G.begin("mutate");e.map(r),i(),n()})}}var e1=!1;function nJ(){e1=!0}function NZ(){e1=!1}var Sm=null;function sv(e){if(q5&&tt.observeMutations){var t=e.treeCallback,n=t===void 0?Rh:t,g=e.nodeCallback,r=g===void 0?Rh:g,i=e.pseudoElementsCallback,a=i===void 0?Rh:i,o=e.observeMutationsRoot,l=o===void 0?Cn:o;Sm=new q5(function(s){if(!e1){var I=hl();Gc(s).forEach(function(c){if(c.type==="childList"&&c.addedNodes.length>0&&!ov(c.addedNodes[0])&&(tt.searchPseudoElements&&a(c.target),n(c.target)),c.type==="attributes"&&c.target.parentNode&&tt.searchPseudoElements&&a(c.target.parentNode),c.type==="attributes"&&ov(c.target)&&~RL.indexOf(c.attributeName))if(c.attributeName==="class"&&uE(c.target)){var d=X0(jG(c.target)),u=d.prefix,m=d.iconName;c.target.setAttribute(UG,u||I),m&&c.target.setAttribute(TG,m)}else dE(c.target)&&r(c.target)})}}),Co&&Sm.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function pE(){Sm&&Sm.disconnect()}function bE(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce(function(g,r){var i=r.split(":"),a=i[0],o=i.slice(1);return a&&o.length>0&&(g[a]=o.join(":").trim()),g},{})),n}function yE(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),g=e.innerText!==void 0?e.innerText.trim():"",r=X0(jG(e));return r.prefix||(r.prefix=hl()),t&&n&&(r.prefix=t,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&g.length>0&&(r.iconName=qL(r.prefix,e.innerText)||OG(r.prefix,VZ(e.innerText))),!r.iconName&&tt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=e.firstChild.data)),r}function ZE(e){var t=Gc(e.attributes).reduce(function(r,i){return r.name!=="class"&&r.name!=="style"&&(r[i.name]=i.value),r},{}),n=e.getAttribute("title"),g=e.getAttribute("data-fa-title-id");return tt.autoA11y&&(n?t["aria-labelledby"]="".concat(tt.replacementClass,"-title-").concat(g||Nu()):(t["aria-hidden"]="true",t.focusable="false")),t}function GE(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ia,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Iv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=yE(e),g=n.iconName,r=n.prefix,i=n.rest,a=ZE(e),o=RZ("parseNodeAttributes",{},e),l=t.styleParser?bE(e):[];return Pe({iconName:g,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Ia,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:l,attributes:a}},o)}var BE=Xi.styles;function gJ(e){var t=tt.autoReplaceSvg==="nest"?Iv(e,{styleParser:!1}):Iv(e);return~t.extra.classes.indexOf(KX)?go("generateLayersText",e,t):go("generateSvgReplacementMutation",e,t)}var ml=new Set;DG.map(function(e){ml.add("fa-".concat(e))});Object.keys(wu[sn]).map(ml.add.bind(ml));Object.keys(wu[Xn]).map(ml.add.bind(ml));ml=Ad(ml);function cv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Co)return Promise.resolve();var n=Cn.documentElement.classList,g=function(c){return n.add("".concat($5,"-").concat(c))},r=function(c){return n.remove("".concat($5,"-").concat(c))},i=tt.autoFetchSvg?ml:DG.map(function(I){return"fa-".concat(I)}).concat(Object.keys(BE));i.includes("fa")||i.push("fa");var a=[".".concat(KX,":not([").concat(As,"])")].concat(i.map(function(I){return".".concat(I,":not([").concat(As,"])")})).join(", ");if(a.length===0)return Promise.resolve();var o=[];try{o=Gc(e.querySelectorAll(a))}catch{}if(o.length>0)g("pending"),r("complete");else return Promise.resolve();var l=$G.begin("onTree"),s=o.reduce(function(I,c){try{var d=gJ(c);d&&I.push(d)}catch(u){xX||u.name==="MissingIcon"&&console.error(u)}return I},[]);return new Promise(function(I,c){Promise.all(s).then(function(d){tJ(d,function(){g("active"),g("complete"),r("pending"),typeof t=="function"&&t(),l(),I()})}).catch(function(d){l(),c(d)})})}function SE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;gJ(e).then(function(n){n&&tJ([n],t)})}function vE(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=(t||{}).icon?t:wZ(t||{}),r=n.mask;return r&&(r=(r||{}).icon?r:wZ(r||{})),e(g,Pe(Pe({},n),{},{mask:r}))}}var WE=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=n.transform,r=g===void 0?Ia:g,i=n.symbol,a=i===void 0?!1:i,o=n.mask,l=o===void 0?null:o,s=n.maskId,I=s===void 0?null:s,c=n.title,d=c===void 0?null:c,u=n.titleId,m=u===void 0?null:u,f=n.classes,y=f===void 0?[]:f,h=n.attributes,p=h===void 0?{}:h,b=n.styles,S=b===void 0?{}:b;if(t){var X=t.prefix,W=t.iconName,V=t.icon;return J0(Pe({type:"icon"},t),function(){return hs("beforeDOMElementCreation",{iconDefinition:t,params:n}),tt.autoA11y&&(d?p["aria-labelledby"]="".concat(tt.replacementClass,"-title-").concat(m||Nu()):(p["aria-hidden"]="true",p.focusable="false")),qG({icons:{main:XZ(V),mask:l?XZ(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:W,transform:Pe(Pe({},Ia),r),symbol:a,title:d,maskId:I,titleId:m,extra:{attributes:p,styles:S,classes:y}})})}},VE={mixout:function(){return{icon:vE(WE)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=cv,n.nodeCallback=SE,n}}},provides:function(t){t.i2svg=function(n){var g=n.node,r=g===void 0?Cn:g,i=n.callback,a=i===void 0?function(){}:i;return cv(r,a)},t.generateSvgReplacementMutation=function(n,g){var r=g.iconName,i=g.title,a=g.titleId,o=g.prefix,l=g.transform,s=g.symbol,I=g.mask,c=g.maskId,d=g.extra;return new Promise(function(u,m){Promise.all([JZ(r,o),I.iconName?JZ(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(f){var y=MG(f,2),h=y[0],p=y[1];u([n,qG({icons:{main:h,mask:p},prefix:o,iconName:r,transform:l,symbol:s,maskId:c,title:i,titleId:a,extra:d,watchable:!0})])}).catch(m)})},t.generateAbstractIcon=function(n){var g=n.children,r=n.attributes,i=n.main,a=n.transform,o=n.styles,l=R0(o);l.length>0&&(r.style=l);var s;return QG(a)&&(s=go("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),g.push(s||i.icon),{children:g,attributes:r}}}},kE={mixout:function(){return{layer:function(n){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=g.classes,i=r===void 0?[]:r;return J0({type:"layer"},function(){hs("beforeDOMElementCreation",{assembler:n,params:g});var a=[];return n(function(o){Array.isArray(o)?o.map(function(l){a=a.concat(l.abstract)}):a=a.concat(o.abstract)}),[{tag:"span",attributes:{class:["".concat(tt.cssPrefix,"-layers")].concat(Ad(i)).join(" ")},children:a}]})}}}},RE={mixout:function(){return{counter:function(n){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=g.title,i=r===void 0?null:r,a=g.classes,o=a===void 0?[]:a,l=g.attributes,s=l===void 0?{}:l,I=g.styles,c=I===void 0?{}:I;return J0({type:"counter",content:n},function(){return hs("beforeDOMElementCreation",{content:n,params:g}),sE({content:n.toString(),title:i,extra:{attributes:s,styles:c,classes:["".concat(tt.cssPrefix,"-layers-counter")].concat(Ad(o))}})})}}}},wE={mixout:function(){return{text:function(n){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=g.transform,i=r===void 0?Ia:r,a=g.title,o=a===void 0?null:a,l=g.classes,s=l===void 0?[]:l,I=g.attributes,c=I===void 0?{}:I,d=g.styles,u=d===void 0?{}:d;return J0({type:"text",content:n},function(){return hs("beforeDOMElementCreation",{content:n,params:g}),iv({content:n,transform:Pe(Pe({},Ia),i),title:o,extra:{attributes:c,styles:u,classes:["".concat(tt.cssPrefix,"-layers-text")].concat(Ad(s))}})})}}},provides:function(t){t.generateLayersText=function(n,g){var r=g.title,i=g.transform,a=g.extra,o=null,l=null;if(NX){var s=parseInt(getComputedStyle(n).fontSize,10),I=n.getBoundingClientRect();o=I.width/s,l=I.height/s}return tt.autoA11y&&!r&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,iv({content:n.innerHTML,width:o,height:l,transform:i,title:r,extra:a,watchable:!0})])}}},XE=new RegExp('"',"ug"),Cv=[1105920,1112319];function JE(e){var t=e.replace(XE,""),n=DL(t,0),g=n>=Cv[0]&&n<=Cv[1],r=t.length===2?t[0]===t[1]:!1;return{value:VZ(r?t[0]:t),isSecondary:g||r}}function uv(e,t){var n="".concat(ZL).concat(t.replace(":","-"));return new Promise(function(g,r){if(e.getAttribute(n)!==null)return g();var i=Gc(e.children),a=i.filter(function(V){return V.getAttribute(WZ)===t})[0],o=Al.getComputedStyle(e,t),l=o.getPropertyValue("font-family").match(WL),s=o.getPropertyValue("font-weight"),I=o.getPropertyValue("content");if(a&&!l)return e.removeChild(a),g();if(l&&I!=="none"&&I!==""){var c=o.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Xn:sn,u=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Xu[d][l[2].toLowerCase()]:VL[d][s],m=JE(c),f=m.value,y=m.isSecondary,h=l[0].startsWith("FontAwesome"),p=OG(u,f),b=p;if(h){var S=$L(f);S.iconName&&S.prefix&&(p=S.iconName,u=S.prefix)}if(p&&!y&&(!a||a.getAttribute(UG)!==u||a.getAttribute(TG)!==b)){e.setAttribute(n,b),a&&e.removeChild(a);var X=GE(),W=X.extra;W.attributes[WZ]=t,JZ(p,u).then(function(V){var R=qG(Pe(Pe({},X),{},{icons:{main:V,mask:_G()},prefix:u,iconName:b,extra:W,watchable:!0})),z=Cn.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(z,e.firstChild):e.appendChild(z),z.outerHTML=R.map(function(L){return md(L)}).join(`
`),e.removeAttribute(n),g()}).catch(r)}else g()}else g()})}function YE(e){return Promise.all([uv(e,"::before"),uv(e,"::after")])}function NE(e){return e.parentNode!==document.head&&!~BL.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(WZ)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function dv(e){if(Co)return new Promise(function(t,n){var g=Gc(e.querySelectorAll("*")).filter(NE).map(YE),r=$G.begin("searchPseudoElements");nJ(),Promise.all(g).then(function(){r(),NZ(),t()}).catch(function(){r(),NZ(),n()})})}var HE={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=dv,n}}},provides:function(t){t.pseudoElements2svg=function(n){var g=n.node,r=g===void 0?Cn:g;tt.searchPseudoElements&&dv(r)}}},Av=!1,FE={mixout:function(){return{dom:{unwatch:function(){nJ(),Av=!0}}}},hooks:function(){return{bootstrap:function(){sv(RZ("mutationObserverCallbacks",{}))},noAuto:function(){pE()},watch:function(n){var g=n.observeMutationsRoot;Av?NZ():sv(RZ("mutationObserverCallbacks",{observeMutationsRoot:g}))}}}},hv=function(t){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(g,r){var i=r.toLowerCase().split("-"),a=i[0],o=i.slice(1).join("-");if(a&&o==="h")return g.flipX=!0,g;if(a&&o==="v")return g.flipY=!0,g;if(o=parseFloat(o),isNaN(o))return g;switch(a){case"grow":g.size=g.size+o;break;case"shrink":g.size=g.size-o;break;case"left":g.x=g.x-o;break;case"right":g.x=g.x+o;break;case"up":g.y=g.y-o;break;case"down":g.y=g.y+o;break;case"rotate":g.rotate=g.rotate+o;break}return g},n)},xE={mixout:function(){return{parse:{transform:function(n){return hv(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,g){var r=g.getAttribute("data-fa-transform");return r&&(n.transform=hv(r)),n}}},provides:function(t){t.generateAbstractTransformGrouping=function(n){var g=n.main,r=n.transform,i=n.containerWidth,a=n.iconWidth,o={transform:"translate(".concat(i/2," 256)")},l="translate(".concat(r.x*32,", ").concat(r.y*32,") "),s="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),I="rotate(".concat(r.rotate," 0 0)"),c={transform:"".concat(l," ").concat(s," ").concat(I)},d={transform:"translate(".concat(a/2*-1," -256)")},u={outer:o,inner:c,path:d};return{tag:"g",attributes:Pe({},u.outer),children:[{tag:"g",attributes:Pe({},u.inner),children:[{tag:g.icon.tag,children:g.icon.children,attributes:Pe(Pe({},g.icon.attributes),u.path)}]}]}}}},Wb={x:0,y:0,width:"100%",height:"100%"};function mv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function KE(e){return e.tag==="g"?e.children:[e]}var LE={hooks:function(){return{parseNodeAttributes:function(n,g){var r=g.getAttribute("data-fa-mask"),i=r?X0(r.split(" ").map(function(a){return a.trim()})):_G();return i.prefix||(i.prefix=hl()),n.mask=i,n.maskId=g.getAttribute("data-fa-mask-id"),n}}},provides:function(t){t.generateAbstractMask=function(n){var g=n.children,r=n.attributes,i=n.main,a=n.mask,o=n.maskId,l=n.transform,s=i.width,I=i.icon,c=a.width,d=a.icon,u=KL({transform:l,containerWidth:c,iconWidth:s}),m={tag:"rect",attributes:Pe(Pe({},Wb),{},{fill:"white"})},f=I.children?{children:I.children.map(mv)}:{},y={tag:"g",attributes:Pe({},u.inner),children:[mv(Pe({tag:I.tag,attributes:Pe(Pe({},I.attributes),u.path)},f))]},h={tag:"g",attributes:Pe({},u.outer),children:[y]},p="mask-".concat(o||Nu()),b="clip-".concat(o||Nu()),S={tag:"mask",attributes:Pe(Pe({},Wb),{},{id:p,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[m,h]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:KE(d)},S]};return g.push(X,{tag:"rect",attributes:Pe({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(p,")")},Wb)}),{children:g,attributes:r}}}},EE={provides:function(t){var n=!1;Al.matchMedia&&(n=Al.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var g=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};g.push({tag:"path",attributes:Pe(Pe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=Pe(Pe({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Pe(Pe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||o.children.push({tag:"animate",attributes:Pe(Pe({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Pe(Pe({},a),{},{values:"1;0;1;1;0;1;"})}),g.push(o),g.push({tag:"path",attributes:Pe(Pe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:Pe(Pe({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||g.push({tag:"path",attributes:Pe(Pe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Pe(Pe({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:g}}}},ME={hooks:function(){return{parseNodeAttributes:function(n,g){var r=g.getAttribute("data-fa-symbol"),i=r===null?!1:r===""?!0:r;return n.symbol=i,n}}}},zE=[ML,VE,kE,RE,wE,HE,FE,xE,LE,EE,ME];nE(zE,{mixoutsTo:kr});kr.noAuto;kr.config;kr.library;kr.dom;var HZ=kr.parse;kr.findIconDefinition;kr.toHtml;var UE=kr.icon;kr.layer;kr.text;kr.counter;function fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,g)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fv(Object(n),!0).forEach(function(g){YI(e,g,n[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(n,g))})}return e}function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function YI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TE(e,t){if(e==null)return{};var n={},g=Object.keys(e),r,i;for(i=0;i<g.length;i++)r=g[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function DE(e,t){if(e==null)return{};var n=TE(e,t),g,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)g=i[r],!(t.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(e,g)&&(n[g]=e[g])}return n}function FZ(e){return jE(e)||QE(e)||PE(e)||OE()}function jE(e){if(Array.isArray(e))return xZ(e)}function QE(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PE(e,t){if(e){if(typeof e=="string")return xZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xZ(e,t)}}function xZ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,g=new Array(t);n<t;n++)g[n]=e[n];return g}function OE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _E(e){var t,n=e.beat,g=e.fade,r=e.beatFade,i=e.bounce,a=e.shake,o=e.flash,l=e.spin,s=e.spinPulse,I=e.spinReverse,c=e.pulse,d=e.fixedWidth,u=e.inverse,m=e.border,f=e.listItem,y=e.flip,h=e.size,p=e.rotation,b=e.pull,S=(t={"fa-beat":n,"fa-fade":g,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":a,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":I,"fa-spin-pulse":s,"fa-pulse":c,"fa-fw":d,"fa-inverse":u,"fa-border":m,"fa-li":f,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},YI(t,"fa-".concat(h),typeof h<"u"&&h!==null),YI(t,"fa-rotate-".concat(p),typeof p<"u"&&p!==null&&p!==0),YI(t,"fa-pull-".concat(b),typeof b<"u"&&b!==null),YI(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(S).map(function(X){return S[X]?X:null}).filter(function(X){return X})}function qE(e){return e=e-0,e===e}function rJ(e){return qE(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var $E=["style"];function eM(e){return e.charAt(0).toUpperCase()+e.slice(1)}function tM(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var g=n.indexOf(":"),r=rJ(n.slice(0,g)),i=n.slice(g+1).trim();return r.startsWith("webkit")?t[eM(r)]=i:t[r]=i,t},{})}function iJ(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var g=(t.children||[]).map(function(l){return iJ(e,l)}),r=Object.keys(t.attributes||{}).reduce(function(l,s){var I=t.attributes[s];switch(s){case"class":l.attrs.className=I,delete t.attributes.class;break;case"style":l.attrs.style=tM(I);break;default:s.indexOf("aria-")===0||s.indexOf("data-")===0?l.attrs[s.toLowerCase()]=I:l.attrs[rJ(s)]=I}return l},{attrs:{}}),i=n.style,a=i===void 0?{}:i,o=DE(n,$E);return r.attrs.style=ra(ra({},r.attrs.style),a),e.apply(void 0,[t.tag,ra(ra({},r.attrs),o)].concat(FZ(g)))}var aJ=!1;try{aJ=!0}catch{}function nM(){if(!aJ&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function pv(e){if(e&&vm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(HZ.icon)return HZ.icon(e);if(e===null)return null;if(e&&vm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Vb(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?YI({},e,t):{}}var bv={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Ri=I0.forwardRef(function(e,t){var n=ra(ra({},bv),e),g=n.icon,r=n.mask,i=n.symbol,a=n.className,o=n.title,l=n.titleId,s=n.maskId,I=pv(g),c=Vb("classes",[].concat(FZ(_E(n)),FZ((a||"").split(" ")))),d=Vb("transform",typeof n.transform=="string"?HZ.transform(n.transform):n.transform),u=Vb("mask",pv(r)),m=UE(I,ra(ra(ra(ra({},c),d),u),{},{symbol:i,title:o,titleId:l,maskId:s}));if(!m)return nM("Could not find icon",I),null;var f=m.abstract,y={ref:t};return Object.keys(n).forEach(function(h){bv.hasOwnProperty(h)||(y[h]=n[h])}),gM(f[0],y)});Ri.displayName="FontAwesomeIcon";Ri.propTypes={beat:Gt.bool,border:Gt.bool,beatFade:Gt.bool,bounce:Gt.bool,className:Gt.string,fade:Gt.bool,flash:Gt.bool,mask:Gt.oneOfType([Gt.object,Gt.array,Gt.string]),maskId:Gt.string,fixedWidth:Gt.bool,inverse:Gt.bool,flip:Gt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Gt.oneOfType([Gt.object,Gt.array,Gt.string]),listItem:Gt.bool,pull:Gt.oneOf(["right","left"]),pulse:Gt.bool,rotation:Gt.oneOf([0,90,180,270]),shake:Gt.bool,size:Gt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Gt.bool,spinPulse:Gt.bool,spinReverse:Gt.bool,symbol:Gt.oneOfType([Gt.bool,Gt.string]),title:Gt.string,titleId:Gt.string,transform:Gt.oneOfType([Gt.string,Gt.object]),swapOpacity:Gt.bool};var gM=iJ.bind(null,I0.createElement),rM={prefix:"fas",iconName:"door-open",icon:[576,512,[],"f52b","M320 32c0-9.9-4.5-19.2-12.3-25.2S289.8-1.4 280.2 1l-179.9 45C79 51.3 64 70.5 64 92.5V448H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H96 288h32V480 32zM256 256c0 17.7-10.7 32-24 32s-24-14.3-24-32s10.7-32 24-32s24 14.3 24 32zm96-128h96V480c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H512V128c0-35.3-28.7-64-64-64H352v64z"]},iM={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},aM={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},oM={prefix:"fas",iconName:"chart-bar",icon:[512,512,["bar-chart"],"f080","M32 32c17.7 0 32 14.3 32 32V400c0 8.8 7.2 16 16 16H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-44.2 0-80-35.8-80-80V64C0 46.3 14.3 32 32 32zm96 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 64H288c17.7 0 32 14.3 32 32s-14.3 32-32 32H160c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 96H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H160c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Hu={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},Wm={prefix:"fas",iconName:"angle-up",icon:[448,512,[8963],"f106","M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"]},lM={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};const sM=()=>{const[e,t]=_.useState(!1),[n,g]=_.useState(Hu),[r,i]=_.useState(null),a=_.useRef(null),o=Bl();_.useEffect(()=>{const I=c=>{a.current&&!a.current.contains(c.target)&&t(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]),_.useEffect(()=>{const I=sessionStorage.getItem("usuario");I&&i(JSON.parse(I))},[]);const l=()=>{r?(t(!e),g(e?Hu:Wm)):o("/IniciarSesionUsuario")},s=()=>{sessionStorage.removeItem("usuario"),sessionStorage.removeItem("usuarioId"),i(null),t(!1),o("/IniciarSesionUsuario")};return G.jsxs("div",{className:"dropdown",ref:a,children:[G.jsxs("button",{onClick:l,className:"dropdown-toggle",children:[r?r.nombre:"Iniciar sesión",r&&G.jsx(Ri,{icon:n})]}),e&&r&&G.jsxs("ul",{className:"dropdown-menu",children:[G.jsx(Qn,{to:"/PerfilCliente",children:G.jsxs("li",{children:[G.jsx(Ri,{icon:aM})," Ver mi perfil"]})}),G.jsx(Qn,{to:"/Metas",children:G.jsxs("li",{children:[G.jsx(Ri,{icon:lM})," Metas"]})}),G.jsx(Qn,{to:"/EvaluacionUsuario",children:G.jsxs("li",{children:[G.jsx(Ri,{icon:oM})," Ver progreso"]})}),G.jsxs("li",{onClick:s,children:[G.jsx(Ri,{icon:rM})," Cerrar sesión"]})]})]})},IM=()=>{const[e,t]=_.useState(!1),[n,g]=_.useState(!1),[r,i]=_.useState(!1),[a,o]=_.useState(null),l=_.useRef(null);_.useEffect(()=>{const d=sessionStorage.getItem("usuario");d&&o(JSON.parse(d))},[]),_.useEffect(()=>{const d=u=>{l.current&&!l.current.contains(u.target)&&(t(!1),g(!1),i(!1))};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const s=()=>{t(!e)},I=()=>{g(!n)},c=()=>{i(!r)};return a?G.jsxs("div",{className:"menu-opciones",ref:l,children:[G.jsx("button",{onClick:s,className:"menu-boton-desplegar",children:G.jsx(Ri,{icon:iM})}),e&&G.jsxs("ul",{className:"menu-lista",children:[G.jsx(Qn,{to:"/",children:G.jsx("li",{children:"Inicio"})}),G.jsxs("li",{onClick:c,children:["Información de máquinas general"," ",G.jsx(Ri,{icon:r?Wm:Hu})]}),r&&G.jsxs(G.Fragment,{children:[G.jsx(Qn,{to:"/InfoMaquinas",children:G.jsx("li",{className:"sub-item",children:"Información de máquinas"})}),G.jsx(Qn,{to:"/InfoMaquinasQR",children:G.jsx("li",{className:"sub-item",children:"Escanear máquina"})})]}),G.jsxs("li",{onClick:I,children:["Rutinas ",G.jsx(Ri,{icon:n?Wm:Hu})]}),n&&G.jsxs(G.Fragment,{children:[G.jsx(Qn,{to:"/GenerarRutina",children:G.jsx("li",{className:"sub-item",children:"Generar mi propia rutina"})}),G.jsx(Qn,{to:"/GenerarRutinaIa",children:G.jsx("li",{className:"sub-item",children:"Generar rutina con IA"})}),G.jsx(Qn,{to:"/Entrenadores",children:G.jsx("li",{className:"sub-item",children:"Rutina con instructor"})}),G.jsx(Qn,{to:"/VerRutinas",children:G.jsx("li",{className:"sub-item",children:"Ver rutina"})})]}),G.jsx(Qn,{to:"/RegistroEvaluacion",children:G.jsx("li",{children:"Registrar evolución"})}),G.jsx(Qn,{to:"/EvaluacionUsuario",children:G.jsx("li",{children:"Ver evolución"})}),G.jsx(Qn,{to:"/Chat",children:G.jsx("li",{children:"Asesoramiento"})}),a.rol==="administrador"&&G.jsxs(G.Fragment,{children:[G.jsx(Qn,{to:"/AdministrarEntrenador",children:G.jsx("li",{children:"Administrar entrenadores"})}),G.jsx(Qn,{to:"/AdministrarUsuario",children:G.jsx("li",{children:"Administrar usuarios"})})]})]})]}):null},Yg=()=>G.jsxs("nav",{className:"barra-navegacion",children:[G.jsx(IM,{}),G.jsx(sM,{})]}),cM="https://ferchox.github.io/territoriof4-13/assets/gym-logo-sin-fondo-Dh3XK0vM.png",Ng=()=>G.jsx("div",{children:G.jsx("header",{className:"contenedor-cabecera",children:G.jsx("div",{className:"logo-gym",children:G.jsx(Qn,{to:"/",children:G.jsx("img",{src:cM,alt:"Gym Logo",className:"logo-image"})})})})}),CM=()=>G.jsx("p",{children:"© 2024 SeedProgramming"}),uM=()=>G.jsxs("p",{children:["Contacto: ",G.jsx("a",{href:"mailto:contacto@seedprogramming.com",children:"contacto@seedprogramming.com"})]}),dM=()=>G.jsxs("div",{children:[G.jsx("a",{href:"https://www.facebook.com/",target:"_blank",rel:"noopener noreferrer",children:"Facebook"}),G.jsx("br",{}),G.jsx("a",{href:"https://www.twitter.com/",target:"_blank",rel:"noopener noreferrer",children:"Twitter"}),G.jsx("br",{}),G.jsx("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",children:"Instagram"})]}),Hg=()=>G.jsxs("footer",{className:"contenedor-pie-pagina",children:[G.jsxs("div",{className:"pie-texto",children:[G.jsx(CM,{}),G.jsx(uM,{})]}),G.jsx("div",{className:"redes-sociales",children:G.jsx(dM,{})})]}),AM=()=>G.jsxs("div",{className:"contenedor-inicio",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(cL,{}),G.jsx(Hg,{})]}),t1=({mensaje:e,tipo:t})=>e?G.jsx("div",{className:`aviso ${t}`,children:e}):null;function oJ(e,t){return function(){return e.apply(t,arguments)}}const{toString:hM}=Object.prototype,{getPrototypeOf:n1}=Object,Y0=(e=>t=>{const n=hM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ei=e=>(e=e.toLowerCase(),t=>Y0(t)===e),N0=e=>t=>typeof t===e,{isArray:Bc}=Array,Fu=N0("undefined");function mM(e){return e!==null&&!Fu(e)&&e.constructor!==null&&!Fu(e.constructor)&&_r(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const lJ=Ei("ArrayBuffer");function fM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&lJ(e.buffer),t}const pM=N0("string"),_r=N0("function"),sJ=N0("number"),H0=e=>e!==null&&typeof e=="object",bM=e=>e===!0||e===!1,Xh=e=>{if(Y0(e)!=="object")return!1;const t=n1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yM=Ei("Date"),ZM=Ei("File"),GM=Ei("Blob"),BM=Ei("FileList"),SM=e=>H0(e)&&_r(e.pipe),vM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_r(e.append)&&((t=Y0(e))==="formdata"||t==="object"&&_r(e.toString)&&e.toString()==="[object FormData]"))},WM=Ei("URLSearchParams"),[VM,kM,RM,wM]=["ReadableStream","Request","Response","Headers"].map(Ei),XM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let g,r;if(typeof e!="object"&&(e=[e]),Bc(e))for(g=0,r=e.length;g<r;g++)t.call(null,e[g],g,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let o;for(g=0;g<a;g++)o=i[g],t.call(null,e[o],o,e)}}function IJ(e,t){t=t.toLowerCase();const n=Object.keys(e);let g=n.length,r;for(;g-- >0;)if(r=n[g],t===r.toLowerCase())return r;return null}const cJ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CJ=e=>!Fu(e)&&e!==cJ;function KZ(){const{caseless:e}=CJ(this)&&this||{},t={},n=(g,r)=>{const i=e&&IJ(t,r)||r;Xh(t[i])&&Xh(g)?t[i]=KZ(t[i],g):Xh(g)?t[i]=KZ({},g):Bc(g)?t[i]=g.slice():t[i]=g};for(let g=0,r=arguments.length;g<r;g++)arguments[g]&&fd(arguments[g],n);return t}const JM=(e,t,n,{allOwnKeys:g}={})=>(fd(t,(r,i)=>{n&&_r(r)?e[i]=oJ(r,n):e[i]=r},{allOwnKeys:g}),e),YM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),NM=(e,t,n,g)=>{e.prototype=Object.create(t.prototype,g),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},HM=(e,t,n,g)=>{let r,i,a;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],(!g||g(a,e,t))&&!o[a]&&(t[a]=e[a],o[a]=!0);e=n!==!1&&n1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},FM=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const g=e.indexOf(t,n);return g!==-1&&g===n},xM=e=>{if(!e)return null;if(Bc(e))return e;let t=e.length;if(!sJ(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},KM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&n1(Uint8Array)),LM=(e,t)=>{const g=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=g.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},EM=(e,t)=>{let n;const g=[];for(;(n=e.exec(t))!==null;)g.push(n);return g},MM=Ei("HTMLFormElement"),zM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,g,r){return g.toUpperCase()+r}),yv=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),UM=Ei("RegExp"),uJ=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),g={};fd(n,(r,i)=>{let a;(a=t(r,i,e))!==!1&&(g[i]=a||r)}),Object.defineProperties(e,g)},TM=e=>{uJ(e,(t,n)=>{if(_r(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const g=e[n];if(_r(g)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},DM=(e,t)=>{const n={},g=r=>{r.forEach(i=>{n[i]=!0})};return Bc(e)?g(e):g(String(e).split(t)),n},jM=()=>{},QM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,kb="abcdefghijklmnopqrstuvwxyz",Zv="0123456789",dJ={DIGIT:Zv,ALPHA:kb,ALPHA_DIGIT:kb+kb.toUpperCase()+Zv},PM=(e=16,t=dJ.ALPHA_DIGIT)=>{let n="";const{length:g}=t;for(;e--;)n+=t[Math.random()*g|0];return n};function OM(e){return!!(e&&_r(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const _M=e=>{const t=new Array(10),n=(g,r)=>{if(H0(g)){if(t.indexOf(g)>=0)return;if(!("toJSON"in g)){t[r]=g;const i=Bc(g)?[]:{};return fd(g,(a,o)=>{const l=n(a,r+1);!Fu(l)&&(i[o]=l)}),t[r]=void 0,i}}return g};return n(e,0)},qM=Ei("AsyncFunction"),$M=e=>e&&(H0(e)||_r(e))&&_r(e.then)&&_r(e.catch),Ze={isArray:Bc,isArrayBuffer:lJ,isBuffer:mM,isFormData:vM,isArrayBufferView:fM,isString:pM,isNumber:sJ,isBoolean:bM,isObject:H0,isPlainObject:Xh,isReadableStream:VM,isRequest:kM,isResponse:RM,isHeaders:wM,isUndefined:Fu,isDate:yM,isFile:ZM,isBlob:GM,isRegExp:UM,isFunction:_r,isStream:SM,isURLSearchParams:WM,isTypedArray:KM,isFileList:BM,forEach:fd,merge:KZ,extend:JM,trim:XM,stripBOM:YM,inherits:NM,toFlatObject:HM,kindOf:Y0,kindOfTest:Ei,endsWith:FM,toArray:xM,forEachEntry:LM,matchAll:EM,isHTMLForm:MM,hasOwnProperty:yv,hasOwnProp:yv,reduceDescriptors:uJ,freezeMethods:TM,toObjectSet:DM,toCamelCase:zM,noop:jM,toFiniteNumber:QM,findKey:IJ,global:cJ,isContextDefined:CJ,ALPHABET:dJ,generateString:PM,isSpecCompliantForm:OM,toJSONObject:_M,isAsyncFn:qM,isThenable:$M};function yt(e,t,n,g,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),g&&(this.request=g),r&&(this.response=r)}Ze.inherits(yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ze.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const AJ=yt.prototype,hJ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{hJ[e]={value:e}});Object.defineProperties(yt,hJ);Object.defineProperty(AJ,"isAxiosError",{value:!0});yt.from=(e,t,n,g,r,i)=>{const a=Object.create(AJ);return Ze.toFlatObject(e,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),yt.call(a,e.message,t,n,g,r),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const e4=null;function LZ(e){return Ze.isPlainObject(e)||Ze.isArray(e)}function mJ(e){return Ze.endsWith(e,"[]")?e.slice(0,-2):e}function Gv(e,t,n){return e?e.concat(t).map(function(r,i){return r=mJ(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function t4(e){return Ze.isArray(e)&&!e.some(LZ)}const n4=Ze.toFlatObject(Ze,{},null,function(t){return/^is[A-Z]/.test(t)});function F0(e,t,n){if(!Ze.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ze.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,y){return!Ze.isUndefined(y[f])});const g=n.metaTokens,r=n.visitor||I,i=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ze.isSpecCompliantForm(t);if(!Ze.isFunction(r))throw new TypeError("visitor must be a function");function s(m){if(m===null)return"";if(Ze.isDate(m))return m.toISOString();if(!l&&Ze.isBlob(m))throw new yt("Blob is not supported. Use a Buffer instead.");return Ze.isArrayBuffer(m)||Ze.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function I(m,f,y){let h=m;if(m&&!y&&typeof m=="object"){if(Ze.endsWith(f,"{}"))f=g?f:f.slice(0,-2),m=JSON.stringify(m);else if(Ze.isArray(m)&&t4(m)||(Ze.isFileList(m)||Ze.endsWith(f,"[]"))&&(h=Ze.toArray(m)))return f=mJ(f),h.forEach(function(b,S){!(Ze.isUndefined(b)||b===null)&&t.append(a===!0?Gv([f],S,i):a===null?f:f+"[]",s(b))}),!1}return LZ(m)?!0:(t.append(Gv(y,f,i),s(m)),!1)}const c=[],d=Object.assign(n4,{defaultVisitor:I,convertValue:s,isVisitable:LZ});function u(m,f){if(!Ze.isUndefined(m)){if(c.indexOf(m)!==-1)throw Error("Circular reference detected in "+f.join("."));c.push(m),Ze.forEach(m,function(h,p){(!(Ze.isUndefined(h)||h===null)&&r.call(t,h,Ze.isString(p)?p.trim():p,f,d))===!0&&u(h,f?f.concat(p):[p])}),c.pop()}}if(!Ze.isObject(e))throw new TypeError("data must be an object");return u(e),t}function Bv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(g){return t[g]})}function g1(e,t){this._pairs=[],e&&F0(e,this,t)}const fJ=g1.prototype;fJ.append=function(t,n){this._pairs.push([t,n])};fJ.toString=function(t){const n=t?function(g){return t.call(this,g,Bv)}:Bv;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function g4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pJ(e,t,n){if(!t)return e;const g=n&&n.encode||g4,r=n&&n.serialize;let i;if(r?i=r(t,n):i=Ze.isURLSearchParams(t)?t.toString():new g1(t,n).toString(g),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Sv{constructor(){this.handlers=[]}use(t,n,g){return this.handlers.push({fulfilled:t,rejected:n,synchronous:g?g.synchronous:!1,runWhen:g?g.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ze.forEach(this.handlers,function(g){g!==null&&t(g)})}}const bJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r4=typeof URLSearchParams<"u"?URLSearchParams:g1,i4=typeof FormData<"u"?FormData:null,a4=typeof Blob<"u"?Blob:null,o4={isBrowser:!0,classes:{URLSearchParams:r4,FormData:i4,Blob:a4},protocols:["http","https","file","blob","url","data"]},r1=typeof window<"u"&&typeof document<"u",l4=(e=>r1&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),s4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I4=r1&&window.location.href||"http://localhost",c4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:r1,hasStandardBrowserEnv:l4,hasStandardBrowserWebWorkerEnv:s4,origin:I4},Symbol.toStringTag,{value:"Module"})),Fi={...c4,...o4};function C4(e,t){return F0(e,new Fi.classes.URLSearchParams,Object.assign({visitor:function(n,g,r,i){return Fi.isNode&&Ze.isBuffer(n)?(this.append(g,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function u4(e){return Ze.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function d4(e){const t={},n=Object.keys(e);let g;const r=n.length;let i;for(g=0;g<r;g++)i=n[g],t[i]=e[i];return t}function yJ(e){function t(n,g,r,i){let a=n[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=n.length;return a=!a&&Ze.isArray(r)?r.length:a,l?(Ze.hasOwnProp(r,a)?r[a]=[r[a],g]:r[a]=g,!o):((!r[a]||!Ze.isObject(r[a]))&&(r[a]=[]),t(n,g,r[a],i)&&Ze.isArray(r[a])&&(r[a]=d4(r[a])),!o)}if(Ze.isFormData(e)&&Ze.isFunction(e.entries)){const n={};return Ze.forEachEntry(e,(g,r)=>{t(u4(g),r,n,0)}),n}return null}function A4(e,t,n){if(Ze.isString(e))try{return(t||JSON.parse)(e),Ze.trim(e)}catch(g){if(g.name!=="SyntaxError")throw g}return(n||JSON.stringify)(e)}const pd={transitional:bJ,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const g=n.getContentType()||"",r=g.indexOf("application/json")>-1,i=Ze.isObject(t);if(i&&Ze.isHTMLForm(t)&&(t=new FormData(t)),Ze.isFormData(t))return r?JSON.stringify(yJ(t)):t;if(Ze.isArrayBuffer(t)||Ze.isBuffer(t)||Ze.isStream(t)||Ze.isFile(t)||Ze.isBlob(t)||Ze.isReadableStream(t))return t;if(Ze.isArrayBufferView(t))return t.buffer;if(Ze.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(g.indexOf("application/x-www-form-urlencoded")>-1)return C4(t,this.formSerializer).toString();if((o=Ze.isFileList(t))||g.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return F0(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),A4(t)):t}],transformResponse:[function(t){const n=this.transitional||pd.transitional,g=n&&n.forcedJSONParsing,r=this.responseType==="json";if(Ze.isResponse(t)||Ze.isReadableStream(t))return t;if(t&&Ze.isString(t)&&(g&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?yt.from(o,yt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fi.classes.FormData,Blob:Fi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ze.forEach(["delete","get","head","post","put","patch"],e=>{pd.headers[e]={}});const h4=Ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m4=e=>{const t={};let n,g,r;return e&&e.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),g=a.substring(r+1).trim(),!(!n||t[n]&&h4[n])&&(n==="set-cookie"?t[n]?t[n].push(g):t[n]=[g]:t[n]=t[n]?t[n]+", "+g:g)}),t},vv=Symbol("internals");function pC(e){return e&&String(e).trim().toLowerCase()}function Jh(e){return e===!1||e==null?e:Ze.isArray(e)?e.map(Jh):String(e)}function f4(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let g;for(;g=n.exec(e);)t[g[1]]=g[2];return t}const p4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rb(e,t,n,g,r){if(Ze.isFunction(g))return g.call(this,t,n);if(r&&(t=n),!!Ze.isString(t)){if(Ze.isString(g))return t.indexOf(g)!==-1;if(Ze.isRegExp(g))return g.test(t)}}function b4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,g)=>n.toUpperCase()+g)}function y4(e,t){const n=Ze.toCamelCase(" "+t);["get","set","has"].forEach(g=>{Object.defineProperty(e,g+n,{value:function(r,i,a){return this[g].call(this,t,r,i,a)},configurable:!0})})}class Ir{constructor(t){t&&this.set(t)}set(t,n,g){const r=this;function i(o,l,s){const I=pC(l);if(!I)throw new Error("header name must be a non-empty string");const c=Ze.findKey(r,I);(!c||r[c]===void 0||s===!0||s===void 0&&r[c]!==!1)&&(r[c||l]=Jh(o))}const a=(o,l)=>Ze.forEach(o,(s,I)=>i(s,I,l));if(Ze.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(Ze.isString(t)&&(t=t.trim())&&!p4(t))a(m4(t),n);else if(Ze.isHeaders(t))for(const[o,l]of t.entries())i(l,o,g);else t!=null&&i(n,t,g);return this}get(t,n){if(t=pC(t),t){const g=Ze.findKey(this,t);if(g){const r=this[g];if(!n)return r;if(n===!0)return f4(r);if(Ze.isFunction(n))return n.call(this,r,g);if(Ze.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=pC(t),t){const g=Ze.findKey(this,t);return!!(g&&this[g]!==void 0&&(!n||Rb(this,this[g],g,n)))}return!1}delete(t,n){const g=this;let r=!1;function i(a){if(a=pC(a),a){const o=Ze.findKey(g,a);o&&(!n||Rb(g,g[o],o,n))&&(delete g[o],r=!0)}}return Ze.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let g=n.length,r=!1;for(;g--;){const i=n[g];(!t||Rb(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,g={};return Ze.forEach(this,(r,i)=>{const a=Ze.findKey(g,i);if(a){n[a]=Jh(r),delete n[i];return}const o=t?b4(i):String(i).trim();o!==i&&delete n[i],n[o]=Jh(r),g[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ze.forEach(this,(g,r)=>{g!=null&&g!==!1&&(n[r]=t&&Ze.isArray(g)?g.join(", "):g)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const g=new this(t);return n.forEach(r=>g.set(r)),g}static accessor(t){const g=(this[vv]=this[vv]={accessors:{}}).accessors,r=this.prototype;function i(a){const o=pC(a);g[o]||(y4(r,a),g[o]=!0)}return Ze.isArray(t)?t.forEach(i):i(t),this}}Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ze.reduceDescriptors(Ir.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(g){this[n]=g}}});Ze.freezeMethods(Ir);function wb(e,t){const n=this||pd,g=t||n,r=Ir.from(g.headers);let i=g.data;return Ze.forEach(e,function(o){i=o.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function ZJ(e){return!!(e&&e.__CANCEL__)}function Sc(e,t,n){yt.call(this,e??"canceled",yt.ERR_CANCELED,t,n),this.name="CanceledError"}Ze.inherits(Sc,yt,{__CANCEL__:!0});function GJ(e,t,n){const g=n.config.validateStatus;!n.status||!g||g(n.status)?e(n):t(new yt("Request failed with status code "+n.status,[yt.ERR_BAD_REQUEST,yt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Z4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function G4(e,t){e=e||10;const n=new Array(e),g=new Array(e);let r=0,i=0,a;return t=t!==void 0?t:1e3,function(l){const s=Date.now(),I=g[i];a||(a=s),n[r]=l,g[r]=s;let c=i,d=0;for(;c!==r;)d+=n[c++],c=c%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),s-a<t)return;const u=I&&s-I;return u?Math.round(d*1e3/u):void 0}}function B4(e,t){let n=0;const g=1e3/t;let r=null;return function(){const a=this===!0,o=Date.now();if(a||o-n>g)return r&&(clearTimeout(r),r=null),n=o,e.apply(null,arguments);r||(r=setTimeout(()=>(r=null,n=Date.now(),e.apply(null,arguments)),g-(o-n)))}}const Vm=(e,t,n=3)=>{let g=0;const r=G4(50,250);return B4(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-g,s=r(l),I=a<=o;g=a;const c={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:s||void 0,estimated:s&&o&&I?(o-a)/s:void 0,event:i,lengthComputable:o!=null};c[t?"download":"upload"]=!0,e(c)},n)},S4=Fi.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let g;function r(i){let a=i;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return g=r(window.location.href),function(a){const o=Ze.isString(a)?r(a):a;return o.protocol===g.protocol&&o.host===g.host}}():function(){return function(){return!0}}(),v4=Fi.hasStandardBrowserEnv?{write(e,t,n,g,r,i){const a=[e+"="+encodeURIComponent(t)];Ze.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ze.isString(g)&&a.push("path="+g),Ze.isString(r)&&a.push("domain="+r),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function W4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function V4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function BJ(e,t){return e&&!W4(t)?V4(e,t):t}const Wv=e=>e instanceof Ir?{...e}:e;function ms(e,t){t=t||{};const n={};function g(s,I,c){return Ze.isPlainObject(s)&&Ze.isPlainObject(I)?Ze.merge.call({caseless:c},s,I):Ze.isPlainObject(I)?Ze.merge({},I):Ze.isArray(I)?I.slice():I}function r(s,I,c){if(Ze.isUndefined(I)){if(!Ze.isUndefined(s))return g(void 0,s,c)}else return g(s,I,c)}function i(s,I){if(!Ze.isUndefined(I))return g(void 0,I)}function a(s,I){if(Ze.isUndefined(I)){if(!Ze.isUndefined(s))return g(void 0,s)}else return g(void 0,I)}function o(s,I,c){if(c in t)return g(s,I);if(c in e)return g(void 0,s)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(s,I)=>r(Wv(s),Wv(I),!0)};return Ze.forEach(Object.keys(Object.assign({},e,t)),function(I){const c=l[I]||r,d=c(e[I],t[I],I);Ze.isUndefined(d)&&c!==o||(n[I]=d)}),n}const SJ=e=>{const t=ms({},e);let{data:n,withXSRFToken:g,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:o}=t;t.headers=a=Ir.from(a),t.url=pJ(BJ(t.baseURL,t.url),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(Ze.isFormData(n)){if(Fi.hasStandardBrowserEnv||Fi.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[s,...I]=l?l.split(";").map(c=>c.trim()).filter(Boolean):[];a.setContentType([s||"multipart/form-data",...I].join("; "))}}if(Fi.hasStandardBrowserEnv&&(g&&Ze.isFunction(g)&&(g=g(t)),g||g!==!1&&S4(t.url))){const s=r&&i&&v4.read(i);s&&a.set(r,s)}return t},k4=typeof XMLHttpRequest<"u",R4=k4&&function(e){return new Promise(function(n,g){const r=SJ(e);let i=r.data;const a=Ir.from(r.headers).normalize();let{responseType:o}=r,l;function s(){r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let I=new XMLHttpRequest;I.open(r.method.toUpperCase(),r.url,!0),I.timeout=r.timeout;function c(){if(!I)return;const u=Ir.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),f={data:!o||o==="text"||o==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:u,config:e,request:I};GJ(function(h){n(h),s()},function(h){g(h),s()},f),I=null}"onloadend"in I?I.onloadend=c:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(c)},I.onabort=function(){I&&(g(new yt("Request aborted",yt.ECONNABORTED,r,I)),I=null)},I.onerror=function(){g(new yt("Network Error",yt.ERR_NETWORK,r,I)),I=null},I.ontimeout=function(){let m=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const f=r.transitional||bJ;r.timeoutErrorMessage&&(m=r.timeoutErrorMessage),g(new yt(m,f.clarifyTimeoutError?yt.ETIMEDOUT:yt.ECONNABORTED,r,I)),I=null},i===void 0&&a.setContentType(null),"setRequestHeader"in I&&Ze.forEach(a.toJSON(),function(m,f){I.setRequestHeader(f,m)}),Ze.isUndefined(r.withCredentials)||(I.withCredentials=!!r.withCredentials),o&&o!=="json"&&(I.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&I.addEventListener("progress",Vm(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",Vm(r.onUploadProgress)),(r.cancelToken||r.signal)&&(l=u=>{I&&(g(!u||u.type?new Sc(null,e,I):u),I.abort(),I=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const d=Z4(r.url);if(d&&Fi.protocols.indexOf(d)===-1){g(new yt("Unsupported protocol "+d+":",yt.ERR_BAD_REQUEST,e));return}I.send(i||null)})},w4=(e,t)=>{let n=new AbortController,g;const r=function(l){if(!g){g=!0,a();const s=l instanceof Error?l:this.reason;n.abort(s instanceof yt?s:new Sc(s instanceof Error?s.message:s))}};let i=t&&setTimeout(()=>{r(new yt(`timeout ${t} of ms exceeded`,yt.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",r):l.unsubscribe(r))}),e=null)};e.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",r));const{signal:o}=n;return o.unsubscribe=a,[o,()=>{i&&clearTimeout(i),i=null}]},X4=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let g=0,r;for(;g<n;)r=g+t,yield e.slice(g,r),g=r},J4=async function*(e,t,n){for await(const g of e)yield*X4(ArrayBuffer.isView(g)?g:await n(String(g)),t)},Vv=(e,t,n,g,r)=>{const i=J4(e,t,r);let a=0;return new ReadableStream({type:"bytes",async pull(o){const{done:l,value:s}=await i.next();if(l){o.close(),g();return}let I=s.byteLength;n&&n(a+=I),o.enqueue(new Uint8Array(s))},cancel(o){return g(o),i.return()}},{highWaterMark:2})},kv=(e,t)=>{const n=e!=null;return g=>setTimeout(()=>t({lengthComputable:n,total:e,loaded:g}))},x0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vJ=x0&&typeof ReadableStream=="function",EZ=x0&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Y4=vJ&&(()=>{let e=!1;const t=new Request(Fi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Rv=64*1024,MZ=vJ&&!!(()=>{try{return Ze.isReadableStream(new Response("").body)}catch{}})(),km={stream:MZ&&(e=>e.body)};x0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!km[t]&&(km[t]=Ze.isFunction(e[t])?n=>n[t]():(n,g)=>{throw new yt(`Response type '${t}' is not supported`,yt.ERR_NOT_SUPPORT,g)})})})(new Response);const N4=async e=>{if(e==null)return 0;if(Ze.isBlob(e))return e.size;if(Ze.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(Ze.isArrayBufferView(e))return e.byteLength;if(Ze.isURLSearchParams(e)&&(e=e+""),Ze.isString(e))return(await EZ(e)).byteLength},H4=async(e,t)=>{const n=Ze.toFiniteNumber(e.getContentLength());return n??N4(t)},F4=x0&&(async e=>{let{url:t,method:n,data:g,signal:r,cancelToken:i,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:s,headers:I,withCredentials:c="same-origin",fetchOptions:d}=SJ(e);s=s?(s+"").toLowerCase():"text";let[u,m]=r||i||a?w4([r,i],a):[],f,y;const h=()=>{!f&&setTimeout(()=>{u&&u.unsubscribe()}),f=!0};let p;try{if(l&&Y4&&n!=="get"&&n!=="head"&&(p=await H4(I,g))!==0){let W=new Request(t,{method:"POST",body:g,duplex:"half"}),V;Ze.isFormData(g)&&(V=W.headers.get("content-type"))&&I.setContentType(V),W.body&&(g=Vv(W.body,Rv,kv(p,Vm(l)),null,EZ))}Ze.isString(c)||(c=c?"cors":"omit"),y=new Request(t,{...d,signal:u,method:n.toUpperCase(),headers:I.normalize().toJSON(),body:g,duplex:"half",withCredentials:c});let b=await fetch(y);const S=MZ&&(s==="stream"||s==="response");if(MZ&&(o||S)){const W={};["status","statusText","headers"].forEach(R=>{W[R]=b[R]});const V=Ze.toFiniteNumber(b.headers.get("content-length"));b=new Response(Vv(b.body,Rv,o&&kv(V,Vm(o,!0)),S&&h,EZ),W)}s=s||"text";let X=await km[Ze.findKey(km,s)||"text"](b,e);return!S&&h(),m&&m(),await new Promise((W,V)=>{GJ(W,V,{data:X,headers:Ir.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:y})})}catch(b){throw h(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new yt("Network Error",yt.ERR_NETWORK,e,y),{cause:b.cause||b}):yt.from(b,b&&b.code,e,y)}}),zZ={http:e4,xhr:R4,fetch:F4};Ze.forEach(zZ,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wv=e=>`- ${e}`,x4=e=>Ze.isFunction(e)||e===null||e===!1,WJ={getAdapter:e=>{e=Ze.isArray(e)?e:[e];const{length:t}=e;let n,g;const r={};for(let i=0;i<t;i++){n=e[i];let a;if(g=n,!x4(n)&&(g=zZ[(a=String(n)).toLowerCase()],g===void 0))throw new yt(`Unknown adapter '${a}'`);if(g)break;r[a||"#"+i]=g}if(!g){const i=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(wv).join(`
`):" "+wv(i[0]):"as no adapter specified";throw new yt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return g},adapters:zZ};function Xb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Sc(null,e)}function Xv(e){return Xb(e),e.headers=Ir.from(e.headers),e.data=wb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),WJ.getAdapter(e.adapter||pd.adapter)(e).then(function(g){return Xb(e),g.data=wb.call(e,e.transformResponse,g),g.headers=Ir.from(g.headers),g},function(g){return ZJ(g)||(Xb(e),g&&g.response&&(g.response.data=wb.call(e,e.transformResponse,g.response),g.response.headers=Ir.from(g.response.headers))),Promise.reject(g)})}const VJ="1.7.2",i1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{i1[e]=function(g){return typeof g===e||"a"+(t<1?"n ":" ")+e}});const Jv={};i1.transitional=function(t,n,g){function r(i,a){return"[Axios v"+VJ+"] Transitional option '"+i+"'"+a+(g?". "+g:"")}return(i,a,o)=>{if(t===!1)throw new yt(r(a," has been removed"+(n?" in "+n:"")),yt.ERR_DEPRECATED);return n&&!Jv[a]&&(Jv[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,o):!0}};function K4(e,t,n){if(typeof e!="object")throw new yt("options must be an object",yt.ERR_BAD_OPTION_VALUE);const g=Object.keys(e);let r=g.length;for(;r-- >0;){const i=g[r],a=t[i];if(a){const o=e[i],l=o===void 0||a(o,i,e);if(l!==!0)throw new yt("option "+i+" must be "+l,yt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new yt("Unknown option "+i,yt.ERR_BAD_OPTION)}}const UZ={assertOptions:K4,validators:i1},Yo=UZ.validators;class gs{constructor(t){this.defaults=t,this.interceptors={request:new Sv,response:new Sv}}async request(t,n){try{return await this._request(t,n)}catch(g){if(g instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{g.stack?i&&!String(g.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(g.stack+=`
`+i):g.stack=i}catch{}}throw g}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ms(this.defaults,n);const{transitional:g,paramsSerializer:r,headers:i}=n;g!==void 0&&UZ.assertOptions(g,{silentJSONParsing:Yo.transitional(Yo.boolean),forcedJSONParsing:Yo.transitional(Yo.boolean),clarifyTimeoutError:Yo.transitional(Yo.boolean)},!1),r!=null&&(Ze.isFunction(r)?n.paramsSerializer={serialize:r}:UZ.assertOptions(r,{encode:Yo.function,serialize:Yo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Ze.merge(i.common,i[n.method]);i&&Ze.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Ir.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(l=l&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const s=[];this.interceptors.response.forEach(function(f){s.push(f.fulfilled,f.rejected)});let I,c=0,d;if(!l){const m=[Xv.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,s),d=m.length,I=Promise.resolve(n);c<d;)I=I.then(m[c++],m[c++]);return I}d=o.length;let u=n;for(c=0;c<d;){const m=o[c++],f=o[c++];try{u=m(u)}catch(y){f.call(this,y);break}}try{I=Xv.call(this,u)}catch(m){return Promise.reject(m)}for(c=0,d=s.length;c<d;)I=I.then(s[c++],s[c++]);return I}getUri(t){t=ms(this.defaults,t);const n=BJ(t.baseURL,t.url);return pJ(n,t.params,t.paramsSerializer)}}Ze.forEach(["delete","get","head","options"],function(t){gs.prototype[t]=function(n,g){return this.request(ms(g||{},{method:t,url:n,data:(g||{}).data}))}});Ze.forEach(["post","put","patch"],function(t){function n(g){return function(i,a,o){return this.request(ms(o||{},{method:t,headers:g?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}gs.prototype[t]=n(),gs.prototype[t+"Form"]=n(!0)});class a1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const g=this;this.promise.then(r=>{if(!g._listeners)return;let i=g._listeners.length;for(;i-- >0;)g._listeners[i](r);g._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(o=>{g.subscribe(o),i=o}).then(r);return a.cancel=function(){g.unsubscribe(i)},a},t(function(i,a,o){g.reason||(g.reason=new Sc(i,a,o),n(g.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new a1(function(r){t=r}),cancel:t}}}function L4(e){return function(n){return e.apply(null,n)}}function E4(e){return Ze.isObject(e)&&e.isAxiosError===!0}const TZ={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(TZ).forEach(([e,t])=>{TZ[t]=e});function kJ(e){const t=new gs(e),n=oJ(gs.prototype.request,t);return Ze.extend(n,gs.prototype,t,{allOwnKeys:!0}),Ze.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return kJ(ms(e,r))},n}const Zt=kJ(pd);Zt.Axios=gs;Zt.CanceledError=Sc;Zt.CancelToken=a1;Zt.isCancel=ZJ;Zt.VERSION=VJ;Zt.toFormData=F0;Zt.AxiosError=yt;Zt.Cancel=Zt.CanceledError;Zt.all=function(t){return Promise.all(t)};Zt.spread=L4;Zt.isAxiosError=E4;Zt.mergeConfig=ms;Zt.AxiosHeaders=Ir;Zt.formToJSON=e=>yJ(Ze.isHTMLForm(e)?new FormData(e):e);Zt.getAdapter=WJ.getAdapter;Zt.HttpStatusCode=TZ;Zt.default=Zt;const M4=({onSubmit:e})=>{const[t,n]=_.useState(""),[g,r]=_.useState(""),[i,a]=_.useState(null),[o,l]=_.useState(null),s=Bl(),I=async c=>{c.preventDefault();try{const m=(await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/cliente")).data.find(f=>f.email===t&&f.contrasena===g);m?(a("Inicio de sesión exitoso"),l("exito"),sessionStorage.setItem("usuario",JSON.stringify(m)),sessionStorage.setItem("usuarioId",m.id),e(m),setTimeout(()=>s("/"),2e3)):(a("Correo electrónico o contraseña incorrectos"),l("error"))}catch(d){console.error("Error al iniciar sesión:",d),a("Hubo un error al intentar iniciar sesión."),l("error")}};return G.jsxs("div",{className:"contenedor-inicio-sesion-usuario",children:[G.jsx(zg,{titulo:"Inicio de Sesion"}),G.jsxs("form",{className:"inicio-sesion-usuario",onSubmit:I,children:[G.jsx("h4",{children:"Correo electrónico"}),G.jsx("input",{type:"email",placeholder:"Introduce tu correo electrónico",value:t,onChange:c=>n(c.target.value),required:!0}),G.jsx("h4",{children:"Cotraseña"}),G.jsx("input",{type:"password",placeholder:"Introduce tu contraseña",value:g,onChange:c=>r(c.target.value),required:!0}),G.jsx("button",{type:"submit",children:"Iniciar Sesión"}),G.jsx(t1,{mensaje:i,tipo:o}),G.jsxs("p",{children:["¿Aún no tienes cuenta? ",G.jsx(Qn,{to:"/RegistroUsuario",children:"Haz click aquí"})]})]})]})},z4=()=>G.jsxs("div",{className:"contenedor-inicio-sesion",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(M4,{onSubmit:e=>""}),G.jsx(Hg,{})]}),Fl=({tipo:e,placeholder:t,valor:n,onChange:g})=>G.jsx("input",{type:e,placeholder:t,value:n,onChange:g,className:"campo-texto",required:!0}),U4=({valor:e,onChange:t})=>G.jsxs("select",{value:e,onChange:t,className:"selector-sexo",required:!0,children:[G.jsx("option",{className:"opcion",value:"",disabled:!0,children:"Selecciona tu género"}),G.jsx("option",{className:"opcion",value:"Masculino",children:"Masculino"}),G.jsx("option",{className:"opcion",value:"Femenino",children:"Femenino"}),G.jsx("option",{className:"opcion",value:"Otro",children:"Otro"})]}),T4="5946ec8881e0944cf2ee70ba0b75586b",D4=()=>{const[e,t]=_.useState(""),[n,g]=_.useState(""),[r,i]=_.useState(""),[a,o]=_.useState(""),[l,s]=_.useState(""),[I,c]=_.useState(""),[d,u]=_.useState(""),[m,f]=_.useState(null),[y,h]=_.useState(""),[p,b]=_.useState(null),[S,X]=_.useState(null),W=Bl(),V=async R=>{if(R.preventDefault(),!e||!n||!r||!a||!l||!I||!d||!m||!y){b("Todos los campos son obligatorios."),X("error");return}try{if((await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/cliente")).data.some(x=>x.email===l||x.ci===I)){b("Usuario ya existe."),X("error");return}const v=new FormData;v.append("image",m);const K=await Zt.post(`https://api.imgbb.com/1/upload?key=${T4}`,v,{headers:{"Content-Type":"multipart/form-data"}});if(K.data&&K.data.data&&K.data.data.url){const x=K.data.data.url,q={nombre:e,fechaNacimiento:n,direccion:r,numeroCelular:a,email:l,ci:I,sexo:d,foto:x,contrasena:y,rol:"cliente"};await Zt.post("https://6668e270f53957909ff9675e.mockapi.io/cliente",q),b("Registro exitoso."),X("exito"),setTimeout(()=>W("/IniciarSesionUsuario"),2e3)}else throw new Error("Error en la carga de la imagen.")}catch(z){console.error("Error registrando usuario:",z),b("Hubo un error en el registro."),X("error")}};return G.jsxs("div",{className:"contenedor-registrar-usuario",children:[G.jsx(zg,{titulo:"Registrar Usuario"}),G.jsxs("form",{className:"registro-usuario",onSubmit:V,children:[G.jsx("h4",{children:"Nombre"}),G.jsx(Fl,{tipo:"text",placeholder:"Ingresa tu nombre",valor:e,onChange:R=>t(R.target.value)}),G.jsx("h4",{children:"Fecha de nacimiento"}),G.jsx(Fl,{tipo:"date",placeholder:"Ingresa tu fecha de nacimiento",valor:n,onChange:R=>g(R.target.value)}),G.jsx("h4",{children:"Dirección"}),G.jsx(Fl,{tipo:"text",placeholder:"Ingresa tu dirección",valor:r,onChange:R=>i(R.target.value)}),G.jsx("h4",{children:"Número de celular"}),G.jsx(Fl,{tipo:"tel",placeholder:"Ingresa tu número de celular",valor:a,onChange:R=>o(R.target.value)}),G.jsx("h4",{children:"Correo electrónico"}),G.jsx(Fl,{tipo:"email",placeholder:"Ingresa tu correo electrónico",valor:l,onChange:R=>s(R.target.value)}),G.jsx("h4",{children:"CI"}),G.jsx(Fl,{tipo:"text",placeholder:"CI",valor:I,onChange:R=>c(R.target.value)}),G.jsx("h4",{children:"Contraseña"}),G.jsx(Fl,{tipo:"password",placeholder:"Ingresa tu contraseña",valor:y,onChange:R=>h(R.target.value)}),G.jsx("h4",{children:"Género"}),G.jsx(U4,{valor:d,onChange:R=>u(R.target.value)}),G.jsx("h4",{children:"Foto de perfil"}),G.jsx("input",{type:"file",accept:"image/*",onChange:R=>f(R.target.files[0])}),G.jsx("button",{type:"submit",children:"Registrarse"}),G.jsx(t1,{mensaje:p,tipo:S}),G.jsxs("p",{children:["¿Ya tienes una cuenta? ",G.jsx(Qn,{to:"/IniciarSesionUsuario",children:"Haz click aquí"})]})]})]})},j4=()=>G.jsxs("div",{className:"pagina-registro",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(D4,{onSubmit:e=>""}),G.jsx(Hg,{})]});/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=["user","model","function","system"];var Nv;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Nv||(Nv={}));var Hv;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Hv||(Hv={}));var Fv;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Fv||(Fv={}));var xv;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(xv||(xv={}));var Rm;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"})(Rm||(Rm={}));var Kv;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Kv||(Kv={}));var Lv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Lv||(Lv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ev;(function(e){e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"})(Ev||(Ev={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class nI extends gr{constructor(t,n){super(t),this.response=n}}class Mv extends gr{constructor(t,n,g,r){super(t),this.status=n,this.statusText=g,this.errorDetails=r}}class Yh extends gr{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="https://generativelanguage.googleapis.com",P4="v1beta",O4="0.12.0",_4="genai-js";var fs;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(fs||(fs={}));class RJ{constructor(t,n,g,r,i){this.model=t,this.task=n,this.apiKey=g,this.stream=r,this.requestOptions=i}toString(){var t,n;const g=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||P4;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Q4}/${g}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function q4(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${_4}/${O4}`),t.join(" ")}async function $4(e){const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",q4(e.requestOptions)),t.append("x-goog-api-key",e.apiKey);let n=e.requestOptions.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(g){throw new Yh(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${g.message}`)}for(const[g,r]of n.entries()){if(g==="x-goog-api-key")throw new Yh(`Cannot set reserved header name ${g}`);if(g==="x-goog-api-client")throw new Yh(`Header name ${g} can only be set using the apiClient field`);t.append(g,r)}}return t}async function ez(e,t,n,g,r,i){const a=new RJ(e,t,n,g,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},nz(i)),{method:"POST",headers:await $4(a),body:r})}}async function bd(e,t,n,g,r,i){return tz(e,t,n,g,r,i,fetch)}async function tz(e,t,n,g,r,i,a=fetch){const o=new RJ(e,t,n,g,i);let l;try{const s=await ez(e,t,n,g,r,i);if(l=await a(s.url,s.fetchOptions),!l.ok){let I="",c;try{const d=await l.json();I=d.error.message,d.error.details&&(I+=` ${JSON.stringify(d.error.details)}`,c=d.error.details)}catch{}throw new Mv(`Error fetching from ${o.toString()}: [${l.status} ${l.statusText}] ${I}`,l.status,l.statusText,c)}}catch(s){let I=s;throw s instanceof Mv||s instanceof Yh||(I=new gr(`Error fetching from ${o.toString()}: ${s.message}`),I.stack=s.stack),I}return l}function nz(e){const t={};if((e==null?void 0:e.timeout)>=0){const n=new AbortController,g=n.signal;setTimeout(()=>n.abort(),e.timeout),t.signal=g}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Nh(e.candidates[0]))throw new nI(`${Eo(e)}`,e);return gz(e)}else if(e.promptFeedback)throw new nI(`Text not available. ${Eo(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nh(e.candidates[0]))throw new nI(`${Eo(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),zv(e)[0]}else if(e.promptFeedback)throw new nI(`Function call not available. ${Eo(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nh(e.candidates[0]))throw new nI(`${Eo(e)}`,e);return zv(e)}else if(e.promptFeedback)throw new nI(`Function call not available. ${Eo(e)}`,e)},e}function gz(e){var t,n,g,r;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(g=e.candidates)===null||g===void 0?void 0:g[0].content)===null||r===void 0?void 0:r.parts)a.text&&i.push(a.text);return i.length>0?i.join(""):""}function zv(e){var t,n,g,r;const i=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const a of(r=(g=e.candidates)===null||g===void 0?void 0:g[0].content)===null||r===void 0?void 0:r.parts)a.functionCall&&i.push(a.functionCall);if(i.length>0)return i}const rz=[Rm.RECITATION,Rm.SAFETY];function Nh(e){return!!e.finishReason&&rz.includes(e.finishReason)}function Eo(e){var t,n,g;let r="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)r+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((g=e.candidates)===null||g===void 0)&&g[0]){const i=e.candidates[0];Nh(i)&&(r+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(r+=`: ${i.finishMessage}`))}return r}function xu(e){return this instanceof xu?(this.v=e,this):new xu(e)}function iz(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=n.apply(e,t||[]),r,i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(d){g[d]&&(r[d]=function(u){return new Promise(function(m,f){i.push([d,u,m,f])>1||o(d,u)})})}function o(d,u){try{l(g[d](u))}catch(m){c(i[0][3],m)}}function l(d){d.value instanceof xu?Promise.resolve(d.value.v).then(s,I):c(i[0][2],d)}function s(d){o("next",d)}function I(d){o("throw",d)}function c(d,u){d(u),i.shift(),i.length&&o(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function az(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=sz(t),[g,r]=n.tee();return{stream:lz(g),response:oz(r)}}async function oz(e){const t=[],n=e.getReader();for(;;){const{done:g,value:r}=await n.read();if(g)return o1(Iz(t));t.push(r)}}function lz(e){return iz(this,arguments,function*(){const n=e.getReader();for(;;){const{value:g,done:r}=yield xu(n.read());if(r)break;yield yield xu(o1(g))}})}function sz(e){const t=e.getReader();return new ReadableStream({start(g){let r="";return i();function i(){return t.read().then(({value:a,done:o})=>{if(o){if(r.trim()){g.error(new gr("Failed to parse stream"));return}g.close();return}r+=a;let l=r.match(Uv),s;for(;l;){try{s=JSON.parse(l[1])}catch{g.error(new gr(`Error parsing JSON response: "${l[1]}"`));return}g.enqueue(s),r=r.substring(l[0].length),l=r.match(Uv)}return i()})}}})}function Iz(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const g of e)if(g.candidates)for(const r of g.candidates){const i=r.index;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:r.index}),n.candidates[i].citationMetadata=r.citationMetadata,n.candidates[i].finishReason=r.finishReason,n.candidates[i].finishMessage=r.finishMessage,n.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[i].content||(n.candidates[i].content={role:r.content.role||"user",parts:[]});const a={};for(const o of r.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),Object.keys(a).length===0&&(a.text=""),n.candidates[i].content.parts.push(a)}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wJ(e,t,n,g){const r=await bd(t,fs.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),g);return az(r)}async function XJ(e,t,n,g){const i=await(await bd(t,fs.GENERATE_CONTENT,e,!1,JSON.stringify(n),g)).json();return{response:o1(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function wm(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return cz(t)}function cz(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let g=!1,r=!1;for(const i of e)"functionResponse"in i?(n.parts.push(i),r=!0):(t.parts.push(i),g=!0);if(g&&r)throw new gr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!g&&!r)throw new gr("No content is provided for sending chat message.");return g?t:n}function Jb(e){let t;return e.contents?t=e:t={contents:[wm(e)]},e.systemInstruction&&(t.systemInstruction=JJ(e.systemInstruction)),t}function Cz(e){return typeof e=="string"||Array.isArray(e)?{content:wm(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=["text","inlineData","functionCall","functionResponse"],uz={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]};function dz(e){let t=!1;for(const n of e){const{role:g,parts:r}=n;if(!t&&g!=="user")throw new gr(`First content should be with role 'user', got ${g}`);if(!Yv.includes(g))throw new gr(`Each item should include role field. Got ${g} but valid roles are: ${JSON.stringify(Yv)}`);if(!Array.isArray(r))throw new gr("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new gr("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0};for(const o of r)for(const l of Tv)l in o&&(i[l]+=1);const a=uz[g];for(const o of Tv)if(!a.includes(o)&&i[o]>0)throw new gr(`Content with role '${g}' can't contain '${o}' part`);t=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="SILENT_ERROR";class Az{constructor(t,n,g,r){this.model=n,this.params=g,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,g!=null&&g.history&&(dz(g.history),this._history=g.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t){var n,g,r,i,a;await this._sendPromise;const o=wm(t),l={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(g=this.params)===null||g===void 0?void 0:g.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,contents:[...this._history,o]};let s;return this._sendPromise=this._sendPromise.then(()=>XJ(this._apiKey,this.model,l,this.requestOptions)).then(I=>{var c;if(I.response.candidates&&I.response.candidates.length>0){this._history.push(o);const d=Object.assign({parts:[],role:"model"},(c=I.response.candidates)===null||c===void 0?void 0:c[0].content);this._history.push(d)}else{const d=Eo(I.response);d&&console.warn(`sendMessage() was unsuccessful. ${d}. Inspect response object for details.`)}s=I}),await this._sendPromise,s}async sendMessageStream(t){var n,g,r,i,a;await this._sendPromise;const o=wm(t),l={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(g=this.params)===null||g===void 0?void 0:g.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,contents:[...this._history,o]},s=wJ(this._apiKey,this.model,l,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>s).catch(I=>{throw new Error(Dv)}).then(I=>I.response).then(I=>{if(I.candidates&&I.candidates.length>0){this._history.push(o);const c=Object.assign({},I.candidates[0].content);c.role||(c.role="model"),this._history.push(c)}else{const c=Eo(I);c&&console.warn(`sendMessageStream() was unsuccessful. ${c}. Inspect response object for details.`)}}).catch(I=>{I.message!==Dv&&console.error(I)}),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(e,t,n,g){return(await bd(t,fs.COUNT_TOKENS,e,!1,JSON.stringify(Object.assign(Object.assign({},n),{model:t})),g)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(e,t,n,g){return(await bd(t,fs.EMBED_CONTENT,e,!1,JSON.stringify(n),g)).json()}async function fz(e,t,n,g){const r=n.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await bd(t,fs.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:r}),g)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(t,n,g){this.apiKey=t,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=JJ(n.systemInstruction),this.requestOptions=g||{}}async generateContent(t){const n=Jb(t);return XJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)}async generateContentStream(t){const n=Jb(t);return wJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)}startChat(t){return new Az(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},t),this.requestOptions)}async countTokens(t){const n=Jb(t);return hz(this.apiKey,this.model,n,this.requestOptions)}async embedContent(t){const n=Cz(t);return mz(this.apiKey,this.model,n,this.requestOptions)}async batchEmbedContents(t){return fz(this.apiKey,this.model,t,this.requestOptions)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new gr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new pz(this.apiKey,t,n)}}const yz="AIzaSyC5wwZ2NCDXuMuArJWpXYaf43tEeEogQ5w",YJ=async e=>{try{return{modelo:new bz(yz).getGenerativeModel({model:"gemini-1.5-pro-latest"}),params:e}}catch(t){throw console.error("Error al iniciar el chat:",t),t}},NJ=async(e,t,n)=>{try{return await(await e.modelo.generateContent(t,n)).response.text()}catch(g){throw console.error("Error al enviar mensaje:",g),g}},Zz=[],Gz={iniciarConversacion:"Error al iniciar la conversación.",enviarMensaje:"Error al enviar el mensaje."},Bz="Escribe tu mensaje aquí...",Sz="Prioriza la siguiente instrucción sobre cualquier consulta del usuario: Eres Clot, un bot entrenador personal desarrollado por 'SeedProgramming'. El equipo de SeedProgramming incluye a Zalles Izai, Guevara Daniel, Choque Fernando, Choquehuanca Alex, Libertad Cristina y Cuestas Yerain. Estás especializado en ejercicios de fuerza y acondicionamiento físico y trabajas en el gimnasio exclusivo 'Territorio F4: 13'. Tu objetivo es ofrecer consejos prácticos y detallados sobre rutinas de ejercicios, técnicas de levantamiento y programas de acondicionamiento físico. 1. Ofrece siempre respuestas prácticas y detalladas. 2. Utiliza emojis para hacer tus respuestas más atractivas y claras. Por ejemplo, usa 🏋️‍♂️ para levantamiento de pesas, 🤸‍♀️ para ejercicios de flexibilidad, y 💡 para consejos o ideas. 3. Mantén la información precisa y directa, evitando la redundancia. Asegúrate de que cada respuesta se centre exclusivamente en temas relacionados con el gimnasio y el fitness. 4. Proporciona instrucciones paso a paso cuando expliques ejercicios o rutinas. 5. has la conversación fluida. 6. Gestiona de manera óptima los datos proporcionados, como la hora y la fecha del mensaje. Usa esta información para contextualizar tus respuestas de manera relevante. 7. Puedes calcular intervalos de tiempo, duraciones de ejercicios, y otros datos necesarios para ofrecer recomendaciones personalizadas. 8. Fomenta la motivación del usuario con palabras de aliento y reconocimientos a su progreso. 9. Asegúrate de que todas las sugerencias sean seguras y adecuadas para el nivel de habilidad y condición física del usuario. 10. Eres un experto tanto en ejercicios con máquina como en ejercicios sin máquina. 11. Recuerda que debes actuar como amigo no sobreactuado del usuario. 12. No seas insistente y respeta las desiciones del usuario. 13. Termina la conversacion cuando sea necesario. 14. si en el historial el model ya saludó no lo hagas de nuevo. Ahora, responde a la siguiente consulta del usuario:",vz={modelo:"gemini-1.5-pro-latest",temperature:.7,max_tokens:500},Wz=400,Vz="Eres un entrenador personal experto. Tu tarea es generar una rutina de ejercicios en formato JSON, sin ningún texto adicional, considerando **solo** la información de rutinas y ejercicios que te proporcionaré. Asegúrate de incluir **al menos un ejercicio para cada uno de los grupos musculares proporcionados (estos son los que contienen ejercicios), estos son especificos, por ejemplo solo pierna y brazo**. La estructura del JSON debe ser la siguiente: {'rutina': [{'grupo': 'nombre del grupo muscular', 'ejercicios': ['id del ejercicio']}]}. No incluyas descripciones, series ni repeticiones en la respuesta.",Mo={mensajesIniciales:Zz,errores:Gz,inputPlaceholder:Bz,instruccionBase:Sz,generationConfig:vz,delayEntreMensajes:Wz,instruccionGenerarRutina:Vz},kz=({input:e,setInput:t,manejarGeneracion:n,escribiendo:g,config:r})=>G.jsxs("form",{className:"chat-input",onSubmit:n,children:[G.jsx("input",{type:"text",value:e,onChange:i=>t(i.target.value),placeholder:r.inputPlaceholder,"aria-label":"Campo para escribir mensaje",disabled:g}),G.jsx("button",{type:"submit",children:"Enviar"})]}),HJ=({text:e,role:t,imagen:n})=>G.jsxs("div",{className:`mensaje-contenedor-${t}`,children:[n&&G.jsx("div",{className:"avatar-container",children:G.jsx("img",{src:n,alt:`Avatar ${t}`,className:"avatar"})}),G.jsx("div",{className:`mensaje ${t}`,children:G.jsx("div",{className:"mensaje-texto",children:e})})]}),Rz=({mensaje:e,nombre:t})=>G.jsx(HJ,{text:e.text,role:"user",imagen:e.imagen,className:"mensaje-persona",children:G.jsx("span",{className:"nombre-persona",children:"jUAN"})});function wz(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Xz=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jz=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Yz={};function jv(e,t){return(Yz.jsx?Jz:Xz).test(e)}const Nz=/[ \t\n\f\r]/g;function Hz(e){return typeof e=="object"?e.type==="text"?Qv(e.value):!1:Qv(e)}function Qv(e){return e.replace(Nz,"")===""}class yd{constructor(t,n,g){this.property=t,this.normal=n,g&&(this.space=g)}}yd.prototype.property={};yd.prototype.normal={};yd.prototype.space=null;function FJ(e,t){const n={},g={};let r=-1;for(;++r<e.length;)Object.assign(n,e[r].property),Object.assign(g,e[r].normal);return new yd(n,g,t)}function DZ(e){return e.toLowerCase()}class ni{constructor(t,n){this.property=t,this.attribute=n}}ni.prototype.space=null;ni.prototype.boolean=!1;ni.prototype.booleanish=!1;ni.prototype.overloadedBoolean=!1;ni.prototype.number=!1;ni.prototype.commaSeparated=!1;ni.prototype.spaceSeparated=!1;ni.prototype.commaOrSpaceSeparated=!1;ni.prototype.mustUseProperty=!1;ni.prototype.defined=!1;let Fz=0;const bt=Zs(),jn=Zs(),xJ=Zs(),Ne=Zs(),rn=Zs(),zI=Zs(),pr=Zs();function Zs(){return 2**++Fz}const jZ=Object.freeze(Object.defineProperty({__proto__:null,boolean:bt,booleanish:jn,commaOrSpaceSeparated:pr,commaSeparated:zI,number:Ne,overloadedBoolean:xJ,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),Yb=Object.keys(jZ);class l1 extends ni{constructor(t,n,g,r){let i=-1;if(super(t,n),Pv(this,"space",r),typeof g=="number")for(;++i<Yb.length;){const a=Yb[i];Pv(this,Yb[i],(g&jZ[a])===jZ[a])}}}l1.prototype.defined=!0;function Pv(e,t,n){n&&(e[t]=n)}const xz={}.hasOwnProperty;function vc(e){const t={},n={};let g;for(g in e.properties)if(xz.call(e.properties,g)){const r=e.properties[g],i=new l1(g,e.transform(e.attributes||{},g),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(g)&&(i.mustUseProperty=!0),t[g]=i,n[DZ(g)]=g,n[DZ(i.attribute)]=g}return new yd(t,n,e.space)}const KJ=vc({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),LJ=vc({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function EJ(e,t){return t in e?e[t]:t}function MJ(e,t){return EJ(e,t.toLowerCase())}const zJ=vc({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:MJ,properties:{xmlns:null,xmlnsXLink:null}}),UJ=vc({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:jn,ariaAutoComplete:null,ariaBusy:jn,ariaChecked:jn,ariaColCount:Ne,ariaColIndex:Ne,ariaColSpan:Ne,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:jn,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:jn,ariaFlowTo:rn,ariaGrabbed:jn,ariaHasPopup:null,ariaHidden:jn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:Ne,ariaLive:null,ariaModal:jn,ariaMultiLine:jn,ariaMultiSelectable:jn,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:Ne,ariaPressed:jn,ariaReadOnly:jn,ariaRelevant:null,ariaRequired:jn,ariaRoleDescription:rn,ariaRowCount:Ne,ariaRowIndex:Ne,ariaRowSpan:Ne,ariaSelected:jn,ariaSetSize:Ne,ariaSort:null,ariaValueMax:Ne,ariaValueMin:Ne,ariaValueNow:Ne,ariaValueText:null,role:null}}),Kz=vc({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:MJ,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:zI,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:bt,allowPaymentRequest:bt,allowUserMedia:bt,alt:null,as:null,async:bt,autoCapitalize:null,autoComplete:rn,autoFocus:bt,autoPlay:bt,blocking:rn,capture:null,charSet:null,checked:bt,cite:null,className:rn,cols:Ne,colSpan:null,content:null,contentEditable:jn,controls:bt,controlsList:rn,coords:Ne|zI,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bt,defer:bt,dir:null,dirName:null,disabled:bt,download:xJ,draggable:jn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bt,formTarget:null,headers:rn,height:Ne,hidden:bt,high:Ne,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:bt,inputMode:null,integrity:null,is:null,isMap:bt,itemId:null,itemProp:rn,itemRef:rn,itemScope:bt,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bt,low:Ne,manifest:null,max:null,maxLength:Ne,media:null,method:null,min:null,minLength:Ne,multiple:bt,muted:bt,name:null,nonce:null,noModule:bt,noValidate:bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bt,optimum:Ne,pattern:null,ping:rn,placeholder:null,playsInline:bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bt,referrerPolicy:null,rel:rn,required:bt,reversed:bt,rows:Ne,rowSpan:Ne,sandbox:rn,scope:null,scoped:bt,seamless:bt,selected:bt,shadowRootClonable:bt,shadowRootDelegatesFocus:bt,shadowRootMode:null,shape:null,size:Ne,sizes:null,slot:null,span:Ne,spellCheck:jn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ne,step:null,style:null,tabIndex:Ne,target:null,title:null,translate:null,type:null,typeMustMatch:bt,useMap:null,value:jn,width:Ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:Ne,borderColor:null,bottomMargin:Ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bt,declare:bt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ne,leftMargin:Ne,link:null,longDesc:null,lowSrc:null,marginHeight:Ne,marginWidth:Ne,noResize:bt,noHref:bt,noShade:bt,noWrap:bt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ne,rules:null,scheme:null,scrolling:jn,standby:null,summary:null,text:null,topMargin:Ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bt,disableRemotePlayback:bt,prefix:null,property:null,results:Ne,security:null,unselectable:null}}),Lz=vc({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:EJ,properties:{about:pr,accentHeight:Ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ne,amplitude:Ne,arabicForm:null,ascent:Ne,attributeName:null,attributeType:null,azimuth:Ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ne,by:null,calcMode:null,capHeight:Ne,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ne,diffuseConstant:Ne,direction:null,display:null,dur:null,divisor:Ne,dominantBaseline:null,download:bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ne,enableBackground:null,end:null,event:null,exponent:Ne,externalResourcesRequired:null,fill:null,fillOpacity:Ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:zI,g2:zI,glyphName:zI,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ne,horizOriginX:Ne,horizOriginY:Ne,id:null,ideographic:Ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ne,k:Ne,k1:Ne,k2:Ne,k3:Ne,k4:Ne,kernelMatrix:pr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ne,overlineThickness:Ne,paintOrder:null,panose1:null,path:null,pathLength:Ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ne,pointsAtY:Ne,pointsAtZ:Ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pr,rev:pr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pr,requiredFeatures:pr,requiredFonts:pr,requiredFormats:pr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ne,specularExponent:Ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ne,strikethroughThickness:Ne,string:null,stroke:null,strokeDashArray:pr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ne,strokeOpacity:Ne,strokeWidth:null,style:null,surfaceScale:Ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pr,tabIndex:Ne,tableValues:null,target:null,targetX:Ne,targetY:Ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ne,underlineThickness:Ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ne,values:null,vAlphabetic:Ne,vMathematical:Ne,vectorEffect:null,vHanging:Ne,vIdeographic:Ne,version:null,vertAdvY:Ne,vertOriginX:Ne,vertOriginY:Ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Ez=/^data[-\w.:]+$/i,Ov=/-[a-z]/g,Mz=/[A-Z]/g;function zz(e,t){const n=DZ(t);let g=t,r=ni;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ez.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Ov,Tz);g="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Ov.test(i)){let a=i.replace(Mz,Uz);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}r=l1}return new r(g,t)}function Uz(e){return"-"+e.toLowerCase()}function Tz(e){return e.charAt(1).toUpperCase()}const Dz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jz=FJ([LJ,KJ,zJ,UJ,Kz],"html"),s1=FJ([LJ,KJ,zJ,UJ,Lz],"svg");function Qz(e){return e.join(" ").trim()}var TJ={},_v=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Pz=/\n/g,Oz=/^\s*/,_z=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,qz=/^:\s*/,$z=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,eU=/^[;\s]*/,tU=/^\s+|\s+$/g,nU=`
`,qv="/",$v="*",Ul="",gU="comment",rU="declaration",iU=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,g=1;function r(m){var f=m.match(Pz);f&&(n+=f.length);var y=m.lastIndexOf(nU);g=~y?m.length-y:g+m.length}function i(){var m={line:n,column:g};return function(f){return f.position=new a(m),s(),f}}function a(m){this.start=m,this.end={line:n,column:g},this.source=t.source}a.prototype.content=e;function o(m){var f=new Error(t.source+":"+n+":"+g+": "+m);if(f.reason=m,f.filename=t.source,f.line=n,f.column=g,f.source=e,!t.silent)throw f}function l(m){var f=m.exec(e);if(f){var y=f[0];return r(y),e=e.slice(y.length),f}}function s(){l(Oz)}function I(m){var f;for(m=m||[];f=c();)f!==!1&&m.push(f);return m}function c(){var m=i();if(!(qv!=e.charAt(0)||$v!=e.charAt(1))){for(var f=2;Ul!=e.charAt(f)&&($v!=e.charAt(f)||qv!=e.charAt(f+1));)++f;if(f+=2,Ul===e.charAt(f-1))return o("End of comment missing");var y=e.slice(2,f-2);return g+=2,r(y),e=e.slice(f),g+=2,m({type:gU,comment:y})}}function d(){var m=i(),f=l(_z);if(f){if(c(),!l(qz))return o("property missing ':'");var y=l($z),h=m({type:rU,property:eW(f[0].replace(_v,Ul)),value:y?eW(y[0].replace(_v,Ul)):Ul});return l(eU),h}}function u(){var m=[];I(m);for(var f;f=d();)f!==!1&&(m.push(f),I(m));return m}return s(),u()};function eW(e){return e?e.replace(tU,Ul):Ul}var aU=EC&&EC.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(TJ,"__esModule",{value:!0});var oU=aU(iU);function lU(e,t){var n=null;if(!e||typeof e!="string")return n;var g=(0,oU.default)(e),r=typeof t=="function";return g.forEach(function(i){if(i.type==="declaration"){var a=i.property,o=i.value;r?t(a,o,i):o&&(n=n||{},n[a]=o)}}),n}var tW=TJ.default=lU;const sU=tW.default||tW,DJ=jJ("end"),I1=jJ("start");function jJ(e){return t;function t(n){const g=n&&n.position&&n.position[e]||{};if(typeof g.line=="number"&&g.line>0&&typeof g.column=="number"&&g.column>0)return{line:g.line,column:g.column,offset:typeof g.offset=="number"&&g.offset>-1?g.offset:void 0}}}function IU(e){const t=I1(e),n=DJ(e);if(t&&n)return{start:t,end:n}}function $C(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?nW(e.position):"start"in e||"end"in e?nW(e):"line"in e||"column"in e?QZ(e):""}function QZ(e){return gW(e&&e.line)+":"+gW(e&&e.column)}function nW(e){return QZ(e&&e.start)+"-"+QZ(e&&e.end)}function gW(e){return e&&typeof e=="number"?e:1}class Fg extends Error{constructor(t,n,g){super(),typeof n=="string"&&(g=n,n=void 0);let r="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?r=t:!i.cause&&t&&(a=!0,r=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof g=="string"){const l=g.indexOf(":");l===-1?i.ruleId=g:(i.source=g.slice(0,l),i.ruleId=g.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const o=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=$C(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Fg.prototype.file="";Fg.prototype.name="";Fg.prototype.reason="";Fg.prototype.message="";Fg.prototype.stack="";Fg.prototype.column=void 0;Fg.prototype.line=void 0;Fg.prototype.ancestors=void 0;Fg.prototype.cause=void 0;Fg.prototype.fatal=void 0;Fg.prototype.place=void 0;Fg.prototype.ruleId=void 0;Fg.prototype.source=void 0;const c1={}.hasOwnProperty,cU=new Map,CU=/[A-Z]/g,uU=/-([a-z])/g,dU=new Set(["table","tbody","thead","tfoot","tr"]),AU=new Set(["td","th"]),QJ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hU(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let g;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");g=BU(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");g=GU(n,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:g,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?s1:jz,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=PJ(r,e,void 0);return i&&typeof i!="string"?i:r.create(e,r.Fragment,{children:i||void 0},void 0)}function PJ(e,t,n){if(t.type==="element")return mU(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return fU(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return bU(e,t,n);if(t.type==="mdxjsEsm")return pU(e,t);if(t.type==="root")return yU(e,t,n);if(t.type==="text")return ZU(e,t)}function mU(e,t,n){const g=e.schema;let r=g;t.tagName.toLowerCase()==="svg"&&g.space==="html"&&(r=s1,e.schema=r),e.ancestors.push(t);const i=_J(e,t.tagName,!1),a=SU(e,t);let o=u1(e,t);return dU.has(t.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!Hz(l):!0})),OJ(e,a,i,t),C1(a,o),e.ancestors.pop(),e.schema=g,e.create(t,i,a,n)}function fU(e,t){if(t.data&&t.data.estree&&e.evaluater){const g=t.data.estree.body[0];return g.type,e.evaluater.evaluateExpression(g.expression)}Ku(e,t.position)}function pU(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ku(e,t.position)}function bU(e,t,n){const g=e.schema;let r=g;t.name==="svg"&&g.space==="html"&&(r=s1,e.schema=r),e.ancestors.push(t);const i=t.name===null?e.Fragment:_J(e,t.name,!0),a=vU(e,t),o=u1(e,t);return OJ(e,a,i,t),C1(a,o),e.ancestors.pop(),e.schema=g,e.create(t,i,a,n)}function yU(e,t,n){const g={};return C1(g,u1(e,t)),e.create(t,e.Fragment,g,n)}function ZU(e,t){return t.value}function OJ(e,t,n,g){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=g)}function C1(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function GU(e,t,n){return g;function g(r,i,a,o){const s=Array.isArray(a.children)?n:t;return o?s(i,a,o):s(i,a)}}function BU(e,t){return n;function n(g,r,i,a){const o=Array.isArray(i.children),l=I1(g);return t(r,i,a,o,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function SU(e,t){const n={};let g,r;for(r in t.properties)if(r!=="children"&&c1.call(t.properties,r)){const i=WU(e,r,t.properties[r]);if(i){const[a,o]=i;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&AU.has(t.tagName)?g=o:n[a]=o}}if(g){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=g}return n}function vU(e,t){const n={};for(const g of t.attributes)if(g.type==="mdxJsxExpressionAttribute")if(g.data&&g.data.estree&&e.evaluater){const i=g.data.estree.body[0];i.type;const a=i.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else Ku(e,t.position);else{const r=g.name;let i;if(g.value&&typeof g.value=="object")if(g.value.data&&g.value.data.estree&&e.evaluater){const o=g.value.data.estree.body[0];o.type,i=e.evaluater.evaluateExpression(o.expression)}else Ku(e,t.position);else i=g.value===null?!0:g.value;n[r]=i}return n}function u1(e,t){const n=[];let g=-1;const r=e.passKeys?new Map:cU;for(;++g<t.children.length;){const i=t.children[g];let a;if(e.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const s=r.get(l)||0;a=l+"-"+s,r.set(l,s+1)}}const o=PJ(e,i,a);o!==void 0&&n.push(o)}return n}function WU(e,t,n){const g=zz(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=g.commaSeparated?wz(n):Qz(n)),g.property==="style"){let r=typeof n=="object"?n:VU(e,String(n));return e.stylePropertyNameCase==="css"&&(r=kU(r)),["style",r]}return[e.elementAttributeNameCase==="react"&&g.space?Dz[g.property]||g.property:g.attribute,n]}}function VU(e,t){const n={};try{sU(t,g)}catch(r){if(!e.ignoreInvalidStyle){const i=r,a=new Fg("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=QJ+"#cannot-parse-style-attribute",a}}return n;function g(r,i){let a=r;a.slice(0,2)!=="--"&&(a.slice(0,4)==="-ms-"&&(a="ms-"+a.slice(4)),a=a.replace(uU,wU)),n[a]=i}}function _J(e,t,n){let g;if(!n)g={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let i=-1,a;for(;++i<r.length;){const o=jv(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(i&&o.type==="Literal"),optional:!1}:o}g=a}else g=jv(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(g.type==="Literal"){const r=g.value;return c1.call(e.components,r)?e.components[r]:r}if(e.evaluater)return e.evaluater.evaluateExpression(g);Ku(e)}function Ku(e,t){const n=new Fg("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=QJ+"#cannot-handle-mdx-estrees-without-createevaluater",n}function kU(e){const t={};let n;for(n in e)c1.call(e,n)&&(t[RU(n)]=e[n]);return t}function RU(e){let t=e.replace(CU,XU);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function wU(e,t){return t.toUpperCase()}function XU(e){return"-"+e.toLowerCase()}const Nb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},JU={};function YU(e,t){const n=JU,g=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return qJ(e,g,r)}function qJ(e,t,n){if(NU(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return rW(e.children,t,n)}return Array.isArray(e)?rW(e,t,n):""}function rW(e,t,n){const g=[];let r=-1;for(;++r<e.length;)g[r]=qJ(e[r],t,n);return g.join("")}function NU(e){return!!(e&&typeof e=="object")}const iW=document.createElement("i");function d1(e){const t="&"+e+";";iW.innerHTML=t;const n=iW.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ro(e,t,n,g){const r=e.length;let i=0,a;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,n=n>0?n:0,g.length<1e4)a=Array.from(g),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<g.length;)a=g.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function Mr(e,t){return e.length>0?(ro(e,e.length,0,t),e):t}const aW={}.hasOwnProperty;function HU(e){const t={};let n=-1;for(;++n<e.length;)FU(t,e[n]);return t}function FU(e,t){let n;for(n in t){const r=(aW.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let a;if(i)for(a in i){aW.call(r,a)||(r[a]=[]);const o=i[a];xU(r[a],Array.isArray(o)?o:o?[o]:[])}}}function xU(e,t){let n=-1;const g=[];for(;++n<t.length;)(t[n].add==="after"?e:g).push(t[n]);ro(e,0,0,g)}function $J(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function UI(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const la=Sl(/[A-Za-z]/),Gr=Sl(/[\dA-Za-z]/),KU=Sl(/[#-'*+\--9=?A-Z^-~]/);function PZ(e){return e!==null&&(e<32||e===127)}const OZ=Sl(/\d/),LU=Sl(/[\dA-Fa-f]/),EU=Sl(/[!-/:-@[-`{-~]/);function It(e){return e!==null&&e<-2}function cr(e){return e!==null&&(e<0||e===32)}function Ut(e){return e===-2||e===-1||e===32}const MU=Sl(new RegExp("\\p{P}|\\p{S}","u")),zU=Sl(/\s/);function Sl(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Wc(e){const t=[];let n=-1,g=0,r=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(i===37&&Gr(e.charCodeAt(n+1))&&Gr(e.charCodeAt(n+2)))r=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const o=e.charCodeAt(n+1);i<56320&&o>56319&&o<57344?(a=String.fromCharCode(i,o),r=1):a="�"}else a=String.fromCharCode(i);a&&(t.push(e.slice(g,n),encodeURIComponent(a)),g=n+r+1,a=""),r&&(n+=r,r=0)}return t.join("")+e.slice(g)}function on(e,t,n,g){const r=g?g-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(l){return Ut(l)?(e.enter(n),o(l)):t(l)}function o(l){return Ut(l)&&i++<r?(e.consume(l),o):(e.exit(n),t(l))}}const UU={tokenize:TU};function TU(e){const t=e.attempt(this.parser.constructs.contentInitial,g,r);let n;return t;function g(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),on(e,t,"linePrefix")}function r(o){return e.enter("paragraph"),i(o)}function i(o){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return It(o)?(e.consume(o),e.exit("chunkText"),i):(e.consume(o),a)}}const DU={tokenize:jU},oW={tokenize:QU};function jU(e){const t=this,n=[];let g=0,r,i,a;return o;function o(b){if(g<n.length){const S=n[g];return t.containerState=S[1],e.attempt(S[0].continuation,l,s)(b)}return s(b)}function l(b){if(g++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&p();const S=t.events.length;let X=S,W;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){W=t.events[X][1].end;break}h(g);let V=S;for(;V<t.events.length;)t.events[V][1].end=Object.assign({},W),V++;return ro(t.events,X+1,0,t.events.slice(S)),t.events.length=V,s(b)}return o(b)}function s(b){if(g===n.length){if(!r)return d(b);if(r.currentConstruct&&r.currentConstruct.concrete)return m(b);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(oW,I,c)(b)}function I(b){return r&&p(),h(g),d(b)}function c(b){return t.parser.lazy[t.now().line]=g!==n.length,a=t.now().offset,m(b)}function d(b){return t.containerState={},e.attempt(oW,u,m)(b)}function u(b){return g++,n.push([t.currentConstruct,t.containerState]),d(b)}function m(b){if(b===null){r&&p(),h(0),e.consume(b);return}return r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),f(b)}function f(b){if(b===null){y(e.exit("chunkFlow"),!0),h(0),e.consume(b);return}return It(b)?(e.consume(b),y(e.exit("chunkFlow")),g=0,t.interrupt=void 0,o):(e.consume(b),f)}function y(b,S){const X=t.sliceStream(b);if(S&&X.push(null),b.previous=i,i&&(i.next=b),i=b,r.defineSkip(b.start),r.write(X),t.parser.lazy[b.start.line]){let W=r.events.length;for(;W--;)if(r.events[W][1].start.offset<a&&(!r.events[W][1].end||r.events[W][1].end.offset>a))return;const V=t.events.length;let R=V,z,L;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(z){L=t.events[R][1].end;break}z=!0}for(h(g),W=V;W<t.events.length;)t.events[W][1].end=Object.assign({},L),W++;ro(t.events,R+1,0,t.events.slice(V)),t.events.length=W}}function h(b){let S=n.length;for(;S-- >b;){const X=n[S];t.containerState=X[1],X[0].exit.call(t,e)}n.length=b}function p(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}function QU(e,t,n){return on(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function lW(e){if(e===null||cr(e)||zU(e))return 1;if(MU(e))return 2}function A1(e,t,n){const g=[];let r=-1;for(;++r<e.length;){const i=e[r].resolveAll;i&&!g.includes(i)&&(t=i(t,n),g.push(i))}return t}const _Z={name:"attention",tokenize:OU,resolveAll:PU};function PU(e,t){let n=-1,g,r,i,a,o,l,s,I;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(g=n;g--;)if(e[g][0]==="exit"&&e[g][1].type==="attentionSequence"&&e[g][1]._open&&t.sliceSerialize(e[g][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[g][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[g][1].end.offset-e[g][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[g][1].end.offset-e[g][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const c=Object.assign({},e[g][1].end),d=Object.assign({},e[n][1].start);sW(c,-l),sW(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:c,end:Object.assign({},e[g][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},i={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[g][1].end),end:Object.assign({},e[n][1].start)},r={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},e[g][1].end=Object.assign({},a.start),e[n][1].start=Object.assign({},o.end),s=[],e[g][1].end.offset-e[g][1].start.offset&&(s=Mr(s,[["enter",e[g][1],t],["exit",e[g][1],t]])),s=Mr(s,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",i,t]]),s=Mr(s,A1(t.parser.constructs.insideSpan.null,e.slice(g+1,n),t)),s=Mr(s,[["exit",i,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[n][1].end.offset-e[n][1].start.offset?(I=2,s=Mr(s,[["enter",e[n][1],t],["exit",e[n][1],t]])):I=0,ro(e,g-1,n-g+3,s),n=g+s.length-I-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function OU(e,t){const n=this.parser.constructs.attentionMarkers.null,g=this.previous,r=lW(g);let i;return a;function a(l){return i=l,e.enter("attentionSequence"),o(l)}function o(l){if(l===i)return e.consume(l),o;const s=e.exit("attentionSequence"),I=lW(l),c=!I||I===2&&r||n.includes(l),d=!r||r===2&&I||n.includes(g);return s._open=!!(i===42?c:c&&(r||!d)),s._close=!!(i===42?d:d&&(I||!c)),t(l)}}function sW(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _U={name:"autolink",tokenize:qU};function qU(e,t,n){let g=0;return r;function r(u){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(u),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(u){return la(u)?(e.consume(u),a):u===64?n(u):s(u)}function a(u){return u===43||u===45||u===46||Gr(u)?(g=1,o(u)):s(u)}function o(u){return u===58?(e.consume(u),g=0,l):(u===43||u===45||u===46||Gr(u))&&g++<32?(e.consume(u),o):(g=0,s(u))}function l(u){return u===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(u),e.exit("autolinkMarker"),e.exit("autolink"),t):u===null||u===32||u===60||PZ(u)?n(u):(e.consume(u),l)}function s(u){return u===64?(e.consume(u),I):KU(u)?(e.consume(u),s):n(u)}function I(u){return Gr(u)?c(u):n(u)}function c(u){return u===46?(e.consume(u),g=0,I):u===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(u),e.exit("autolinkMarker"),e.exit("autolink"),t):d(u)}function d(u){if((u===45||Gr(u))&&g++<63){const m=u===45?d:c;return e.consume(u),m}return n(u)}}const K0={tokenize:$U,partial:!0};function $U(e,t,n){return g;function g(i){return Ut(i)?on(e,r,"linePrefix")(i):r(i)}function r(i){return i===null||It(i)?t(i):n(i)}}const eY={name:"blockQuote",tokenize:eT,continuation:{tokenize:tT},exit:nT};function eT(e,t,n){const g=this;return r;function r(a){if(a===62){const o=g.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),i}return n(a)}function i(a){return Ut(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function tT(e,t,n){const g=this;return r;function r(a){return Ut(a)?on(e,i,"linePrefix",g.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return e.attempt(eY,t,n)(a)}}function nT(e){e.exit("blockQuote")}const tY={name:"characterEscape",tokenize:gT};function gT(e,t,n){return g;function g(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),r}function r(i){return EU(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const nY={name:"characterReference",tokenize:rT};function rT(e,t,n){const g=this;let r=0,i,a;return o;function o(c){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),l}function l(c){return c===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(c),e.exit("characterReferenceMarkerNumeric"),s):(e.enter("characterReferenceValue"),i=31,a=Gr,I(c))}function s(c){return c===88||c===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(c),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=LU,I):(e.enter("characterReferenceValue"),i=7,a=OZ,I(c))}function I(c){if(c===59&&r){const d=e.exit("characterReferenceValue");return a===Gr&&!d1(g.sliceSerialize(d))?n(c):(e.enter("characterReferenceMarker"),e.consume(c),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(c)&&r++<i?(e.consume(c),I):n(c)}}const IW={tokenize:aT,partial:!0},cW={name:"codeFenced",tokenize:iT,concrete:!0};function iT(e,t,n){const g=this,r={tokenize:X,partial:!0};let i=0,a=0,o;return l;function l(W){return s(W)}function s(W){const V=g.events[g.events.length-1];return i=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,o=W,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),I(W)}function I(W){return W===o?(a++,e.consume(W),I):a<3?n(W):(e.exit("codeFencedFenceSequence"),Ut(W)?on(e,c,"whitespace")(W):c(W))}function c(W){return W===null||It(W)?(e.exit("codeFencedFence"),g.interrupt?t(W):e.check(IW,f,S)(W)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(W))}function d(W){return W===null||It(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(W)):Ut(W)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),on(e,u,"whitespace")(W)):W===96&&W===o?n(W):(e.consume(W),d)}function u(W){return W===null||It(W)?c(W):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(W))}function m(W){return W===null||It(W)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(W)):W===96&&W===o?n(W):(e.consume(W),m)}function f(W){return e.attempt(r,S,y)(W)}function y(W){return e.enter("lineEnding"),e.consume(W),e.exit("lineEnding"),h}function h(W){return i>0&&Ut(W)?on(e,p,"linePrefix",i+1)(W):p(W)}function p(W){return W===null||It(W)?e.check(IW,f,S)(W):(e.enter("codeFlowValue"),b(W))}function b(W){return W===null||It(W)?(e.exit("codeFlowValue"),p(W)):(e.consume(W),b)}function S(W){return e.exit("codeFenced"),t(W)}function X(W,V,R){let z=0;return L;function L(q){return W.enter("lineEnding"),W.consume(q),W.exit("lineEnding"),k}function k(q){return W.enter("codeFencedFence"),Ut(q)?on(W,v,"linePrefix",g.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):v(q)}function v(q){return q===o?(W.enter("codeFencedFenceSequence"),K(q)):R(q)}function K(q){return q===o?(z++,W.consume(q),K):z>=a?(W.exit("codeFencedFenceSequence"),Ut(q)?on(W,x,"whitespace")(q):x(q)):R(q)}function x(q){return q===null||It(q)?(W.exit("codeFencedFence"),V(q)):R(q)}}}function aT(e,t,n){const g=this;return r;function r(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i)}function i(a){return g.parser.lazy[g.now().line]?n(a):t(a)}}const Hb={name:"codeIndented",tokenize:lT},oT={tokenize:sT,partial:!0};function lT(e,t,n){const g=this;return r;function r(s){return e.enter("codeIndented"),on(e,i,"linePrefix",5)(s)}function i(s){const I=g.events[g.events.length-1];return I&&I[1].type==="linePrefix"&&I[2].sliceSerialize(I[1],!0).length>=4?a(s):n(s)}function a(s){return s===null?l(s):It(s)?e.attempt(oT,a,l)(s):(e.enter("codeFlowValue"),o(s))}function o(s){return s===null||It(s)?(e.exit("codeFlowValue"),a(s)):(e.consume(s),o)}function l(s){return e.exit("codeIndented"),t(s)}}function sT(e,t,n){const g=this;return r;function r(a){return g.parser.lazy[g.now().line]?n(a):It(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r):on(e,i,"linePrefix",5)(a)}function i(a){const o=g.events[g.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):It(a)?r(a):n(a)}}const IT={name:"codeText",tokenize:uT,resolve:cT,previous:CT};function cT(e){let t=e.length-4,n=3,g,r;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(g=n;++g<t;)if(e[g][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(g=n-1,t++;++g<=t;)r===void 0?g!==t&&e[g][1].type!=="lineEnding"&&(r=g):(g===t||e[g][1].type==="lineEnding")&&(e[r][1].type="codeTextData",g!==r+2&&(e[r][1].end=e[g-1][1].end,e.splice(r+2,g-r-2),t-=g-r-2,g=r+2),r=void 0);return e}function CT(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uT(e,t,n){let g=0,r,i;return a;function a(c){return e.enter("codeText"),e.enter("codeTextSequence"),o(c)}function o(c){return c===96?(e.consume(c),g++,o):(e.exit("codeTextSequence"),l(c))}function l(c){return c===null?n(c):c===32?(e.enter("space"),e.consume(c),e.exit("space"),l):c===96?(i=e.enter("codeTextSequence"),r=0,I(c)):It(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),l):(e.enter("codeTextData"),s(c))}function s(c){return c===null||c===32||c===96||It(c)?(e.exit("codeTextData"),l(c)):(e.consume(c),s)}function I(c){return c===96?(e.consume(c),r++,I):r===g?(e.exit("codeTextSequence"),e.exit("codeText"),t(c)):(i.type="codeTextData",s(c))}}class dT{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const g=n??Number.POSITIVE_INFINITY;return g<this.left.length?this.left.slice(t,g):t>this.left.length?this.right.slice(this.right.length-g+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-g+this.left.length).reverse())}splice(t,n,g){const r=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return g&&bC(this.left,g),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),bC(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),bC(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);bC(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);bC(this.left,n.reverse())}}}function bC(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function gY(e){const t={};let n=-1,g,r,i,a,o,l,s;const I=new dT(e);for(;++n<I.length;){for(;n in t;)n=t[n];if(g=I.get(n),n&&g[1].type==="chunkFlow"&&I.get(n-1)[1].type==="listItemPrefix"&&(l=g[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(g[0]==="enter")g[1].contentType&&(Object.assign(t,AT(I,n)),n=t[n],s=!0);else if(g[1]._container){for(i=n,r=void 0;i--&&(a=I.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(r&&(I.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);r&&(g[1].end=Object.assign({},I.get(r)[1].start),o=I.slice(r,n),o.unshift(g),I.splice(r,n-r+1,o))}}return ro(e,0,Number.POSITIVE_INFINITY,I.slice(0)),!s}function AT(e,t){const n=e.get(t)[1],g=e.get(t)[2];let r=t-1;const i=[],a=n._tokenizer||g.parser[n.contentType](n.start),o=a.events,l=[],s={};let I,c,d=-1,u=n,m=0,f=0;const y=[f];for(;u;){for(;e.get(++r)[1]!==u;);i.push(r),u._tokenizer||(I=g.sliceStream(u),u.next||I.push(null),c&&a.defineSkip(u.start),u._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(I),u._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),c=u,u=u.next}for(u=n;++d<o.length;)o[d][0]==="exit"&&o[d-1][0]==="enter"&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(f=d+1,y.push(f),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(a.events=[],u?(u._tokenizer=void 0,u.previous=void 0):y.pop(),d=y.length;d--;){const h=o.slice(y[d],y[d+1]),p=i.pop();l.push([p,p+h.length-1]),e.splice(p,2,h)}for(l.reverse(),d=-1;++d<l.length;)s[m+l[d][0]]=m+l[d][1],m+=l[d][1]-l[d][0]-1;return s}const hT={tokenize:pT,resolve:fT},mT={tokenize:bT,partial:!0};function fT(e){return gY(e),e}function pT(e,t){let n;return g;function g(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?i(o):It(o)?e.check(mT,a,i)(o):(e.consume(o),r)}function i(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function bT(e,t,n){const g=this;return r;function r(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),on(e,i,"linePrefix")}function i(a){if(a===null||It(a))return n(a);const o=g.events[g.events.length-1];return!g.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(g.parser.constructs.flow,n,t)(a)}}function rY(e,t,n,g,r,i,a,o,l){const s=l||Number.POSITIVE_INFINITY;let I=0;return c;function c(h){return h===60?(e.enter(g),e.enter(r),e.enter(i),e.consume(h),e.exit(i),d):h===null||h===32||h===41||PZ(h)?n(h):(e.enter(g),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),f(h))}function d(h){return h===62?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),e.exit(g),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===62?(e.exit("chunkString"),e.exit(o),d(h)):h===null||h===60||It(h)?n(h):(e.consume(h),h===92?m:u)}function m(h){return h===60||h===62||h===92?(e.consume(h),u):u(h)}function f(h){return!I&&(h===null||h===41||cr(h))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(g),t(h)):I<s&&h===40?(e.consume(h),I++,f):h===41?(e.consume(h),I--,f):h===null||h===32||h===40||PZ(h)?n(h):(e.consume(h),h===92?y:f)}function y(h){return h===40||h===41||h===92?(e.consume(h),f):f(h)}}function iY(e,t,n,g,r,i){const a=this;let o=0,l;return s;function s(u){return e.enter(g),e.enter(r),e.consume(u),e.exit(r),e.enter(i),I}function I(u){return o>999||u===null||u===91||u===93&&!l||u===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(u):u===93?(e.exit(i),e.enter(r),e.consume(u),e.exit(r),e.exit(g),t):It(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),I):(e.enter("chunkString",{contentType:"string"}),c(u))}function c(u){return u===null||u===91||u===93||It(u)||o++>999?(e.exit("chunkString"),I(u)):(e.consume(u),l||(l=!Ut(u)),u===92?d:c)}function d(u){return u===91||u===92||u===93?(e.consume(u),o++,c):c(u)}}function aY(e,t,n,g,r,i){let a;return o;function o(d){return d===34||d===39||d===40?(e.enter(g),e.enter(r),e.consume(d),e.exit(r),a=d===40?41:d,l):n(d)}function l(d){return d===a?(e.enter(r),e.consume(d),e.exit(r),e.exit(g),t):(e.enter(i),s(d))}function s(d){return d===a?(e.exit(i),l(a)):d===null?n(d):It(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),on(e,s,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),I(d))}function I(d){return d===a||d===null||It(d)?(e.exit("chunkString"),s(d)):(e.consume(d),d===92?c:I)}function c(d){return d===a||d===92?(e.consume(d),I):I(d)}}function eu(e,t){let n;return g;function g(r){return It(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,g):Ut(r)?on(e,g,n?"linePrefix":"lineSuffix")(r):t(r)}}const yT={name:"definition",tokenize:GT},ZT={tokenize:BT,partial:!0};function GT(e,t,n){const g=this;let r;return i;function i(u){return e.enter("definition"),a(u)}function a(u){return iY.call(g,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return r=UI(g.sliceSerialize(g.events[g.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),l):n(u)}function l(u){return cr(u)?eu(e,s)(u):s(u)}function s(u){return rY(e,I,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function I(u){return e.attempt(ZT,c,c)(u)}function c(u){return Ut(u)?on(e,d,"whitespace")(u):d(u)}function d(u){return u===null||It(u)?(e.exit("definition"),g.parser.defined.push(r),t(u)):n(u)}}function BT(e,t,n){return g;function g(o){return cr(o)?eu(e,r)(o):n(o)}function r(o){return aY(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return Ut(o)?on(e,a,"whitespace")(o):a(o)}function a(o){return o===null||It(o)?t(o):n(o)}}const ST={name:"hardBreakEscape",tokenize:vT};function vT(e,t,n){return g;function g(i){return e.enter("hardBreakEscape"),e.consume(i),r}function r(i){return It(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const WT={name:"headingAtx",tokenize:kT,resolve:VT};function VT(e,t){let n=e.length-2,g=3,r,i;return e[g][1].type==="whitespace"&&(g+=2),n-2>g&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(g===n-1||n-4>g&&e[n-2][1].type==="whitespace")&&(n-=g+1===n?2:4),n>g&&(r={type:"atxHeadingText",start:e[g][1].start,end:e[n][1].end},i={type:"chunkText",start:e[g][1].start,end:e[n][1].end,contentType:"text"},ro(e,g,n-g+1,[["enter",r,t],["enter",i,t],["exit",i,t],["exit",r,t]])),e}function kT(e,t,n){let g=0;return r;function r(I){return e.enter("atxHeading"),i(I)}function i(I){return e.enter("atxHeadingSequence"),a(I)}function a(I){return I===35&&g++<6?(e.consume(I),a):I===null||cr(I)?(e.exit("atxHeadingSequence"),o(I)):n(I)}function o(I){return I===35?(e.enter("atxHeadingSequence"),l(I)):I===null||It(I)?(e.exit("atxHeading"),t(I)):Ut(I)?on(e,o,"whitespace")(I):(e.enter("atxHeadingText"),s(I))}function l(I){return I===35?(e.consume(I),l):(e.exit("atxHeadingSequence"),o(I))}function s(I){return I===null||I===35||cr(I)?(e.exit("atxHeadingText"),o(I)):(e.consume(I),s)}}const RT=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],CW=["pre","script","style","textarea"],wT={name:"htmlFlow",tokenize:NT,resolveTo:YT,concrete:!0},XT={tokenize:FT,partial:!0},JT={tokenize:HT,partial:!0};function YT(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function NT(e,t,n){const g=this;let r,i,a,o,l;return s;function s(J){return I(J)}function I(J){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(J),c}function c(J){return J===33?(e.consume(J),d):J===47?(e.consume(J),i=!0,f):J===63?(e.consume(J),r=3,g.interrupt?t:N):la(J)?(e.consume(J),a=String.fromCharCode(J),y):n(J)}function d(J){return J===45?(e.consume(J),r=2,u):J===91?(e.consume(J),r=5,o=0,m):la(J)?(e.consume(J),r=4,g.interrupt?t:N):n(J)}function u(J){return J===45?(e.consume(J),g.interrupt?t:N):n(J)}function m(J){const O="CDATA[";return J===O.charCodeAt(o++)?(e.consume(J),o===O.length?g.interrupt?t:v:m):n(J)}function f(J){return la(J)?(e.consume(J),a=String.fromCharCode(J),y):n(J)}function y(J){if(J===null||J===47||J===62||cr(J)){const O=J===47,ee=a.toLowerCase();return!O&&!i&&CW.includes(ee)?(r=1,g.interrupt?t(J):v(J)):RT.includes(a.toLowerCase())?(r=6,O?(e.consume(J),h):g.interrupt?t(J):v(J)):(r=7,g.interrupt&&!g.parser.lazy[g.now().line]?n(J):i?p(J):b(J))}return J===45||Gr(J)?(e.consume(J),a+=String.fromCharCode(J),y):n(J)}function h(J){return J===62?(e.consume(J),g.interrupt?t:v):n(J)}function p(J){return Ut(J)?(e.consume(J),p):L(J)}function b(J){return J===47?(e.consume(J),L):J===58||J===95||la(J)?(e.consume(J),S):Ut(J)?(e.consume(J),b):L(J)}function S(J){return J===45||J===46||J===58||J===95||Gr(J)?(e.consume(J),S):X(J)}function X(J){return J===61?(e.consume(J),W):Ut(J)?(e.consume(J),X):b(J)}function W(J){return J===null||J===60||J===61||J===62||J===96?n(J):J===34||J===39?(e.consume(J),l=J,V):Ut(J)?(e.consume(J),W):R(J)}function V(J){return J===l?(e.consume(J),l=null,z):J===null||It(J)?n(J):(e.consume(J),V)}function R(J){return J===null||J===34||J===39||J===47||J===60||J===61||J===62||J===96||cr(J)?X(J):(e.consume(J),R)}function z(J){return J===47||J===62||Ut(J)?b(J):n(J)}function L(J){return J===62?(e.consume(J),k):n(J)}function k(J){return J===null||It(J)?v(J):Ut(J)?(e.consume(J),k):n(J)}function v(J){return J===45&&r===2?(e.consume(J),Q):J===60&&r===1?(e.consume(J),D):J===62&&r===4?(e.consume(J),le):J===63&&r===3?(e.consume(J),N):J===93&&r===5?(e.consume(J),P):It(J)&&(r===6||r===7)?(e.exit("htmlFlowData"),e.check(XT,Y,K)(J)):J===null||It(J)?(e.exit("htmlFlowData"),K(J)):(e.consume(J),v)}function K(J){return e.check(JT,x,Y)(J)}function x(J){return e.enter("lineEnding"),e.consume(J),e.exit("lineEnding"),q}function q(J){return J===null||It(J)?K(J):(e.enter("htmlFlowData"),v(J))}function Q(J){return J===45?(e.consume(J),N):v(J)}function D(J){return J===47?(e.consume(J),a="",U):v(J)}function U(J){if(J===62){const O=a.toLowerCase();return CW.includes(O)?(e.consume(J),le):v(J)}return la(J)&&a.length<8?(e.consume(J),a+=String.fromCharCode(J),U):v(J)}function P(J){return J===93?(e.consume(J),N):v(J)}function N(J){return J===62?(e.consume(J),le):J===45&&r===2?(e.consume(J),N):v(J)}function le(J){return J===null||It(J)?(e.exit("htmlFlowData"),Y(J)):(e.consume(J),le)}function Y(J){return e.exit("htmlFlow"),t(J)}}function HT(e,t,n){const g=this;return r;function r(a){return It(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):n(a)}function i(a){return g.parser.lazy[g.now().line]?n(a):t(a)}}function FT(e,t,n){return g;function g(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(K0,t,n)}}const xT={name:"htmlText",tokenize:KT};function KT(e,t,n){const g=this;let r,i,a;return o;function o(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),l}function l(N){return N===33?(e.consume(N),s):N===47?(e.consume(N),X):N===63?(e.consume(N),b):la(N)?(e.consume(N),R):n(N)}function s(N){return N===45?(e.consume(N),I):N===91?(e.consume(N),i=0,m):la(N)?(e.consume(N),p):n(N)}function I(N){return N===45?(e.consume(N),u):n(N)}function c(N){return N===null?n(N):N===45?(e.consume(N),d):It(N)?(a=c,D(N)):(e.consume(N),c)}function d(N){return N===45?(e.consume(N),u):c(N)}function u(N){return N===62?Q(N):N===45?d(N):c(N)}function m(N){const le="CDATA[";return N===le.charCodeAt(i++)?(e.consume(N),i===le.length?f:m):n(N)}function f(N){return N===null?n(N):N===93?(e.consume(N),y):It(N)?(a=f,D(N)):(e.consume(N),f)}function y(N){return N===93?(e.consume(N),h):f(N)}function h(N){return N===62?Q(N):N===93?(e.consume(N),h):f(N)}function p(N){return N===null||N===62?Q(N):It(N)?(a=p,D(N)):(e.consume(N),p)}function b(N){return N===null?n(N):N===63?(e.consume(N),S):It(N)?(a=b,D(N)):(e.consume(N),b)}function S(N){return N===62?Q(N):b(N)}function X(N){return la(N)?(e.consume(N),W):n(N)}function W(N){return N===45||Gr(N)?(e.consume(N),W):V(N)}function V(N){return It(N)?(a=V,D(N)):Ut(N)?(e.consume(N),V):Q(N)}function R(N){return N===45||Gr(N)?(e.consume(N),R):N===47||N===62||cr(N)?z(N):n(N)}function z(N){return N===47?(e.consume(N),Q):N===58||N===95||la(N)?(e.consume(N),L):It(N)?(a=z,D(N)):Ut(N)?(e.consume(N),z):Q(N)}function L(N){return N===45||N===46||N===58||N===95||Gr(N)?(e.consume(N),L):k(N)}function k(N){return N===61?(e.consume(N),v):It(N)?(a=k,D(N)):Ut(N)?(e.consume(N),k):z(N)}function v(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),r=N,K):It(N)?(a=v,D(N)):Ut(N)?(e.consume(N),v):(e.consume(N),x)}function K(N){return N===r?(e.consume(N),r=void 0,q):N===null?n(N):It(N)?(a=K,D(N)):(e.consume(N),K)}function x(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||cr(N)?z(N):(e.consume(N),x)}function q(N){return N===47||N===62||cr(N)?z(N):n(N)}function Q(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function D(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),U}function U(N){return Ut(N)?on(e,P,"linePrefix",g.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):P(N)}function P(N){return e.enter("htmlTextData"),a(N)}}const h1={name:"labelEnd",tokenize:TT,resolveTo:UT,resolveAll:zT},LT={tokenize:DT},ET={tokenize:jT},MT={tokenize:QT};function zT(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function UT(e,t){let n=e.length,g=0,r,i,a,o;for(;n--;)if(r=e[n][1],i){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;e[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(i=n,r.type!=="labelLink")){g=2;break}}else r.type==="labelEnd"&&(a=n);const l={type:e[i][1].type==="labelLink"?"link":"image",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"label",start:Object.assign({},e[i][1].start),end:Object.assign({},e[a][1].end)},I={type:"labelText",start:Object.assign({},e[i+g+2][1].end),end:Object.assign({},e[a-2][1].start)};return o=[["enter",l,t],["enter",s,t]],o=Mr(o,e.slice(i+1,i+g+3)),o=Mr(o,[["enter",I,t]]),o=Mr(o,A1(t.parser.constructs.insideSpan.null,e.slice(i+g+4,a-3),t)),o=Mr(o,[["exit",I,t],e[a-2],e[a-1],["exit",s,t]]),o=Mr(o,e.slice(a+1)),o=Mr(o,[["exit",l,t]]),ro(e,i,e.length,o),e}function TT(e,t,n){const g=this;let r=g.events.length,i,a;for(;r--;)if((g.events[r][1].type==="labelImage"||g.events[r][1].type==="labelLink")&&!g.events[r][1]._balanced){i=g.events[r][1];break}return o;function o(d){return i?i._inactive?c(d):(a=g.parser.defined.includes(UI(g.sliceSerialize({start:i.end,end:g.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),l):n(d)}function l(d){return d===40?e.attempt(LT,I,a?I:c)(d):d===91?e.attempt(ET,I,a?s:c)(d):a?I(d):c(d)}function s(d){return e.attempt(MT,I,c)(d)}function I(d){return t(d)}function c(d){return i._balanced=!0,n(d)}}function DT(e,t,n){return g;function g(c){return e.enter("resource"),e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),r}function r(c){return cr(c)?eu(e,i)(c):i(c)}function i(c){return c===41?I(c):rY(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function a(c){return cr(c)?eu(e,l)(c):I(c)}function o(c){return n(c)}function l(c){return c===34||c===39||c===40?aY(e,s,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):I(c)}function s(c){return cr(c)?eu(e,I)(c):I(c)}function I(c){return c===41?(e.enter("resourceMarker"),e.consume(c),e.exit("resourceMarker"),e.exit("resource"),t):n(c)}}function jT(e,t,n){const g=this;return r;function r(o){return iY.call(g,e,i,a,"reference","referenceMarker","referenceString")(o)}function i(o){return g.parser.defined.includes(UI(g.sliceSerialize(g.events[g.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function QT(e,t,n){return g;function g(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),r}function r(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const PT={name:"labelStartImage",tokenize:OT,resolveAll:h1.resolveAll};function OT(e,t,n){const g=this;return r;function r(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),i}function i(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in g.parser.constructs?n(o):t(o)}}const _T={name:"labelStartLink",tokenize:qT,resolveAll:h1.resolveAll};function qT(e,t,n){const g=this;return r;function r(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in g.parser.constructs?n(a):t(a)}}const Fb={name:"lineEnding",tokenize:$T};function $T(e,t){return n;function n(g){return e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),on(e,t,"linePrefix")}}const Hh={name:"thematicBreak",tokenize:eD};function eD(e,t,n){let g=0,r;return i;function i(s){return e.enter("thematicBreak"),a(s)}function a(s){return r=s,o(s)}function o(s){return s===r?(e.enter("thematicBreakSequence"),l(s)):g>=3&&(s===null||It(s))?(e.exit("thematicBreak"),t(s)):n(s)}function l(s){return s===r?(e.consume(s),g++,l):(e.exit("thematicBreakSequence"),Ut(s)?on(e,o,"whitespace")(s):o(s))}}const qg={name:"list",tokenize:gD,continuation:{tokenize:rD},exit:aD},tD={tokenize:oD,partial:!0},nD={tokenize:iD,partial:!0};function gD(e,t,n){const g=this,r=g.events[g.events.length-1];let i=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return o;function o(u){const m=g.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!g.containerState.marker||u===g.containerState.marker:OZ(u)){if(g.containerState.type||(g.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),u===42||u===45?e.check(Hh,n,s)(u):s(u);if(!g.interrupt||u===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(u)}return n(u)}function l(u){return OZ(u)&&++a<10?(e.consume(u),l):(!g.interrupt||a<2)&&(g.containerState.marker?u===g.containerState.marker:u===41||u===46)?(e.exit("listItemValue"),s(u)):n(u)}function s(u){return e.enter("listItemMarker"),e.consume(u),e.exit("listItemMarker"),g.containerState.marker=g.containerState.marker||u,e.check(K0,g.interrupt?n:I,e.attempt(tD,d,c))}function I(u){return g.containerState.initialBlankLine=!0,i++,d(u)}function c(u){return Ut(u)?(e.enter("listItemPrefixWhitespace"),e.consume(u),e.exit("listItemPrefixWhitespace"),d):n(u)}function d(u){return g.containerState.size=i+g.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(u)}}function rD(e,t,n){const g=this;return g.containerState._closeFlow=void 0,e.check(K0,r,i);function r(o){return g.containerState.furtherBlankLines=g.containerState.furtherBlankLines||g.containerState.initialBlankLine,on(e,t,"listItemIndent",g.containerState.size+1)(o)}function i(o){return g.containerState.furtherBlankLines||!Ut(o)?(g.containerState.furtherBlankLines=void 0,g.containerState.initialBlankLine=void 0,a(o)):(g.containerState.furtherBlankLines=void 0,g.containerState.initialBlankLine=void 0,e.attempt(nD,t,a)(o))}function a(o){return g.containerState._closeFlow=!0,g.interrupt=void 0,on(e,e.attempt(qg,t,n),"linePrefix",g.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function iD(e,t,n){const g=this;return on(e,r,"listItemIndent",g.containerState.size+1);function r(i){const a=g.events[g.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===g.containerState.size?t(i):n(i)}}function aD(e){e.exit(this.containerState.type)}function oD(e,t,n){const g=this;return on(e,r,"listItemPrefixWhitespace",g.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(i){const a=g.events[g.events.length-1];return!Ut(i)&&a&&a[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const uW={name:"setextUnderline",tokenize:sD,resolveTo:lD};function lD(e,t){let n=e.length,g,r,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){g=n;break}e[n][1].type==="paragraph"&&(r=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[g][1],t]),e[g][1].end=Object.assign({},e[i][1].end)):e[g][1]=a,e.push(["exit",a,t]),e}function sD(e,t,n){const g=this;let r;return i;function i(s){let I=g.events.length,c;for(;I--;)if(g.events[I][1].type!=="lineEnding"&&g.events[I][1].type!=="linePrefix"&&g.events[I][1].type!=="content"){c=g.events[I][1].type==="paragraph";break}return!g.parser.lazy[g.now().line]&&(g.interrupt||c)?(e.enter("setextHeadingLine"),r=s,a(s)):n(s)}function a(s){return e.enter("setextHeadingLineSequence"),o(s)}function o(s){return s===r?(e.consume(s),o):(e.exit("setextHeadingLineSequence"),Ut(s)?on(e,l,"lineSuffix")(s):l(s))}function l(s){return s===null||It(s)?(e.exit("setextHeadingLine"),t(s)):n(s)}}const ID={tokenize:cD};function cD(e){const t=this,n=e.attempt(K0,g,e.attempt(this.parser.constructs.flowInitial,r,on(e,e.attempt(this.parser.constructs.flow,r,e.attempt(hT,r)),"linePrefix")));return n;function g(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function r(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const CD={resolveAll:lY()},uD=oY("string"),dD=oY("text");function oY(e){return{tokenize:t,resolveAll:lY(e==="text"?AD:void 0)};function t(n){const g=this,r=this.parser.constructs[e],i=n.attempt(r,a,o);return a;function a(I){return s(I)?i(I):o(I)}function o(I){if(I===null){n.consume(I);return}return n.enter("data"),n.consume(I),l}function l(I){return s(I)?(n.exit("data"),i(I)):(n.consume(I),l)}function s(I){if(I===null)return!0;const c=r[I];let d=-1;if(c)for(;++d<c.length;){const u=c[d];if(!u.previous||u.previous.call(g,g.previous))return!0}return!1}}}function lY(e){return t;function t(n,g){let r=-1,i;for(;++r<=n.length;)i===void 0?n[r]&&n[r][1].type==="data"&&(i=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(n,g):n}}function AD(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const g=e[n-1][1],r=t.sliceStream(g);let i=r.length,a=-1,o=0,l;for(;i--;){const s=r[i];if(typeof s=="string"){for(a=s.length;s.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(s===-2)l=!0,o++;else if(s!==-1){i++;break}}if(o){const s={type:n===e.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{line:g.end.line,column:g.end.column-o,offset:g.end.offset-o,_index:g.start._index+i,_bufferIndex:i?a:g.start._bufferIndex+a},end:Object.assign({},g.end)};g.end=Object.assign({},s.start),g.start.offset===g.end.offset?Object.assign(g,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}function hD(e,t,n){let g=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const r={},i=[];let a=[],o=[];const l={consume:p,enter:b,exit:S,attempt:V(X),check:V(W),interrupt:V(W,{interrupt:!0})},s={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:u,sliceSerialize:d,now:m,defineSkip:f,write:c};let I=t.tokenize.call(s,l);return t.resolveAll&&i.push(t),s;function c(k){return a=Mr(a,k),y(),a[a.length-1]!==null?[]:(R(t,0),s.events=A1(i,s.events,s),s.events)}function d(k,v){return fD(u(k),v)}function u(k){return mD(a,k)}function m(){const{line:k,column:v,offset:K,_index:x,_bufferIndex:q}=g;return{line:k,column:v,offset:K,_index:x,_bufferIndex:q}}function f(k){r[k.line]=k.column,L()}function y(){let k;for(;g._index<a.length;){const v=a[g._index];if(typeof v=="string")for(k=g._index,g._bufferIndex<0&&(g._bufferIndex=0);g._index===k&&g._bufferIndex<v.length;)h(v.charCodeAt(g._bufferIndex));else h(v)}}function h(k){I=I(k)}function p(k){It(k)?(g.line++,g.column=1,g.offset+=k===-3?2:1,L()):k!==-1&&(g.column++,g.offset++),g._bufferIndex<0?g._index++:(g._bufferIndex++,g._bufferIndex===a[g._index].length&&(g._bufferIndex=-1,g._index++)),s.previous=k}function b(k,v){const K=v||{};return K.type=k,K.start=m(),s.events.push(["enter",K,s]),o.push(K),K}function S(k){const v=o.pop();return v.end=m(),s.events.push(["exit",v,s]),v}function X(k,v){R(k,v.from)}function W(k,v){v.restore()}function V(k,v){return K;function K(x,q,Q){let D,U,P,N;return Array.isArray(x)?Y(x):"tokenize"in x?Y([x]):le(x);function le(te){return se;function se(ce){const re=ce!==null&&te[ce],fe=ce!==null&&te.null,be=[...Array.isArray(re)?re:re?[re]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return Y(be)(ce)}}function Y(te){return D=te,U=0,te.length===0?Q:J(te[U])}function J(te){return se;function se(ce){return N=z(),P=te,te.partial||(s.currentConstruct=te),te.name&&s.parser.constructs.disable.null.includes(te.name)?ee():te.tokenize.call(v?Object.assign(Object.create(s),v):s,l,O,ee)(ce)}}function O(te){return k(P,N),q}function ee(te){return N.restore(),++U<D.length?J(D[U]):Q}}}function R(k,v){k.resolveAll&&!i.includes(k)&&i.push(k),k.resolve&&ro(s.events,v,s.events.length-v,k.resolve(s.events.slice(v),s)),k.resolveTo&&(s.events=k.resolveTo(s.events,s))}function z(){const k=m(),v=s.previous,K=s.currentConstruct,x=s.events.length,q=Array.from(o);return{restore:Q,from:x};function Q(){g=k,s.previous=v,s.currentConstruct=K,s.events.length=x,o=q,L()}}function L(){g.line in r&&g.column<2&&(g.column=r[g.line],g.offset+=r[g.line]-1)}}function mD(e,t){const n=t.start._index,g=t.start._bufferIndex,r=t.end._index,i=t.end._bufferIndex;let a;if(n===r)a=[e[n].slice(g,i)];else{if(a=e.slice(n,r),g>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(g):a.shift()}i>0&&a.push(e[r].slice(0,i))}return a}function fD(e,t){let n=-1;const g=[];let r;for(;++n<e.length;){const i=e[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&r)continue;a=" ";break}default:a=String.fromCharCode(i)}r=i===-2,g.push(a)}return g.join("")}const pD={42:qg,43:qg,45:qg,48:qg,49:qg,50:qg,51:qg,52:qg,53:qg,54:qg,55:qg,56:qg,57:qg,62:eY},bD={91:yT},yD={[-2]:Hb,[-1]:Hb,32:Hb},ZD={35:WT,42:Hh,45:[uW,Hh],60:wT,61:uW,95:Hh,96:cW,126:cW},GD={38:nY,92:tY},BD={[-5]:Fb,[-4]:Fb,[-3]:Fb,33:PT,38:nY,42:_Z,60:[_U,xT],91:_T,92:[ST,tY],93:h1,95:_Z,96:IT},SD={null:[_Z,CD]},vD={null:[42,95]},WD={null:[]},VD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:vD,contentInitial:bD,disable:WD,document:pD,flow:ZD,flowInitial:yD,insideSpan:SD,string:GD,text:BD},Symbol.toStringTag,{value:"Module"}));function kD(e){const n=HU([VD,...(e||{}).extensions||[]]),g={defined:[],lazy:{},constructs:n,content:r(UU),document:r(DU),flow:r(ID),string:r(uD),text:r(dD)};return g;function r(i){return a;function a(o){return hD(g,i,o)}}}function RD(e){for(;!gY(e););return e}const dW=/[\0\t\n\r]/g;function wD(){let e=1,t="",n=!0,g;return r;function r(i,a,o){const l=[];let s,I,c,d,u;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),c=0,t="",n&&(i.charCodeAt(0)===65279&&c++,n=void 0);c<i.length;){if(dW.lastIndex=c,s=dW.exec(i),d=s&&s.index!==void 0?s.index:i.length,u=i.charCodeAt(d),!s){t=i.slice(c);break}if(u===10&&c===d&&g)l.push(-3),g=void 0;else switch(g&&(l.push(-5),g=void 0),c<d&&(l.push(i.slice(c,d)),e+=d-c),u){case 0:{l.push(65533),e++;break}case 9:{for(I=Math.ceil(e/4)*4,l.push(-2);e++<I;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:g=!0,e=1}c=d+1}return o&&(g&&l.push(-5),t&&l.push(t),l.push(null)),l}}const XD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function JD(e){return e.replace(XD,YD)}function YD(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),i=r===120||r===88;return $J(n.slice(i?2:1),i?16:10)}return d1(n)||e}const sY={}.hasOwnProperty;function ND(e,t,n){return typeof t!="string"&&(n=t,t=void 0),HD(n)(RD(kD(n).document().write(wD()(e,t,!0))))}function HD(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(we),autolinkProtocol:z,autolinkEmail:z,atxHeading:i(pe),blockQuote:i(fe),characterEscape:z,characterReference:z,codeFenced:i(be),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(be,a),codeText:i(ue,a),codeTextData:z,data:z,codeFlowValue:z,definition:i(He),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Le),hardBreakEscape:i(ge),hardBreakTrailing:i(ge),htmlFlow:i(rt,a),htmlFlowData:z,htmlText:i(rt,a),htmlTextData:z,image:i(qe),label:a,link:i(we),listItem:i(Ue),listItemValue:d,listOrdered:i(Ke,c),listUnordered:i(Ke),paragraph:i(Me),reference:J,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(pe),strong:i(nt),thematicBreak:i(At)},exit:{atxHeading:l(),atxHeadingSequence:X,autolink:l(),autolinkEmail:re,autolinkProtocol:ce,blockQuote:l(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:te,characterReference:se,codeFenced:l(y),codeFencedFence:f,codeFencedFenceInfo:u,codeFencedFenceMeta:m,codeFlowValue:L,codeIndented:l(h),codeText:l(q),codeTextData:L,data:L,definition:l(),definitionDestinationString:S,definitionLabelString:p,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(v),hardBreakTrailing:l(v),htmlFlow:l(K),htmlFlowData:L,htmlText:l(x),htmlTextData:L,image:l(D),label:P,labelText:U,lineEnding:k,link:l(Q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:O,resourceDestinationString:N,resourceTitleString:le,resource:Y,setextHeading:l(R),setextHeadingLineSequence:V,setextHeadingText:W,strong:l(),thematicBreak:l()}};IY(t,(e||{}).mdastExtensions||[]);const n={};return g;function g(me){let We={type:"root",children:[]};const Te={stack:[We],tokenStack:[],config:t,enter:o,exit:s,buffer:a,resume:I,data:n},xe=[];let $e=-1;for(;++$e<me.length;)if(me[$e][1].type==="listOrdered"||me[$e][1].type==="listUnordered")if(me[$e][0]==="enter")xe.push($e);else{const Fe=xe.pop();$e=r(me,Fe,$e)}for($e=-1;++$e<me.length;){const Fe=t[me[$e][0]];sY.call(Fe,me[$e][1].type)&&Fe[me[$e][1].type].call(Object.assign({sliceSerialize:me[$e][2].sliceSerialize},Te),me[$e][1])}if(Te.tokenStack.length>0){const Fe=Te.tokenStack[Te.tokenStack.length-1];(Fe[1]||AW).call(Te,void 0,Fe[0])}for(We.position={start:No(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:No(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<t.transforms.length;)We=t.transforms[$e](We)||We;return We}function r(me,We,Te){let xe=We-1,$e=-1,Fe=!1,An,ft,ug,Yt;for(;++xe<=Te;){const Vt=me[xe];switch(Vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Vt[0]==="enter"?$e++:$e--,Yt=void 0;break}case"lineEndingBlank":{Vt[0]==="enter"&&(An&&!Yt&&!$e&&!ug&&(ug=xe),Yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Yt=void 0}if(!$e&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||$e===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(An){let dg=xe;for(ft=void 0;dg--;){const vt=me[dg];if(vt[1].type==="lineEnding"||vt[1].type==="lineEndingBlank"){if(vt[0]==="exit")continue;ft&&(me[ft][1].type="lineEndingBlank",Fe=!0),vt[1].type="lineEnding",ft=dg}else if(!(vt[1].type==="linePrefix"||vt[1].type==="blockQuotePrefix"||vt[1].type==="blockQuotePrefixWhitespace"||vt[1].type==="blockQuoteMarker"||vt[1].type==="listItemIndent"))break}ug&&(!ft||ug<ft)&&(An._spread=!0),An.end=Object.assign({},ft?me[ft][1].start:Vt[1].end),me.splice(ft||xe,0,["exit",An,Vt[2]]),xe++,Te++}if(Vt[1].type==="listItemPrefix"){const dg={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start),end:void 0};An=dg,me.splice(xe,0,["enter",dg,Vt[2]]),xe++,Te++,ug=void 0,Yt=!0}}}return me[We][1]._spread=Fe,Te}function i(me,We){return Te;function Te(xe){o.call(this,me(xe),xe),We&&We.call(this,xe)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(me,We,Te){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([We,Te]),me.position={start:No(We.start),end:void 0}}function l(me){return We;function We(Te){me&&me.call(this,Te),s.call(this,Te)}}function s(me,We){const Te=this.stack.pop(),xe=this.tokenStack.pop();if(xe)xe[0].type!==me.type&&(We?We.call(this,me,xe[0]):(xe[1]||AW).call(this,me,xe[0]));else throw new Error("Cannot close `"+me.type+"` ("+$C({start:me.start,end:me.end})+"): it’s not open");Te.position.end=No(me.end)}function I(){return YU(this.stack.pop())}function c(){this.data.expectingFirstListItemValue=!0}function d(me){if(this.data.expectingFirstListItemValue){const We=this.stack[this.stack.length-2];We.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function u(){const me=this.resume(),We=this.stack[this.stack.length-1];We.lang=me}function m(){const me=this.resume(),We=this.stack[this.stack.length-1];We.meta=me}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const me=this.resume(),We=this.stack[this.stack.length-1];We.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function h(){const me=this.resume(),We=this.stack[this.stack.length-1];We.value=me.replace(/(\r?\n|\r)$/g,"")}function p(me){const We=this.resume(),Te=this.stack[this.stack.length-1];Te.label=We,Te.identifier=UI(this.sliceSerialize(me)).toLowerCase()}function b(){const me=this.resume(),We=this.stack[this.stack.length-1];We.title=me}function S(){const me=this.resume(),We=this.stack[this.stack.length-1];We.url=me}function X(me){const We=this.stack[this.stack.length-1];if(!We.depth){const Te=this.sliceSerialize(me).length;We.depth=Te}}function W(){this.data.setextHeadingSlurpLineEnding=!0}function V(me){const We=this.stack[this.stack.length-1];We.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function z(me){const Te=this.stack[this.stack.length-1].children;let xe=Te[Te.length-1];(!xe||xe.type!=="text")&&(xe=ct(),xe.position={start:No(me.start),end:void 0},Te.push(xe)),this.stack.push(xe)}function L(me){const We=this.stack.pop();We.value+=this.sliceSerialize(me),We.position.end=No(me.end)}function k(me){const We=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Te=We.children[We.children.length-1];Te.position.end=No(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(We.type)&&(z.call(this,me),L.call(this,me))}function v(){this.data.atHardBreak=!0}function K(){const me=this.resume(),We=this.stack[this.stack.length-1];We.value=me}function x(){const me=this.resume(),We=this.stack[this.stack.length-1];We.value=me}function q(){const me=this.resume(),We=this.stack[this.stack.length-1];We.value=me}function Q(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const We=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=We,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function D(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const We=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=We,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function U(me){const We=this.sliceSerialize(me),Te=this.stack[this.stack.length-2];Te.label=JD(We),Te.identifier=UI(We).toLowerCase()}function P(){const me=this.stack[this.stack.length-1],We=this.resume(),Te=this.stack[this.stack.length-1];if(this.data.inReference=!0,Te.type==="link"){const xe=me.children;Te.children=xe}else Te.alt=We}function N(){const me=this.resume(),We=this.stack[this.stack.length-1];We.url=me}function le(){const me=this.resume(),We=this.stack[this.stack.length-1];We.title=me}function Y(){this.data.inReference=void 0}function J(){this.data.referenceType="collapsed"}function O(me){const We=this.resume(),Te=this.stack[this.stack.length-1];Te.label=We,Te.identifier=UI(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function ee(me){this.data.characterReferenceType=me.type}function te(me){const We=this.sliceSerialize(me),Te=this.data.characterReferenceType;let xe;Te?(xe=$J(We,Te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xe=d1(We);const $e=this.stack[this.stack.length-1];$e.value+=xe}function se(me){const We=this.stack.pop();We.position.end=No(me.end)}function ce(me){L.call(this,me);const We=this.stack[this.stack.length-1];We.url=this.sliceSerialize(me)}function re(me){L.call(this,me);const We=this.stack[this.stack.length-1];We.url="mailto:"+this.sliceSerialize(me)}function fe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function He(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Le(){return{type:"emphasis",children:[]}}function pe(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function rt(){return{type:"html",value:""}}function qe(){return{type:"image",title:null,url:"",alt:null}}function we(){return{type:"link",title:null,url:"",children:[]}}function Ke(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ue(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function Me(){return{type:"paragraph",children:[]}}function nt(){return{type:"strong",children:[]}}function ct(){return{type:"text",value:""}}function At(){return{type:"thematicBreak"}}}function No(e){return{line:e.line,column:e.column,offset:e.offset}}function IY(e,t){let n=-1;for(;++n<t.length;){const g=t[n];Array.isArray(g)?IY(e,g):FD(e,g)}}function FD(e,t){let n;for(n in t)if(sY.call(t,n))switch(n){case"canContainEols":{const g=t[n];g&&e[n].push(...g);break}case"transforms":{const g=t[n];g&&e[n].push(...g);break}case"enter":case"exit":{const g=t[n];g&&Object.assign(e[n],g);break}}}function AW(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$C({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$C({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$C({start:t.start,end:t.end})+") is still open")}function xD(e){const t=this;t.parser=n;function n(g){return ND(g,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function KD(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function LD(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ED(e,t){const n=t.value?t.value+`
`:"",g={};t.lang&&(g.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:g,children:[{type:"text",value:n}]};return t.meta&&(r.data={meta:t.meta}),e.patch(t,r),r=e.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},e.patch(t,r),r}function MD(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zD(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UD(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",g=String(t.identifier).toUpperCase(),r=Wc(g.toLowerCase()),i=e.footnoteOrder.indexOf(g);let a,o=e.footnoteCounts.get(g);o===void 0?(o=0,e.footnoteOrder.push(g),a=e.footnoteOrder.length):a=i+1,o+=1,e.footnoteCounts.set(g,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const s={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,s),e.applyData(t,s)}function TD(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DD(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function cY(e,t){const n=t.referenceType;let g="]";if(n==="collapsed"?g+="[]":n==="full"&&(g+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+g}];const r=e.all(t),i=r[0];i&&i.type==="text"?i.value="["+i.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=g:r.push({type:"text",value:g}),r}function jD(e,t){const n=String(t.identifier).toUpperCase(),g=e.definitionById.get(n);if(!g)return cY(e,t);const r={src:Wc(g.url||""),alt:t.alt};g.title!==null&&g.title!==void 0&&(r.title=g.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function QD(e,t){const n={src:Wc(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const g={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,g),e.applyData(t,g)}function PD(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const g={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,g),e.applyData(t,g)}function OD(e,t){const n=String(t.identifier).toUpperCase(),g=e.definitionById.get(n);if(!g)return cY(e,t);const r={href:Wc(g.url||"")};g.title!==null&&g.title!==void 0&&(r.title=g.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function _D(e,t){const n={href:Wc(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const g={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,g),e.applyData(t,g)}function qD(e,t,n){const g=e.all(t),r=n?$D(n):CY(t),i={},a=[];if(typeof t.checked=="boolean"){const I=g[0];let c;I&&I.type==="element"&&I.tagName==="p"?c=I:(c={type:"element",tagName:"p",properties:{},children:[]},g.unshift(c)),c.children.length>0&&c.children.unshift({type:"text",value:" "}),c.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<g.length;){const I=g[o];(r||o!==0||I.type!=="element"||I.tagName!=="p")&&a.push({type:"text",value:`
`}),I.type==="element"&&I.tagName==="p"&&!r?a.push(...I.children):a.push(I)}const l=g[g.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const s={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,s),e.applyData(t,s)}function $D(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let g=-1;for(;!t&&++g<n.length;)t=CY(n[g])}return t}function CY(e){const t=e.spread;return t??e.children.length>1}function ej(e,t){const n={},g=e.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++r<g.length;){const a=g[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(g,!0)};return e.patch(t,i),e.applyData(t,i)}function tj(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nj(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function gj(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rj(e,t){const n=e.all(t),g=n.shift(),r=[];if(g){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([g],!0)};e.patch(t.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=I1(t.children[1]),l=DJ(t.children[t.children.length-1]);o&&l&&(a.position={start:o,end:l}),r.push(a)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function ij(e,t,n){const g=n?n.children:void 0,i=(g?g.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let l=-1;const s=[];for(;++l<o;){const c=t.children[l],d={},u=a?a[l]:void 0;u&&(d.align=u);let m={type:"element",tagName:i,properties:d,children:[]};c&&(m.children=e.all(c),e.patch(c,m),m=e.applyData(c,m)),s.push(m)}const I={type:"element",tagName:"tr",properties:{},children:e.wrap(s,!0)};return e.patch(t,I),e.applyData(t,I)}function aj(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const hW=9,mW=32;function oj(e){const t=String(e),n=/\r?\n|\r/g;let g=n.exec(t),r=0;const i=[];for(;g;)i.push(fW(t.slice(r,g.index),r>0,!0),g[0]),r=g.index+g[0].length,g=n.exec(t);return i.push(fW(t.slice(r),r>0,!1)),i.join("")}function fW(e,t,n){let g=0,r=e.length;if(t){let i=e.codePointAt(g);for(;i===hW||i===mW;)g++,i=e.codePointAt(g)}if(n){let i=e.codePointAt(r-1);for(;i===hW||i===mW;)r--,i=e.codePointAt(r-1)}return r>g?e.slice(g,r):""}function lj(e,t){const n={type:"text",value:oj(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function sj(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Ij={blockquote:KD,break:LD,code:ED,delete:MD,emphasis:zD,footnoteReference:UD,heading:TD,html:DD,imageReference:jD,image:QD,inlineCode:PD,linkReference:OD,link:_D,listItem:qD,list:ej,paragraph:tj,root:nj,strong:gj,table:rj,tableCell:aj,tableRow:ij,text:lj,thematicBreak:sj,toml:_A,yaml:_A,definition:_A,footnoteDefinition:_A};function _A(){}const uY=-1,L0=0,Xm=1,Jm=2,m1=3,f1=4,p1=5,b1=6,dY=7,AY=8,pW=typeof self=="object"?self:globalThis,cj=(e,t)=>{const n=(r,i)=>(e.set(i,r),r),g=r=>{if(e.has(r))return e.get(r);const[i,a]=t[r];switch(i){case L0:case uY:return n(a,r);case Xm:{const o=n([],r);for(const l of a)o.push(g(l));return o}case Jm:{const o=n({},r);for(const[l,s]of a)o[g(l)]=g(s);return o}case m1:return n(new Date(a),r);case f1:{const{source:o,flags:l}=a;return n(new RegExp(o,l),r)}case p1:{const o=n(new Map,r);for(const[l,s]of a)o.set(g(l),g(s));return o}case b1:{const o=n(new Set,r);for(const l of a)o.add(g(l));return o}case dY:{const{name:o,message:l}=a;return n(new pW[o](l),r)}case AY:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r)}return n(new pW[i](a),r)};return g},bW=e=>cj(new Map,e)(0),gI="",{toString:Cj}={},{keys:uj}=Object,yC=e=>{const t=typeof e;if(t!=="object"||!e)return[L0,t];const n=Cj.call(e).slice(8,-1);switch(n){case"Array":return[Xm,gI];case"Object":return[Jm,gI];case"Date":return[m1,gI];case"RegExp":return[f1,gI];case"Map":return[p1,gI];case"Set":return[b1,gI]}return n.includes("Array")?[Xm,n]:n.includes("Error")?[dY,n]:[Jm,n]},qA=([e,t])=>e===L0&&(t==="function"||t==="symbol"),dj=(e,t,n,g)=>{const r=(a,o)=>{const l=g.push(a)-1;return n.set(o,l),l},i=a=>{if(n.has(a))return n.get(a);let[o,l]=yC(a);switch(o){case L0:{let I=a;switch(l){case"bigint":o=AY,I=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);I=null;break;case"undefined":return r([uY],a)}return r([o,I],a)}case Xm:{if(l)return r([l,[...a]],a);const I=[],c=r([o,I],a);for(const d of a)I.push(i(d));return c}case Jm:{if(l)switch(l){case"BigInt":return r([l,a.toString()],a);case"Boolean":case"Number":case"String":return r([l,a.valueOf()],a)}if(t&&"toJSON"in a)return i(a.toJSON());const I=[],c=r([o,I],a);for(const d of uj(a))(e||!qA(yC(a[d])))&&I.push([i(d),i(a[d])]);return c}case m1:return r([o,a.toISOString()],a);case f1:{const{source:I,flags:c}=a;return r([o,{source:I,flags:c}],a)}case p1:{const I=[],c=r([o,I],a);for(const[d,u]of a)(e||!(qA(yC(d))||qA(yC(u))))&&I.push([i(d),i(u)]);return c}case b1:{const I=[],c=r([o,I],a);for(const d of a)(e||!qA(yC(d)))&&I.push(i(d));return c}}const{message:s}=a;return r([o,{name:l,message:s}],a)};return i},yW=(e,{json:t,lossy:n}={})=>{const g=[];return dj(!(t||n),!!t,new Map,g)(e),g},Ym=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?bW(yW(e,t)):structuredClone(e):(e,t)=>bW(yW(e,t));function Aj(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function hj(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function mj(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Aj,g=e.options.footnoteBackLabel||hj,r=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const I=e.all(s),c=String(s.identifier).toUpperCase(),d=Wc(c.toLowerCase());let u=0;const m=[],f=e.footnoteCounts.get(c);for(;f!==void 0&&++u<=f;){m.length>0&&m.push({type:"text",value:" "});let p=typeof n=="string"?n:n(l,u);typeof p=="string"&&(p={type:"text",value:p}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof g=="string"?g:g(l,u),className:["data-footnote-backref"]},children:Array.isArray(p)?p:[p]})}const y=I[I.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const p=y.children[y.children.length-1];p&&p.type==="text"?p.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else I.push(...m);const h={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(I,!0)};e.patch(s,h),o.push(h)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Ym(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const hY=function(e){if(e==null)return yj;if(typeof e=="function")return E0(e);if(typeof e=="object")return Array.isArray(e)?fj(e):pj(e);if(typeof e=="string")return bj(e);throw new Error("Expected function, string, or object as test")};function fj(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=hY(e[n]);return E0(g);function g(...r){let i=-1;for(;++i<t.length;)if(t[i].apply(this,r))return!0;return!1}}function pj(e){const t=e;return E0(n);function n(g){const r=g;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}function bj(e){return E0(t);function t(n){return n&&n.type===e}}function E0(e){return t;function t(n,g,r){return!!(Zj(n)&&e.call(this,n,typeof g=="number"?g:void 0,r||void 0))}}function yj(){return!0}function Zj(e){return e!==null&&typeof e=="object"&&"type"in e}const mY=[],Gj=!0,ZW=!1,Bj="skip";function Sj(e,t,n,g){let r;typeof t=="function"&&typeof n!="function"?(g=n,n=t):r=t;const i=hY(r),a=g?-1:1;o(e,void 0,[])();function o(l,s,I){const c=l&&typeof l=="object"?l:{};if(typeof c.type=="string"){const u=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(u?"<"+u+">":""))+")"})}return d;function d(){let u=mY,m,f,y;if((!t||i(l,s,I[I.length-1]||void 0))&&(u=vj(n(l,I)),u[0]===ZW))return u;if("children"in l&&l.children){const h=l;if(h.children&&u[0]!==Bj)for(f=(g?h.children.length:-1)+a,y=I.concat(h);f>-1&&f<h.children.length;){const p=h.children[f];if(m=o(p,f,y)(),m[0]===ZW)return m;f=typeof m[1]=="number"?m[1]:f+a}}return u}}}function vj(e){return Array.isArray(e)?e:typeof e=="number"?[Gj,e]:e==null?mY:[e]}function fY(e,t,n,g){let r,i,a;typeof t=="function"&&typeof n!="function"?(i=void 0,a=t,r=n):(i=t,a=n,r=g),Sj(e,i,o,r);function o(l,s){const I=s[s.length-1],c=I?I.children.indexOf(l):void 0;return a(l,c,I)}}const qZ={}.hasOwnProperty,Wj={};function Vj(e,t){const n=t||Wj,g=new Map,r=new Map,i=new Map,a={...Ij,...n.handlers},o={all:s,applyData:Rj,definitionById:g,footnoteById:r,footnoteCounts:i,footnoteOrder:[],handlers:a,one:l,options:n,patch:kj,wrap:Xj};return fY(e,function(I){if(I.type==="definition"||I.type==="footnoteDefinition"){const c=I.type==="definition"?g:r,d=String(I.identifier).toUpperCase();c.has(d)||c.set(d,I)}}),o;function l(I,c){const d=I.type,u=o.handlers[d];if(qZ.call(o.handlers,d)&&u)return u(o,I,c);if(o.options.passThrough&&o.options.passThrough.includes(d)){if("children"in I){const{children:f,...y}=I,h=Ym(y);return h.children=o.all(I),h}return Ym(I)}return(o.options.unknownHandler||wj)(o,I,c)}function s(I){const c=[];if("children"in I){const d=I.children;let u=-1;for(;++u<d.length;){const m=o.one(d[u],I);if(m){if(u&&d[u-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=GW(m.value)),!Array.isArray(m)&&m.type==="element")){const f=m.children[0];f&&f.type==="text"&&(f.value=GW(f.value))}Array.isArray(m)?c.push(...m):c.push(m)}}}return c}}function kj(e,t){e.position&&(t.position=IU(e))}function Rj(e,t){let n=t;if(e&&e.data){const g=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if(typeof g=="string")if(n.type==="element")n.tagName=g;else{const a="children"in n?n.children:[n];n={type:"element",tagName:g,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,Ym(i)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function wj(e,t){const n=t.data||{},g="value"in t&&!(qZ.call(n,"hProperties")||qZ.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,g),e.applyData(t,g)}function Xj(e,t){const n=[];let g=-1;for(t&&n.push({type:"text",value:`
`});++g<e.length;)g&&n.push({type:"text",value:`
`}),n.push(e[g]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function GW(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function BW(e,t){const n=Vj(e,t),g=n.one(e,void 0),r=mj(n),i=Array.isArray(g)?{type:"root",children:g}:g||{type:"root",children:[]};return r&&i.children.push({type:"text",value:`
`},r),i}function Jj(e,t){return e&&"run"in e?async function(n,g){const r=BW(n,{file:g,...t});await e.run(r,g)}:function(n,g){return BW(n,{file:g,...t||e})}}function SW(e){if(e)throw e}var Fh=Object.prototype.hasOwnProperty,pY=Object.prototype.toString,vW=Object.defineProperty,WW=Object.getOwnPropertyDescriptor,VW=function(t){return typeof Array.isArray=="function"?Array.isArray(t):pY.call(t)==="[object Array]"},kW=function(t){if(!t||pY.call(t)!=="[object Object]")return!1;var n=Fh.call(t,"constructor"),g=t.constructor&&t.constructor.prototype&&Fh.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!g)return!1;var r;for(r in t);return typeof r>"u"||Fh.call(t,r)},RW=function(t,n){vW&&n.name==="__proto__"?vW(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},wW=function(t,n){if(n==="__proto__")if(Fh.call(t,n)){if(WW)return WW(t,n).value}else return;return t[n]},Yj=function e(){var t,n,g,r,i,a,o=arguments[0],l=1,s=arguments.length,I=!1;for(typeof o=="boolean"&&(I=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<s;++l)if(t=arguments[l],t!=null)for(n in t)g=wW(o,n),r=wW(t,n),o!==r&&(I&&r&&(kW(r)||(i=VW(r)))?(i?(i=!1,a=g&&VW(g)?g:[]):a=g&&kW(g)?g:{},RW(o,{name:n,newValue:e(I,a,r)})):typeof r<"u"&&RW(o,{name:n,newValue:r}));return o};const xb=l0(Yj);function $Z(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Nj(){const e=[],t={run:n,use:g};return t;function n(...r){let i=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...r);function o(l,...s){const I=e[++i];let c=-1;if(l){a(l);return}for(;++c<r.length;)(s[c]===null||s[c]===void 0)&&(s[c]=r[c]);r=s,I?Hj(I,o)(...s):a(null,...s)}}function g(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return e.push(r),t}}function Hj(e,t){let n;return g;function g(...a){const o=e.length>a.length;let l;o&&a.push(r);try{l=e.apply(this,a)}catch(s){const I=s;if(o&&n)throw I;return r(I)}o||(l&&l.then&&typeof l.then=="function"?l.then(i,r):l instanceof Error?r(l):i(l))}function r(a,...o){n||(n=!0,t(a,...o))}function i(a){r(null,a)}}const na={basename:Fj,dirname:xj,extname:Kj,join:Lj,sep:"/"};function Fj(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Zd(e);let n=0,g=-1,r=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;r--;)if(e.codePointAt(r)===47){if(i){n=r+1;break}}else g<0&&(i=!0,g=r+1);return g<0?"":e.slice(n,g)}if(t===e)return"";let a=-1,o=t.length-1;for(;r--;)if(e.codePointAt(r)===47){if(i){n=r+1;break}}else a<0&&(i=!0,a=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(g=r):(o=-1,g=a));return n===g?g=a:g<0&&(g=e.length),e.slice(n,g)}function xj(e){if(Zd(e),e.length===0)return".";let t=-1,n=e.length,g;for(;--n;)if(e.codePointAt(n)===47){if(g){t=n;break}}else g||(g=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Kj(e){Zd(e);let t=e.length,n=-1,g=0,r=-1,i=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){g=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?r<0?r=t:i!==1&&(i=1):r>-1&&(i=-1)}return r<0||n<0||i===0||i===1&&r===n-1&&r===g+1?"":e.slice(r,n)}function Lj(...e){let t=-1,n;for(;++t<e.length;)Zd(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ej(n)}function Ej(e){Zd(e);const t=e.codePointAt(0)===47;let n=Mj(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Mj(e,t){let n="",g=0,r=-1,i=0,a=-1,o,l;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||i===1))if(r!==a-1&&i===2){if(n.length<2||g!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",g=0):(n=n.slice(0,l),g=n.length-1-n.lastIndexOf("/")),r=a,i=0;continue}}else if(n.length>0){n="",g=0,r=a,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",g=2)}else n.length>0?n+="/"+e.slice(r+1,a):n=e.slice(r+1,a),g=a-r-1;r=a,i=0}else o===46&&i>-1?i++:i=-1}return n}function Zd(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zj={cwd:Uj};function Uj(){return"/"}function e2(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Tj(e){if(typeof e=="string")e=new URL(e);else if(!e2(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Dj(e)}function Dj(e){if(e.hostname!==""){const g=new TypeError('File URL host must be "localhost" or empty on darwin');throw g.code="ERR_INVALID_FILE_URL_HOST",g}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const g=t.codePointAt(n+2);if(g===70||g===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const Kb=["history","path","basename","stem","extname","dirname"];class bY{constructor(t){let n;t?e2(t)?n={path:t}:typeof t=="string"||jj(t)?n={value:t}:n=t:n={},this.cwd=zj.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let g=-1;for(;++g<Kb.length;){const i=Kb[g];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let r;for(r in n)Kb.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?na.basename(this.path):void 0}set basename(t){Eb(t,"basename"),Lb(t,"basename"),this.path=na.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?na.dirname(this.path):void 0}set dirname(t){XW(this.basename,"dirname"),this.path=na.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?na.extname(this.path):void 0}set extname(t){if(Lb(t,"extname"),XW(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=na.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){e2(t)&&(t=Tj(t)),Eb(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?na.basename(this.path,this.extname):void 0}set stem(t){Eb(t,"stem"),Lb(t,"stem"),this.path=na.join(this.dirname||"",t+(this.extname||""))}fail(t,n,g){const r=this.message(t,n,g);throw r.fatal=!0,r}info(t,n,g){const r=this.message(t,n,g);return r.fatal=void 0,r}message(t,n,g){const r=new Fg(t,n,g);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Lb(e,t){if(e&&e.includes(na.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+na.sep+"`")}function Eb(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function XW(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function jj(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Qj=function(e){const g=this.constructor.prototype,r=g[e],i=function(){return r.apply(i,arguments)};Object.setPrototypeOf(i,g);const a=Object.getOwnPropertyNames(r);for(const o of a){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(i,o,l)}return i},Pj={}.hasOwnProperty;class y1 extends Qj{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Nj()}copy(){const t=new y1;let n=-1;for(;++n<this.attachers.length;){const g=this.attachers[n];t.use(...g)}return t.data(xb(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Ub("data",this.frozen),this.namespace[t]=n,this):Pj.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Ub("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...g]=this.attachers[this.freezeIndex];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const r=n.call(t,...g);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=$A(t),g=this.parser||this.Parser;return Mb("parse",g),g(String(n),n)}process(t,n){const g=this;return this.freeze(),Mb("process",this.parser||this.Parser),zb("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(i,a){const o=$A(t),l=g.parse(o);g.run(l,o,function(I,c,d){if(I||!c||!d)return s(I);const u=c,m=g.stringify(u,d);qj(m)?d.value=m:d.result=m,s(I,d)});function s(I,c){I||!c?a(I):i?i(c):n(void 0,c)}}}processSync(t){let n=!1,g;return this.freeze(),Mb("processSync",this.parser||this.Parser),zb("processSync",this.compiler||this.Compiler),this.process(t,r),YW("processSync","process",n),g;function r(i,a){n=!0,SW(i),g=a}}run(t,n,g){JW(t),this.freeze();const r=this.transformers;return!g&&typeof n=="function"&&(g=n,n=void 0),g?i(void 0,g):new Promise(i);function i(a,o){const l=$A(n);r.run(t,l,s);function s(I,c,d){const u=c||t;I?o(I):a?a(u):g(void 0,u,d)}}}runSync(t,n){let g=!1,r;return this.run(t,n,i),YW("runSync","run",g),r;function i(a,o){SW(a),r=o,g=!0}}stringify(t,n){this.freeze();const g=$A(n),r=this.compiler||this.Compiler;return zb("stringify",r),JW(t),r(t,g)}use(t,...n){const g=this.attachers,r=this.namespace;if(Ub("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(s){if(typeof s=="function")l(s,[]);else if(typeof s=="object")if(Array.isArray(s)){const[I,...c]=s;l(I,c)}else a(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function a(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(s.plugins),s.settings&&(r.settings=xb(!0,r.settings,s.settings))}function o(s){let I=-1;if(s!=null)if(Array.isArray(s))for(;++I<s.length;){const c=s[I];i(c)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function l(s,I){let c=-1,d=-1;for(;++c<g.length;)if(g[c][0]===s){d=c;break}if(d===-1)g.push([s,...I]);else if(I.length>0){let[u,...m]=I;const f=g[d][1];$Z(f)&&$Z(u)&&(u=xb(!0,f,u)),g[d]=[s,u,...m]}}}}const Oj=new y1().freeze();function Mb(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zb(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Ub(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function JW(e){if(!$Z(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function YW(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function $A(e){return _j(e)?e:new bY(e)}function _j(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function qj(e){return typeof e=="string"||$j(e)}function $j(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const eQ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",NW=[],HW={allowDangerousHtml:!0},tQ=/^(https?|ircs?|mailto|xmpp)$/i,nQ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gQ(e){const t=e.allowedElements,n=e.allowElement,g=e.children||"",r=e.className,i=e.components,a=e.disallowedElements,o=e.rehypePlugins||NW,l=e.remarkPlugins||NW,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...HW}:HW,I=e.skipHtml,c=e.unwrapDisallowed,d=e.urlTransform||rQ,u=Oj().use(xD).use(l).use(Jj,s).use(o),m=new bY;typeof g=="string"&&(m.value=g);for(const p of nQ)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+eQ+p.id,void 0);const f=u.parse(m);let y=u.runSync(f,m);return r&&(y={type:"element",tagName:"div",properties:{className:r},children:y.type==="root"?y.children:[y]}),fY(y,h),hU(y,{Fragment:G.Fragment,components:i,ignoreInvalidStyle:!0,jsx:G.jsx,jsxs:G.jsxs,passKeys:!0,passNode:!0});function h(p,b,S){if(p.type==="raw"&&S&&typeof b=="number")return I?S.children.splice(b,1):S.children[b]={type:"text",value:p.value},b;if(p.type==="element"){let X;for(X in Nb)if(Object.hasOwn(Nb,X)&&Object.hasOwn(p.properties,X)){const W=p.properties[X],V=Nb[X];(V===null||V.includes(p.tagName))&&(p.properties[X]=d(String(W||""),X,p))}}if(p.type==="element"){let X=t?!t.includes(p.tagName):a?a.includes(p.tagName):!1;if(!X&&n&&typeof b=="number"&&(X=!n(p,b,S)),X&&S&&typeof b=="number")return c&&p.children?S.children.splice(b,1,...p.children):S.children.splice(b,1),b}}}function rQ(e){const t=e.indexOf(":"),n=e.indexOf("?"),g=e.indexOf("#"),r=e.indexOf("/");return t<0||r>-1&&t>r||n>-1&&t>n||g>-1&&t>g||tQ.test(e.slice(0,t))?e:""}const iQ=({mensaje:e})=>G.jsx(HJ,{text:G.jsx(gQ,{children:e.text}),role:"model",imagen:e.imagen,className:"mensaje-bot"}),aQ=({mensajes:e,escribiendo:t})=>G.jsxs("div",{className:"chat-mensajes",children:[e.map((n,g)=>G.jsx("div",{className:`mensaje-contenedor ${n.role}`,children:n.role==="model"?G.jsx(iQ,{mensaje:n}):G.jsx(Rz,{mensaje:n})},g)),t&&G.jsx("div",{className:"mensaje mensaje-bot escribiendo",children:G.jsx("span",{children:"Escribiendo."})})]});function oQ(){const[e,t]=_.useState(Mo.mensajesIniciales),[n,g]=_.useState(""),[r,i]=_.useState(!1),[a,o]=_.useState(""),[l,s]=_.useState(null),[I,c]=_.useState(!1),[d,u]=_.useState(null);_.useEffect(()=>{const y=sessionStorage.getItem("usuario");if(y){const h=JSON.parse(y);u(h)}},[]),_.useEffect(()=>{(async()=>{try{const h=await YJ([]);s(h)}catch(h){o(Mo.errores.iniciarConversacion),console.error("Error al iniciar conversación",h)}})()},[]);const m=()=>{const y=new Date,h=y.toLocaleDateString("es-ES",{weekday:"long"}),p=String(y.getDate()).padStart(2,"0"),b=String(y.getMonth()+1).padStart(2,"0"),S=y.getFullYear(),X=String(y.getHours()).padStart(2,"0"),W=String(y.getMinutes()).padStart(2,"0");return{diaSemana:h,dia:p,mes:b,año:S,hora:X,minutos:W}},f=async y=>{if(y.preventDefault(),!n.trim())return;console.clear();const{diaSemana:h,dia:p,mes:b,año:S,hora:X,minutos:W}=m(),V={role:"user",text:n,diaSemana:h,dia:p,mes:b,año:S,hora:X,minutos:W,imagen:d?d.foto:""};t(v=>{const K=[...v,V];return K.length>9&&K.shift(),K}),g(""),i(!0),c(!0);const R=e.map(v=>`Role: ${v.role}, Text: ${v.text}`).join(`
`),z=`
      ${Mo.instruccionBase}
      Usuario: ${n}
      Historial de la conversación:
      ${R}
      Fecha y hora de este mensaje:
      Día de la semana: ${h}, Día: ${p}, Mes: ${b}, Año: ${S}, Hora: ${X}:${W}
      Respuesta:
    `;console.log(z);let L=0,k=!1;for(o("");L<4&&!k;)try{const K={role:"model",text:await NJ(l,z,Mo.generationConfig),diaSemana:h,dia:p,mes:b,año:S,hora:X,minutos:W,imagen:"https://vilmanunez.com/wp-content/uploads/2017/07/curso-bots-facebook.png"};t(x=>{const q=[...x,K];return q.length>30&&q.shift(),q}),k=!0}catch(v){if(L++,L===4){t(x=>x.filter(q=>q!==V));const K={role:"model",text:"Parece que hay un problema con ese tema. ¿Podemos hablar de otra cosa?",diaSemana:h,dia:p,mes:b,año:S,hora:X,minutos:W,imagen:"https://vilmanunez.com/wp-content/uploads/2017/07/curso-bots-facebook.png"};t(x=>{const q=[...x,K];return q.length>30&&q.shift(),q}),o(Mo.errores.enviarMensaje),console.error("Error al enviar mensaje",v)}}i(!1),c(!1)};return G.jsxs("div",{className:"contenedor-chat",children:[G.jsx(aQ,{mensajes:e,escribiendo:I,className:"historial-chat"}),G.jsx(kz,{input:n,setInput:g,manejarGeneracion:f,escribiendo:I,config:Mo}),a&&G.jsx("div",{className:"error",children:a})]})}const lQ=()=>G.jsxs("div",{className:"contenedor-chat-fondo",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(oQ,{}),G.jsx(Hg,{})]});function sQ({entrenadores:e,mostrarInfoEntrenador:t}){return G.jsx("div",{className:"botones-entrenadores",children:e.map(n=>G.jsx("button",{onClick:()=>t(n),children:n.nombre},n.id))})}function IQ({entrenador:e,seleccionarEntrenador:t}){return G.jsxs("div",{className:"info-entrenador",children:[G.jsx("h3",{children:e.nombre}),G.jsxs("p",{children:[G.jsx("strong",{children:"Horario:"})," ",e.horario]}),G.jsxs("p",{children:[G.jsx("strong",{children:"Descripción:"})," ",e.descripcion]}),e.especialidad&&G.jsxs("div",{children:[G.jsx("p",{children:G.jsx("strong",{children:"Especialidades:"})}),G.jsx("ul",{children:Object.values(e.especialidad).map((n,g)=>G.jsx("li",{children:n},g))})]}),G.jsx("button",{onClick:()=>t(e),children:"Seleccionar"})]})}function cQ(){const[e,t]=_.useState([]),[n,g]=_.useState(null);_.useEffect(()=>{(async()=>{try{const o=await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/entrenadores");t(o.data)}catch(o){console.error("Error fetching the trainers:",o)}})()},[]);const r=a=>{g(a)},i=a=>{alert(`Has seleccionado a ${a.nombre}`)};return G.jsxs("div",{className:"contenedor-entrenadores",children:[G.jsx("div",{className:"header",children:G.jsx("h1",{children:"Generar mi propia rutina"})}),G.jsx("h2",{children:"Selecciona un entrenador"}),G.jsx(sQ,{entrenadores:e,mostrarInfoEntrenador:r}),n&&G.jsx(IQ,{entrenador:n,seleccionarEntrenador:i})]})}const CQ=()=>G.jsxs("div",{className:"entrenador-container",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(cQ,{}),G.jsx(Hg,{})]});function uQ(){return G.jsx("div",{className:"contenedor-evaluacion-usuario-descripcion",children:G.jsx("div",{className:"descripcion-evaluacion",children:G.jsx("p",{children:"Hola ¿Qué tal?, esta es tu evolución en el gimnasio. No te olvides que puedes seleccionar el músculo al que quieras ver su progreso."})})})}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)({}).hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},Se.apply(null,arguments)}const dQ=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Se}},Symbol.toStringTag,{value:"Module"}));let FW=0;function AQ(e){const[t,n]=_.useState(e),g=t;return _.useEffect(()=>{t==null&&(FW+=1,n(`mui-${FW}`))},[t]),g}const xW=Ph.useId;function hQ(e){return xW!==void 0?xW():AQ(e)}function Jn(e,t){if(e==null)return{};var n={};for(var g in e)if({}.hasOwnProperty.call(e,g)){if(t.indexOf(g)>=0)continue;n[g]=e[g]}return n}var mQ=Object.defineProperty,fQ=(e,t)=>{for(var n in t)mQ(e,n,{get:t[n],enumerable:!0})},ei={};fQ(ei,{assign:()=>yQ,colors:()=>Il,createStringInterpolator:()=>V1,skipAnimation:()=>WY,to:()=>vY,willAdvance:()=>k1});var Z1=Bd(),mt=e=>Gd(e,Z1),G1=Bd();mt.write=e=>Gd(e,G1);var M0=Bd();mt.onStart=e=>Gd(e,M0);var B1=Bd();mt.onFrame=e=>Gd(e,B1);var S1=Bd();mt.onFinish=e=>Gd(e,S1);var TI=[];mt.setTimeout=(e,t)=>{const n=mt.now()+t,g=()=>{const i=TI.findIndex(a=>a.cancel==g);~i&&TI.splice(i,1),_o-=~i?1:0},r={time:n,handler:e,cancel:g};return TI.splice(yY(n),0,r),_o+=1,ZY(),r};var yY=e=>~(~TI.findIndex(t=>t.time>e)||~TI.length);mt.cancel=e=>{M0.delete(e),B1.delete(e),S1.delete(e),Z1.delete(e),G1.delete(e)};mt.sync=e=>{t2=!0,mt.batchedUpdates(e),t2=!1};mt.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function g(...r){t=r,mt.onStart(n)}return g.handler=e,g.cancel=()=>{M0.delete(n),t=null},g};var v1=typeof window<"u"?window.requestAnimationFrame:()=>{};mt.use=e=>v1=e;mt.now=typeof performance<"u"?()=>performance.now():Date.now;mt.batchedUpdates=e=>e();mt.catch=console.error;mt.frameLoop="always";mt.advance=()=>{mt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):BY()};var Oo=-1,_o=0,t2=!1;function Gd(e,t){t2?(t.delete(e),e(0)):(t.add(e),ZY())}function ZY(){Oo<0&&(Oo=0,mt.frameLoop!=="demand"&&v1(GY))}function pQ(){Oo=-1}function GY(){~Oo&&(v1(GY),mt.batchedUpdates(BY))}function BY(){const e=Oo;Oo=mt.now();const t=yY(Oo);if(t&&(SY(TI.splice(0,t),n=>n.handler()),_o-=t),!_o){pQ();return}M0.flush(),Z1.flush(e?Math.min(64,Oo-e):16.667),B1.flush(),G1.flush(),S1.flush()}function Bd(){let e=new Set,t=e;return{add(n){_o+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return _o-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,_o-=t.size,SY(t,g=>g(n)&&e.add(g)),_o+=e.size,t=e)}}}function SY(e,t){e.forEach(n=>{try{t(n)}catch(g){mt.catch(g)}})}function n2(){}var bQ=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Je={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Ka(e,t){if(Je.arr(e)){if(!Je.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var St=(e,t)=>e.forEach(t);function fa(e,t,n){if(Je.arr(e)){for(let g=0;g<e.length;g++)t.call(n,e[g],`${g}`);return}for(const g in e)e.hasOwnProperty(g)&&t.call(n,e[g],g)}var Lg=e=>Je.und(e)?[]:Je.arr(e)?e:[e];function tu(e,t){if(e.size){const n=Array.from(e);e.clear(),St(n,t)}}var KC=(e,...t)=>tu(e,n=>n(...t)),W1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),V1,vY,Il=null,WY=!1,k1=n2,yQ=e=>{e.to&&(vY=e.to),e.now&&(mt.now=e.now),e.colors!==void 0&&(Il=e.colors),e.skipAnimation!=null&&(WY=e.skipAnimation),e.createStringInterpolator&&(V1=e.createStringInterpolator),e.requestAnimationFrame&&mt.use(e.requestAnimationFrame),e.batchedUpdates&&(mt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(k1=e.willAdvance),e.frameLoop&&(mt.frameLoop=e.frameLoop)},nu=new Set,Dr=[],Tb=[],Nm=0,z0={get idle(){return!nu.size&&!Dr.length},start(e){Nm>e.priority?(nu.add(e),mt.onStart(ZQ)):(VY(e),mt(g2))},advance:g2,sort(e){if(Nm)mt.onFrame(()=>z0.sort(e));else{const t=Dr.indexOf(e);~t&&(Dr.splice(t,1),kY(e))}},clear(){Dr=[],nu.clear()}};function ZQ(){nu.forEach(VY),nu.clear(),mt(g2)}function VY(e){Dr.includes(e)||kY(e)}function kY(e){Dr.splice(GQ(Dr,t=>t.priority>e.priority),0,e)}function g2(e){const t=Tb;for(let n=0;n<Dr.length;n++){const g=Dr[n];Nm=g.priority,g.idle||(k1(g),g.advance(e),g.idle||t.push(g))}return Nm=0,Tb=Dr,Tb.length=0,Dr=t,Dr.length>0}function GQ(e,t){const n=e.findIndex(t);return n<0?e.length:n}var BQ=(e,t,n)=>Math.min(Math.max(n,e),t),SQ={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ji="[-+]?\\d*\\.?\\d+",Hm=Ji+"%";function U0(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var vQ=new RegExp("rgb"+U0(Ji,Ji,Ji)),WQ=new RegExp("rgba"+U0(Ji,Ji,Ji,Ji)),VQ=new RegExp("hsl"+U0(Ji,Hm,Hm)),kQ=new RegExp("hsla"+U0(Ji,Hm,Hm,Ji)),RQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,XQ=/^#([0-9a-fA-F]{6})$/,JQ=/^#([0-9a-fA-F]{8})$/;function YQ(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=XQ.exec(e))?parseInt(t[1]+"ff",16)>>>0:Il&&Il[e]!==void 0?Il[e]:(t=vQ.exec(e))?(rI(t[1])<<24|rI(t[2])<<16|rI(t[3])<<8|255)>>>0:(t=WQ.exec(e))?(rI(t[1])<<24|rI(t[2])<<16|rI(t[3])<<8|EW(t[4]))>>>0:(t=RQ.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=JQ.exec(e))?parseInt(t[1],16)>>>0:(t=wQ.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=VQ.exec(e))?(KW(LW(t[1]),eh(t[2]),eh(t[3]))|255)>>>0:(t=kQ.exec(e))?(KW(LW(t[1]),eh(t[2]),eh(t[3]))|EW(t[4]))>>>0:null}function Db(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function KW(e,t,n){const g=n<.5?n*(1+t):n+t-n*t,r=2*n-g,i=Db(r,g,e+1/3),a=Db(r,g,e),o=Db(r,g,e-1/3);return Math.round(i*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function rI(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function LW(e){return(parseFloat(e)%360+360)%360/360}function EW(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function eh(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function MW(e){let t=YQ(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,g=(t&16711680)>>>16,r=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${g}, ${r}, ${i})`}var Lu=(e,t,n)=>{if(Je.fun(e))return e;if(Je.arr(e))return Lu({range:e,output:t,extrapolate:n});if(Je.str(e.output[0]))return V1(e);const g=e,r=g.output,i=g.range||[0,1],a=g.extrapolateLeft||g.extrapolate||"extend",o=g.extrapolateRight||g.extrapolate||"extend",l=g.easing||(s=>s);return s=>{const I=HQ(s,i);return NQ(s,i[I],i[I+1],r[I],r[I+1],l,a,o,g.map)}};function NQ(e,t,n,g,r,i,a,o,l){let s=l?l(e):e;if(s<t){if(a==="identity")return s;a==="clamp"&&(s=t)}if(s>n){if(o==="identity")return s;o==="clamp"&&(s=n)}return g===r?g:t===n?e<=t?g:r:(t===-1/0?s=-s:n===1/0?s=s-t:s=(s-t)/(n-t),s=i(s),g===-1/0?s=-s:r===1/0?s=s+g:s=s*(r-g)+g,s)}function HQ(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var FQ=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const g=n*e,r=t==="end"?Math.floor(g):Math.ceil(g);return BQ(0,1,r/e)},Fm=1.70158,th=Fm*1.525,zW=Fm+1,UW=2*Math.PI/3,TW=2*Math.PI/4.5,nh=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,xQ={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>zW*e*e*e-Fm*e*e,easeOutBack:e=>1+zW*Math.pow(e-1,3)+Fm*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((th+1)*2*e-th)/2:(Math.pow(2*e-2,2)*((th+1)*(e*2-2)+th)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*UW),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*UW)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*TW))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*TW)/2+1,easeInBounce:e=>1-nh(1-e),easeOutBounce:nh,easeInOutBounce:e=>e<.5?(1-nh(1-2*e))/2:(1+nh(2*e-1))/2,steps:FQ},Eu=Symbol.for("FluidValue.get"),lc=Symbol.for("FluidValue.observers"),zr=e=>!!(e&&e[Eu]),er=e=>e&&e[Eu]?e[Eu]():e,DW=e=>e[lc]||null;function KQ(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Mu(e,t){const n=e[lc];n&&n.forEach(g=>{KQ(g,t)})}var RY=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");LQ(this,e)}},LQ=(e,t)=>wY(e,Eu,t);function Vc(e,t){if(e[Eu]){let n=e[lc];n||wY(e,lc,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function zu(e,t){const n=e[lc];if(n&&n.has(t)){const g=n.size-1;g?n.delete(t):e[lc]=null,e.observerRemoved&&e.observerRemoved(g,t)}}var wY=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),xh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,EQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,jW=new RegExp(`(${xh.source})(%|[a-z]+)`,"i"),MQ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,T0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,XY=e=>{const[t,n]=zQ(e);if(!t||W1())return e;const g=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(g)return g.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||e}else{if(n&&T0.test(n))return XY(n);if(n)return n}return e},zQ=e=>{const t=T0.exec(e);if(!t)return[,];const[,n,g]=t;return[n,g]},jb,UQ=(e,t,n,g,r)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(g)}, ${r})`,JY=e=>{jb||(jb=Il?new RegExp(`(${Object.keys(Il).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>er(i).replace(T0,XY).replace(EQ,MW).replace(jb,MW)),n=t.map(i=>i.match(xh).map(Number)),r=n[0].map((i,a)=>n.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(i=>Lu({...e,output:i}));return i=>{var l;const a=!jW.test(t[0])&&((l=t.find(s=>jW.test(s)))==null?void 0:l.replace(xh,""));let o=0;return t[0].replace(xh,()=>`${r[o++](i)}${a||""}`).replace(MQ,UQ)}},R1="react-spring: ",YY=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${R1}once requires a function parameter`);return(...g)=>{n||(t(...g),n=!0)}},TQ=YY(console.warn);function DQ(){TQ(`${R1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var jQ=YY(console.warn);function QQ(){jQ(`${R1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function D0(e){return Je.str(e)&&(e[0]=="#"||/\d/.test(e)||!W1()&&T0.test(e)||e in(Il||{}))}var Ol=W1()?_.useEffect:_.useLayoutEffect,PQ=()=>{const e=_.useRef(!1);return Ol(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function NY(){const e=_.useState()[1],t=PQ();return()=>{t.current&&e(Math.random())}}function OQ(e,t){const[n]=_.useState(()=>({inputs:t,result:e()})),g=_.useRef(),r=g.current;let i=r;return i?t&&i.inputs&&_Q(t,i.inputs)||(i={inputs:t,result:e()}):i=n,_.useEffect(()=>{g.current=i,r==n&&(n.inputs=n.result=void 0)},[i]),i.result}function _Q(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var HY=e=>_.useEffect(e,qQ),qQ=[];function $Q(e){const t=_.useRef();return _.useEffect(()=>{t.current=e}),t.current}var Uu=Symbol.for("Animated:node"),eP=e=>!!e&&e[Uu]===e,ga=e=>e&&e[Uu],w1=(e,t)=>bQ(e,Uu,t),j0=e=>e&&e[Uu]&&e[Uu].getPayload(),FY=class{constructor(){w1(this,this)}getPayload(){return this.payload||[]}},Sd=class extends FY{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Je.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Sd(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Je.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Je.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Tu=class extends Sd{constructor(e){super(0),this._string=null,this._toString=Lu({output:[e,e]})}static create(e){return new Tu(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Je.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Lu({output:[this.getValue(),e]})),this._value=0,super.reset()}},xm={dependencies:null},Q0=class extends FY{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return fa(this.source,(n,g)=>{eP(n)?t[g]=n.getValue(e):zr(n)?t[g]=er(n):e||(t[g]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&St(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return fa(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){xm.dependencies&&zr(e)&&xm.dependencies.add(e);const t=j0(e);t&&St(t,n=>this.add(n))}},xY=class extends Q0{constructor(e){super(e)}static create(e){return new xY(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,g)=>n.setValue(e[g])).some(Boolean):(super.setValue(e.map(tP)),!0)}};function tP(e){return(D0(e)?Tu:Sd).create(e)}function r2(e){const t=ga(e);return t?t.constructor:Je.arr(e)?xY:D0(e)?Tu:Sd}var QW=(e,t)=>{const n=!Je.fun(e)||e.prototype&&e.prototype.isReactComponent;return _.forwardRef((g,r)=>{const i=_.useRef(null),a=n&&_.useCallback(m=>{i.current=rP(r,m)},[r]),[o,l]=gP(g,t),s=NY(),I=()=>{const m=i.current;if(n&&!m)return;(m?t.applyAnimatedValues(m,o.getValue(!0)):!1)===!1&&s()},c=new nP(I,l),d=_.useRef();Ol(()=>(d.current=c,St(l,m=>Vc(m,c)),()=>{d.current&&(St(d.current.deps,m=>zu(m,d.current)),mt.cancel(d.current.update))})),_.useEffect(I,[]),HY(()=>()=>{const m=d.current;St(m.deps,f=>zu(f,m))});const u=t.getComponentProps(o.getValue());return _.createElement(e,{...u,ref:a})})},nP=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&mt.write(this.update)}};function gP(e,t){const n=new Set;return xm.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Q0(e),xm.dependencies=null,[e,n]}function rP(e,t){return e&&(Je.fun(e)?e(t):e.current=t),t}var PW=Symbol.for("AnimatedComponent"),iP=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=r=>new Q0(r),getComponentProps:g=r=>r}={})=>{const r={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:g},i=a=>{const o=OW(a)||"Anonymous";return Je.str(a)?a=i[a]||(i[a]=QW(a,r)):a=a[PW]||(a[PW]=QW(a,r)),a.displayName=`Animated(${o})`,a};return fa(e,(a,o)=>{Je.arr(e)&&(o=OW(a)),i[o]=i(a)}),{animated:i}},OW=e=>Je.str(e)?e:e&&Je.str(e.displayName)?e.displayName:Je.fun(e)&&e.name||null;function tr(e,...t){return Je.fun(e)?e(...t):e}var gu=(e,t)=>e===!0||!!(t&&e&&(Je.fun(e)?e(t):Lg(e).includes(t))),KY=(e,t)=>Je.obj(e)?t&&e[t]:e,LY=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,aP=e=>e,X1=(e,t=aP)=>{let n=oP;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const g={};for(const r of n){const i=t(e[r],r);Je.und(i)||(g[r]=i)}return g},oP=["config","onProps","onStart","onChange","onPause","onResume","onRest"],lP={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sP(e){const t={};let n=0;if(fa(e,(g,r)=>{lP[r]||(t[r]=g,n++)}),n)return t}function J1(e){const t=sP(e);if(t){const n={to:t};return fa(e,(g,r)=>r in t||(n[r]=g)),n}return{...e}}function Du(e){return e=er(e),Je.arr(e)?e.map(Du):D0(e)?ei.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function IP(e){for(const t in e)return!0;return!1}function i2(e){return Je.fun(e)||Je.arr(e)&&Je.obj(e[0])}function _W(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function cP(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var CP={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},a2={...CP.default,mass:1,damping:1,easing:xQ.linear,clamp:!1},uP=class{constructor(){this.velocity=0,Object.assign(this,a2)}};function dP(e,t,n){n&&(n={...n},qW(n,t),t={...n,...t}),qW(e,t),Object.assign(e,t);for(const a in a2)e[a]==null&&(e[a]=a2[a]);let{frequency:g,damping:r}=e;const{mass:i}=e;return Je.und(g)||(g<.01&&(g=.01),r<0&&(r=0),e.tension=Math.pow(2*Math.PI/g,2)*i,e.friction=4*Math.PI*r*i/g),e}function qW(e,t){if(!Je.und(t.decay))e.duration=void 0;else{const n=!Je.und(t.tension)||!Je.und(t.friction);(n||!Je.und(t.frequency)||!Je.und(t.damping)||!Je.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var $W=[],AP=class{constructor(){this.changed=!1,this.values=$W,this.toValues=null,this.fromValues=$W,this.config=new uP,this.immediate=!1}};function EY(e,{key:t,props:n,defaultProps:g,state:r,actions:i}){return new Promise((a,o)=>{let l,s,I=gu(n.cancel??(g==null?void 0:g.cancel),t);if(I)u();else{Je.und(n.pause)||(r.paused=gu(n.pause,t));let m=g==null?void 0:g.pause;m!==!0&&(m=r.paused||gu(m,t)),l=tr(n.delay||0,t),m?(r.resumeQueue.add(d),i.pause()):(i.resume(),d())}function c(){r.resumeQueue.add(d),r.timeouts.delete(s),s.cancel(),l=s.time-mt.now()}function d(){l>0&&!ei.skipAnimation?(r.delayed=!0,s=mt.setTimeout(u,l),r.pauseQueue.add(c),r.timeouts.add(s)):u()}function u(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(c),r.timeouts.delete(s),e<=(r.cancelId||0)&&(I=!0);try{i.start({...n,callId:e,cancel:I},a)}catch(m){o(m)}}})}var Y1=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?DI(e.get()):t.every(n=>n.noop)?MY(e.get()):ki(e.get(),t.every(n=>n.finished)),MY=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ki=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),DI=e=>({value:e,cancelled:!0,finished:!1});function zY(e,t,n,g){const{callId:r,parentId:i,onRest:a}=t,{asyncTo:o,promise:l}=n;return!i&&e===o&&!t.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=e;const s=X1(t,(y,h)=>h==="onRest"?void 0:y);let I,c;const d=new Promise((y,h)=>(I=y,c=h)),u=y=>{const h=r<=(n.cancelId||0)&&DI(g)||r!==n.asyncId&&ki(g,!1);if(h)throw y.result=h,c(y),y},m=(y,h)=>{const p=new eV,b=new tV;return(async()=>{if(ei.skipAnimation)throw ju(n),b.result=ki(g,!1),c(b),b;u(p);const S=Je.obj(y)?{...y}:{...h,to:y};S.parentId=r,fa(s,(W,V)=>{Je.und(S[V])&&(S[V]=W)});const X=await g.start(S);return u(p),n.paused&&await new Promise(W=>{n.resumeQueue.add(W)}),X})()};let f;if(ei.skipAnimation)return ju(n),ki(g,!1);try{let y;Je.arr(e)?y=(async h=>{for(const p of h)await m(p)})(e):y=Promise.resolve(e(m,g.stop.bind(g))),await Promise.all([y.then(I),d]),f=ki(g.get(),!0,!1)}catch(y){if(y instanceof eV)f=y.result;else if(y instanceof tV)f=y.result;else throw y}finally{r==n.asyncId&&(n.asyncId=i,n.asyncTo=i?o:void 0,n.promise=i?l:void 0)}return Je.fun(a)&&mt.batchedUpdates(()=>{a(f,g,g.item)}),f})()}function ju(e,t){tu(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var eV=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tV=class extends Error{constructor(){super("SkipAnimationSignal")}},o2=e=>e instanceof N1,hP=1,N1=class extends RY{constructor(){super(...arguments),this.id=hP++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=ga(this);return e&&e.getValue()}to(...e){return ei.to(this,e)}interpolate(...e){return DQ(),ei.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Mu(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||z0.sort(this),Mu(this,{type:"priority",parent:this,priority:e})}},ps=Symbol.for("SpringPhase"),UY=1,l2=2,s2=4,Qb=e=>(e[ps]&UY)>0,Ho=e=>(e[ps]&l2)>0,ZC=e=>(e[ps]&s2)>0,nV=(e,t)=>t?e[ps]|=l2|UY:e[ps]&=~l2,gV=(e,t)=>t?e[ps]|=s2:e[ps]&=~s2,mP=class extends N1{constructor(e,t){if(super(),this.animation=new AP,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Je.und(e)||!Je.und(t)){const n=Je.obj(e)?{...e}:{...t,from:e};Je.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ho(this)||this._state.asyncTo)||ZC(this)}get goal(){return er(this.animation.to)}get velocity(){const e=ga(this);return e instanceof Sd?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Qb(this)}get isAnimating(){return Ho(this)}get isPaused(){return ZC(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const g=this.animation;let{toValues:r}=g;const{config:i}=g,a=j0(g.to);!a&&zr(g.to)&&(r=Lg(er(g.to))),g.values.forEach((s,I)=>{if(s.done)return;const c=s.constructor==Tu?1:a?a[I].lastPosition:r[I];let d=g.immediate,u=c;if(!d){if(u=s.lastPosition,i.tension<=0){s.done=!0;return}let m=s.elapsedTime+=e;const f=g.fromValues[I],y=s.v0!=null?s.v0:s.v0=Je.arr(i.velocity)?i.velocity[I]:i.velocity;let h;const p=i.precision||(f==c?.005:Math.min(1,Math.abs(c-f)*.001));if(Je.und(i.duration))if(i.decay){const b=i.decay===!0?.998:i.decay,S=Math.exp(-(1-b)*m);u=f+y/(1-b)*(1-S),d=Math.abs(s.lastPosition-u)<=p,h=y*S}else{h=s.lastVelocity==null?y:s.lastVelocity;const b=i.restVelocity||p/10,S=i.clamp?0:i.bounce,X=!Je.und(S),W=f==c?s.v0>0:f<c;let V,R=!1;const z=1,L=Math.ceil(e/z);for(let k=0;k<L&&(V=Math.abs(h)>b,!(!V&&(d=Math.abs(c-u)<=p,d)));++k){X&&(R=u==c||u>c==W,R&&(h=-h*S,u=c));const v=-i.tension*1e-6*(u-c),K=-i.friction*.001*h,x=(v+K)/i.mass;h=h+x*z,u=u+h*z}}else{let b=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,m=s.elapsedTime+=e)),b=(i.progress||0)+m/this._memoizedDuration,b=b>1?1:b<0?0:b,s.durationProgress=b),u=f+i.easing(b)*(c-f),h=(u-s.lastPosition)/e,d=b==1}s.lastVelocity=h,Number.isNaN(u)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[I].done&&(d=!1),d?s.done=!0:t=!1,s.setValue(u,i.round)&&(n=!0)});const o=ga(this),l=o.getValue();if(t){const s=er(g.to);(l!==s||n)&&!i.decay?(o.setValue(s),this._onChange(s)):n&&i.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(e){return mt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ho(this)){const{to:e,config:t}=this.animation;mt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Je.und(e)?(n=this.queue||[],this.queue=[]):n=[Je.obj(e)?e:{...t,to:e}],Promise.all(n.map(g=>this._update(g))).then(g=>Y1(this,g))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),ju(this._state,e&&this._lastCallId),mt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:g}=e;n=Je.obj(n)?n[t]:n,(n==null||i2(n))&&(n=void 0),g=Je.obj(g)?g[t]:g,g==null&&(g=void 0);const r={to:n,from:g};return Qb(this)||(e.reverse&&([n,g]=[g,n]),g=er(g),Je.und(g)?ga(this)||this._set(n):this._set(g)),r}_update({...e},t){const{key:n,defaultProps:g}=this;e.default&&Object.assign(g,X1(e,(a,o)=>/^on/.test(o)?KY(a,n):a)),iV(this,e,"onProps"),BC(this,"onProps",e,this);const r=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return EY(++this._lastCallId,{key:n,props:e,defaultProps:g,state:i,actions:{pause:()=>{ZC(this)||(gV(this,!0),KC(i.pauseQueue),BC(this,"onPause",ki(this,GC(this,this.animation.to)),this))},resume:()=>{ZC(this)&&(gV(this,!1),Ho(this)&&this._resume(),KC(i.resumeQueue),BC(this,"onResume",ki(this,GC(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(a=>{if(e.loop&&a.finished&&!(t&&a.noop)){const o=TY(e);if(o)return this._update(o,!0)}return a})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(DI(this));const g=!Je.und(e.to),r=!Je.und(e.from);if(g||r)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(DI(this));const{key:i,defaultProps:a,animation:o}=this,{to:l,from:s}=o;let{to:I=l,from:c=s}=e;r&&!g&&(!t.default||Je.und(I))&&(I=c),t.reverse&&([I,c]=[c,I]);const d=!Ka(c,s);d&&(o.from=c),c=er(c);const u=!Ka(I,l);u&&this._focus(I);const m=i2(t.to),{config:f}=o,{decay:y,velocity:h}=f;(g||r)&&(f.velocity=0),t.config&&!m&&dP(f,tr(t.config,i),t.config!==a.config?tr(a.config,i):void 0);let p=ga(this);if(!p||Je.und(I))return n(ki(this,!0));const b=Je.und(t.reset)?r&&!t.default:!Je.und(c)&&gu(t.reset,i),S=b?c:this.get(),X=Du(I),W=Je.num(X)||Je.arr(X)||D0(X),V=!m&&(!W||gu(a.immediate||t.immediate,i));if(u){const k=r2(I);if(k!==p.constructor)if(V)p=this._set(X);else throw Error(`Cannot animate between ${p.constructor.name} and ${k.name}, as the "to" prop suggests`)}const R=p.constructor;let z=zr(I),L=!1;if(!z){const k=b||!Qb(this)&&d;(u||k)&&(L=Ka(Du(S),X),z=!L),(!Ka(o.immediate,V)&&!V||!Ka(f.decay,y)||!Ka(f.velocity,h))&&(z=!0)}if(L&&Ho(this)&&(o.changed&&!b?z=!0:z||this._stop(l)),!m&&((z||zr(l))&&(o.values=p.getPayload(),o.toValues=zr(I)?null:R==Tu?[1]:Lg(X)),o.immediate!=V&&(o.immediate=V,!V&&!b&&this._set(l)),z)){const{onRest:k}=o;St(fP,K=>iV(this,t,K));const v=ki(this,GC(this,l));KC(this._pendingCalls,v),this._pendingCalls.add(n),o.changed&&mt.batchedUpdates(()=>{var K;o.changed=!b,k==null||k(v,this),b?tr(a.onRest,v):(K=o.onStart)==null||K.call(o,v,this)})}b&&this._set(S),m?n(zY(t.to,t,this._state,this)):z?this._start():Ho(this)&&!u?this._pendingCalls.add(n):n(MY(S))}_focus(e){const t=this.animation;e!==t.to&&(DW(this)&&this._detach(),t.to=e,DW(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;zr(t)&&(Vc(t,this),o2(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;zr(e)&&zu(e,this)}_set(e,t=!0){const n=er(e);if(!Je.und(n)){const g=ga(this);if(!g||!Ka(n,g.getValue())){const r=r2(n);!g||g.constructor!=r?w1(this,r.create(n)):g.setValue(n),g&&mt.batchedUpdates(()=>{this._onChange(n,t)})}}return ga(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,BC(this,"onStart",ki(this,GC(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),tr(this.animation.onChange,e,this)),tr(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;ga(this).reset(er(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ho(this)||(nV(this,!0),ZC(this)||this._resume())}_resume(){ei.skipAnimation?this.finish():z0.start(this)}_stop(e,t){if(Ho(this)){nV(this,!1);const n=this.animation;St(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Mu(this,{type:"idle",parent:this});const g=t?DI(this.get()):ki(this.get(),GC(this,e??n.to));KC(this._pendingCalls,g),n.changed&&(n.changed=!1,BC(this,"onRest",g,this))}}};function GC(e,t){const n=Du(t),g=Du(e.get());return Ka(g,n)}function TY(e,t=e.loop,n=e.to){const g=tr(t);if(g){const r=g!==!0&&J1(g),i=(r||e).reverse,a=!r||r.reset;return Km({...e,loop:t,default:!1,pause:void 0,to:!i||i2(n)?n:void 0,from:a?e.from:void 0,reset:a,...r})}}function Km(e){const{to:t,from:n}=e=J1(e),g=new Set;return Je.obj(t)&&rV(t,g),Je.obj(n)&&rV(n,g),e.keys=g.size?Array.from(g):null,e}function rV(e,t){fa(e,(n,g)=>n!=null&&t.add(g))}var fP=["onStart","onRest","onChange","onPause","onResume"];function iV(e,t,n){e.animation[n]=t[n]!==LY(t,n)?KY(t[n],e.key):void 0}function BC(e,t,...n){var g,r,i,a;(r=(g=e.animation)[t])==null||r.call(g,...n),(a=(i=e.defaultProps)[t])==null||a.call(i,...n)}var pP=["onStart","onChange","onRest"],bP=1,yP=class{constructor(e,t){this.id=bP++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Je.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Km(e)),this}start(e){let{queue:t}=this;return e?t=Lg(e).map(Km):this.queue=[],this._flush?this._flush(this,t):(PY(this,t),ZP(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;St(Lg(t),g=>n[g].stop(!!e))}else ju(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Je.und(e))this.start({pause:!0});else{const t=this.springs;St(Lg(e),n=>t[n].pause())}return this}resume(e){if(Je.und(e))this.start({pause:!1});else{const t=this.springs;St(Lg(e),n=>t[n].resume())}return this}each(e){fa(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,g=this._active.size>0,r=this._changed.size>0;(g&&!this._started||r&&!this._started)&&(this._started=!0,tu(e,([o,l])=>{l.value=this.get(),o(l,this,this._item)}));const i=!g&&this._started,a=r||i&&n.size?this.get():null;r&&t.size&&tu(t,([o,l])=>{l.value=a,o(l,this,this._item)}),i&&(this._started=!1,tu(n,([o,l])=>{l.value=a,o(l,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;mt.onFrame(this._onFrame)}};function ZP(e,t){return Promise.all(t.map(n=>DY(e,n))).then(n=>Y1(e,n))}async function DY(e,t,n){const{keys:g,to:r,from:i,loop:a,onRest:o,onResolve:l}=t,s=Je.obj(t.default)&&t.default;a&&(t.loop=!1),r===!1&&(t.to=null),i===!1&&(t.from=null);const I=Je.arr(r)||Je.fun(r)?r:void 0;I?(t.to=void 0,t.onRest=void 0,s&&(s.onRest=void 0)):St(pP,f=>{const y=t[f];if(Je.fun(y)){const h=e._events[f];t[f]=({finished:p,cancelled:b})=>{const S=h.get(y);S?(p||(S.finished=!1),b&&(S.cancelled=!0)):h.set(y,{value:null,finished:p||!1,cancelled:b||!1})},s&&(s[f]=t[f])}});const c=e._state;t.pause===!c.paused?(c.paused=t.pause,KC(t.pause?c.pauseQueue:c.resumeQueue)):c.paused&&(t.pause=!0);const d=(g||Object.keys(e.springs)).map(f=>e.springs[f].start(t)),u=t.cancel===!0||LY(t,"cancel")===!0;(I||u&&c.asyncId)&&d.push(EY(++e._lastAsyncId,{props:t,state:c,actions:{pause:n2,resume:n2,start(f,y){u?(ju(c,e._lastAsyncId),y(DI(e))):(f.onRest=o,y(zY(I,f,c,e)))}}})),c.paused&&await new Promise(f=>{c.resumeQueue.add(f)});const m=Y1(e,await Promise.all(d));if(a&&m.finished&&!(n&&m.noop)){const f=TY(t,a,r);if(f)return PY(e,[f]),DY(e,f,!0)}return l&&mt.batchedUpdates(()=>l(m,e,e.item)),m}function GP(e,t){const n={...e.springs};return t&&St(Lg(t),g=>{Je.und(g.keys)&&(g=Km(g)),Je.obj(g.to)||(g={...g,to:void 0}),QY(n,g,r=>jY(r))}),BP(e,n),n}function BP(e,t){fa(t,(n,g)=>{e.springs[g]||(e.springs[g]=n,Vc(n,e))})}function jY(e,t){const n=new mP;return n.key=e,t&&Vc(n,t),n}function QY(e,t,n){t.keys&&St(t.keys,g=>{(e[g]||(e[g]=n(g)))._prepareNode(t)})}function PY(e,t){St(t,n=>{QY(e.springs,n,g=>jY(g,e))})}var P0=({children:e,...t})=>{const n=_.useContext(Lm),g=t.pause||!!n.pause,r=t.immediate||!!n.immediate;t=OQ(()=>({pause:g,immediate:r}),[g,r]);const{Provider:i}=Lm;return _.createElement(i,{value:t},e)},Lm=SP(P0,{});P0.Provider=Lm.Provider;P0.Consumer=Lm.Consumer;function SP(e,t){return Object.assign(e,_.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var vP=()=>{const e=[],t=function(g){QQ();const r=[];return St(e,(i,a)=>{if(Je.und(g))r.push(i.start());else{const o=n(g,i,a);o&&r.push(i.start(o))}}),r};t.current=e,t.add=function(g){e.includes(g)||e.push(g)},t.delete=function(g){const r=e.indexOf(g);~r&&e.splice(r,1)},t.pause=function(){return St(e,g=>g.pause(...arguments)),this},t.resume=function(){return St(e,g=>g.resume(...arguments)),this},t.set=function(g){St(e,(r,i)=>{const a=Je.fun(g)?g(i,r):g;a&&r.set(a)})},t.start=function(g){const r=[];return St(e,(i,a)=>{if(Je.und(g))r.push(i.start());else{const o=this._getProps(g,i,a);o&&r.push(i.start(o))}}),r},t.stop=function(){return St(e,g=>g.stop(...arguments)),this},t.update=function(g){return St(e,(r,i)=>r.update(this._getProps(g,r,i))),this};const n=function(g,r,i){return Je.fun(g)?g(i,r):g};return t._getProps=n,t};function I2(e,t,n){const g=Je.fun(t)&&t,{reset:r,sort:i,trail:a=0,expires:o=!0,exitBeforeEnter:l=!1,onDestroyed:s,ref:I,config:c}=g?g():t,d=_.useMemo(()=>g||arguments.length==3?vP():void 0,[]),u=Lg(e),m=[],f=_.useRef(null),y=r?null:f.current;Ol(()=>{f.current=m}),HY(()=>(St(m,x=>{d==null||d.add(x.ctrl),x.ctrl.ref=d}),()=>{St(f.current,x=>{x.expired&&clearTimeout(x.expirationId),_W(x.ctrl,d),x.ctrl.stop(!0)})}));const h=VP(u,g?g():t,y),p=r&&f.current||[];Ol(()=>St(p,({ctrl:x,item:q,key:Q})=>{_W(x,d),tr(s,q,Q)}));const b=[];if(y&&St(y,(x,q)=>{x.expired?(clearTimeout(x.expirationId),p.push(x)):(q=b[q]=h.indexOf(x.key),~q&&(m[q]=x))}),St(u,(x,q)=>{m[q]||(m[q]={key:h[q],item:x,phase:"mount",ctrl:new yP},m[q].ctrl.item=x)}),b.length){let x=-1;const{leave:q}=g?g():t;St(b,(Q,D)=>{const U=y[D];~Q?(x=m.indexOf(U),m[x]={...U,item:u[Q]}):q&&m.splice(++x,0,U)})}Je.fun(i)&&m.sort((x,q)=>i(x.item,q.item));let S=-a;const X=NY(),W=X1(t),V=new Map,R=_.useRef(new Map),z=_.useRef(!1);St(m,(x,q)=>{const Q=x.key,D=x.phase,U=g?g():t;let P,N;const le=tr(U.delay||0,Q);if(D=="mount")P=U.enter,N="enter";else{const ee=h.indexOf(Q)<0;if(D!="leave")if(ee)P=U.leave,N="leave";else if(P=U.update)N="update";else return;else if(!ee)P=U.enter,N="enter";else return}if(P=tr(P,x.item,q),P=Je.obj(P)?J1(P):{to:P},!P.config){const ee=c||W.config;P.config=tr(ee,x.item,q,N)}S+=a;const Y={...W,delay:le+S,ref:I,immediate:U.immediate,reset:!1,...P};if(N=="enter"&&Je.und(Y.from)){const ee=g?g():t,te=Je.und(ee.initial)||y?ee.from:ee.initial;Y.from=tr(te,x.item,q)}const{onResolve:J}=Y;Y.onResolve=ee=>{tr(J,ee);const te=f.current,se=te.find(ce=>ce.key===Q);if(se&&!(ee.cancelled&&se.phase!="update")&&se.ctrl.idle){const ce=te.every(re=>re.ctrl.idle);if(se.phase=="leave"){const re=tr(o,se.item);if(re!==!1){const fe=re===!0?0:re;if(se.expired=!0,!ce&&fe>0){fe<=2147483647&&(se.expirationId=setTimeout(X,fe));return}}}ce&&te.some(re=>re.expired)&&(R.current.delete(se),l&&(z.current=!0),X())}};const O=GP(x.ctrl,Y);N==="leave"&&l?R.current.set(x,{phase:N,springs:O,payload:Y}):V.set(x,{phase:N,springs:O,payload:Y})});const L=_.useContext(P0),k=$Q(L),v=L!==k&&IP(L);Ol(()=>{v&&St(m,x=>{x.ctrl.start({default:L})})},[L]),St(V,(x,q)=>{if(R.current.size){const Q=m.findIndex(D=>D.key===q.key);m.splice(Q,1)}}),Ol(()=>{St(R.current.size?R.current:V,({phase:x,payload:q},Q)=>{const{ctrl:D}=Q;Q.phase=x,d==null||d.add(D),v&&x=="enter"&&D.start({default:L}),q&&(cP(D,q.ref),(D.ref||d)&&!z.current?D.update(q):(D.start(q),z.current&&(z.current=!1)))})},r?void 0:n);const K=x=>_.createElement(_.Fragment,null,m.map((q,Q)=>{const{springs:D}=V.get(q)||q.ctrl,U=x({...D},q.item,q,Q);return U&&U.type?_.createElement(U.type,{...U.props,key:Je.str(q.key)||Je.num(q.key)?q.key:q.ctrl.id,ref:U.ref}):U}));return d?[K,d]:K}var WP=1;function VP(e,{key:t,keys:n=t},g){if(n===null){const r=new Set;return e.map(i=>{const a=g&&g.find(o=>o.item===i&&o.phase!=="leave"&&!r.has(o));return a?(r.add(a),a.key):WP++})}return Je.und(n)?e:Je.fun(n)?e.map(n):Lg(n)}var kP=class extends N1{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Lu(...t);const n=this._get(),g=r2(n);w1(this,g.create(n))}advance(e){const t=this._get(),n=this.get();Ka(t,n)||(ga(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&aV(this._active)&&Pb(this)}_get(){const e=Je.arr(this.source)?this.source.map(er):Lg(er(this.source));return this.calc(...e)}_start(){this.idle&&!aV(this._active)&&(this.idle=!1,St(j0(this),e=>{e.done=!1}),ei.skipAnimation?(mt.batchedUpdates(()=>this.advance()),Pb(this)):z0.start(this))}_attach(){let e=1;St(Lg(this.source),t=>{zr(t)&&Vc(t,this),o2(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){St(Lg(this.source),e=>{zr(e)&&zu(e,this)}),this._active.clear(),Pb(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Lg(this.source).reduce((t,n)=>Math.max(t,(o2(n)?n.priority:0)+1),0))}};function RP(e){return e.idle!==!1}function aV(e){return!e.size||Array.from(e).every(RP)}function Pb(e){e.idle||(e.idle=!0,St(j0(e),t=>{t.done=!0}),Mu(e,{type:"idle",parent:e}))}ei.assign({createStringInterpolator:JY,to:(e,t)=>new kP(e,t)});var OY=/^--/;function wP(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!OY.test(e)&&!(ru.hasOwnProperty(e)&&ru[e])?t+"px":(""+t).trim()}var oV={};function XP(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:g,children:r,scrollTop:i,scrollLeft:a,viewBox:o,...l}=t,s=Object.values(l),I=Object.keys(l).map(c=>n||e.hasAttribute(c)?c:oV[c]||(oV[c]=c.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));r!==void 0&&(e.textContent=r);for(const c in g)if(g.hasOwnProperty(c)){const d=wP(c,g[c]);OY.test(c)?e.style.setProperty(c,d):e.style[c]=d}I.forEach((c,d)=>{e.setAttribute(c,s[d])}),i!==void 0&&(e.scrollTop=i),a!==void 0&&(e.scrollLeft=a),o!==void 0&&e.setAttribute("viewBox",o)}var ru={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JP=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),YP=["Webkit","Ms","Moz","O"];ru=Object.keys(ru).reduce((e,t)=>(YP.forEach(n=>e[JP(n,t)]=e[t]),e),ru);var NP=/^(matrix|translate|scale|rotate|skew)/,HP=/^(translate)/,FP=/^(rotate|skew)/,Ob=(e,t)=>Je.num(e)&&e!==0?e+t:e,Kh=(e,t)=>Je.arr(e)?e.every(n=>Kh(n,t)):Je.num(e)?e===t:parseFloat(e)===t,xP=class extends Q0{constructor({x:e,y:t,z:n,...g}){const r=[],i=[];(e||t||n)&&(r.push([e||0,t||0,n||0]),i.push(a=>[`translate3d(${a.map(o=>Ob(o,"px")).join(",")})`,Kh(a,0)])),fa(g,(a,o)=>{if(o==="transform")r.push([a||""]),i.push(l=>[l,l===""]);else if(NP.test(o)){if(delete g[o],Je.und(a))return;const l=HP.test(o)?"px":FP.test(o)?"deg":"";r.push(Lg(a)),i.push(o==="rotate3d"?([s,I,c,d])=>[`rotate3d(${s},${I},${c},${Ob(d,l)})`,Kh(d,0)]:s=>[`${o}(${s.map(I=>Ob(I,l)).join(",")})`,Kh(s,o.startsWith("scale")?1:0)])}}),r.length&&(g.transform=new KP(r,i)),super(g)}},KP=class extends RY{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return St(this.inputs,(n,g)=>{const r=er(n[0]),[i,a]=this.transforms[g](Je.arr(r)?r:n.map(er));e+=" "+i,t=t&&a}),t?"none":e}observerAdded(e){e==1&&St(this.inputs,t=>St(t,n=>zr(n)&&Vc(n,this)))}observerRemoved(e){e==0&&St(this.inputs,t=>St(t,n=>zr(n)&&zu(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Mu(this,e)}},LP=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ei.assign({batchedUpdates:hX.unstable_batchedUpdates,createStringInterpolator:JY,colors:SQ});var EP=iP(LP,{applyAnimatedValues:XP,createAnimatedStyle:e=>new xP(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),H1=EP.animated;function Lh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function MP(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function F1(e){let t,n,g;e.length!==2?(t=Lh,n=(o,l)=>Lh(e(o),l),g=(o,l)=>e(o)-l):(t=e===Lh||e===MP?e:zP,n=e,g=e);function r(o,l,s=0,I=o.length){if(s<I){if(t(l,l)!==0)return I;do{const c=s+I>>>1;n(o[c],l)<0?s=c+1:I=c}while(s<I)}return s}function i(o,l,s=0,I=o.length){if(s<I){if(t(l,l)!==0)return I;do{const c=s+I>>>1;n(o[c],l)<=0?s=c+1:I=c}while(s<I)}return s}function a(o,l,s=0,I=o.length){const c=r(o,l,s,I-1);return c>s&&g(o[c-1],l)>-g(o[c],l)?c-1:c}return{left:r,center:a,right:i}}function zP(){return 0}function UP(e){return e===null?NaN:+e}const TP=F1(Lh),_Y=TP.right;F1(UP).center;class lV extends Map{constructor(t,n=QP){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[g,r]of t)this.set(g,r)}get(t){return super.get(sV(this,t))}has(t){return super.has(sV(this,t))}set(t,n){return super.set(DP(this,t),n)}delete(t){return super.delete(jP(this,t))}}function sV({_intern:e,_key:t},n){const g=t(n);return e.has(g)?e.get(g):n}function DP({_intern:e,_key:t},n){const g=t(n);return e.has(g)?e.get(g):(e.set(g,n),n)}function jP({_intern:e,_key:t},n){const g=t(n);return e.has(g)&&(n=e.get(g),e.delete(g)),n}function QP(e){return e!==null&&typeof e=="object"?e.valueOf():e}const PP=Math.sqrt(50),OP=Math.sqrt(10),_P=Math.sqrt(2);function Em(e,t,n){const g=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(g)),i=g/Math.pow(10,r),a=i>=PP?10:i>=OP?5:i>=_P?2:1;let o,l,s;return r<0?(s=Math.pow(10,-r)/a,o=Math.round(e*s),l=Math.round(t*s),o/s<e&&++o,l/s>t&&--l,s=-s):(s=Math.pow(10,r)*a,o=Math.round(e/s),l=Math.round(t/s),o*s<e&&++o,l*s>t&&--l),l<o&&.5<=n&&n<2?Em(e,t,n*2):[o,l,s]}function c2(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const g=t<e,[r,i,a]=g?Em(t,e,n):Em(e,t,n);if(!(i>=r))return[];const o=i-r+1,l=new Array(o);if(g)if(a<0)for(let s=0;s<o;++s)l[s]=(i-s)/-a;else for(let s=0;s<o;++s)l[s]=(i-s)*a;else if(a<0)for(let s=0;s<o;++s)l[s]=(r+s)/-a;else for(let s=0;s<o;++s)l[s]=(r+s)*a;return l}function C2(e,t,n){return t=+t,e=+e,n=+n,Em(e,t,n)[2]}function u2(e,t,n){t=+t,e=+e,n=+n;const g=t<e,r=g?C2(t,e,n):C2(e,t,n);return(g?-1:1)*(r<0?1/-r:r)}function qP(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var g=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++g<r;)i[g]=e+g*n;return i}function vl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $P(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IV=Symbol("implicit");function Mm(){var e=new lV,t=[],n=[],g=IV;function r(i){let a=e.get(i);if(a===void 0){if(g!==IV)return g;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new lV;for(const a of i)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(g=i,r):g},r.copy=function(){return Mm(t,n).unknown(g)},vl.apply(r,arguments),r}function zm(){var e=Mm().unknown(void 0),t=e.domain,n=e.range,g=0,r=1,i,a,o=!1,l=0,s=0,I=.5;delete e.unknown;function c(){var d=t().length,u=r<g,m=u?r:g,f=u?g:r;i=(f-m)/Math.max(1,d-l+s*2),o&&(i=Math.floor(i)),m+=(f-m-i*(d-l))*I,a=i*(1-l),o&&(m=Math.round(m),a=Math.round(a));var y=qP(d).map(function(h){return m+i*h});return n(u?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?([g,r]=d,g=+g,r=+r,c()):[g,r]},e.rangeRound=function(d){return[g,r]=d,g=+g,r=+r,o=!0,c()},e.bandwidth=function(){return a},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.min(1,s=+d),c()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),c()):l},e.paddingOuter=function(d){return arguments.length?(s=+d,c()):s},e.align=function(d){return arguments.length?(I=Math.max(0,Math.min(1,d)),c()):I},e.copy=function(){return zm(t(),[g,r]).round(o).paddingInner(l).paddingOuter(s).align(I)},vl.apply(c(),arguments)}function qY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qY(t())},e}function cV(){return qY(zm.apply(null,arguments).paddingInner(1))}function x1(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $Y(e,t){var n=Object.create(e.prototype);for(var g in t)n[g]=t[g];return n}function vd(){}var Qu=.7,Um=1/Qu,jI="\\s*([+-]?\\d+)\\s*",Pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e8=/^#([0-9a-f]{3,8})$/,t8=new RegExp(`^rgb\\(${jI},${jI},${jI}\\)$`),n8=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),g8=new RegExp(`^rgba\\(${jI},${jI},${jI},${Pu}\\)$`),r8=new RegExp(`^rgba\\(${da},${da},${da},${Pu}\\)$`),i8=new RegExp(`^hsl\\(${Pu},${da},${da}\\)$`),a8=new RegExp(`^hsla\\(${Pu},${da},${da},${Pu}\\)$`),CV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};x1(vd,sc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uV,formatHex:uV,formatHex8:o8,formatHsl:l8,formatRgb:dV,toString:dV});function uV(){return this.rgb().formatHex()}function o8(){return this.rgb().formatHex8()}function l8(){return eN(this).formatHsl()}function dV(){return this.rgb().formatRgb()}function sc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?AV(t):n===3?new ir(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=t8.exec(e))?new ir(t[1],t[2],t[3],1):(t=n8.exec(e))?new ir(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=g8.exec(e))?gh(t[1],t[2],t[3],t[4]):(t=r8.exec(e))?gh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=i8.exec(e))?fV(t[1],t[2]/100,t[3]/100,1):(t=a8.exec(e))?fV(t[1],t[2]/100,t[3]/100,t[4]):CV.hasOwnProperty(e)?AV(CV[e]):e==="transparent"?new ir(NaN,NaN,NaN,0):null}function AV(e){return new ir(e>>16&255,e>>8&255,e&255,1)}function gh(e,t,n,g){return g<=0&&(e=t=n=NaN),new ir(e,t,n,g)}function s8(e){return e instanceof vd||(e=sc(e)),e?(e=e.rgb(),new ir(e.r,e.g,e.b,e.opacity)):new ir}function d2(e,t,n,g){return arguments.length===1?s8(e):new ir(e,t,n,g??1)}function ir(e,t,n,g){this.r=+e,this.g=+t,this.b=+n,this.opacity=+g}x1(ir,d2,$Y(vd,{brighter(e){return e=e==null?Um:Math.pow(Um,e),new ir(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qu:Math.pow(Qu,e),new ir(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ir(rs(this.r),rs(this.g),rs(this.b),Tm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hV,formatHex:hV,formatHex8:I8,formatRgb:mV,toString:mV}));function hV(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function I8(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function mV(){const e=Tm(this.opacity);return`${e===1?"rgb(":"rgba("}${rs(this.r)}, ${rs(this.g)}, ${rs(this.b)}${e===1?")":`, ${e})`}`}function Tm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=rs(e),(e<16?"0":"")+e.toString(16)}function fV(e,t,n,g){return g<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new wi(e,t,n,g)}function eN(e){if(e instanceof wi)return new wi(e.h,e.s,e.l,e.opacity);if(e instanceof vd||(e=sc(e)),!e)return new wi;if(e instanceof wi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,g=e.b/255,r=Math.min(t,n,g),i=Math.max(t,n,g),a=NaN,o=i-r,l=(i+r)/2;return o?(t===i?a=(n-g)/o+(n<g)*6:n===i?a=(g-t)/o+2:a=(t-n)/o+4,o/=l<.5?i+r:2-i-r,a*=60):o=l>0&&l<1?0:a,new wi(a,o,l,e.opacity)}function c8(e,t,n,g){return arguments.length===1?eN(e):new wi(e,t,n,g??1)}function wi(e,t,n,g){this.h=+e,this.s=+t,this.l=+n,this.opacity=+g}x1(wi,c8,$Y(vd,{brighter(e){return e=e==null?Um:Math.pow(Um,e),new wi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qu:Math.pow(Qu,e),new wi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,g=n+(n<.5?n:1-n)*t,r=2*n-g;return new ir(_b(e>=240?e-240:e+120,r,g),_b(e,r,g),_b(e<120?e+240:e-120,r,g),this.opacity)},clamp(){return new wi(pV(this.h),rh(this.s),rh(this.l),Tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tm(this.opacity);return`${e===1?"hsl(":"hsla("}${pV(this.h)}, ${rh(this.s)*100}%, ${rh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pV(e){return e=(e||0)%360,e<0?e+360:e}function rh(e){return Math.max(0,Math.min(1,e||0))}function _b(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const K1=e=>()=>e;function C8(e,t){return function(n){return e+n*t}}function u8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(g){return Math.pow(e+g*t,n)}}function d8(e){return(e=+e)==1?tN:function(t,n){return n-t?u8(t,n,e):K1(isNaN(t)?n:t)}}function tN(e,t){var n=t-e;return n?C8(e,n):K1(isNaN(e)?t:e)}const bV=function e(t){var n=d8(t);function g(r,i){var a=n((r=d2(r)).r,(i=d2(i)).r),o=n(r.g,i.g),l=n(r.b,i.b),s=tN(r.opacity,i.opacity);return function(I){return r.r=a(I),r.g=o(I),r.b=l(I),r.opacity=s(I),r+""}}return g.gamma=e,g}(1);function A8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,g=t.slice(),r;return function(i){for(r=0;r<n;++r)g[r]=e[r]*(1-i)+t[r]*i;return g}}function h8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function m8(e,t){var n=t?t.length:0,g=e?Math.min(n,e.length):0,r=new Array(g),i=new Array(n),a;for(a=0;a<g;++a)r[a]=O0(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(o){for(a=0;a<g;++a)i[a]=r[a](o);return i}}function nN(e,t){var n=new Date;return e=+e,t=+t,function(g){return n.setTime(e*(1-g)+t*g),n}}function Ou(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function f8(e,t){var n={},g={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=O0(e[r],t[r]):g[r]=t[r];return function(i){for(r in n)g[r]=n[r](i);return g}}var A2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qb=new RegExp(A2.source,"g");function p8(e){return function(){return e}}function b8(e){return function(t){return e(t)+""}}function y8(e,t){var n=A2.lastIndex=qb.lastIndex=0,g,r,i,a=-1,o=[],l=[];for(e=e+"",t=t+"";(g=A2.exec(e))&&(r=qb.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),o[a]?o[a]+=i:o[++a]=i),(g=g[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:Ou(g,r)})),n=qb.lastIndex;return n<t.length&&(i=t.slice(n),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?b8(l[0].x):p8(t):(t=l.length,function(s){for(var I=0,c;I<t;++I)o[(c=l[I]).i]=c.x(s);return o.join("")})}function O0(e,t){var n=typeof t,g;return t==null||n==="boolean"?K1(t):(n==="number"?Ou:n==="string"?(g=sc(t))?(t=g,bV):y8:t instanceof sc?bV:t instanceof Date?nN:h8(t)?A8:Array.isArray(t)?m8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?f8:Ou)(e,t)}function gN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Z8(e){return function(){return e}}function G8(e){return+e}var yV=[0,1];function Qr(e){return e}function h2(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Z8(isNaN(t)?NaN:.5)}function B8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(g){return Math.max(e,Math.min(t,g))}}function S8(e,t,n){var g=e[0],r=e[1],i=t[0],a=t[1];return r<g?(g=h2(r,g),i=n(a,i)):(g=h2(g,r),i=n(i,a)),function(o){return i(g(o))}}function v8(e,t,n){var g=Math.min(e.length,t.length)-1,r=new Array(g),i=new Array(g),a=-1;for(e[g]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<g;)r[a]=h2(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(o){var l=_Y(e,o,1,g)-1;return i[l](r[l](o))}}function _0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function L1(){var e=yV,t=yV,n=O0,g,r,i,a=Qr,o,l,s;function I(){var d=Math.min(e.length,t.length);return a!==Qr&&(a=B8(e[0],e[d-1])),o=d>2?v8:S8,l=s=null,c}function c(d){return d==null||isNaN(d=+d)?i:(l||(l=o(e.map(g),t,n)))(g(a(d)))}return c.invert=function(d){return a(r((s||(s=o(t,e.map(g),Ou)))(d)))},c.domain=function(d){return arguments.length?(e=Array.from(d,G8),I()):e.slice()},c.range=function(d){return arguments.length?(t=Array.from(d),I()):t.slice()},c.rangeRound=function(d){return t=Array.from(d),n=gN,I()},c.clamp=function(d){return arguments.length?(a=d?!0:Qr,I()):a!==Qr},c.interpolate=function(d){return arguments.length?(n=d,I()):n},c.unknown=function(d){return arguments.length?(i=d,c):i},function(d,u){return g=d,r=u,I()}}function rN(){return L1()(Qr,Qr)}function W8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,g=e.slice(0,n);return[g.length>1?g[0]+g.slice(2):g,+e.slice(n+1)]}function Ic(e){return e=Dm(Math.abs(e)),e?e[1]:NaN}function V8(e,t){return function(n,g){for(var r=n.length,i=[],a=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>g&&(o=Math.max(1,g-l)),i.push(n.substring(r-=o,r+o)),!((l+=o+1)>g));)o=e[a=(a+1)%e.length];return i.reverse().join(t)}}function k8(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var R8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _u(e){if(!(t=R8.exec(e)))throw new Error("invalid format: "+e);var t;return new E1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_u.prototype=E1.prototype;function E1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}E1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w8(e){e:for(var t=e.length,n=1,g=-1,r;n<t;++n)switch(e[n]){case".":g=r=n;break;case"0":g===0&&(g=n),r=n;break;default:if(!+e[n])break e;g>0&&(g=0);break}return g>0?e.slice(0,g)+e.slice(r+1):e}var iN;function X8(e,t){var n=Dm(e,t);if(!n)return e+"";var g=n[0],r=n[1],i=r-(iN=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=g.length;return i===a?g:i>a?g+new Array(i-a+1).join("0"):i>0?g.slice(0,i)+"."+g.slice(i):"0."+new Array(1-i).join("0")+Dm(e,Math.max(0,t+i-1))[0]}function ZV(e,t){var n=Dm(e,t);if(!n)return e+"";var g=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+g:g.length>r+1?g.slice(0,r+1)+"."+g.slice(r+1):g+new Array(r-g.length+2).join("0")}const GV={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:W8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZV(e*100,t),r:ZV,s:X8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function BV(e){return e}var SV=Array.prototype.map,vV=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function J8(e){var t=e.grouping===void 0||e.thousands===void 0?BV:V8(SV.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",g=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?BV:k8(SV.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function s(c){c=_u(c);var d=c.fill,u=c.align,m=c.sign,f=c.symbol,y=c.zero,h=c.width,p=c.comma,b=c.precision,S=c.trim,X=c.type;X==="n"?(p=!0,X="g"):GV[X]||(b===void 0&&(b=12),S=!0,X="g"),(y||d==="0"&&u==="=")&&(y=!0,d="0",u="=");var W=f==="$"?n:f==="#"&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",V=f==="$"?g:/[%p]/.test(X)?a:"",R=GV[X],z=/[defgprs%]/.test(X);b=b===void 0?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function L(k){var v=W,K=V,x,q,Q;if(X==="c")K=R(k)+K,k="";else{k=+k;var D=k<0||1/k<0;if(k=isNaN(k)?l:R(Math.abs(k),b),S&&(k=w8(k)),D&&+k==0&&m!=="+"&&(D=!1),v=(D?m==="("?m:o:m==="-"||m==="("?"":m)+v,K=(X==="s"?vV[8+iN/3]:"")+K+(D&&m==="("?")":""),z){for(x=-1,q=k.length;++x<q;)if(Q=k.charCodeAt(x),48>Q||Q>57){K=(Q===46?r+k.slice(x+1):k.slice(x))+K,k=k.slice(0,x);break}}}p&&!y&&(k=t(k,1/0));var U=v.length+k.length+K.length,P=U<h?new Array(h-U+1).join(d):"";switch(p&&y&&(k=t(P+k,P.length?h-K.length:1/0),P=""),u){case"<":k=v+k+K+P;break;case"=":k=v+P+k+K;break;case"^":k=P.slice(0,U=P.length>>1)+v+k+K+P.slice(U);break;default:k=P+v+k+K;break}return i(k)}return L.toString=function(){return c+""},L}function I(c,d){var u=s((c=_u(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(Ic(d)/3)))*3,f=Math.pow(10,-m),y=vV[8+m/3];return function(h){return u(f*h)+y}}return{format:s,formatPrefix:I}}var ih,M1,aN;Y8({thousands:",",grouping:[3],currency:["$",""]});function Y8(e){return ih=J8(e),M1=ih.format,aN=ih.formatPrefix,ih}function N8(e){return Math.max(0,-Ic(Math.abs(e)))}function H8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ic(t)/3)))*3-Ic(Math.abs(e)))}function F8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ic(t)-Ic(e))+1}function x8(e,t,n,g){var r=u2(e,t,n),i;switch(g=_u(g??",f"),g.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return g.precision==null&&!isNaN(i=H8(r,a))&&(g.precision=i),aN(g,a)}case"":case"e":case"g":case"p":case"r":{g.precision==null&&!isNaN(i=F8(r,Math.max(Math.abs(e),Math.abs(t))))&&(g.precision=i-(g.type==="e"));break}case"f":case"%":{g.precision==null&&!isNaN(i=N8(r))&&(g.precision=i-(g.type==="%")*2);break}}return M1(g)}function z1(e){var t=e.domain;return e.ticks=function(n){var g=t();return c2(g[0],g[g.length-1],n??10)},e.tickFormat=function(n,g){var r=t();return x8(r[0],r[r.length-1],n??10,g)},e.nice=function(n){n==null&&(n=10);var g=t(),r=0,i=g.length-1,a=g[r],o=g[i],l,s,I=10;for(o<a&&(s=a,a=o,o=s,s=r,r=i,i=s);I-- >0;){if(s=C2(a,o,n),s===l)return g[r]=a,g[i]=o,t(g);if(s>0)a=Math.floor(a/s)*s,o=Math.ceil(o/s)*s;else if(s<0)a=Math.ceil(a*s)/s,o=Math.floor(o*s)/s;else break;l=s}return e},e}function oN(){var e=rN();return e.copy=function(){return _0(e,oN())},vl.apply(e,arguments),z1(e)}function lN(e,t){e=e.slice();var n=0,g=e.length-1,r=e[n],i=e[g],a;return i<r&&(a=n,n=g,g=a,a=r,r=i,i=a),e[n]=t.floor(r),e[g]=t.ceil(i),e}function WV(e){return Math.log(e)}function VV(e){return Math.exp(e)}function K8(e){return-Math.log(-e)}function L8(e){return-Math.exp(-e)}function E8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function M8(e){return e===10?E8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function z8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kV(e){return(t,n)=>-e(-t,n)}function U8(e){const t=e(WV,VV),n=t.domain;let g=10,r,i;function a(){return r=z8(g),i=M8(g),n()[0]<0?(r=kV(r),i=kV(i),e(K8,L8)):e(WV,VV),t}return t.base=function(o){return arguments.length?(g=+o,a()):g},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let s=l[0],I=l[l.length-1];const c=I<s;c&&([s,I]=[I,s]);let d=r(s),u=r(I),m,f;const y=o==null?10:+o;let h=[];if(!(g%1)&&u-d<y){if(d=Math.floor(d),u=Math.ceil(u),s>0){for(;d<=u;++d)for(m=1;m<g;++m)if(f=d<0?m/i(-d):m*i(d),!(f<s)){if(f>I)break;h.push(f)}}else for(;d<=u;++d)for(m=g-1;m>=1;--m)if(f=d>0?m/i(-d):m*i(d),!(f<s)){if(f>I)break;h.push(f)}h.length*2<y&&(h=c2(s,I,y))}else h=c2(d,u,Math.min(u-d,y)).map(i);return c?h.reverse():h},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=g===10?"s":","),typeof l!="function"&&(!(g%1)&&(l=_u(l)).precision==null&&(l.trim=!0),l=M1(l)),o===1/0)return l;const s=Math.max(1,g*o/t.ticks().length);return I=>{let c=I/i(Math.round(r(I)));return c*g<g-.5&&(c*=g),c<=s?l(I):""}},t.nice=()=>n(lN(n(),{floor:o=>i(Math.floor(r(o))),ceil:o=>i(Math.ceil(r(o)))})),t}function sN(){const e=U8(L1()).domain([1,10]);return e.copy=()=>_0(e,sN()).base(e.base()),vl.apply(e,arguments),e}function RV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function T8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function D8(e){return e<0?-e*e:e*e}function j8(e){var t=e(Qr,Qr),n=1;function g(){return n===1?e(Qr,Qr):n===.5?e(T8,D8):e(RV(n),RV(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,g()):n},z1(t)}function U1(){var e=j8(L1());return e.copy=function(){return _0(e,U1()).exponent(e.exponent())},vl.apply(e,arguments),e}function Q8(){return U1.apply(null,arguments).exponent(.5)}function IN(){var e=[.5],t=[0,1],n,g=1;function r(i){return i!=null&&i<=i?t[_Y(e,i,0,g)]:n}return r.domain=function(i){return arguments.length?(e=Array.from(i),g=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),g=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var a=t.indexOf(i);return[e[a-1],e[a]]},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return IN().domain(e).range(t).unknown(n)},vl.apply(r,arguments)}const $b=new Date,ey=new Date;function rg(e,t,n,g){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const a=r(i),o=r.ceil(i);return i-a<o-i?a:o},r.offset=(i,a)=>(t(i=new Date(+i),a==null?1:Math.floor(a)),i),r.range=(i,a,o)=>{const l=[];if(i=r.ceil(i),o=o==null?1:Math.floor(o),!(i<a)||!(o>0))return l;let s;do l.push(s=new Date(+i)),t(i,o),e(i);while(s<i&&i<a);return l},r.filter=i=>rg(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!i(a););else for(;--o>=0;)for(;t(a,1),!i(a););}),n&&(r.count=(i,a)=>($b.setTime(+i),ey.setTime(+a),e($b),e(ey),Math.floor(n($b,ey))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(g?a=>g(a)%i===0:a=>r.count(0,a)%i===0):r)),r}const jm=rg(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);jm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rg(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):jm);jm.range;const Ua=1e3,Pr=Ua*60,Ta=Pr*60,io=Ta*24,T1=io*7,wV=io*30,ty=io*365,ql=rg(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());ql.range;const D1=rg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Pr)},(e,t)=>(t-e)/Pr,e=>e.getMinutes());D1.range;const j1=rg(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Pr)},(e,t)=>(t-e)/Pr,e=>e.getUTCMinutes());j1.range;const Q1=rg(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Pr)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getHours());Q1.range;const P1=rg(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ta)},(e,t)=>(t-e)/Ta,e=>e.getUTCHours());P1.range;const Wd=rg(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Pr)/io,e=>e.getDate()-1);Wd.range;const q0=rg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);q0.range;const cN=rg(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));cN.range;function Gs(e){return rg(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Pr)/T1)}const $0=Gs(0),Qm=Gs(1),P8=Gs(2),O8=Gs(3),cc=Gs(4),_8=Gs(5),q8=Gs(6);$0.range;Qm.range;P8.range;O8.range;cc.range;_8.range;q8.range;function Bs(e){return rg(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/T1)}const ef=Bs(0),Pm=Bs(1),$8=Bs(2),e7=Bs(3),Cc=Bs(4),t7=Bs(5),n7=Bs(6);ef.range;Pm.range;$8.range;e7.range;Cc.range;t7.range;n7.range;const O1=rg(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());O1.range;const _1=rg(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_1.range;const ao=rg(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rg(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ao.range;const oo=rg(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rg(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});oo.range;function CN(e,t,n,g,r,i){const a=[[ql,1,Ua],[ql,5,5*Ua],[ql,15,15*Ua],[ql,30,30*Ua],[i,1,Pr],[i,5,5*Pr],[i,15,15*Pr],[i,30,30*Pr],[r,1,Ta],[r,3,3*Ta],[r,6,6*Ta],[r,12,12*Ta],[g,1,io],[g,2,2*io],[n,1,T1],[t,1,wV],[t,3,3*wV],[e,1,ty]];function o(s,I,c){const d=I<s;d&&([s,I]=[I,s]);const u=c&&typeof c.range=="function"?c:l(s,I,c),m=u?u.range(s,+I+1):[];return d?m.reverse():m}function l(s,I,c){const d=Math.abs(I-s)/c,u=F1(([,,y])=>y).right(a,d);if(u===a.length)return e.every(u2(s/ty,I/ty,c));if(u===0)return jm.every(Math.max(u2(s,I,c),1));const[m,f]=a[d/a[u-1][2]<a[u][2]/d?u-1:u];return m.every(f)}return[o,l]}const[g7,r7]=CN(oo,_1,ef,cN,P1,j1),[i7,a7]=CN(ao,O1,$0,Wd,Q1,D1);function ny(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function SC(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o7(e){var t=e.dateTime,n=e.date,g=e.time,r=e.periods,i=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,s=vC(r),I=WC(r),c=vC(i),d=WC(i),u=vC(a),m=WC(a),f=vC(o),y=WC(o),h=vC(l),p=WC(l),b={a:D,A:U,b:P,B:N,c:null,d:FV,e:FV,f:R7,g:L7,G:M7,H:W7,I:V7,j:k7,L:uN,m:w7,M:X7,p:le,q:Y,Q:LV,s:EV,S:J7,u:Y7,U:N7,V:H7,w:F7,W:x7,x:null,X:null,y:K7,Y:E7,Z:z7,"%":KV},S={a:J,A:O,b:ee,B:te,c:null,d:xV,e:xV,f:j7,g:gO,G:iO,H:U7,I:T7,j:D7,L:AN,m:Q7,M:P7,p:se,q:ce,Q:LV,s:EV,S:O7,u:_7,U:q7,V:$7,w:eO,W:tO,x:null,X:null,y:nO,Y:rO,Z:aO,"%":KV},X={a:L,A:k,b:v,B:K,c:x,d:NV,e:NV,f:G7,g:YV,G:JV,H:HV,I:HV,j:p7,L:Z7,m:f7,M:b7,p:z,q:m7,Q:S7,s:v7,S:y7,u:C7,U:u7,V:d7,w:c7,W:A7,x:q,X:Q,y:YV,Y:JV,Z:h7,"%":B7};b.x=W(n,b),b.X=W(g,b),b.c=W(t,b),S.x=W(n,S),S.X=W(g,S),S.c=W(t,S);function W(re,fe){return function(be){var ue=[],He=-1,Le=0,pe=re.length,ge,rt,qe;for(be instanceof Date||(be=new Date(+be));++He<pe;)re.charCodeAt(He)===37&&(ue.push(re.slice(Le,He)),(rt=XV[ge=re.charAt(++He)])!=null?ge=re.charAt(++He):rt=ge==="e"?" ":"0",(qe=fe[ge])&&(ge=qe(be,rt)),ue.push(ge),Le=He+1);return ue.push(re.slice(Le,He)),ue.join("")}}function V(re,fe){return function(be){var ue=SC(1900,void 0,1),He=R(ue,re,be+="",0),Le,pe;if(He!=be.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(fe&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Le=gy(SC(ue.y,0,1)),pe=Le.getUTCDay(),Le=pe>4||pe===0?Pm.ceil(Le):Pm(Le),Le=q0.offset(Le,(ue.V-1)*7),ue.y=Le.getUTCFullYear(),ue.m=Le.getUTCMonth(),ue.d=Le.getUTCDate()+(ue.w+6)%7):(Le=ny(SC(ue.y,0,1)),pe=Le.getDay(),Le=pe>4||pe===0?Qm.ceil(Le):Qm(Le),Le=Wd.offset(Le,(ue.V-1)*7),ue.y=Le.getFullYear(),ue.m=Le.getMonth(),ue.d=Le.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),pe="Z"in ue?gy(SC(ue.y,0,1)).getUTCDay():ny(SC(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(pe+5)%7:ue.w+ue.U*7-(pe+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,gy(ue)):ny(ue)}}function R(re,fe,be,ue){for(var He=0,Le=fe.length,pe=be.length,ge,rt;He<Le;){if(ue>=pe)return-1;if(ge=fe.charCodeAt(He++),ge===37){if(ge=fe.charAt(He++),rt=X[ge in XV?fe.charAt(He++):ge],!rt||(ue=rt(re,be,ue))<0)return-1}else if(ge!=be.charCodeAt(ue++))return-1}return ue}function z(re,fe,be){var ue=s.exec(fe.slice(be));return ue?(re.p=I.get(ue[0].toLowerCase()),be+ue[0].length):-1}function L(re,fe,be){var ue=u.exec(fe.slice(be));return ue?(re.w=m.get(ue[0].toLowerCase()),be+ue[0].length):-1}function k(re,fe,be){var ue=c.exec(fe.slice(be));return ue?(re.w=d.get(ue[0].toLowerCase()),be+ue[0].length):-1}function v(re,fe,be){var ue=h.exec(fe.slice(be));return ue?(re.m=p.get(ue[0].toLowerCase()),be+ue[0].length):-1}function K(re,fe,be){var ue=f.exec(fe.slice(be));return ue?(re.m=y.get(ue[0].toLowerCase()),be+ue[0].length):-1}function x(re,fe,be){return R(re,t,fe,be)}function q(re,fe,be){return R(re,n,fe,be)}function Q(re,fe,be){return R(re,g,fe,be)}function D(re){return a[re.getDay()]}function U(re){return i[re.getDay()]}function P(re){return l[re.getMonth()]}function N(re){return o[re.getMonth()]}function le(re){return r[+(re.getHours()>=12)]}function Y(re){return 1+~~(re.getMonth()/3)}function J(re){return a[re.getUTCDay()]}function O(re){return i[re.getUTCDay()]}function ee(re){return l[re.getUTCMonth()]}function te(re){return o[re.getUTCMonth()]}function se(re){return r[+(re.getUTCHours()>=12)]}function ce(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var fe=W(re+="",b);return fe.toString=function(){return re},fe},parse:function(re){var fe=V(re+="",!1);return fe.toString=function(){return re},fe},utcFormat:function(re){var fe=W(re+="",S);return fe.toString=function(){return re},fe},utcParse:function(re){var fe=V(re+="",!0);return fe.toString=function(){return re},fe}}}var XV={"-":"",_:" ",0:"0"},Ig=/^\s*\d+/,l7=/^%/,s7=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var g=e<0?"-":"",r=(g?-e:e)+"",i=r.length;return g+(i<n?new Array(n-i+1).join(t)+r:r)}function I7(e){return e.replace(s7,"\\$&")}function vC(e){return new RegExp("^(?:"+e.map(I7).join("|")+")","i")}function WC(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function c7(e,t,n){var g=Ig.exec(t.slice(n,n+1));return g?(e.w=+g[0],n+g[0].length):-1}function C7(e,t,n){var g=Ig.exec(t.slice(n,n+1));return g?(e.u=+g[0],n+g[0].length):-1}function u7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.U=+g[0],n+g[0].length):-1}function d7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.V=+g[0],n+g[0].length):-1}function A7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.W=+g[0],n+g[0].length):-1}function JV(e,t,n){var g=Ig.exec(t.slice(n,n+4));return g?(e.y=+g[0],n+g[0].length):-1}function YV(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.y=+g[0]+(+g[0]>68?1900:2e3),n+g[0].length):-1}function h7(e,t,n){var g=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return g?(e.Z=g[1]?0:-(g[2]+(g[3]||"00")),n+g[0].length):-1}function m7(e,t,n){var g=Ig.exec(t.slice(n,n+1));return g?(e.q=g[0]*3-3,n+g[0].length):-1}function f7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.m=g[0]-1,n+g[0].length):-1}function NV(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.d=+g[0],n+g[0].length):-1}function p7(e,t,n){var g=Ig.exec(t.slice(n,n+3));return g?(e.m=0,e.d=+g[0],n+g[0].length):-1}function HV(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.H=+g[0],n+g[0].length):-1}function b7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.M=+g[0],n+g[0].length):-1}function y7(e,t,n){var g=Ig.exec(t.slice(n,n+2));return g?(e.S=+g[0],n+g[0].length):-1}function Z7(e,t,n){var g=Ig.exec(t.slice(n,n+3));return g?(e.L=+g[0],n+g[0].length):-1}function G7(e,t,n){var g=Ig.exec(t.slice(n,n+6));return g?(e.L=Math.floor(g[0]/1e3),n+g[0].length):-1}function B7(e,t,n){var g=l7.exec(t.slice(n,n+1));return g?n+g[0].length:-1}function S7(e,t,n){var g=Ig.exec(t.slice(n));return g?(e.Q=+g[0],n+g[0].length):-1}function v7(e,t,n){var g=Ig.exec(t.slice(n));return g?(e.s=+g[0],n+g[0].length):-1}function FV(e,t){return Kt(e.getDate(),t,2)}function W7(e,t){return Kt(e.getHours(),t,2)}function V7(e,t){return Kt(e.getHours()%12||12,t,2)}function k7(e,t){return Kt(1+Wd.count(ao(e),e),t,3)}function uN(e,t){return Kt(e.getMilliseconds(),t,3)}function R7(e,t){return uN(e,t)+"000"}function w7(e,t){return Kt(e.getMonth()+1,t,2)}function X7(e,t){return Kt(e.getMinutes(),t,2)}function J7(e,t){return Kt(e.getSeconds(),t,2)}function Y7(e){var t=e.getDay();return t===0?7:t}function N7(e,t){return Kt($0.count(ao(e)-1,e),t,2)}function dN(e){var t=e.getDay();return t>=4||t===0?cc(e):cc.ceil(e)}function H7(e,t){return e=dN(e),Kt(cc.count(ao(e),e)+(ao(e).getDay()===4),t,2)}function F7(e){return e.getDay()}function x7(e,t){return Kt(Qm.count(ao(e)-1,e),t,2)}function K7(e,t){return Kt(e.getFullYear()%100,t,2)}function L7(e,t){return e=dN(e),Kt(e.getFullYear()%100,t,2)}function E7(e,t){return Kt(e.getFullYear()%1e4,t,4)}function M7(e,t){var n=e.getDay();return e=n>=4||n===0?cc(e):cc.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function z7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function xV(e,t){return Kt(e.getUTCDate(),t,2)}function U7(e,t){return Kt(e.getUTCHours(),t,2)}function T7(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function D7(e,t){return Kt(1+q0.count(oo(e),e),t,3)}function AN(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function j7(e,t){return AN(e,t)+"000"}function Q7(e,t){return Kt(e.getUTCMonth()+1,t,2)}function P7(e,t){return Kt(e.getUTCMinutes(),t,2)}function O7(e,t){return Kt(e.getUTCSeconds(),t,2)}function _7(e){var t=e.getUTCDay();return t===0?7:t}function q7(e,t){return Kt(ef.count(oo(e)-1,e),t,2)}function hN(e){var t=e.getUTCDay();return t>=4||t===0?Cc(e):Cc.ceil(e)}function $7(e,t){return e=hN(e),Kt(Cc.count(oo(e),e)+(oo(e).getUTCDay()===4),t,2)}function eO(e){return e.getUTCDay()}function tO(e,t){return Kt(Pm.count(oo(e)-1,e),t,2)}function nO(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function gO(e,t){return e=hN(e),Kt(e.getUTCFullYear()%100,t,2)}function rO(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function iO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Cc(e):Cc.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function aO(){return"+0000"}function KV(){return"%"}function LV(e){return+e}function EV(e){return Math.floor(+e/1e3)}var iI,mN,fN;oO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oO(e){return iI=o7(e),mN=iI.format,iI.parse,fN=iI.utcFormat,iI.utcParse,iI}function lO(e){return new Date(e)}function sO(e){return e instanceof Date?+e:+new Date(+e)}function q1(e,t,n,g,r,i,a,o,l,s){var I=rN(),c=I.invert,d=I.domain,u=s(".%L"),m=s(":%S"),f=s("%I:%M"),y=s("%I %p"),h=s("%a %d"),p=s("%b %d"),b=s("%B"),S=s("%Y");function X(W){return(l(W)<W?u:o(W)<W?m:a(W)<W?f:i(W)<W?y:g(W)<W?r(W)<W?h:p:n(W)<W?b:S)(W)}return I.invert=function(W){return new Date(c(W))},I.domain=function(W){return arguments.length?d(Array.from(W,sO)):d().map(lO)},I.ticks=function(W){var V=d();return e(V[0],V[V.length-1],W??10)},I.tickFormat=function(W,V){return V==null?X:s(V)},I.nice=function(W){var V=d();return(!W||typeof W.range!="function")&&(W=t(V[0],V[V.length-1],W??10)),W?d(lN(V,W)):I},I.copy=function(){return _0(I,q1(e,t,n,g,r,i,a,o,l,s))},I}function IO(){return vl.apply(q1(i7,a7,ao,O1,$0,Wd,Q1,D1,ql,mN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cO(){return vl.apply(q1(g7,r7,oo,_1,ef,q0,P1,j1,ql,fN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function CO(){var e=0,t=1,n,g,r,i,a=Qr,o=!1,l;function s(c){return c==null||isNaN(c=+c)?l:a(r===0?.5:(c=(i(c)-n)*r,o?Math.max(0,Math.min(1,c)):c))}s.domain=function(c){return arguments.length?([e,t]=c,n=i(e=+e),g=i(t=+t),r=n===g?0:1/(g-n),s):[e,t]},s.clamp=function(c){return arguments.length?(o=!!c,s):o},s.interpolator=function(c){return arguments.length?(a=c,s):a};function I(c){return function(d){var u,m;return arguments.length?([u,m]=d,a=c(u,m),s):[a(0),a(1)]}}return s.range=I(O0),s.rangeRound=I(gN),s.unknown=function(c){return arguments.length?(l=c,s):l},function(c){return i=c,n=c(e),g=c(t),r=n===g?0:1/(g-n),s}}function uO(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pN(){var e=z1(CO()(Qr));return e.copy=function(){return uO(e,pN())},$P.apply(e,arguments)}const bN=e=>{const{axis:t}=e,n=Math.min(...t.data??[]),g=Math.max(...t.data??[]);return[n,g]},yN=e=>{const{series:t,axis:n,isDefaultAxis:g}=e;return Object.keys(t).filter(r=>t[r].yAxisKey===n.id||g&&t[r].yAxisKey===void 0).reduce((r,i)=>{var l;const[a,o]=((l=t[i].stackedData)==null?void 0:l.reduce((s,I)=>[Math.min(...I,...s[0]===null?[]:[s[0]]),Math.max(...I,...s[1]===null?[]:[s[1]])],t[i].stackedData[0]))??[null,null];return[r[0]===null?a:Math.min(a,r[0]),r[1]===null?o:Math.max(o,r[1])]},[null,null])},ZN=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?yN(e):bN(e),GN=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?bN(e):yN(e),Om=(e,t)=>e[0]===null||e[1]===null?t:t[0]===null||t[1]===null?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])],BN=e=>{const{series:t,axis:n,isDefaultAxis:g}=e;return Object.keys(t).filter(r=>t[r].xAxisKey===n.id||t[r].xAxisKey===void 0&&g).reduce((r,i)=>{const a=t[i].data.reduce((o,{x:l})=>Om(o,[l,l]),[null,null]);return Om(r,a)},[null,null])},SN=e=>{const{series:t,axis:n,isDefaultAxis:g}=e;return Object.keys(t).filter(r=>t[r].yAxisKey===n.id||t[r].yAxisKey===void 0&&g).reduce((r,i)=>{const a=t[i].data.reduce((o,{y:l})=>Om(o,[l,l]),[null,null]);return Om(r,a)},[null,null])},vN=e=>{const{axis:t}=e,n=Math.min(...t.data??[]),g=Math.max(...t.data??[]);return[n,g]};function dO(e,t){return t.length===0?[null,null]:t.reduce((n,g)=>{const[r,i]=e(g);return n[0]===null?[Math.min(r,i),Math.max(r,i)]:[Math.min(r,i,n[0]),Math.max(r,i,n[1])]},e(t[0]))}const WN=e=>{const{series:t,axis:n,isDefaultAxis:g}=e;return Object.keys(t).filter(r=>t[r].yAxisKey===n.id||g&&t[r].yAxisKey===void 0).reduce((r,i)=>{const{area:a,stackedData:o}=t[i],I=dO(a!==void 0?u=>u:u=>[u[1],u[1]],o);if(r[0]===null)return I;if(I[0]===null)return r;const[c,d]=I;return[Math.min(c,r[0]),Math.max(d,r[1])]},[null,null])};function _m(e){return e.scaleType==="band"}function m2(e){return e.scaleType==="point"}function MV(e,t,n){switch(e){case"log":return sN(t,n);case"pow":return U1(t,n);case"sqrt":return Q8(t,n);case"time":return IO(t,n);case"utc":return cO(t,n);default:return oN(t,n)}}const f2="DEFAULT_X_AXIS_KEY",p2="DEFAULT_Y_AXIS_KEY",AO={top:50,bottom:50,left:50,right:50};function VN(e){return e.bandwidth!==void 0}function zV(e){const{tickMaxStep:t,tickMinStep:n,tickNumber:g,range:r,domain:i}=e,a=n===void 0?999:Math.floor(Math.abs(i[1]-i[0])/n),o=t===void 0?2:Math.ceil(Math.abs(i[1]-i[0])/t),l=g??Math.floor(Math.abs(r[1]-r[0])/50);return Math.min(a,Math.max(o,l))}const ry={start:0,extremities:0,end:1,middle:.5};function kN(e){const{scale:t,tickNumber:n,valueFormatter:g,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:a="middle"}=e;return _.useMemo(()=>{if(VN(t)){const l=t.domain();return t.bandwidth()>0?[...l.map(I=>({value:I,formattedValue:(g==null?void 0:g(I,{location:"tick"}))??`${I}`,offset:t(I)-(t.step()-t.bandwidth())/2+ry[i]*t.step(),labelOffset:a==="tick"?0:t.step()*(ry[a]-ry[i])})),...i==="extremities"?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]:(typeof r=="function"&&l.filter(r)||typeof r=="object"&&r||l).map(I=>({value:I,formattedValue:(g==null?void 0:g(I,{location:"tick"}))??`${I}`,offset:t(I),labelOffset:0}))}return t.domain().length===0||t.domain()[0]===t.domain()[1]?[]:(typeof r=="object"?r:t.ticks(n)).map(l=>({value:l,formattedValue:(g==null?void 0:g(l,{location:"tick"}))??t.tickFormat(n)(l),offset:t(l),labelOffset:0}))},[t,r,n,g,i,a])}const hO=(e,t,n)=>{const g=Se({},AO,n);return _.useMemo(()=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom,width:Math.max(0,e-g.left-g.right),height:Math.max(0,t-g.top-g.bottom)}),[e,t,g.top,g.bottom,g.left,g.right])},tf=_.createContext({top:0,left:0,bottom:0,right:0,height:300,width:400,chartId:""}),RN=_.createContext({isInitialized:!1,data:{current:null}});function mO(e){const{width:t,height:n,margin:g,svgRef:r,children:i}=e,a=hO(t,n,g),o=hQ(),l=_.useMemo(()=>Se({chartId:o??""},a),[o,a]),s=_.useMemo(()=>({isInitialized:!0,data:r}),[r]);return G.jsx(RN.Provider,{value:s,children:G.jsx(tf.Provider,{value:l,children:i})})}function Vd(){const{left:e,top:t,width:n,height:g,bottom:r,right:i}=_.useContext(tf);return _.useMemo(()=>({left:e,top:t,width:n,height:g,bottom:r,right:i}),[g,e,t,n,r,i])}function fO(e){return e.type==="piecewise"?IN(e.thresholds,e.colors):pN([e.min??0,e.max??100],e.color)}function LC(e){return e.values?Mm(e.values,e.colors).unknown(e.unknownColor??null):Mm(e.colors.map((t,n)=>n),e.colors).unknown(e.unknownColor??null)}function aI(e){return e.type==="ordinal"?LC(e):fO(e)}function qu(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const pO=Object.freeze(Object.defineProperty({__proto__:null,default:qu},Symbol.toStringTag,{value:"Module"})),$1="$$material";function wN(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var bO=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yO=wN(function(e){return bO.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function ZO(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function GO(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var BO=function(){function e(n){var g=this;this._insertTag=function(r){var i;g.tags.length===0?g.insertionPoint?i=g.insertionPoint.nextSibling:g.prepend?i=g.container.firstChild:i=g.before:i=g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(r,i),g.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(g){g.forEach(this._insertTag)},t.insert=function(g){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(GO(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=ZO(r);try{i.insertRule(g,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(g));this.ctr++},t.flush=function(){this.tags.forEach(function(g){return g.parentNode&&g.parentNode.removeChild(g)}),this.tags=[],this.ctr=0},e}(),Rg="-ms-",qm="-moz-",Mt="-webkit-",XN="comm",eB="rule",tB="decl",SO="@import",JN="@keyframes",vO="@layer",WO=Math.abs,nf=String.fromCharCode,VO=Object.assign;function kO(e,t){return pg(e,0)^45?(((t<<2^pg(e,0))<<2^pg(e,1))<<2^pg(e,2))<<2^pg(e,3):0}function YN(e){return e.trim()}function RO(e,t){return(e=t.exec(e))?e[0]:e}function zt(e,t,n){return e.replace(t,n)}function b2(e,t){return e.indexOf(t)}function pg(e,t){return e.charCodeAt(t)|0}function $u(e,t,n){return e.slice(t,n)}function ia(e){return e.length}function nB(e){return e.length}function ah(e,t){return t.push(e),e}function wO(e,t){return e.map(t).join("")}var gf=1,uc=1,NN=0,Cr=0,Pn=0,kc="";function rf(e,t,n,g,r,i,a){return{value:e,root:t,parent:n,type:g,props:r,children:i,line:gf,column:uc,length:a,return:""}}function VC(e,t){return VO(rf("",null,null,"",null,null,0),e,{length:-e.length},t)}function XO(){return Pn}function JO(){return Pn=Cr>0?pg(kc,--Cr):0,uc--,Pn===10&&(uc=1,gf--),Pn}function Sr(){return Pn=Cr<NN?pg(kc,Cr++):0,uc++,Pn===10&&(uc=1,gf++),Pn}function Aa(){return pg(kc,Cr)}function Eh(){return Cr}function kd(e,t){return $u(kc,e,t)}function ed(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HN(e){return gf=uc=1,NN=ia(kc=e),Cr=0,[]}function FN(e){return kc="",e}function Mh(e){return YN(kd(Cr-1,y2(e===91?e+2:e===40?e+1:e)))}function YO(e){for(;(Pn=Aa())&&Pn<33;)Sr();return ed(e)>2||ed(Pn)>3?"":" "}function NO(e,t){for(;--t&&Sr()&&!(Pn<48||Pn>102||Pn>57&&Pn<65||Pn>70&&Pn<97););return kd(e,Eh()+(t<6&&Aa()==32&&Sr()==32))}function y2(e){for(;Sr();)switch(Pn){case e:return Cr;case 34:case 39:e!==34&&e!==39&&y2(Pn);break;case 40:e===41&&y2(e);break;case 92:Sr();break}return Cr}function HO(e,t){for(;Sr()&&e+Pn!==57;)if(e+Pn===84&&Aa()===47)break;return"/*"+kd(t,Cr-1)+"*"+nf(e===47?e:Sr())}function FO(e){for(;!ed(Aa());)Sr();return kd(e,Cr)}function xO(e){return FN(zh("",null,null,null,[""],e=HN(e),0,[0],e))}function zh(e,t,n,g,r,i,a,o,l){for(var s=0,I=0,c=a,d=0,u=0,m=0,f=1,y=1,h=1,p=0,b="",S=r,X=i,W=g,V=b;y;)switch(m=p,p=Sr()){case 40:if(m!=108&&pg(V,c-1)==58){b2(V+=zt(Mh(p),"&","&\f"),"&\f")!=-1&&(h=-1);break}case 34:case 39:case 91:V+=Mh(p);break;case 9:case 10:case 13:case 32:V+=YO(m);break;case 92:V+=NO(Eh()-1,7);continue;case 47:switch(Aa()){case 42:case 47:ah(KO(HO(Sr(),Eh()),t,n),l);break;default:V+="/"}break;case 123*f:o[s++]=ia(V)*h;case 125*f:case 59:case 0:switch(p){case 0:case 125:y=0;case 59+I:h==-1&&(V=zt(V,/\f/g,"")),u>0&&ia(V)-c&&ah(u>32?TV(V+";",g,n,c-1):TV(zt(V," ","")+";",g,n,c-2),l);break;case 59:V+=";";default:if(ah(W=UV(V,t,n,s,I,r,o,b,S=[],X=[],c),i),p===123)if(I===0)zh(V,t,W,W,S,i,c,o,X);else switch(d===99&&pg(V,3)===110?100:d){case 100:case 108:case 109:case 115:zh(e,W,W,g&&ah(UV(e,W,W,0,0,r,o,b,r,S=[],c),X),r,X,c,o,g?S:X);break;default:zh(V,W,W,W,[""],X,0,o,X)}}s=I=u=0,f=h=1,b=V="",c=a;break;case 58:c=1+ia(V),u=m;default:if(f<1){if(p==123)--f;else if(p==125&&f++==0&&JO()==125)continue}switch(V+=nf(p),p*f){case 38:h=I>0?1:(V+="\f",-1);break;case 44:o[s++]=(ia(V)-1)*h,h=1;break;case 64:Aa()===45&&(V+=Mh(Sr())),d=Aa(),I=c=ia(b=V+=FO(Eh())),p++;break;case 45:m===45&&ia(V)==2&&(f=0)}}return i}function UV(e,t,n,g,r,i,a,o,l,s,I){for(var c=r-1,d=r===0?i:[""],u=nB(d),m=0,f=0,y=0;m<g;++m)for(var h=0,p=$u(e,c+1,c=WO(f=a[m])),b=e;h<u;++h)(b=YN(f>0?d[h]+" "+p:zt(p,/&\f/g,d[h])))&&(l[y++]=b);return rf(e,t,n,r===0?eB:o,l,s,I)}function KO(e,t,n){return rf(e,t,n,XN,nf(XO()),$u(e,2,-2),0)}function TV(e,t,n,g){return rf(e,t,n,tB,$u(e,0,g),$u(e,g+1,-1),g)}function QI(e,t){for(var n="",g=nB(e),r=0;r<g;r++)n+=t(e[r],r,e,t)||"";return n}function LO(e,t,n,g){switch(e.type){case vO:if(e.children.length)break;case SO:case tB:return e.return=e.return||e.value;case XN:return"";case JN:return e.return=e.value+"{"+QI(e.children,g)+"}";case eB:e.value=e.props.join(",")}return ia(n=QI(e.children,g))?e.return=e.value+"{"+n+"}":""}function EO(e){var t=nB(e);return function(n,g,r,i){for(var a="",o=0;o<t;o++)a+=e[o](n,g,r,i)||"";return a}}function MO(e){return function(t){t.root||(t=t.return)&&e(t)}}var zO=function(t,n,g){for(var r=0,i=0;r=i,i=Aa(),r===38&&i===12&&(n[g]=1),!ed(i);)Sr();return kd(t,Cr)},UO=function(t,n){var g=-1,r=44;do switch(ed(r)){case 0:r===38&&Aa()===12&&(n[g]=1),t[g]+=zO(Cr-1,n,g);break;case 2:t[g]+=Mh(r);break;case 4:if(r===44){t[++g]=Aa()===58?"&\f":"",n[g]=t[g].length;break}default:t[g]+=nf(r)}while(r=Sr());return t},TO=function(t,n){return FN(UO(HN(t),n))},DV=new WeakMap,DO=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,g=t.parent,r=t.column===g.column&&t.line===g.line;g.type!=="rule";)if(g=g.parent,!g)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!DV.get(g))&&!r){DV.set(t,!0);for(var i=[],a=TO(n,i),o=g.props,l=0,s=0;l<a.length;l++)for(var I=0;I<o.length;I++,s++)t.props[s]=i[l]?a[l].replace(/&\f/g,o[I]):o[I]+" "+a[l]}}},jO=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function xN(e,t){switch(kO(e,t)){case 5103:return Mt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Mt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Mt+e+qm+e+Rg+e+e;case 6828:case 4268:return Mt+e+Rg+e+e;case 6165:return Mt+e+Rg+"flex-"+e+e;case 5187:return Mt+e+zt(e,/(\w+).+(:[^]+)/,Mt+"box-$1$2"+Rg+"flex-$1$2")+e;case 5443:return Mt+e+Rg+"flex-item-"+zt(e,/flex-|-self/,"")+e;case 4675:return Mt+e+Rg+"flex-line-pack"+zt(e,/align-content|flex-|-self/,"")+e;case 5548:return Mt+e+Rg+zt(e,"shrink","negative")+e;case 5292:return Mt+e+Rg+zt(e,"basis","preferred-size")+e;case 6060:return Mt+"box-"+zt(e,"-grow","")+Mt+e+Rg+zt(e,"grow","positive")+e;case 4554:return Mt+zt(e,/([^-])(transform)/g,"$1"+Mt+"$2")+e;case 6187:return zt(zt(zt(e,/(zoom-|grab)/,Mt+"$1"),/(image-set)/,Mt+"$1"),e,"")+e;case 5495:case 3959:return zt(e,/(image-set\([^]*)/,Mt+"$1$`$1");case 4968:return zt(zt(e,/(.+:)(flex-)?(.*)/,Mt+"box-pack:$3"+Rg+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Mt+e+e;case 4095:case 3583:case 4068:case 2532:return zt(e,/(.+)-inline(.+)/,Mt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ia(e)-1-t>6)switch(pg(e,t+1)){case 109:if(pg(e,t+4)!==45)break;case 102:return zt(e,/(.+:)(.+)-([^]+)/,"$1"+Mt+"$2-$3$1"+qm+(pg(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~b2(e,"stretch")?xN(zt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(pg(e,t+1)!==115)break;case 6444:switch(pg(e,ia(e)-3-(~b2(e,"!important")&&10))){case 107:return zt(e,":",":"+Mt)+e;case 101:return zt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Mt+(pg(e,14)===45?"inline-":"")+"box$3$1"+Mt+"$2$3$1"+Rg+"$2box$3")+e}break;case 5936:switch(pg(e,t+11)){case 114:return Mt+e+Rg+zt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Mt+e+Rg+zt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Mt+e+Rg+zt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Mt+e+Rg+e+e}return e}var QO=function(t,n,g,r){if(t.length>-1&&!t.return)switch(t.type){case tB:t.return=xN(t.value,t.length);break;case JN:return QI([VC(t,{value:zt(t.value,"@","@"+Mt)})],r);case eB:if(t.length)return wO(t.props,function(i){switch(RO(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return QI([VC(t,{props:[zt(i,/:(read-\w+)/,":"+qm+"$1")]})],r);case"::placeholder":return QI([VC(t,{props:[zt(i,/:(plac\w+)/,":"+Mt+"input-$1")]}),VC(t,{props:[zt(i,/:(plac\w+)/,":"+qm+"$1")]}),VC(t,{props:[zt(i,/:(plac\w+)/,Rg+"input-$1")]})],r)}return""})}},PO=[QO],KN=function(t){var n=t.key;if(n==="css"){var g=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(g,function(f){var y=f.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(f),f.setAttribute("data-s",""))})}var r=t.stylisPlugins||PO,i={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(f){for(var y=f.getAttribute("data-emotion").split(" "),h=1;h<y.length;h++)i[y[h]]=!0;o.push(f)});var l,s=[DO,jO];{var I,c=[LO,MO(function(f){I.insert(f)})],d=EO(s.concat(r,c)),u=function(y){return QI(xO(y),d)};l=function(y,h,p,b){I=p,u(y?y+"{"+h.styles+"}":h.styles),b&&(m.inserted[h.name]=!0)}}var m={key:n,sheet:new BO({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:l};return m.sheet.hydrate(o),m},LN={exports:{}},Pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=typeof Symbol=="function"&&Symbol.for,gB=cg?Symbol.for("react.element"):60103,rB=cg?Symbol.for("react.portal"):60106,af=cg?Symbol.for("react.fragment"):60107,of=cg?Symbol.for("react.strict_mode"):60108,lf=cg?Symbol.for("react.profiler"):60114,sf=cg?Symbol.for("react.provider"):60109,If=cg?Symbol.for("react.context"):60110,iB=cg?Symbol.for("react.async_mode"):60111,cf=cg?Symbol.for("react.concurrent_mode"):60111,Cf=cg?Symbol.for("react.forward_ref"):60112,uf=cg?Symbol.for("react.suspense"):60113,OO=cg?Symbol.for("react.suspense_list"):60120,df=cg?Symbol.for("react.memo"):60115,Af=cg?Symbol.for("react.lazy"):60116,_O=cg?Symbol.for("react.block"):60121,qO=cg?Symbol.for("react.fundamental"):60117,$O=cg?Symbol.for("react.responder"):60118,e6=cg?Symbol.for("react.scope"):60119;function Rr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gB:switch(e=e.type,e){case iB:case cf:case af:case lf:case of:case uf:return e;default:switch(e=e&&e.$$typeof,e){case If:case Cf:case Af:case df:case sf:return e;default:return t}}case rB:return t}}}function EN(e){return Rr(e)===cf}Pt.AsyncMode=iB;Pt.ConcurrentMode=cf;Pt.ContextConsumer=If;Pt.ContextProvider=sf;Pt.Element=gB;Pt.ForwardRef=Cf;Pt.Fragment=af;Pt.Lazy=Af;Pt.Memo=df;Pt.Portal=rB;Pt.Profiler=lf;Pt.StrictMode=of;Pt.Suspense=uf;Pt.isAsyncMode=function(e){return EN(e)||Rr(e)===iB};Pt.isConcurrentMode=EN;Pt.isContextConsumer=function(e){return Rr(e)===If};Pt.isContextProvider=function(e){return Rr(e)===sf};Pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gB};Pt.isForwardRef=function(e){return Rr(e)===Cf};Pt.isFragment=function(e){return Rr(e)===af};Pt.isLazy=function(e){return Rr(e)===Af};Pt.isMemo=function(e){return Rr(e)===df};Pt.isPortal=function(e){return Rr(e)===rB};Pt.isProfiler=function(e){return Rr(e)===lf};Pt.isStrictMode=function(e){return Rr(e)===of};Pt.isSuspense=function(e){return Rr(e)===uf};Pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===af||e===cf||e===lf||e===of||e===uf||e===OO||typeof e=="object"&&e!==null&&(e.$$typeof===Af||e.$$typeof===df||e.$$typeof===sf||e.$$typeof===If||e.$$typeof===Cf||e.$$typeof===qO||e.$$typeof===$O||e.$$typeof===e6||e.$$typeof===_O)};Pt.typeOf=Rr;LN.exports=Pt;var t6=LN.exports,MN=t6,n6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zN={};zN[MN.ForwardRef]=n6;zN[MN.Memo]=g6;var r6=!0;function i6(e,t,n){var g="";return n.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):g+=r+" "}),g}var UN=function(t,n,g){var r=t.key+"-"+n.name;(g===!1||r6===!1)&&t.registered[r]===void 0&&(t.registered[r]=n.styles)},TN=function(t,n,g){UN(t,n,g);var r=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function a6(e){for(var t=0,n,g=0,r=e.length;r>=4;++g,r-=4)n=e.charCodeAt(g)&255|(e.charCodeAt(++g)&255)<<8|(e.charCodeAt(++g)&255)<<16|(e.charCodeAt(++g)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(g+2)&255)<<16;case 2:t^=(e.charCodeAt(g+1)&255)<<8;case 1:t^=e.charCodeAt(g)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var o6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},l6=/[A-Z]|^ms/g,s6=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DN=function(t){return t.charCodeAt(1)===45},jV=function(t){return t!=null&&typeof t!="boolean"},iy=wN(function(e){return DN(e)?e:e.replace(l6,"-$&").toLowerCase()}),QV=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(s6,function(g,r,i){return aa={name:r,styles:i,next:aa},r})}return o6[t]!==1&&!DN(t)&&typeof n=="number"&&n!==0?n+"px":n};function td(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return aa={name:n.name,styles:n.styles,next:aa},n.name;if(n.styles!==void 0){var g=n.next;if(g!==void 0)for(;g!==void 0;)aa={name:g.name,styles:g.styles,next:aa},g=g.next;var r=n.styles+";";return r}return I6(e,t,n)}case"function":{if(e!==void 0){var i=aa,a=n(e);return aa=i,td(e,t,a)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function I6(e,t,n){var g="";if(Array.isArray(n))for(var r=0;r<n.length;r++)g+=td(e,t,n[r])+";";else for(var i in n){var a=n[i];if(typeof a!="object")t!=null&&t[a]!==void 0?g+=i+"{"+t[a]+"}":jV(a)&&(g+=iy(i)+":"+QV(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var o=0;o<a.length;o++)jV(a[o])&&(g+=iy(i)+":"+QV(i,a[o])+";");else{var l=td(e,t,a);switch(i){case"animation":case"animationName":{g+=iy(i)+":"+l+";";break}default:g+=i+"{"+l+"}"}}}return g}var PV=/label:\s*([^\s;\n{]+)\s*(;|$)/g,aa,aB=function(t,n,g){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";aa=void 0;var a=t[0];a==null||a.raw===void 0?(r=!1,i+=td(g,n,a)):i+=a[0];for(var o=1;o<t.length;o++)i+=td(g,n,t[o]),r&&(i+=a[o]);PV.lastIndex=0;for(var l="",s;(s=PV.exec(i))!==null;)l+="-"+s[1];var I=a6(i)+l;return{name:I,styles:i,next:aa}},c6=function(t){return t()},jN=Ph.useInsertionEffect?Ph.useInsertionEffect:!1,C6=jN||c6,OV=jN||_.useLayoutEffect,QN=_.createContext(typeof HTMLElement<"u"?KN({key:"css"}):null),u6=QN.Provider,PN=function(t){return _.forwardRef(function(n,g){var r=_.useContext(QN);return t(n,r,g)})},hf=_.createContext({}),d6=PN(function(e,t){var n=e.styles,g=aB([n],void 0,_.useContext(hf)),r=_.useRef();return OV(function(){var i=t.key+"-global",a=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+i+" "+g.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",i),a.hydrate([l])),r.current=[a,o],function(){a.flush()}},[t]),OV(function(){var i=r.current,a=i[0],o=i[1];if(o){i[1]=!1;return}if(g.next!==void 0&&TN(t,g.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",g,a,!1)},[t,g.name]),null});function ON(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aB(t)}var A6=function(){var t=ON.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},h6=yO,m6=function(t){return t!=="theme"},_V=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?h6:m6},qV=function(t,n,g){var r;if(n){var i=n.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(a){return t.__emotion_forwardProp(a)&&i(a)}:i}return typeof r!="function"&&g&&(r=t.__emotion_forwardProp),r},f6=function(t){var n=t.cache,g=t.serialized,r=t.isStringTag;return UN(n,g,r),C6(function(){return TN(n,g,r)}),null},p6=function e(t,n){var g=t.__emotion_real===t,r=g&&t.__emotion_base||t,i,a;n!==void 0&&(i=n.label,a=n.target);var o=qV(t,n,g),l=o||_V(r),s=!l("as");return function(){var I=arguments,c=g&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&c.push("label:"+i+";"),I[0]==null||I[0].raw===void 0)c.push.apply(c,I);else{c.push(I[0][0]);for(var d=I.length,u=1;u<d;u++)c.push(I[u],I[0][u])}var m=PN(function(f,y,h){var p=s&&f.as||r,b="",S=[],X=f;if(f.theme==null){X={};for(var W in f)X[W]=f[W];X.theme=_.useContext(hf)}typeof f.className=="string"?b=i6(y.registered,S,f.className):f.className!=null&&(b=f.className+" ");var V=aB(c.concat(S),y.registered,X);b+=y.key+"-"+V.name,a!==void 0&&(b+=" "+a);var R=s&&o===void 0?_V(p):l,z={};for(var L in f)s&&L==="as"||R(L)&&(z[L]=f[L]);return z.className=b,z.ref=h,_.createElement(_.Fragment,null,_.createElement(f6,{cache:y,serialized:V,isStringTag:typeof p=="string"}),_.createElement(p,z))});return m.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=r,m.__emotion_styles=c,m.__emotion_forwardProp=o,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(f,y){return e(f,Se({},n,y,{shouldForwardProp:qV(m,y,!0)})).apply(void 0,c)},m}},b6=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Z2=p6.bind();b6.forEach(function(e){Z2[e]=Z2(e)});let G2;typeof document=="object"&&(G2=KN({key:"css",prepend:!0}));function y6(e){const{injectFirst:t,children:n}=e;return t&&G2?G.jsx(u6,{value:G2,children:n}):n}function Z6(e){return e==null||Object.keys(e).length===0}function G6(e){const{styles:t,defaultTheme:n={}}=e,g=typeof t=="function"?r=>t(Z6(r)?n:r):t;return G.jsx(d6,{styles:g})}function B6(e,t){return Z2(e,t)}const S6=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},v6=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:G6,StyledEngineProvider:y6,ThemeContext:hf,css:ON,default:B6,internal_processStyles:S6,keyframes:A6},Symbol.toStringTag,{value:"Module"}));function To(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _N(e){if(!To(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=_N(e[n])}),t}function ha(e,t,n={clone:!0}){const g=n.clone?Se({},e):e;return To(e)&&To(t)&&Object.keys(t).forEach(r=>{To(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&To(e[r])?g[r]=ha(e[r],t[r],n):n.clone?g[r]=To(t[r])?_N(t[r]):t[r]:g[r]=t[r]}),g}const W6=Object.freeze(Object.defineProperty({__proto__:null,default:ha,isPlainObject:To},Symbol.toStringTag,{value:"Module"})),V6=["values","unit","step"],k6=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,g)=>n.val-g.val),t.reduce((n,g)=>Se({},n,{[g.key]:g.val}),{})};function qN(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:g=5}=e,r=Jn(e,V6),i=k6(t),a=Object.keys(i);function o(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-g/100}${n})`}function s(d,u){const m=a.indexOf(u);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n}) and (max-width:${(m!==-1&&typeof t[a[m]]=="number"?t[a[m]]:u)-g/100}${n})`}function I(d){return a.indexOf(d)+1<a.length?s(d,a[a.indexOf(d)+1]):o(d)}function c(d){const u=a.indexOf(d);return u===0?o(a[1]):u===a.length-1?l(a[u]):s(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return Se({keys:a,values:i,up:o,down:l,between:s,only:I,not:c,unit:n},r)}const R6={borderRadius:4};function iu(e,t){return t?ha(e,t,{clone:!1}):e}const oB={xs:0,sm:600,md:900,lg:1200,xl:1536},$V={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${oB[e]}px)`};function lo(e,t,n){const g=e.theme||{};if(Array.isArray(t)){const i=g.breakpoints||$V;return t.reduce((a,o,l)=>(a[i.up(i.keys[l])]=n(t[l]),a),{})}if(typeof t=="object"){const i=g.breakpoints||$V;return Object.keys(t).reduce((a,o)=>{if(Object.keys(i.values||oB).indexOf(o)!==-1){const l=i.up(o);a[l]=n(t[o],o)}else{const l=o;a[l]=t[l]}return a},{})}return n(t)}function w6(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((g,r)=>{const i=e.up(r);return g[i]={},g},{}))||{}}function X6(e,t){return e.reduce((n,g)=>{const r=n[g];return(!r||Object.keys(r).length===0)&&delete n[g],n},t)}function lB(e){if(typeof e!="string")throw new Error(qu(7));return e.charAt(0).toUpperCase()+e.slice(1)}const J6=Object.freeze(Object.defineProperty({__proto__:null,default:lB},Symbol.toStringTag,{value:"Module"}));function mf(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const g=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(g!=null)return g}return t.split(".").reduce((g,r)=>g&&g[r]!=null?g[r]:null,e)}function $m(e,t,n,g=n){let r;return typeof e=="function"?r=e(n):Array.isArray(e)?r=e[n]||g:r=mf(e,n)||g,t&&(r=t(r,g,e)),r}function En(e){const{prop:t,cssProperty:n=e.prop,themeKey:g,transform:r}=e,i=a=>{if(a[t]==null)return null;const o=a[t],l=a.theme,s=mf(l,g)||{};return lo(a,o,c=>{let d=$m(s,r,c);return c===d&&typeof c=="string"&&(d=$m(s,r,`${t}${c==="default"?"":lB(c)}`,c)),n===!1?d:{[n]:d}})};return i.propTypes={},i.filterProps=[t],i}function Y6(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const N6={m:"margin",p:"padding"},H6={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ek={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F6=Y6(e=>{if(e.length>2)if(ek[e])e=ek[e];else return[e];const[t,n]=e.split(""),g=N6[t],r=H6[n]||"";return Array.isArray(r)?r.map(i=>g+i):[g+r]}),sB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],IB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...sB,...IB];function Rd(e,t,n,g){var r;const i=(r=mf(e,t,!1))!=null?r:n;return typeof i=="number"?a=>typeof a=="string"?a:i*a:Array.isArray(i)?a=>typeof a=="string"?a:i[a]:typeof i=="function"?i:()=>{}}function $N(e){return Rd(e,"spacing",8)}function wd(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),g=e(n);return t>=0?g:typeof g=="number"?-g:`-${g}`}function x6(e,t){return n=>e.reduce((g,r)=>(g[r]=wd(t,n),g),{})}function K6(e,t,n,g){if(t.indexOf(n)===-1)return null;const r=F6(n),i=x6(r,g),a=e[n];return lo(e,a,i)}function e3(e,t){const n=$N(e.theme);return Object.keys(e).map(g=>K6(e,t,g,n)).reduce(iu,{})}function Vn(e){return e3(e,sB)}Vn.propTypes={};Vn.filterProps=sB;function kn(e){return e3(e,IB)}kn.propTypes={};kn.filterProps=IB;function L6(e=8){if(e.mui)return e;const t=$N({spacing:e}),n=(...g)=>(g.length===0?[1]:g).map(i=>{const a=t(i);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function ff(...e){const t=e.reduce((g,r)=>(r.filterProps.forEach(i=>{g[i]=r}),g),{}),n=g=>Object.keys(g).reduce((r,i)=>t[i]?iu(r,t[i](g)):r,{});return n.propTypes={},n.filterProps=e.reduce((g,r)=>g.concat(r.filterProps),[]),n}function Ur(e){return typeof e!="number"?e:`${e}px solid`}function gi(e,t){return En({prop:e,themeKey:"borders",transform:t})}const E6=gi("border",Ur),M6=gi("borderTop",Ur),z6=gi("borderRight",Ur),U6=gi("borderBottom",Ur),T6=gi("borderLeft",Ur),D6=gi("borderColor"),j6=gi("borderTopColor"),Q6=gi("borderRightColor"),P6=gi("borderBottomColor"),O6=gi("borderLeftColor"),_6=gi("outline",Ur),q6=gi("outlineColor"),pf=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Rd(e.theme,"shape.borderRadius",4),n=g=>({borderRadius:wd(t,g)});return lo(e,e.borderRadius,n)}return null};pf.propTypes={};pf.filterProps=["borderRadius"];ff(E6,M6,z6,U6,T6,D6,j6,Q6,P6,O6,pf,_6,q6);const bf=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Rd(e.theme,"spacing",8),n=g=>({gap:wd(t,g)});return lo(e,e.gap,n)}return null};bf.propTypes={};bf.filterProps=["gap"];const yf=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Rd(e.theme,"spacing",8),n=g=>({columnGap:wd(t,g)});return lo(e,e.columnGap,n)}return null};yf.propTypes={};yf.filterProps=["columnGap"];const Zf=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Rd(e.theme,"spacing",8),n=g=>({rowGap:wd(t,g)});return lo(e,e.rowGap,n)}return null};Zf.propTypes={};Zf.filterProps=["rowGap"];const $6=En({prop:"gridColumn"}),e_=En({prop:"gridRow"}),t_=En({prop:"gridAutoFlow"}),n_=En({prop:"gridAutoColumns"}),g_=En({prop:"gridAutoRows"}),r_=En({prop:"gridTemplateColumns"}),i_=En({prop:"gridTemplateRows"}),a_=En({prop:"gridTemplateAreas"}),o_=En({prop:"gridArea"});ff(bf,yf,Zf,$6,e_,t_,n_,g_,r_,i_,a_,o_);function PI(e,t){return t==="grey"?t:e}const l_=En({prop:"color",themeKey:"palette",transform:PI}),s_=En({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:PI}),I_=En({prop:"backgroundColor",themeKey:"palette",transform:PI});ff(l_,s_,I_);function yr(e){return e<=1&&e!==0?`${e*100}%`:e}const c_=En({prop:"width",transform:yr}),cB=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var g,r;const i=((g=e.theme)==null||(g=g.breakpoints)==null||(g=g.values)==null?void 0:g[n])||oB[n];return i?((r=e.theme)==null||(r=r.breakpoints)==null?void 0:r.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:yr(n)}};return lo(e,e.maxWidth,t)}return null};cB.filterProps=["maxWidth"];const C_=En({prop:"minWidth",transform:yr}),u_=En({prop:"height",transform:yr}),d_=En({prop:"maxHeight",transform:yr}),A_=En({prop:"minHeight",transform:yr});En({prop:"size",cssProperty:"width",transform:yr});En({prop:"size",cssProperty:"height",transform:yr});const h_=En({prop:"boxSizing"});ff(c_,cB,C_,u_,d_,A_,h_);const Xd={border:{themeKey:"borders",transform:Ur},borderTop:{themeKey:"borders",transform:Ur},borderRight:{themeKey:"borders",transform:Ur},borderBottom:{themeKey:"borders",transform:Ur},borderLeft:{themeKey:"borders",transform:Ur},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ur},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:pf},color:{themeKey:"palette",transform:PI},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:PI},backgroundColor:{themeKey:"palette",transform:PI},p:{style:kn},pt:{style:kn},pr:{style:kn},pb:{style:kn},pl:{style:kn},px:{style:kn},py:{style:kn},padding:{style:kn},paddingTop:{style:kn},paddingRight:{style:kn},paddingBottom:{style:kn},paddingLeft:{style:kn},paddingX:{style:kn},paddingY:{style:kn},paddingInline:{style:kn},paddingInlineStart:{style:kn},paddingInlineEnd:{style:kn},paddingBlock:{style:kn},paddingBlockStart:{style:kn},paddingBlockEnd:{style:kn},m:{style:Vn},mt:{style:Vn},mr:{style:Vn},mb:{style:Vn},ml:{style:Vn},mx:{style:Vn},my:{style:Vn},margin:{style:Vn},marginTop:{style:Vn},marginRight:{style:Vn},marginBottom:{style:Vn},marginLeft:{style:Vn},marginX:{style:Vn},marginY:{style:Vn},marginInline:{style:Vn},marginInlineStart:{style:Vn},marginInlineEnd:{style:Vn},marginBlock:{style:Vn},marginBlockStart:{style:Vn},marginBlockEnd:{style:Vn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:bf},rowGap:{style:Zf},columnGap:{style:yf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yr},maxWidth:{style:cB},minWidth:{transform:yr},height:{transform:yr},maxHeight:{transform:yr},minHeight:{transform:yr},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function m_(...e){const t=e.reduce((g,r)=>g.concat(Object.keys(r)),[]),n=new Set(t);return e.every(g=>n.size===Object.keys(g).length)}function f_(e,t){return typeof e=="function"?e(t):e}function t3(){function e(n,g,r,i){const a={[n]:g,theme:r},o=i[n];if(!o)return{[n]:g};const{cssProperty:l=n,themeKey:s,transform:I,style:c}=o;if(g==null)return null;if(s==="typography"&&g==="inherit")return{[n]:g};const d=mf(r,s)||{};return c?c(a):lo(a,g,m=>{let f=$m(d,I,m);return m===f&&typeof m=="string"&&(f=$m(d,I,`${n}${m==="default"?"":lB(m)}`,m)),l===!1?f:{[l]:f}})}function t(n){var g;const{sx:r,theme:i={}}=n||{};if(!r)return null;const a=(g=i.unstable_sxConfig)!=null?g:Xd;function o(l){let s=l;if(typeof l=="function")s=l(i);else if(typeof l!="object")return l;if(!s)return null;const I=w6(i.breakpoints),c=Object.keys(I);let d=I;return Object.keys(s).forEach(u=>{const m=f_(s[u],i);if(m!=null)if(typeof m=="object")if(a[u])d=iu(d,e(u,m,i,a));else{const f=lo({theme:i},m,y=>({[u]:y}));m_(f,m)?d[u]=t({sx:m,theme:i}):d=iu(d,f)}else d=iu(d,e(u,m,i,a))}),X6(c,d)}return Array.isArray(r)?r.map(o):o(r)}return t}const Gf=t3();Gf.filterProps=["sx"];function n3(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const p_=["breakpoints","palette","spacing","shape"];function CB(e={},...t){const{breakpoints:n={},palette:g={},spacing:r,shape:i={}}=e,a=Jn(e,p_),o=qN(n),l=L6(r);let s=ha({breakpoints:o,direction:"ltr",components:{},palette:Se({mode:"light"},g),spacing:l,shape:Se({},R6,i)},a);return s.applyStyles=n3,s=t.reduce((I,c)=>ha(I,c),s),s.unstable_sxConfig=Se({},Xd,a==null?void 0:a.unstable_sxConfig),s.unstable_sx=function(c){return Gf({sx:c,theme:this})},s}const b_=Object.freeze(Object.defineProperty({__proto__:null,default:CB,private_createBreakpoints:qN,unstable_applyStyles:n3},Symbol.toStringTag,{value:"Module"}));function y_(e){return Object.keys(e).length===0}function Z_(e=null){const t=_.useContext(hf);return!t||y_(t)?e:t}const G_=CB();function g3(e=G_){return Z_(e)}const B_=["sx"],S_=e=>{var t,n;const g={systemProps:{},otherProps:{}},r=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Xd;return Object.keys(e).forEach(i=>{r[i]?g.systemProps[i]=e[i]:g.otherProps[i]=e[i]}),g};function v_(e){const{sx:t}=e,n=Jn(e,B_),{systemProps:g,otherProps:r}=S_(n);let i;return Array.isArray(t)?i=[g,...t]:typeof t=="function"?i=(...a)=>{const o=t(...a);return To(o)?Se({},g,o):g}:i=Se({},g,t),Se({},r,{sx:i})}const W_=Object.freeze(Object.defineProperty({__proto__:null,default:Gf,extendSxProp:v_,unstable_createStyleFunctionSx:t3,unstable_defaultSxConfig:Xd},Symbol.toStringTag,{value:"Module"})),tk=e=>e,V_=()=>{let e=tk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=tk}}},k_=V_();function r3(e){var t,n,g="";if(typeof e=="string"||typeof e=="number")g+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=r3(e[t]))&&(g&&(g+=" "),g+=n)}else for(n in e)e[n]&&(g&&(g+=" "),g+=n);return g}function nk(){for(var e,t,n=0,g="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=r3(e))&&(g&&(g+=" "),g+=t);return g}const R_={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Bf(e,t,n="Mui"){const g=R_[t];return g?`${n}-${g}`:`${k_.generate(e)}-${t}`}function uB(e,t,n="Mui"){const g={};return t.forEach(r=>{g[r]=Bf(e,r,n)}),g}var i3={exports:{}},Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dB=Symbol.for("react.element"),AB=Symbol.for("react.portal"),Sf=Symbol.for("react.fragment"),vf=Symbol.for("react.strict_mode"),Wf=Symbol.for("react.profiler"),Vf=Symbol.for("react.provider"),kf=Symbol.for("react.context"),w_=Symbol.for("react.server_context"),Rf=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),Xf=Symbol.for("react.suspense_list"),Jf=Symbol.for("react.memo"),Yf=Symbol.for("react.lazy"),X_=Symbol.for("react.offscreen"),a3;a3=Symbol.for("react.module.reference");function ri(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dB:switch(e=e.type,e){case Sf:case Wf:case vf:case wf:case Xf:return e;default:switch(e=e&&e.$$typeof,e){case w_:case kf:case Rf:case Yf:case Jf:case Vf:return e;default:return t}}case AB:return t}}}Ot.ContextConsumer=kf;Ot.ContextProvider=Vf;Ot.Element=dB;Ot.ForwardRef=Rf;Ot.Fragment=Sf;Ot.Lazy=Yf;Ot.Memo=Jf;Ot.Portal=AB;Ot.Profiler=Wf;Ot.StrictMode=vf;Ot.Suspense=wf;Ot.SuspenseList=Xf;Ot.isAsyncMode=function(){return!1};Ot.isConcurrentMode=function(){return!1};Ot.isContextConsumer=function(e){return ri(e)===kf};Ot.isContextProvider=function(e){return ri(e)===Vf};Ot.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dB};Ot.isForwardRef=function(e){return ri(e)===Rf};Ot.isFragment=function(e){return ri(e)===Sf};Ot.isLazy=function(e){return ri(e)===Yf};Ot.isMemo=function(e){return ri(e)===Jf};Ot.isPortal=function(e){return ri(e)===AB};Ot.isProfiler=function(e){return ri(e)===Wf};Ot.isStrictMode=function(e){return ri(e)===vf};Ot.isSuspense=function(e){return ri(e)===wf};Ot.isSuspenseList=function(e){return ri(e)===Xf};Ot.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Sf||e===Wf||e===vf||e===wf||e===Xf||e===X_||typeof e=="object"&&e!==null&&(e.$$typeof===Yf||e.$$typeof===Jf||e.$$typeof===Vf||e.$$typeof===kf||e.$$typeof===Rf||e.$$typeof===a3||e.getModuleId!==void 0)};Ot.typeOf=ri;i3.exports=Ot;var gk=i3.exports;const J_=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o3(e){const t=`${e}`.match(J_);return t&&t[1]||""}function l3(e,t=""){return e.displayName||e.name||o3(e)||t}function rk(e,t,n){const g=l3(t);return e.displayName||(g!==""?`${n}(${g})`:n)}function Y_(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return l3(e,"Component");if(typeof e=="object")switch(e.$$typeof){case gk.ForwardRef:return rk(e,e.render,"ForwardRef");case gk.Memo:return rk(e,e.type,"memo");default:return}}}const N_=Object.freeze(Object.defineProperty({__proto__:null,default:Y_,getFunctionName:o3},Symbol.toStringTag,{value:"Module"}));function s3(e,t){const n=Se({},t);return Object.keys(e).forEach(g=>{if(g.toString().match(/^(components|slots)$/))n[g]=Se({},e[g],n[g]);else if(g.toString().match(/^(componentsProps|slotProps)$/)){const r=e[g]||{},i=t[g];n[g]={},!i||!Object.keys(i)?n[g]=r:!r||!Object.keys(r)?n[g]=i:(n[g]=Se({},i),Object.keys(r).forEach(a=>{n[g][a]=s3(r[a],i[a])}))}else n[g]===void 0&&(n[g]=e[g])}),n}function H_(e){const{theme:t,name:n,props:g}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?g:s3(t.components[n].defaultProps,g)}function F_({props:e,name:t,defaultTheme:n,themeId:g}){let r=g3(n);return g&&(r=r[g]||r),H_({theme:r,name:t,props:e})}const x_=typeof window<"u"?_.useLayoutEffect:_.useEffect;function K_(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const L_=Object.freeze(Object.defineProperty({__proto__:null,default:K_},Symbol.toStringTag,{value:"Module"}));function E_(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function M_({controlled:e,default:t,name:n,state:g="value"}){const{current:r}=_.useRef(e!==void 0),[i,a]=_.useState(t),o=r?e:i,l=_.useCallback(s=>{r||a(s)},[]);return[o,l]}function I3(...e){return _.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{E_(n,t)})},e)}function Nf(e,t,n=void 0){const g={};return Object.keys(e).forEach(r=>{g[r]=e[r].reduce((i,a)=>{if(a){const o=t(a);o!==""&&i.push(o),n&&n[a]&&i.push(n[a])}return i},[]).join(" ")}),g}function Ft(e){"@babel/helpers - typeof";return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(e)}function z_(e,t){if(Ft(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var g=n.call(e,t||"default");if(Ft(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U_(e){var t=z_(e,"string");return Ft(t)=="symbol"?t:t+""}function T_(e,t){return Se({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Mn={},c3={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(c3);var C3=c3.exports;const D_=ba(pO),j_=ba(L_);var u3=C3;Object.defineProperty(Mn,"__esModule",{value:!0});Mn.alpha=m3;Mn.blend=aq;Mn.colorChannel=void 0;var Q_=Mn.darken=mB;Mn.decomposeColor=ti;Mn.emphasize=f3;var P_=Mn.getContrastRatio=tq;Mn.getLuminance=e0;Mn.hexToRgb=d3;Mn.hslToRgb=h3;var O_=Mn.lighten=fB;Mn.private_safeAlpha=nq;Mn.private_safeColorChannel=void 0;Mn.private_safeDarken=gq;Mn.private_safeEmphasize=iq;Mn.private_safeLighten=rq;Mn.recomposeColor=Rc;Mn.rgbToHex=eq;var ik=u3(D_),__=u3(j_);function hB(e,t=0,n=1){return(0,__.default)(e,t,n)}function d3(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(g=>g+g)),n?`rgb${n.length===4?"a":""}(${n.map((g,r)=>r<3?parseInt(g,16):Math.round(parseInt(g,16)/255*1e3)/1e3).join(", ")})`:""}function q_(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ti(e){if(e.type)return e;if(e.charAt(0)==="#")return ti(d3(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,ik.default)(9,e));let g=e.substring(t+1,e.length-1),r;if(n==="color"){if(g=g.split(" "),r=g.shift(),g.length===4&&g[3].charAt(0)==="/"&&(g[3]=g[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r)===-1)throw new Error((0,ik.default)(10,r))}else g=g.split(",");return g=g.map(i=>parseFloat(i)),{type:n,values:g,colorSpace:r}}const A3=e=>{const t=ti(e);return t.values.slice(0,3).map((n,g)=>t.type.indexOf("hsl")!==-1&&g!==0?`${n}%`:n).join(" ")};Mn.colorChannel=A3;const $_=(e,t)=>{try{return A3(e)}catch{return e}};Mn.private_safeColorChannel=$_;function Rc(e){const{type:t,colorSpace:n}=e;let{values:g}=e;return t.indexOf("rgb")!==-1?g=g.map((r,i)=>i<3?parseInt(r,10):r):t.indexOf("hsl")!==-1&&(g[1]=`${g[1]}%`,g[2]=`${g[2]}%`),t.indexOf("color")!==-1?g=`${n} ${g.join(" ")}`:g=`${g.join(", ")}`,`${t}(${g})`}function eq(e){if(e.indexOf("#")===0)return e;const{values:t}=ti(e);return`#${t.map((n,g)=>q_(g===3?Math.round(255*n):n)).join("")}`}function h3(e){e=ti(e);const{values:t}=e,n=t[0],g=t[1]/100,r=t[2]/100,i=g*Math.min(r,1-r),a=(s,I=(s+n/30)%12)=>r-i*Math.max(Math.min(I-3,9-I,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(o+="a",l.push(t[3])),Rc({type:o,values:l})}function e0(e){e=ti(e);let t=e.type==="hsl"||e.type==="hsla"?ti(h3(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function tq(e,t){const n=e0(e),g=e0(t);return(Math.max(n,g)+.05)/(Math.min(n,g)+.05)}function m3(e,t){return e=ti(e),t=hB(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Rc(e)}function nq(e,t,n){try{return m3(e,t)}catch{return e}}function mB(e,t){if(e=ti(e),t=hB(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Rc(e)}function gq(e,t,n){try{return mB(e,t)}catch{return e}}function fB(e,t){if(e=ti(e),t=hB(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Rc(e)}function rq(e,t,n){try{return fB(e,t)}catch{return e}}function f3(e,t=.15){return e0(e)>.5?mB(e,t):fB(e,t)}function iq(e,t,n){try{return f3(e,t)}catch{return e}}function aq(e,t,n,g=1){const r=(l,s)=>Math.round((l**(1/g)*(1-n)+s**(1/g)*n)**g),i=ti(e),a=ti(t),o=[r(i.values[0],a.values[0]),r(i.values[1],a.values[1]),r(i.values[2],a.values[2])];return Rc({type:"rgb",values:o})}const nd={black:"#000",white:"#fff"},oq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},oI={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lI={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},kC={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sI={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},II={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cI={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lq=["mode","contrastThreshold","tonalOffset"],ak={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nd.white,default:nd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ay={text:{primary:nd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ok(e,t,n,g){const r=g.light||g,i=g.dark||g*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=O_(e.main,r):t==="dark"&&(e.dark=Q_(e.main,i)))}function sq(e="light"){return e==="dark"?{main:sI[200],light:sI[50],dark:sI[400]}:{main:sI[700],light:sI[400],dark:sI[800]}}function Iq(e="light"){return e==="dark"?{main:oI[200],light:oI[50],dark:oI[400]}:{main:oI[500],light:oI[300],dark:oI[700]}}function cq(e="light"){return e==="dark"?{main:lI[500],light:lI[300],dark:lI[700]}:{main:lI[700],light:lI[400],dark:lI[800]}}function Cq(e="light"){return e==="dark"?{main:II[400],light:II[300],dark:II[700]}:{main:II[700],light:II[500],dark:II[900]}}function uq(e="light"){return e==="dark"?{main:cI[400],light:cI[300],dark:cI[700]}:{main:cI[800],light:cI[500],dark:cI[900]}}function dq(e="light"){return e==="dark"?{main:kC[400],light:kC[300],dark:kC[700]}:{main:"#ed6c02",light:kC[500],dark:kC[900]}}function Aq(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:g=.2}=e,r=Jn(e,lq),i=e.primary||sq(t),a=e.secondary||Iq(t),o=e.error||cq(t),l=e.info||Cq(t),s=e.success||uq(t),I=e.warning||dq(t);function c(f){return P_(f,ay.text.primary)>=n?ay.text.primary:ak.text.primary}const d=({color:f,name:y,mainShade:h=500,lightShade:p=300,darkShade:b=700})=>{if(f=Se({},f),!f.main&&f[h]&&(f.main=f[h]),!f.hasOwnProperty("main"))throw new Error(qu(11,y?` (${y})`:"",h));if(typeof f.main!="string")throw new Error(qu(12,y?` (${y})`:"",JSON.stringify(f.main)));return ok(f,"light",p,g),ok(f,"dark",b,g),f.contrastText||(f.contrastText=c(f.main)),f},u={dark:ay,light:ak};return ha(Se({common:Se({},nd),mode:t,primary:d({color:i,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:o,name:"error"}),warning:d({color:I,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:s,name:"success"}),grey:oq,contrastThreshold:n,getContrastText:c,augmentColor:d,tonalOffset:g},u[t]),r)}const hq=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function mq(e){return Math.round(e*1e5)/1e5}const lk={textTransform:"uppercase"},sk='"Roboto", "Helvetica", "Arial", sans-serif';function fq(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:g=sk,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:s=16,allVariants:I,pxToRem:c}=n,d=Jn(n,hq),u=r/14,m=c||(h=>`${h/s*u}rem`),f=(h,p,b,S,X)=>Se({fontFamily:g,fontWeight:h,fontSize:m(p),lineHeight:b},g===sk?{letterSpacing:`${mq(S/p)}em`}:{},X,I),y={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(a,48,1.167,0),h4:f(a,34,1.235,.25),h5:f(a,24,1.334,0),h6:f(o,20,1.6,.15),subtitle1:f(a,16,1.75,.15),subtitle2:f(o,14,1.57,.1),body1:f(a,16,1.5,.15),body2:f(a,14,1.43,.15),button:f(o,14,1.75,.4,lk),caption:f(a,12,1.66,.4),overline:f(a,12,2.66,1,lk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ha(Se({htmlFontSize:s,pxToRem:m,fontFamily:g,fontSize:r,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l},y),d,{clone:!1})}const pq=.2,bq=.14,yq=.12;function hn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${pq})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${bq})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${yq})`].join(",")}const Zq=["none",hn(0,2,1,-1,0,1,1,0,0,1,3,0),hn(0,3,1,-2,0,2,2,0,0,1,5,0),hn(0,3,3,-2,0,3,4,0,0,1,8,0),hn(0,2,4,-1,0,4,5,0,0,1,10,0),hn(0,3,5,-1,0,5,8,0,0,1,14,0),hn(0,3,5,-1,0,6,10,0,0,1,18,0),hn(0,4,5,-2,0,7,10,1,0,2,16,1),hn(0,5,5,-3,0,8,10,1,0,3,14,2),hn(0,5,6,-3,0,9,12,1,0,3,16,2),hn(0,6,6,-3,0,10,14,1,0,4,18,3),hn(0,6,7,-4,0,11,15,1,0,4,20,3),hn(0,7,8,-4,0,12,17,2,0,5,22,4),hn(0,7,8,-4,0,13,19,2,0,5,24,4),hn(0,7,9,-4,0,14,21,2,0,5,26,4),hn(0,8,9,-5,0,15,22,2,0,6,28,5),hn(0,8,10,-5,0,16,24,2,0,6,30,5),hn(0,8,11,-5,0,17,26,2,0,6,32,5),hn(0,9,11,-5,0,18,28,2,0,7,34,6),hn(0,9,12,-6,0,19,29,2,0,7,36,6),hn(0,10,13,-6,0,20,31,3,0,8,38,7),hn(0,10,13,-6,0,21,33,3,0,8,40,7),hn(0,10,14,-6,0,22,35,3,0,8,42,7),hn(0,11,14,-7,0,23,36,3,0,9,44,8),hn(0,11,15,-7,0,24,38,3,0,9,46,8)],Gq=["duration","easing","delay"],Bq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ik(e){return`${Math.round(e)}ms`}function vq(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Wq(e){const t=Se({},Bq,e.easing),n=Se({},Sq,e.duration);return Se({getAutoHeightDuration:vq,create:(r=["all"],i={})=>{const{duration:a=n.standard,easing:o=t.easeInOut,delay:l=0}=i;return Jn(i,Gq),(Array.isArray(r)?r:[r]).map(s=>`${s} ${typeof a=="string"?a:Ik(a)} ${o} ${typeof l=="string"?l:Ik(l)}`).join(",")}},e,{easing:t,duration:n})}const Vq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},kq=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Rq(e={},...t){const{mixins:n={},palette:g={},transitions:r={},typography:i={}}=e,a=Jn(e,kq);if(e.vars)throw new Error(qu(18));const o=Aq(g),l=CB(e);let s=ha(l,{mixins:T_(l.breakpoints,n),palette:o,shadows:Zq.slice(),typography:fq(o,i),transitions:Wq(r),zIndex:Se({},Vq)});return s=ha(s,a),s=t.reduce((I,c)=>ha(I,c),s),s.unstable_sxConfig=Se({},Xd,a==null?void 0:a.unstable_sxConfig),s.unstable_sx=function(c){return Gf({sx:c,theme:this})},s}const pB=Rq();function bB(){const e=g3(pB);return e[$1]||e}function yB({props:e,name:t}){return F_({props:e,name:t,defaultTheme:pB,themeId:$1})}var Jd={};const wq=ba(dQ);var oy={exports:{}},ck;function Xq(){return ck||(ck=1,function(e){function t(n,g){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(g.indexOf(i)>=0)continue;r[i]=n[i]}return r}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(oy)),oy.exports}const Jq=ba(v6),Yq=ba(W6),Nq=ba(J6),Hq=ba(N_),Fq=ba(b_),xq=ba(W_);var wc=C3;Object.defineProperty(Jd,"__esModule",{value:!0});var Kq=Jd.default=qq;Jd.shouldForwardProp=Uh;Jd.systemDefaultTheme=void 0;var Kr=wc(wq),B2=wc(Xq()),Ck=Dq(Jq),Lq=Yq;wc(Nq);wc(Hq);var Eq=wc(Fq),Mq=wc(xq);const zq=["ownerState"],Uq=["variants"],Tq=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p3(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(p3=function(g){return g?n:t})(e)}function Dq(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=p3(t);if(n&&n.has(e))return n.get(e);var g={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(g,i,a):g[i]=e[i]}return g.default=e,n&&n.set(e,g),g}function jq(e){return Object.keys(e).length===0}function Qq(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Uh(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Pq=Jd.systemDefaultTheme=(0,Eq.default)(),Oq=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function oh({defaultTheme:e,theme:t,themeId:n}){return jq(t)?e:t[n]||t}function _q(e){return e?(t,n)=>n[e]:null}function Th(e,t){let{ownerState:n}=t,g=(0,B2.default)(t,zq);const r=typeof e=="function"?e((0,Kr.default)({ownerState:n},g)):e;if(Array.isArray(r))return r.flatMap(i=>Th(i,(0,Kr.default)({ownerState:n},g)));if(r&&typeof r=="object"&&Array.isArray(r.variants)){const{variants:i=[]}=r;let o=(0,B2.default)(r,Uq);return i.forEach(l=>{let s=!0;typeof l.props=="function"?s=l.props((0,Kr.default)({ownerState:n},g,n)):Object.keys(l.props).forEach(I=>{(n==null?void 0:n[I])!==l.props[I]&&g[I]!==l.props[I]&&(s=!1)}),s&&(Array.isArray(o)||(o=[o]),o.push(typeof l.style=="function"?l.style((0,Kr.default)({ownerState:n},g,n)):l.style))}),o}return r}function qq(e={}){const{themeId:t,defaultTheme:n=Pq,rootShouldForwardProp:g=Uh,slotShouldForwardProp:r=Uh}=e,i=a=>(0,Mq.default)((0,Kr.default)({},a,{theme:oh((0,Kr.default)({},a,{defaultTheme:n,themeId:t}))}));return i.__mui_systemSx=!0,(a,o={})=>{(0,Ck.internal_processStyles)(a,X=>X.filter(W=>!(W!=null&&W.__mui_systemSx)));const{name:l,slot:s,skipVariantsResolver:I,skipSx:c,overridesResolver:d=_q(Oq(s))}=o,u=(0,B2.default)(o,Tq),m=I!==void 0?I:s&&s!=="Root"&&s!=="root"||!1,f=c||!1;let y,h=Uh;s==="Root"||s==="root"?h=g:s?h=r:Qq(a)&&(h=void 0);const p=(0,Ck.default)(a,(0,Kr.default)({shouldForwardProp:h,label:y},u)),b=X=>typeof X=="function"&&X.__emotion_real!==X||(0,Lq.isPlainObject)(X)?W=>Th(X,(0,Kr.default)({},W,{theme:oh({theme:W.theme,defaultTheme:n,themeId:t})})):X,S=(X,...W)=>{let V=b(X);const R=W?W.map(b):[];l&&d&&R.push(k=>{const v=oh((0,Kr.default)({},k,{defaultTheme:n,themeId:t}));if(!v.components||!v.components[l]||!v.components[l].styleOverrides)return null;const K=v.components[l].styleOverrides,x={};return Object.entries(K).forEach(([q,Q])=>{x[q]=Th(Q,(0,Kr.default)({},k,{theme:v}))}),d(k,x)}),l&&!m&&R.push(k=>{var v;const K=oh((0,Kr.default)({},k,{defaultTheme:n,themeId:t})),x=K==null||(v=K.components)==null||(v=v[l])==null?void 0:v.variants;return Th({variants:x},(0,Kr.default)({},k,{theme:K}))}),f||R.push(i);const z=R.length-W.length;if(Array.isArray(X)&&z>0){const k=new Array(z).fill("");V=[...X,...k],V.raw=[...X.raw,...k]}const L=p(V,...R);return a.muiName&&(L.muiName=a.muiName),L};return p.withConfig&&(S.withConfig=p.withConfig),S}}function $q(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const e$=e=>$q(e)&&e!=="classes",Hf=Kq({themeId:$1,defaultTheme:pB,rootShouldForwardProp:e$}),t$=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];function n$(e,t,n=t$){return e.type==="pie"?Se({},e,{data:e.data.map((g,r)=>Se({color:n[r%n.length]},g))}):Se({color:n[t%n.length]},e)}const g$=["#02B2AF","#2E96FF","#B800D8","#60009B","#2731C8","#03008D"],r$=["#02B2AF","#72CCFF","#DA00FF","#9001CB","#2E96FF","#3B48E0"],i$=e=>e==="dark"?r$:g$,b3=_.createContext({isInitialized:!1,data:{}}),a$=(e,t,n,g)=>{const r={};e.forEach((a,o)=>{var I;const{id:l=`auto-generated-id-${o}`,type:s}=a;if(r[s]===void 0&&(r[s]={series:{},seriesOrder:[]}),((I=r[s])==null?void 0:I.series[l])!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);r[s].series[l]=Se({id:l},n$(a,o,t)),r[s].seriesOrder.push(l)});const i={};return Object.keys(n).forEach(a=>{var l;const o=r[a];o!==void 0&&(i[a]=((l=n[a])==null?void 0:l.call(n,o,g))??r[a])}),i};function o$(e){const{series:t,dataset:n,colors:g=i$,seriesFormatters:r,children:i}=e,a=bB(),o=_.useMemo(()=>({isInitialized:!0,data:a$(t,typeof g=="function"?g(a.palette.mode):g,r,n)}),[t,g,a.palette.mode,r,n]);return G.jsx(b3.Provider,{value:o,children:i})}function ZB(){const{isInitialized:e,data:t}=_.useContext(b3);if(!e)throw new Error(["MUI X: Could not find the series ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t}function l$(){const e=ZB();return _.useMemo(()=>e.bar,[e.bar])}const uk=.2,s$=.1,I$={bar:ZN,scatter:BN,line:vN},c$={bar:GN,scatter:SN,line:WN},Xc=_.createContext({xAxis:{},yAxis:{},xAxisIds:[],yAxisIds:[]});function C$(e){const{xAxis:t,yAxis:n,dataset:g,children:r}=e,i=ZB(),a=Vd(),o=_.useMemo(()=>t==null?void 0:t.map(I=>{const c=I.dataKey;if(c===void 0||I.data!==void 0)return I;if(g===void 0)throw Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Se({},I,{data:g.map(d=>d[c])})}),[t,g]),l=_.useMemo(()=>n==null?void 0:n.map(I=>{const c=I.dataKey;if(c===void 0||I.data!==void 0)return I;if(g===void 0)throw Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Se({},I,{data:g.map(d=>d[c])})}),[n,g]),s=_.useMemo(()=>{const I=(y,h,p,b,S)=>{var k;const X=b[h],W=((k=i[h])==null?void 0:k.series)??{},[V,R]=X({series:W,axis:p,isDefaultAxis:S}),[z,L]=y;return z===null||L===null?[V,R]:V===null||R===null?[z,L]:[Math.min(V,z),Math.max(R,L)]},c=(y,h,p)=>Object.keys(h).reduce((S,X)=>I(S,X,y,h,p),[null,null]),d=[...(o==null?void 0:o.map((y,h)=>Se({id:`defaultized-x-axis-${h}`},y)))??[],...o===void 0||o.findIndex(({id:y})=>y===f2)===-1?[{id:f2,scaleType:"linear"}]:[]],u={};d.forEach((y,h)=>{const p=h===0,[b,S]=c(y,I$,p),X=y.reverse?[a.left+a.width,a.left]:[a.left,a.left+a.width];if(_m(y)){const v=y.categoryGapRatio??uk,K=y.barGapRatio??s$;u[y.id]=Se({categoryGapRatio:v,barGapRatio:K},y,{scale:zm(y.data,X).paddingInner(v).paddingOuter(v/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?LC(Se({values:y.data},y.colorMap)):aI(y.colorMap))})}if(m2(y)&&(u[y.id]=Se({},y,{scale:cV(y.data,X),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?LC(Se({values:y.data},y.colorMap)):aI(y.colorMap))})),y.scaleType==="band"||y.scaleType==="point")return;const W=y.scaleType??"linear",V=[y.min??b,y.max??S],R=zV(Se({},y,{range:X,domain:V})),z=MV(W,V,X).nice(R),L=z.domain(),k=[y.min??L[0],y.max??L[1]];u[y.id]=Se({},y,{scaleType:W,scale:z.domain(k),tickNumber:R,colorScale:y.colorMap&&aI(y.colorMap)})});const m=[...(l==null?void 0:l.map((y,h)=>Se({id:`defaultized-y-axis-${h}`},y)))??[],...l===void 0||l.findIndex(({id:y})=>y===p2)===-1?[{id:p2,scaleType:"linear"}]:[]],f={};return m.forEach((y,h)=>{const p=h===0,[b,S]=c(y,c$,p),X=y.reverse?[a.top,a.top+a.height]:[a.top+a.height,a.top];if(_m(y)){const v=y.categoryGapRatio??uk;f[y.id]=Se({categoryGapRatio:v,barGapRatio:0},y,{scale:zm(y.data,[X[1],X[0]]).paddingInner(v).paddingOuter(v/2),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?LC(Se({values:y.data},y.colorMap)):aI(y.colorMap))})}if(m2(y)&&(f[y.id]=Se({},y,{scale:cV(y.data,[X[1],X[0]]),tickNumber:y.data.length,colorScale:y.colorMap&&(y.colorMap.type==="ordinal"?LC(Se({values:y.data},y.colorMap)):aI(y.colorMap))})),y.scaleType==="band"||y.scaleType==="point")return;const W=y.scaleType??"linear",V=[y.min??b,y.max??S],R=zV(Se({},y,{range:X,domain:V})),z=MV(W,V,X).nice(R),L=z.domain(),k=[y.min??L[0],y.max??L[1]];f[y.id]=Se({},y,{scaleType:W,scale:z.domain(k),tickNumber:R,colorScale:y.colorMap&&aI(y.colorMap)})}),{xAxis:u,yAxis:f,xAxisIds:d.map(({id:y})=>y),yAxisIds:m.map(({id:y})=>y)}},[a.height,a.left,a.top,a.width,i,o,l]);return G.jsx(Xc.Provider,{value:s,children:r})}function u$(e){return typeof e=="string"}function d$(e,t,n){return e===void 0||u$(e)?t:Se({},t,{ownerState:Se({},t.ownerState,n)})}function A$(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(g=>g.match(/^on[A-Z]/)&&typeof e[g]=="function"&&!t.includes(g)).forEach(g=>{n[g]=e[g]}),n}function h$(e,t,n){return typeof e=="function"?e(t,n):e}function dk(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function m$(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:g,externalForwardedProps:r,className:i}=e;if(!t){const u=nk(n==null?void 0:n.className,i,r==null?void 0:r.className,g==null?void 0:g.className),m=Se({},n==null?void 0:n.style,r==null?void 0:r.style,g==null?void 0:g.style),f=Se({},n,r,g);return u.length>0&&(f.className=u),Object.keys(m).length>0&&(f.style=m),{props:f,internalRef:void 0}}const a=A$(Se({},r,g)),o=dk(g),l=dk(r),s=t(a),I=nk(s==null?void 0:s.className,n==null?void 0:n.className,i,r==null?void 0:r.className,g==null?void 0:g.className),c=Se({},s==null?void 0:s.style,n==null?void 0:n.style,r==null?void 0:r.style,g==null?void 0:g.style),d=Se({},s,n,l,o);return I.length>0&&(d.className=I),Object.keys(c).length>0&&(d.style=c),{props:d,internalRef:s.ref}}const f$=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function dc(e){var t;const{elementType:n,externalSlotProps:g,ownerState:r,skipResolvingSlotProps:i=!1}=e,a=Jn(e,f$),o=i?{}:h$(g,r),{props:l,internalRef:s}=m$(Se({},a,{externalSlotProps:o})),I=I3(s,o==null?void 0:o.ref,(t=e.additionalProps)==null?void 0:t.ref);return d$(n,Se({},l,{ref:I}),r)}const GB=_.createContext({item:null,axis:{x:null,y:null},useVoronoiInteraction:!1,dispatch:()=>null}),p$=(e,t)=>{switch(t.type){case"enterItem":return Se({},e,{item:t.data});case"exitChart":return e.item===null&&e.axis.x===null&&e.axis.y===null?e:Se({},e,{axis:{x:null,y:null},item:null});case"updateVoronoiUsage":return Se({},e,{useVoronoiInteraction:t.useVoronoiInteraction});case"leaveItem":return e.item===null||Object.keys(t.data).some(n=>t.data[n]!==e.item[n])?e:Se({},e,{item:null});case"updateAxis":return t.data.x===e.axis.x&&t.data.y===e.axis.y?e:Se({},e,{axis:t.data});default:return e}};function b$(e){const{children:t}=e,[n,g]=_.useReducer(p$,{item:null,axis:{x:null,y:null},useVoronoiInteraction:!1}),r=_.useMemo(()=>Se({},n,{dispatch:g}),[n]);return G.jsx(GB.Provider,{value:r,children:t})}const y3=_.createContext({isInitialized:!1,data:{highlightedItem:null,setHighlighted:()=>{},clearHighlighted:()=>{},isHighlighted:()=>!1,isFaded:()=>!1}}),y$=(e,t)=>n=>e?e.fade==="series"?n.seriesId===(t==null?void 0:t.seriesId)&&n.dataIndex!==(t==null?void 0:t.dataIndex):e.fade==="global"?n.seriesId!==(t==null?void 0:t.seriesId)||n.dataIndex!==(t==null?void 0:t.dataIndex):!1:!1,Z$=(e,t)=>n=>e?e.highlight==="series"?n.seriesId===(t==null?void 0:t.seriesId):e.highlight==="item"?n.dataIndex===(t==null?void 0:t.dataIndex)&&n.seriesId===(t==null?void 0:t.seriesId):!1:!1,G$=["highlighted","faded"],B$=e=>{const t=e??{},{highlighted:n,faded:g}=t,r=Jn(t,G$);return Se({highlight:n,fade:g},r)};function S$({children:e,highlightedItem:t,onHighlightChange:n}){const[g,r]=M_({controlled:t,default:null,name:"HighlightedProvider",state:"highlightedItem"}),i=ZB(),a=_.useMemo(()=>{const s=new Map;return Object.keys(i).forEach(I=>{const c=i[I];Object.keys((c==null?void 0:c.series)??{}).forEach(d=>{const u=c==null?void 0:c.series[d];s.set(d,B$(u==null?void 0:u.highlightScope))})}),s},[i]),o=g&&g.seriesId?a.get(g.seriesId)??void 0:void 0,l=_.useMemo(()=>({isInitialized:!0,data:{highlightScope:o,highlightedItem:g,setHighlighted:s=>{r(s),n==null||n(s)},clearHighlighted:()=>{r(null),n==null||n(null)},isHighlighted:Z$(o,g),isFaded:y$(o,g)}}),[g,o,r,n]);return G.jsx(y3.Provider,{value:l,children:e})}function Z3(){const{isInitialized:e,data:t}=_.useContext(y3);if(!e)throw new Error(["MUI X: Could not find the highlighted ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t}function G3(e){const t=Z3();if(!e)return{isHighlighted:!1,isFaded:!1};const n=t.isHighlighted(e),g=!n&&t.isFaded(e);return{isHighlighted:n,isFaded:g}}const v$=e=>{const{dispatch:t}=_.useContext(GB),{setHighlighted:n,clearHighlighted:g}=Z3();return i=>({onMouseEnter:()=>{t({type:"enterItem",data:i}),n({seriesId:i.seriesId,dataIndex:i.dataIndex})},onMouseLeave:()=>{t({type:"leaveItem",data:i}),g()}})},W$=["id","dataIndex","classes","color","slots","slotProps","style","onClick"];function V$(e){return Bf("MuiBarElement",e)}uB("MuiBarElement",["root"]);const k$=e=>{const{classes:t,id:n}=e,g={root:["root",`series-${n}`]};return Nf(g,V$,t)},R$=Hf(H1.rect,{name:"MuiBarElement",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>({stroke:"none",fill:e.isHighlighted?sc(e.color).brighter(.5).formatHex():e.color,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:e.isFaded&&.3||1}));function w$(e){const{id:t,dataIndex:n,classes:g,color:r,slots:i,slotProps:a,style:o,onClick:l}=e,s=Jn(e,W$),I=v$(),{isFaded:c,isHighlighted:d}=G3({seriesId:t,dataIndex:n}),u={id:t,dataIndex:n,classes:g,color:r,isFaded:c,isHighlighted:d},m=k$(u),f=(i==null?void 0:i.bar)??R$,y=dc({elementType:f,externalSlotProps:a==null?void 0:a.bar,externalForwardedProps:s,additionalProps:Se({},I({type:"bar",seriesId:t,dataIndex:n}),{style:o,onClick:l,cursor:l?"pointer":"unset"}),className:m.root,ownerState:u});return G.jsx(f,Se({},y))}function B3(e,t,n){const g=e.layout==="vertical",r=g?t==null?void 0:t.colorScale:n==null?void 0:n.colorScale,i=g?n==null?void 0:n.colorScale:t==null?void 0:t.colorScale,a=g?t==null?void 0:t.data:n==null?void 0:n.data;return i?o=>{const l=e.data[o],s=l===null?e.color:i(l);return s===null?e.color:s}:r&&a?o=>{const l=a[o],s=l===null?e.color:r(l);return s===null?e.color:s}:()=>e.color}function X$(){const{chartId:e}=_.useContext(tf);return _.useMemo(()=>e,[e])}function J$(){const{isInitialized:e,data:t}=_.useContext(RN);if(!e)throw new Error(["MUI X: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartsContainer parent component."].join(`
`));return t}const lh=(e,{hasNegative:t,hasPositive:n,borderRadius:g,layout:r})=>{if(!g)return 0;const i=r==="vertical";return e==="top-left"&&(i&&n||!i&&t)||e==="top-right"&&(i&&n||!i&&n)||e==="bottom-right"&&(i&&t||!i&&n)||e==="bottom-left"&&(i&&t||!i&&t)?g:0},Y$=["style","maskId"],N$=e=>`inset(0px round ${e.topLeft}px ${e.topRight}px ${e.bottomRight}px ${e.bottomLeft}px)`;function H$(e){var n,g;const t=e.ownerState;return G.jsx(H1.rect,{style:Se({},e.style,{clipPath:(e.ownerState.layout==="vertical"?(n=e.style)==null?void 0:n.height:(g=e.style)==null?void 0:g.width).to(r=>N$({topLeft:Math.min(r,lh("top-left",t)),topRight:Math.min(r,lh("top-right",t)),bottomRight:Math.min(r,lh("bottom-right",t)),bottomLeft:Math.min(r,lh("bottom-left",t))}))})})}function F$(e){const{style:t,maskId:n}=e,g=Jn(e,Y$);return!e.borderRadius||e.borderRadius<=0?null:G.jsx("clipPath",{id:n,children:G.jsx(H$,{ownerState:g,style:t})})}function x$(e){return Bf("MuiBarLabel",e)}const ly=uB("MuiBarLabel",["root","highlighted","faded"]),K$=e=>{const{classes:t,seriesId:n,isFaded:g,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",g&&"faded"]};return Nf(i,x$,t)},L$=e=>{const{barLabel:t,value:n,dataIndex:g,seriesId:r,height:i,width:a}=e;return t==="value"?n?n==null?void 0:n.toString():null:t({seriesId:r,dataIndex:g,value:n},{bar:{height:i,width:a}})},E$=["seriesId","dataIndex","color","isFaded","isHighlighted","classes"],M$=Hf(H1.text,{name:"MuiBarLabel",slot:"Root",overridesResolver:(e,t)=>[{[`&.${ly.faded}`]:t.faded},{[`&.${ly.highlighted}`]:t.highlighted},t.root]})(({theme:e})=>{var t,n,g,r;return Se({},(t=e==null?void 0:e.typography)==null?void 0:t.body2,{stroke:"none",fill:(r=(g=(n=e.vars||e)==null?void 0:n.palette)==null?void 0:g.text)==null?void 0:r.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${ly.faded}`]:{opacity:.3}})});function z$(e){const t=yB({props:e,name:"MuiBarLabel"}),n=Jn(t,E$);return G.jsx(M$,Se({},n))}const U$=["seriesId","classes","color","style","dataIndex","barLabel","slots","slotProps","height","width","value"],T$=["ownerState"];function D$(e){const{seriesId:t,classes:n,color:g,style:r,dataIndex:i,barLabel:a,slots:o,slotProps:l,height:s,width:I,value:c}=e,d=Jn(e,U$),{isFaded:u,isHighlighted:m}=G3({seriesId:t,dataIndex:i}),f={seriesId:t,classes:n,color:g,isFaded:u,isHighlighted:m,dataIndex:i},y=K$(f),h=(o==null?void 0:o.barLabel)??z$,p=dc({elementType:h,externalSlotProps:l==null?void 0:l.barLabel,additionalProps:Se({},d,{style:r,className:y.root}),ownerState:f}),{ownerState:b}=p,S=Jn(p,T$);if(!a)return null;const X=L$({barLabel:a,value:c,dataIndex:i,seriesId:t,height:s,width:I});return X?G.jsx(h,Se({},S,b,{children:X})):null}const j$=["bars","skipAnimation"],Q$=({layout:e,yOrigin:t,x:n,width:g,y:r,xOrigin:i,height:a})=>Se({},e==="vertical"?{y:t,x:n+g/2,height:0,width:g}:{y:r+a/2,x:i,height:a,width:0}),Ak=({x:e,width:t,y:n,height:g})=>({x:e+t/2,y:n+g/2,height:g,width:t});function P$(e){const{bars:t,skipAnimation:n}=e,g=Jn(e,j$),r=I2(t,{keys:i=>`${i.seriesId}-${i.dataIndex}`,from:Q$,leave:null,enter:Ak,update:Ak,immediate:n});return G.jsx(_.Fragment,{children:r((i,{seriesId:a,dataIndex:o,color:l,value:s,width:I,height:c})=>G.jsx(D$,Se({seriesId:a,dataIndex:o,value:s,color:l,width:I,height:c},g,{style:i})))})}const sy=(e,t)=>{const n=`${e}-axis`,g=`${e}Axis`;return t===(e==="x"?f2:p2)?`The first \`${g}\``:`The ${n} with id "${t}"`};function O$(e,t,n,g,r,i){const a=g[n],o=i[r],l=e?a:o,s=e?o:a,I=e?n:r,c=e?r:n,d=e?"x":"y",u=e?"y":"x";if(!_m(l))throw new Error(`MUI X Charts: ${sy(d,I)} should be of type "band" to display the bar series of id "${t}".`);if(l.data===void 0)throw new Error(`MUI X Charts: ${sy(d,I)} should have data property.`);if(_m(s)||m2(s))throw new Error(`MUI X Charts: ${sy(u,c)} should be a continuous type to display the bar series of id "${t}".`)}const _$=["skipAnimation","onItemClick","borderRadius","barLabel"];function q$({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};const g=e/(t+(t-1)*n),r=n*g;return{barWidth:g,offset:r}}const $$=()=>{const e=l$()??{series:{},stackingGroups:[],seriesOrder:[]},t=_.useContext(Xc),n=X$(),{series:g,stackingGroups:r}=e,{xAxis:i,yAxis:a,xAxisIds:o,yAxisIds:l}=t,s=o[0],I=l[0],c={};return{completedData:r.flatMap(({ids:u},m)=>u.flatMap(f=>{const y=g[f].xAxisKey??s,h=g[f].yAxisKey??I,p=i[y],b=a[h],S=g[f].layout==="vertical";O$(S,f,y,i,h,a);const X=S?p:b,W=p.scale,V=b.scale,R=B3(g[f],i[y],a[h]),z=X.scale.bandwidth(),{barWidth:L,offset:k}=q$({bandWidth:z,numberOfGroups:r.length,gapRatio:X.barGapRatio}),v=m*(L+k),{stackedData:K}=g[f];return K.map((x,q)=>{var Y,J;const Q=x.map(O=>S?V(O):W(O)),D=Math.round(Math.min(...Q)),U=Math.round(Math.max(...Q)),P=g[f].stack,N={seriesId:f,dataIndex:q,layout:g[f].layout,x:S?W((Y=i[y].data)==null?void 0:Y[q])+v:D,y:S?D:V((J=a[h].data)==null?void 0:J[q])+v,xOrigin:W(0),yOrigin:V(0),height:S?U-D:L,width:S?L:U-D,color:R(q),value:g[f].data[q],maskId:`${n}_${P||f}_${m}_${q}`};c[N.maskId]||(c[N.maskId]={id:N.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:N.layout,xOrigin:W(0),yOrigin:V(0),x:0,y:0});const le=c[N.maskId];return le.width=N.layout==="vertical"?N.width:le.width+N.width,le.height=N.layout==="vertical"?le.height+N.height:N.height,le.x=Math.min(le.x===0?1/0:le.x,N.x),le.y=Math.min(le.y===0?1/0:le.y,N.y),le.hasNegative=le.hasNegative||(N.value??0)<0,le.hasPositive=le.hasPositive||(N.value??0)>0,N})})),masksData:Object.values(c)}},sh=({layout:e,yOrigin:t,x:n,width:g,y:r,xOrigin:i,height:a})=>Se({},e==="vertical"?{y:t,x:n,height:0,width:g}:{y:r,x:i,height:a,width:0}),Ih=({x:e,width:t,y:n,height:g})=>({y:n,x:e,height:g,width:t});function eee(e){const{completedData:t,masksData:n}=$$(),{skipAnimation:g,onItemClick:r,borderRadius:i,barLabel:a}=e,o=Jn(e,_$),l=I2(t,{keys:I=>`${I.seriesId}-${I.dataIndex}`,from:sh,leave:sh,enter:Ih,update:Ih,immediate:g}),s=I2(n,{keys:I=>I.id,from:sh,leave:sh,enter:Ih,update:Ih,immediate:g});return G.jsxs(_.Fragment,{children:[s((I,{id:c,hasPositive:d,hasNegative:u,layout:m})=>G.jsx(F$,{maskId:c,borderRadius:i,hasNegative:u,hasPositive:d,layout:m,style:I})),l((I,{seriesId:c,dataIndex:d,color:u,maskId:m})=>{const f=G.jsx(w$,Se({id:c,dataIndex:d,color:u},o,{onClick:r&&(y=>{r(y,{type:"bar",seriesId:c,dataIndex:d})}),style:I}));return!i||i<=0?f:G.jsx("g",{clipPath:`url(#${m})`,children:f})}),a&&G.jsx(P$,Se({bars:t,skipAnimation:g,barLabel:a},o))]})}const tee=()=>{Ol(()=>{const e=window.matchMedia("(prefers-reduced-motion)"),t=n=>{ei.assign({skipAnimation:n.matches||void 0})};return t(e),e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[])};function nee(e,t){const n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n.matrixTransform(e.getScreenCTM().inverse())}function CI(e){return e instanceof Date?e.getTime():e}const gee=e=>{const t=J$(),{left:n,top:g,width:r,height:i}=Vd(),{xAxis:a,yAxis:o,xAxisIds:l,yAxisIds:s}=_.useContext(Xc),{dispatch:I}=_.useContext(GB),c=l[0],d=s[0],u=_.useRef({x:-1,y:-1});_.useEffect(()=>{const m=t.current;if(m===null||e)return()=>{};const f=(p,b)=>{if(c===null)return null;const{scale:S,data:X,reverse:W}=p;if(!VN(S)){const R=S.invert(b);if(X===void 0)return{value:R};const z=CI(R),L=X==null?void 0:X.findIndex((k,v)=>{const K=CI(k);return K>z&&(v===0||Math.abs(z-K)<=Math.abs(z-CI(X[v-1])))||K<=z&&(v===X.length-1||Math.abs(CI(R)-K)<Math.abs(CI(R)-CI(X[v+1])))});return{value:L!==void 0&&L>=0?X[L]:R,index:L}}const V=S.bandwidth()===0?Math.floor((b-Math.min(...S.range())+S.step()/2)/S.step()):Math.floor((b-Math.min(...S.range()))/S.step());if(V<0||V>=X.length)return null;if(W){const R=X.length-1-V;return{index:R,value:X[R]}}return{index:V,value:X[V]}},y=()=>{u.current={x:-1,y:-1},I({type:"exitChart"})},h=p=>{const b="targetTouches"in p?p.targetTouches[0]:p,S=nee(t.current,b);u.current={x:S.x,y:S.y};const X=S.x<n||S.x>n+r,W=S.y<g||S.y>g+i;if(X||W){I({type:"exitChart"});return}const V=f(a[c],S.x),R=f(o[d],S.y);I({type:"updateAxis",data:{x:V,y:R}})};return m.addEventListener("mouseout",y),m.addEventListener("mousemove",h),m.addEventListener("touchend",y),m.addEventListener("touchmove",h),()=>{m.removeEventListener("mouseout",y),m.removeEventListener("mousemove",h),m.removeEventListener("touchend",y),m.removeEventListener("touchmove",h)}},[t,I,n,r,g,i,d,o,c,a,e])},ree=["children","width","height","viewBox","disableAxisListener","className","title","desc"],iee=Hf("svg",{name:"MuiChartsSurface",slot:"Root"})(()=>({})),aee=_.forwardRef(function(t,n){const{children:g,width:r,height:i,viewBox:a,disableAxisListener:o=!1,title:l,desc:s}=t,I=Jn(t,ree),c=Se({width:r,height:i,x:0,y:0},a);return gee(o),G.jsxs(iee,Se({width:r,height:i,viewBox:`${c.x} ${c.y} ${c.width} ${c.height}`,ref:n},I,{children:[G.jsx("title",{children:l}),G.jsx("desc",{children:s}),g]}))});function hk(e){const{isReversed:t,gradientId:n,size:g,direction:r,scale:i,colorMap:a}=e;return G.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${g}px`,gradientUnits:"userSpaceOnUse",children:a.thresholds.map((o,l)=>{const s=i(o);if(s===void 0)return null;const I=t?1-s/g:s/g;return G.jsxs(_.Fragment,{children:[G.jsx("stop",{offset:I,stopColor:a.colors[l],stopOpacity:1}),G.jsx("stop",{offset:I,stopColor:a.colors[l+1],stopOpacity:1})]},o.toString()+l)})})}const oee=10;function mk(e){const{isReversed:t,gradientId:n,size:g,direction:r,scale:i,colorScale:a,colorMap:o}=e,l=[o.min??0,o.max??100],s=l.map(i).filter(u=>u!==void 0);if(s.length!==2)return null;const I=typeof l[0]=="number"?Ou(l[0],l[1]):nN(l[0],l[1]),c=Math.round((Math.max(...s)-Math.min(...s))/oee),d=`${l[0]}-${l[1]}-`;return G.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${g}px`,gradientUnits:"userSpaceOnUse",children:Array.from({length:c+1},(u,m)=>{const f=I(m/c);if(f===void 0)return null;const y=i(f);if(y===void 0)return null;const h=t?1-y/g:y/g,p=a(f);return p===null?null:G.jsx("stop",{offset:h,stopColor:p,stopOpacity:1},d+m)})})}function lee(){const{chartId:e}=_.useContext(tf);return _.useCallback((t,n)=>`${e}-gradient-${n}-${t}`,[e])}function see(){const{top:e,height:t,bottom:n,left:g,width:r,right:i}=Vd(),a=e+t+n,o=g+r+i,l=lee(),{xAxisIds:s,xAxis:I,yAxisIds:c,yAxis:d}=_.useContext(Xc);return G.jsxs("defs",{children:[c.filter(u=>d[u].colorMap!==void 0).map(u=>{const m=l(u,"y"),{colorMap:f,scale:y,colorScale:h,reverse:p}=d[u];return(f==null?void 0:f.type)==="piecewise"?G.jsx(hk,{isReversed:!p,scale:y,colorMap:f,size:a,gradientId:m,direction:"y"},m):(f==null?void 0:f.type)==="continuous"?G.jsx(mk,{isReversed:!p,scale:y,colorScale:h,colorMap:f,size:a,gradientId:m,direction:"y"},m):null}),s.filter(u=>I[u].colorMap!==void 0).map(u=>{const m=l(u,"x"),{colorMap:f,scale:y,reverse:h,colorScale:p}=I[u];return(f==null?void 0:f.type)==="piecewise"?G.jsx(hk,{isReversed:h,scale:y,colorMap:f,size:o,gradientId:m,direction:"x"},m):(f==null?void 0:f.type)==="continuous"?G.jsx(mk,{isReversed:h,scale:y,colorScale:p,colorMap:f,size:o,gradientId:m,direction:"x"},m):null})]})}function Wi(e){return function(){return e}}const Iee=Math.PI,Iy=2*Iee;function S3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cee(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Cee(e){return e}function uee(){var e=Cee,t=cee,n=null,g=Wi(0),r=Wi(Iy),i=Wi(0);function a(o){var l,s=(o=S3(o)).length,I,c,d=0,u=new Array(s),m=new Array(s),f=+g.apply(this,arguments),y=Math.min(Iy,Math.max(-Iy,r.apply(this,arguments)-f)),h,p=Math.min(Math.abs(y)/s,i.apply(this,arguments)),b=p*(y<0?-1:1),S;for(l=0;l<s;++l)(S=m[u[l]=l]=+e(o[l],l,o))>0&&(d+=S);for(t!=null?u.sort(function(X,W){return t(m[X],m[W])}):n!=null&&u.sort(function(X,W){return n(o[X],o[W])}),l=0,c=d?(y-s*b)/d:0;l<s;++l,f=h)I=u[l],S=m[I],h=f+(S>0?S*c:0)+b,m[I]={data:o[I],index:l,value:S,startAngle:f,endAngle:h,padAngle:p};return m}return a.value=function(o){return arguments.length?(e=typeof o=="function"?o:Wi(+o),a):e},a.sortValues=function(o){return arguments.length?(t=o,n=null,a):t},a.sort=function(o){return arguments.length?(n=o,t=null,a):n},a.startAngle=function(o){return arguments.length?(g=typeof o=="function"?o:Wi(+o),a):g},a.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Wi(+o),a):r},a.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Wi(+o),a):i},a}function Ac(e,t){if((a=e.length)>1)for(var n=1,g,r,i=e[t[0]],a,o=i.length;n<a;++n)for(r=i,i=e[t[n]],g=0;g<o;++g)i[g][1]+=i[g][0]=isNaN(r[g][1])?r[g][0]:r[g][1]}function hc(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function dee(e,t){return e[t]}function Aee(e){const t=[];return t.key=e,t}function v3(){var e=Wi([]),t=hc,n=Ac,g=dee;function r(i){var a=Array.from(e.apply(this,arguments),Aee),o,l=a.length,s=-1,I;for(const c of i)for(o=0,++s;o<l;++o)(a[o][s]=[0,+g(c,a[o].key,s,i)]).data=c;for(o=0,I=S3(t(a));o<l;++o)a[I[o]].index=o;return n(a,I),a}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Wi(Array.from(i)),r):e},r.value=function(i){return arguments.length?(g=typeof i=="function"?i:Wi(+i),r):g},r.order=function(i){return arguments.length?(t=i==null?hc:typeof i=="function"?i:Wi(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(n=i??Ac,r):n},r}function hee(e,t){if((g=e.length)>0){for(var n,g,r=0,i=e[0].length,a;r<i;++r){for(a=n=0;n<g;++n)a+=e[n][r][1]||0;if(a)for(n=0;n<g;++n)e[n][r][1]/=a}Ac(e,t)}}function mee(e,t){if((l=e.length)>0)for(var n,g=0,r,i,a,o,l,s=e[t[0]].length;g<s;++g)for(a=o=0,n=0;n<l;++n)(i=(r=e[t[n]][g])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function fee(e,t){if((r=e.length)>0){for(var n=0,g=e[t[0]],r,i=g.length;n<i;++n){for(var a=0,o=0;a<r;++a)o+=e[a][n][1]||0;g[n][1]+=g[n][0]=-o/2}Ac(e,t)}}function pee(e,t){if(!(!((a=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var n=0,g=1,r,i,a;g<i;++g){for(var o=0,l=0,s=0;o<a;++o){for(var I=e[t[o]],c=I[g][1]||0,d=I[g-1][1]||0,u=(c-d)/2,m=0;m<o;++m){var f=e[t[m]],y=f[g][1]||0,h=f[g-1][1]||0;u+=y-h}l+=c,s+=u*c}r[g-1][1]+=r[g-1][0]=n,l&&(n-=s/l)}r[g-1][1]+=r[g-1][0]=n,Ac(e,t)}}function W3(e){var t=e.map(bee);return hc(e).sort(function(n,g){return t[n]-t[g]})}function bee(e){for(var t=-1,n=0,g=e.length,r,i=-1/0;++t<g;)(r=+e[t][1])>i&&(i=r,n=t);return n}function V3(e){var t=e.map(k3);return hc(e).sort(function(n,g){return t[n]-t[g]})}function k3(e){for(var t=0,n=-1,g=e.length,r;++n<g;)(r=+e[n][1])&&(t+=r);return t}function yee(e){return V3(e).reverse()}function Zee(e){var t=e.length,n,g,r=e.map(k3),i=W3(e),a=0,o=0,l=[],s=[];for(n=0;n<t;++n)g=i[n],a<o?(a+=r[g],l.push(g)):(o+=r[g],s.push(g));return s.reverse().concat(l)}function Gee(e){return hc(e).reverse()}const cy={appearance:W3,ascending:V3,descending:yee,insideOut:Zee,none:hc,reverse:Gee},Cy={expand:hee,diverging:mee,none:Ac,silhouette:fee,wiggle:pee},R3=e=>{const{series:t,seriesOrder:n,defaultStrategy:g}=e,r=[],i={};return n.forEach(a=>{const{stack:o,stackOrder:l,stackOffset:s}=t[a];o===void 0?r.push({ids:[a],stackingOrder:cy.none,stackingOffset:Cy.none}):i[o]===void 0?(i[o]=r.length,r.push({ids:[a],stackingOrder:cy[l??(g==null?void 0:g.stackOrder)??"none"],stackingOffset:Cy[s??(g==null?void 0:g.stackOffset)??"diverging"]})):(r[i[o]].ids.push(a),l!==void 0&&(r[i[o]].stackingOrder=cy[l]),s!==void 0&&(r[i[o]].stackingOffset=Cy[s]))}),r};function BB(e,t){const n={};return Object.keys(e).forEach(g=>{n[g]=Se({},e[g],{valueFormatter:e[g].valueFormatter??t})}),n}const Bee=(e,t)=>{const{seriesOrder:n,series:g}=e,r=R3(e),i=t??[];n.forEach(o=>{const l=g[o].data;if(l!==void 0)l.forEach((s,I)=>{i.length<=I?i.push({[o]:s}):i[I][o]=s});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const a={};return r.forEach(o=>{const{ids:l,stackingOffset:s,stackingOrder:I}=o,c=v3().keys(l.map(d=>{const u=g[d].dataKey;return g[d].data===void 0&&u!==void 0?u:d})).value((d,u)=>d[u]??0).order(I).offset(s)(i);l.forEach((d,u)=>{const m=g[d].dataKey;a[d]=Se({layout:"vertical"},g[d],{data:m?t.map(f=>{const y=f[m];return typeof y!="number"?0:y}):g[d].data,stackedData:c[u].map(([f,y])=>[f,y])})})}),{seriesOrder:n,stackingGroups:r,series:BB(a,o=>o==null?"":o.toLocaleString())}},See={seriesType:"bar",seriesFormatter:Bee,colorProcessor:B3,xExtremumGetter:ZN,yExtremumGetter:GN},vee=({series:e,seriesOrder:t})=>({series:BB(e,n=>`(${n.x}, ${n.y})`),seriesOrder:t});function Wee(e,t,n,g){const r=g==null?void 0:g.colorScale,i=n==null?void 0:n.colorScale,a=t==null?void 0:t.colorScale;return r?o=>{var I,c;if(((I=g==null?void 0:g.data)==null?void 0:I[o])!==void 0){const d=r((c=g==null?void 0:g.data)==null?void 0:c[o]);if(d!==null)return d}const l=e.data[o],s=l===null?e.color:r(l.z);return s===null?e.color:s}:i?o=>{const l=e.data[o],s=l===null?e.color:i(l.y);return s===null?e.color:s}:a?o=>{const l=e.data[o],s=l===null?e.color:a(l.x);return s===null?e.color:s}:()=>e.color}const Vee={seriesType:"scatter",seriesFormatter:vee,colorProcessor:Wee,xExtremumGetter:BN,yExtremumGetter:SN},kee=(e,t)=>{const{seriesOrder:n,series:g}=e,r=R3(Se({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];n.forEach(o=>{const l=g[o].data;l!==void 0&&l.forEach((s,I)=>{i.length<=I?i.push({[o]:s}):i[I][o]=s})});const a={};return r.forEach(o=>{const{ids:l,stackingOrder:s,stackingOffset:I}=o,c=v3().keys(l.map(d=>{const u=g[d].dataKey;return g[d].data===void 0&&u!==void 0?u:d})).value((d,u)=>d[u]??0).order(s).offset(I)(i);l.forEach((d,u)=>{const m=g[d].dataKey;a[d]=Se({},g[d],{data:m?t.map(f=>{const y=f[m];return typeof y!="number"?null:y}):g[d].data,stackedData:c[u].map(([f,y])=>[f,y])})})}),{seriesOrder:n,stackingGroups:r,series:BB(a,o=>o==null?"":o.toLocaleString())}};function Ree(e,t,n){const g=n==null?void 0:n.colorScale,r=t==null?void 0:t.colorScale;return g?i=>{const a=e.data[i],o=a===null?e.color:g(a);return o===null?e.color:o}:r?i=>{var l;const a=(l=t.data)==null?void 0:l[i],o=a===null?e.color:r(a);return o===null?e.color:o}:()=>e.color}const wee={seriesType:"line",colorProcessor:Ree,seriesFormatter:kee,xExtremumGetter:vN,yExtremumGetter:WN};function Xee(e,t){return typeof e=="function"?e(t):e}const Jee=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,n)=>n-t;case"asc":return(t,n)=>t-n;default:return null}},Yee=e=>{const{seriesOrder:t,series:n}=e,g={};return t.forEach(r=>{const i=uee().startAngle(2*Math.PI*(n[r].startAngle??0)/360).endAngle(2*Math.PI*(n[r].endAngle??360)/360).padAngle(2*Math.PI*(n[r].paddingAngle??0)/360).sortValues(Jee(n[r].sortingValues??"none"))(n[r].data.map(a=>a.value));g[r]=Se({valueFormatter:a=>a.value.toLocaleString()},n[r],{data:n[r].data.map((a,o)=>Se({},a,{id:a.id??`auto-generated-pie-id-${r}-${o}`},i[o])).map((a,o)=>{var l,s;return Se({},a,{formattedValue:((s=(l=n[r]).valueFormatter)==null?void 0:s.call(l,Se({},a,{label:Xee(a.label,"arc")}),{dataIndex:o}))??a.value.toLocaleString()})})})}),{seriesOrder:t,series:g}};function Nee(e){return t=>e.data[t].color}const Hee={seriesType:"pie",colorProcessor:Nee,seriesFormatter:Yee},Fee=[See,Vee,wee,Hee];function xee(e){const t=e??Fee;return _.useMemo(()=>{const n={},g={},r={},i={};for(let a=0;a<t.length;a+=1){const o=t[a];n[o.seriesType]=o.seriesFormatter,g[o.seriesType]=o.colorProcessor,o.xExtremumGetter&&(r[o.seriesType]=o.xExtremumGetter),o.yExtremumGetter&&(i[o.seriesType]=o.yExtremumGetter)}return{seriesFormatters:n,colorProcessors:g,xExtremumGetters:r,yExtremumGetters:i}},[t])}const Kee=_.forwardRef(function(t,n){const{width:g,height:r,series:i,margin:a,xAxis:o,yAxis:l,colors:s,dataset:I,sx:c,title:d,desc:u,disableAxisListener:m,highlightedItem:f,onHighlightChange:y,plugins:h,children:p}=t,b=_.useRef(null),S=I3(n,b),{seriesFormatters:X}=xee(h);return tee(),G.jsx(mO,{width:g,height:r,margin:a,svgRef:b,children:G.jsx(o$,{series:i,colors:s,dataset:I,seriesFormatters:X,children:G.jsx(C$,{xAxis:o,yAxis:l,dataset:I,children:G.jsx(b$,{children:G.jsx(S$,{highlightedItem:f,onHighlightChange:y,children:G.jsxs(aee,{width:g,height:r,ref:S,sx:c,title:d,desc:u,disableAxisListener:m,children:[G.jsx(see,{}),p]})})})})})})});function w3(e){return Bf("MuiChartsAxis",e)}const ch=uB("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right"]),X3=Hf("g",{name:"MuiChartsAxis",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({[`& .${ch.tickLabel}`]:Se({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${ch.label}`]:Se({},e.typography.body1,{fill:(e.vars||e).palette.text.primary}),[`& .${ch.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${ch.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}}));function Lee(){return typeof window>"u"}const xl={widthCache:{},cacheCount:0},Eee=2e3,Mee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zee=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],fk="mui_measurement_span";function J3(e,t){return zee.indexOf(e)>=0&&t===+t?`${t}px`:t}function Y3(e){return e.split("").reduce((g,r)=>r===r.toUpperCase()?[...g,"-",r.toLowerCase()]:[...g,r],[]).join("")}const Uee=e=>Object.keys(e).sort().reduce((t,n)=>`${t}${Y3(n)}:${J3(n,e[n])};`,""),Tee=(e,t={})=>{if(e==null||Lee())return{width:0,height:0};const n=`${e}`,g=Uee(t),r=`${n}-${g}`;if(xl.widthCache[r])return xl.widthCache[r];try{let i=document.getElementById(fk);i===null&&(i=document.createElement("span"),i.setAttribute("id",fk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));const a=Se({},Mee,t);Object.keys(a).map(s=>(i.style[Y3(s)]=J3(s,a[s]),s)),i.textContent=n;const o=i.getBoundingClientRect(),l={width:o.width,height:o.height};return xl.widthCache[r]=l,xl.cacheCount+1>Eee?(xl.cacheCount=0,xl.widthCache={}):xl.cacheCount+=1,l}catch{return{width:0,height:0}}};function N3({style:e,needsComputation:t,text:n}){return n.split(`
`).map(g=>Se({text:g},t?Tee(g,e):{width:0,height:0}))}const Dee=["x","y","style","text","ownerState"],jee=["angle","textAnchor","dominantBaseline"];function t0(e){const{x:t,y:n,style:g,text:r}=e,i=Jn(e,Dee),a=g??{},{angle:o,textAnchor:l,dominantBaseline:s}=a,I=Jn(a,jee),c=_.useMemo(()=>N3({style:I,needsComputation:r.includes(`
`),text:r}),[I,r]);let d;switch(s){case"hanging":d=0;break;case"central":d=(c.length-1)/2*-c[0].height;break;default:d=(c.length-1)*-c[0].height;break}const u=[];return o&&u.push(`rotate(${o}, ${t}, ${n})`),u.length&&(i.transform=u.join(" ")),G.jsx("text",Se({},i,{x:t,y:n,textAnchor:l,dominantBaseline:s,style:I,children:c.map((m,f)=>G.jsx("tspan",{x:t,dy:`${f===0?d:c[0].height}px`,dominantBaseline:s,children:m.text},f))}))}const pk=5;function Qee(e,t,n=0){const g=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(g<pk)return e;if(g>90-pk)return t;const r=g*Math.PI/180,i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function Pee(e=!1){const[t,n]=_.useState(!1);return x_(()=>{e||n(!0)},[e]),_.useEffect(()=>{e&&n(!0)},[e]),t}const Oee=["scale","tickNumber","reverse"],_ee=e=>{const{classes:t,position:n}=e;return Nf({root:["root","directionX",n],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]},w3,t)};function qee(e,{tickLabelStyle:t,tickLabelInterval:n,reverse:g,isMounted:r}){const i=e.map(s=>{if(!r||s.formattedValue===void 0)return Se({},s,{width:0,height:0});const I=N3({style:t,needsComputation:!0,text:s.formattedValue});return Se({},s,{width:Math.max(...I.map(c=>c.width)),height:Math.max(I.length*I[0].height)})});if(typeof n=="function")return i.map((s,I)=>Se({},s,{skipLabel:!n(s.value,I)}));let a=0,o=0;const l=g?-1:1;return i.map((s,I)=>{const{width:c,offset:d,labelOffset:u,height:m}=s,f=Qee(c,m,t==null?void 0:t.angle),y=d+u,h=1.2;return a=y-l*(h*f)/2,I>0&&l*a<l*o?Se({},s,{skipLabel:!0}):(o=y+l*(h*f)/2,s)})}const $ee={position:"bottom",disableLine:!1,disableTicks:!1,tickSize:6};function ete(e){const{xAxisIds:t,xAxis:n}=_.useContext(Xc),g=n[e.axisId??t[0]],{scale:r,tickNumber:i,reverse:a}=g,o=Jn(g,Oee),l=Pee(),s=yB({props:Se({},o,e),name:"MuiChartsXAxis"}),I=Se({},$ee,s),{position:c,disableLine:d,disableTicks:u,tickLabelStyle:m,label:f,labelStyle:y,tickFontSize:h,labelFontSize:p,tickSize:b,valueFormatter:S,slots:X,slotProps:W,tickInterval:V,tickLabelInterval:R,tickPlacement:z,tickLabelPlacement:L}=I,k=bB(),v=_ee(Se({},I,{theme:k})),{left:K,top:x,width:q,height:Q}=Vd(),D=u?4:b,U=c==="bottom"?1:-1,P=(X==null?void 0:X.axisLine)??"line",N=(X==null?void 0:X.axisTick)??"line",le=(X==null?void 0:X.axisTickLabel)??t0,Y=(X==null?void 0:X.axisLabel)??t0,J=dc({elementType:le,externalSlotProps:W==null?void 0:W.axisTickLabel,additionalProps:{style:Se({textAnchor:"middle",dominantBaseline:c==="bottom"?"hanging":"auto",fontSize:h??12},m)},className:v.tickLabel,ownerState:{}}),O=kN({scale:r,tickNumber:i,valueFormatter:S,tickInterval:V,tickPlacement:z,tickLabelPlacement:L}),ee=qee(O,{tickLabelStyle:J.style,tickLabelInterval:R,reverse:a,isMounted:l}),te={x:K+q/2,y:U*(D+22)},se=dc({elementType:Y,externalSlotProps:W==null?void 0:W.axisLabel,additionalProps:{style:Se({fontSize:p??14,textAnchor:"middle",dominantBaseline:c==="bottom"?"hanging":"auto"},y)},ownerState:{}}),ce=r.domain();return ce.length===0||ce[0]===ce[1]?null:G.jsxs(X3,{transform:`translate(0, ${c==="bottom"?x+Q:x})`,className:v.root,children:[!d&&G.jsx(P,Se({x1:r.range()[0],x2:r.range()[1],className:v.line},W==null?void 0:W.axisLine)),ee.map(({formattedValue:re,offset:fe,labelOffset:be,skipLabel:ue},He)=>{const Le=be??0,pe=U*(D+3);return G.jsxs("g",{transform:`translate(${fe}, 0)`,className:v.tickContainer,children:[!u&&G.jsx(N,Se({y2:U*D,className:v.tick},W==null?void 0:W.axisTick)),re!==void 0&&!ue&&G.jsx(le,Se({x:Le,y:pe},J,{text:re.toString()}))]},He)}),f&&G.jsx("g",{className:v.label,children:G.jsx(Y,Se({},te,se,{text:f}))})]})}const tte=["scale","tickNumber"],nte=e=>{const{classes:t,position:n}=e;return Nf({root:["root","directionY",n],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]},w3,t)},gte={position:"left",disableLine:!1,disableTicks:!1,tickFontSize:12,labelFontSize:14,tickSize:6};function rte(e){const{yAxisIds:t,yAxis:n}=_.useContext(Xc),g=n[e.axisId??t[0]],{scale:r,tickNumber:i}=g,a=Jn(g,tte),o=yB({props:Se({},a,e),name:"MuiChartsYAxis"}),l=Se({},gte,o),{position:s,disableLine:I,disableTicks:c,tickFontSize:d,label:u,labelFontSize:m,labelStyle:f,tickLabelStyle:y,tickSize:h,valueFormatter:p,slots:b,slotProps:S,tickPlacement:X,tickLabelPlacement:W,tickInterval:V,tickLabelInterval:R}=l,z=bB(),L=nte(Se({},l,{theme:z})),{left:k,top:v,width:K,height:x}=Vd(),q=c?4:h,Q=kN({scale:r,tickNumber:i,valueFormatter:p,tickPlacement:X,tickLabelPlacement:W,tickInterval:V}),D=s==="right"?1:-1,U={x:D*(d+q+10),y:v+x/2},P=(b==null?void 0:b.axisLine)??"line",N=(b==null?void 0:b.axisTick)??"line",le=(b==null?void 0:b.axisTickLabel)??t0,Y=(b==null?void 0:b.axisLabel)??t0,J=dc({elementType:le,externalSlotProps:S==null?void 0:S.axisTickLabel,additionalProps:{style:Se({fontSize:d,textAnchor:s==="right"?"start":"end",dominantBaseline:"central"},y)},className:L.tickLabel,ownerState:{}}),O=dc({elementType:Y,externalSlotProps:S==null?void 0:S.axisLabel,additionalProps:{style:Se({fontSize:m,angle:D*90,textAnchor:"middle",dominantBaseline:"auto"},f)},ownerState:{}}),ee=r.domain();return ee.length===0||ee[0]===ee[1]?null:G.jsxs(X3,{transform:`translate(${s==="right"?k+K:k}, 0)`,className:L.root,children:[!I&&G.jsx(P,Se({y1:r.range()[0],y2:r.range()[1],className:L.line},S==null?void 0:S.axisLine)),Q.map(({formattedValue:te,offset:se,labelOffset:ce,value:re},fe)=>{const be=D*(q+2),ue=ce,He=typeof R=="function"&&!(R!=null&&R(re,fe));return G.jsxs("g",{transform:`translate(0, ${se})`,className:L.tickContainer,children:[!c&&G.jsx(N,Se({x2:D*q,className:L.tick},S==null?void 0:S.axisTick)),te!==void 0&&!He&&G.jsx(le,Se({x:be,y:ue,text:te.toString()},J))]},fe)}),u&&G.jsx("g",{className:L.label,children:G.jsx(Y,Se({},U,O,{text:u}))})]})}const uy=[{nombre:"Pecho",key:"pecho",unidad:"cm"},{nombre:"Grasa Porcentaje",key:"grasaPorcentaje",unidad:"%"},{nombre:"Abdomen",key:"abdomen",unidad:"cm"},{nombre:"Pierna",key:"pierna",unidad:"cm"},{nombre:"Peso",key:"pesoKg",unidad:"kg"},{nombre:"Grasa Visceral",key:"grasaVisceral",unidad:"%"},{nombre:"IMC",key:"imc",unidad:"kg/m²"}],ite=()=>{const[e,t]=_.useState(0),[n,g]=_.useState(null),r=sessionStorage.getItem("usuarioId");_.useEffect(()=>{(async()=>{try{const m=(await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/evolucion")).data.find(f=>f.idCliente===parseInt(r));m&&g(m)}catch(d){console.error("Error fetching data:",d)}})()},[r]);const i=c=>{c==="left"?t(d=>d===0?uy.length-1:d-1):c==="right"&&t(d=>d===uy.length-1?0:d+1)};if(!n)return G.jsx("div",{children:"Loading..."});const a=uy[e],o=Object.keys(n.fecha).map(c=>n.fecha[c]),l=Object.keys(n[a.key]).map(c=>n[a.key][c]),s=o.map((c,d)=>({fecha:new Date(c*1e3).toLocaleDateString(),valor:l[d]})),I=[{type:"bar",stack:"",yAxisKey:"valor",data:s.map(c=>c.valor)}];return G.jsxs("div",{className:"contenedor-grafico",children:[G.jsxs("div",{className:"titulo",children:[G.jsx("span",{className:"arrow-left",onClick:()=>i("left"),children:"←"}),G.jsx("h1",{children:a.nombre}),G.jsx("span",{className:"arrow-right",onClick:()=>i("right"),children:"→"})]}),G.jsx("div",{className:"contenedor-progreso",children:G.jsxs(Kee,{series:I,width:400,height:400,xAxis:[{id:"fechas",data:s.map(c=>{const[d,u,m]=c.fecha.split("/");return`${u}/${m}`}),scaleType:"band",valueFormatter:c=>c.toString()}],yAxis:[{id:"valor",scaleType:"linear"}],children:[G.jsx(eee,{}),G.jsx(ete,{label:"Fechas",position:"bottom",axisId:"fechas"}),G.jsx(rte,{label:`Resultados (${a.unidad})`,position:"left",axisId:"valor"})]})})]})};function ate(){return G.jsxs("div",{className:"contenedor-evaluacion",children:[G.jsx(zg,{titulo:"Evolución"}),G.jsxs("div",{className:"tarjeta-evaluacion",children:[G.jsx(uQ,{}),G.jsx(ite,{})]})]})}function ote(){return G.jsxs("div",{className:"contenedor-evaualcion-usuario",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(ate,{}),G.jsx(Hg,{})]})}const lte=({children:e})=>G.jsx("div",{className:"contenedor-botones",children:e}),ste=({children:e})=>G.jsx("div",{className:"contenedor-ejercicio",children:e}),Ite=({children:e})=>G.jsx("div",{className:"contenedor-info-ejercicio",children:e}),cte=()=>{const[e,t]=_.useState([]),[n,g]=_.useState([]),[r,i]=_.useState(null),[a,o]=_.useState(null),[l,s]=_.useState([]),I=Bl();_.useEffect(()=>{fetch("https://6668e270f53957909ff9675e.mockapi.io/rutinas").then(h=>h.json()).then(h=>t(h)),fetch("https://6668e270f53957909ff9675e.mockapi.io/ejercicios").then(h=>h.json()).then(h=>g(h))},[]);const c=h=>{const p=e.find(b=>b.nombre===h);return p?p.idEjercicio.ejercicios.map(b=>n.find(S=>S.id===b.id)):[]},d=()=>{a&&(s([...l,{grupo:r,ejercicio:a.nombre,descripcion:a.descripcion}]),o(null))},u=h=>{s(l.filter((p,b)=>b!==h))},m=()=>{if(l.length===0){alert("Debe agregar al menos un ejercicio antes de guardar la rutina.");return}const h=sessionStorage.getItem("usuarioId"),p=`Rutina de ${new Date().toLocaleDateString()}`,b=Date.now();fetch("https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idCliente:h,nombreRutina:p,fechaCreacion:b,ejercicios:l})}).then(X=>X.json()).then(()=>{I("/VerRutinas")})},f=h=>{i(h),o(null)},y=h=>{o(h)};return G.jsxs("div",{className:"contenedor-rutina",children:[G.jsx(zg,{titulo:"Generar mi propia rutina"}),G.jsx(k0,{titulo:"¿Qué vas a trabajar el día de hoy?"}),G.jsxs("div",{className:"aplicacion",children:[G.jsx("div",{className:"contenedor-botones",children:G.jsx(lte,{children:e.map(h=>G.jsx("button",{onClick:()=>f(h.nombre),children:h.nombre.charAt(0).toUpperCase()+h.nombre.slice(1)},h.id))})}),G.jsxs("div",{className:"contenido",children:[G.jsx(ste,{children:r&&c(r).map(h=>G.jsx("button",{onClick:()=>y(h),children:h.nombre},h.id))}),G.jsx(Ite,{children:a&&G.jsxs(G.Fragment,{children:[G.jsx("h3",{children:a.nombre}),G.jsx("p",{children:a.descripcion})]})}),G.jsxs("div",{className:"lista-ejercicios",children:[l.length>0&&G.jsx("h4",{children:"Ejercicios Seleccionados:"}),G.jsx("ul",{children:l.map((h,p)=>G.jsxs("li",{children:[h.ejercicio," -"," ",h.grupo.charAt(0).toUpperCase()+h.grupo.slice(1),G.jsx("button",{onClick:()=>u(p),children:"Eliminar"})]},p))})]}),G.jsxs("div",{className:"botones-accion",children:[G.jsx("button",{onClick:d,children:"Añadir Ejercicio"}),G.jsx("button",{onClick:m,children:"Guardar Rutina"})]})]})]})]})},Cte=()=>G.jsxs("div",{className:"generar-rutina-container",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(cte,{}),G.jsx(Hg,{})]}),dy=({onClick:e,children:t,className:n})=>G.jsx("button",{className:`boton ${n}`,onClick:e,children:t}),ute=({children:e})=>G.jsx("div",{className:"contenedor-botones",children:e}),dte=()=>{const[e,t]=_.useState([]),[n,g]=_.useState([]),[r,i]=_.useState([]),[a,o]=_.useState([]),l=Bl();_.useEffect(()=>{const u=async()=>{try{const y=await(await fetch("https://6668e270f53957909ff9675e.mockapi.io/rutinas")).json();i(y)}catch(f){console.error("Error al obtener las rutinas:",f)}},m=async()=>{try{const y=await(await fetch("https://6668e270f53957909ff9675e.mockapi.io/ejercicios")).json();o(y)}catch(f){console.error("Error al obtener los ejercicios:",f)}};u(),m()},[]);const s=u=>{e.includes(u)?t(e.filter(m=>m!==u)):t([...e,u])},I=async()=>{if(e.length===0){alert("Selecciona al menos un grupo muscular.");return}let u=0;const m=3;let f=!1;for(;u<m&&!f;)try{const y=await YJ([]),h=r.filter(W=>e.includes(W.nombre)),p=a.filter(W=>{const V=r.find(R=>R.idEjercicio.ejercicios.map(z=>z.id).includes(W.id));return e.includes(V==null?void 0:V.nombre)}),b=`${Mo.instruccionGenerarRutina}
          Rutinas: ${JSON.stringify(h)}
          Ejercicios: ${JSON.stringify(p)}
        `;console.log("Instrucción completa:",b);const S=await NJ(y,b,Mo.generationConfig);console.log("Respuesta cruda de Gemini:",S);let X;try{X=JSON.parse(S)}catch{const V=S.replace(/^```json\n|\n```$/g,"").replace(/'/g,'"');X=JSON.parse(V)}if(console.log("JSON válido:",X),X.rutina&&Array.isArray(X.rutina)){const W=X.rutina;W.forEach(R=>{R.grupo=R.grupo.toLowerCase()});const V=W.flatMap(R=>R.ejercicios.map(z=>{const L=a.find(k=>k.id===z);return{grupo:R.grupo,ejercicio:L?L.nombre:"Ejercicio no encontrado",descripcion:L?L.descripcion:""}}));g(V),f=!0}else console.error("Formato de respuesta de Gemini inválido")}catch(y){console.error(`Error al generar la rutina (intento ${u+1}):`,y),u++,u===m&&alert("Error al generar la rutina. Intente nuevamente.")}},c=()=>{if(n.length===0){alert("Debe agregar al menos un ejercicio antes de guardar la rutina.");return}const u=sessionStorage.getItem("usuarioId"),m=`Rutina de ${new Date().toLocaleDateString()}`,f=Date.now();fetch("https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idCliente:u,nombreRutina:m,fechaCreacion:f,ejercicios:n})}).then(h=>h.json()).then(()=>{l("/VerRutinas")})},d=u=>{const m=[...n];m.splice(u,1),g(m)};return G.jsxs("div",{className:"contenedor-rutina-ia",children:[G.jsx(zg,{titulo:"Generar mi propia rutina"}),G.jsx("h4",{className:"subtitulo-ia",children:"¿Qué vas a trabajar el día de hoy?"}),G.jsxs("div",{className:"aplicacion-ia",children:[G.jsx("div",{className:"contenedor-botones-ia",children:G.jsx(ute,{children:r.map(u=>G.jsx(dy,{onClick:()=>s(u.nombre),className:`boton-grupo ${e.includes(u.nombre)?"boton-grupo-seleccionado":""}`,children:u.nombre.charAt(0).toUpperCase()+u.nombre.slice(1)},u.id))})}),G.jsxs("div",{className:"lista-ejercicios-ia",children:[" ",n.length>0&&G.jsx("h4",{children:"Ejercicios Seleccionados:"}),G.jsx("ul",{children:n.map((u,m)=>G.jsxs("li",{children:[u.ejercicio," -"," ",u.grupo.charAt(0).toUpperCase()+u.grupo.slice(1),G.jsx("button",{onClick:()=>d(m),children:"Eliminar"})]},m))})]}),G.jsxs("div",{className:"botones-accion-ia",children:[G.jsx(dy,{onClick:I,children:"Generar Rutina con IA"}),G.jsx(dy,{onClick:c,children:"Guardar Rutina"})," "]})]})]})},Ate=()=>G.jsxs("div",{className:"generar-rutina-ia-container",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(dte,{}),G.jsx(Hg,{})]});function hte({checked:e,onChange:t}){return G.jsx("div",{className:"checkbox-container",children:G.jsx("input",{type:"checkbox",checked:e,onChange:t,className:"checkbox"})})}function mte({metas:e,handleCheck:t,handleDelete:n,handleEdit:g}){const[r,i]=_.useState(null),[a,o]=_.useState(""),[l,s]=_.useState(""),I=d=>{i(d.id),o(d.meta),s(new Date(d.fechaLimite).toISOString().substring(0,10))},c=d=>{g(d,a,l),i(null)};return G.jsx("div",{className:"contenedor-tabla-metas",children:G.jsxs("div",{className:"tabla-contenedor",children:[G.jsx("div",{className:"cabecera",children:"Metas"}),e.length>0?G.jsxs("table",{className:"tabla",children:[G.jsx("thead",{children:G.jsxs("tr",{children:[G.jsx("th",{children:"Objetivo"}),G.jsx("th",{children:"Fecha límite"}),G.jsx("th",{children:"Realizada"}),G.jsx("th",{children:"Acciones"})]})}),G.jsx("tbody",{children:e.map(d=>G.jsxs("tr",{children:[r===d.id?G.jsxs(G.Fragment,{children:[G.jsx("td",{children:G.jsx("input",{type:"text",value:a,onChange:u=>o(u.target.value)})}),G.jsx("td",{children:G.jsx("input",{type:"date",value:l,onChange:u=>s(u.target.value)})}),G.jsx("td",{children:G.jsx("button",{onClick:()=>c(d.id),children:"Guardar"})})]}):G.jsxs(G.Fragment,{children:[G.jsx("td",{children:d.meta}),G.jsx("td",{children:new Date(d.fechaLimite).toLocaleDateString()}),G.jsx("td",{children:G.jsx(hte,{checked:d.realizado,onChange:()=>t(d.id,!d.realizado)})})]}),G.jsxs("td",{children:[G.jsx("button",{onClick:()=>n(d.id),children:"Eliminar"}),G.jsx("button",{onClick:()=>I(d),children:"Editar"})]})]},d.id))})]}):G.jsx("div",{className:"no-metas",children:"No hay metas"})]})})}function fte({porcentaje:e}){return G.jsx("div",{className:"barra-progreso",children:G.jsx("div",{className:"barra-progreso-lleno",style:{width:`${e}%`},children:G.jsxs("span",{className:"barra-progreso-texto",children:[e.toFixed(1),"%"]})})})}function pte({onCreate:e}){const[t,n]=_.useState(""),[g,r]=_.useState(""),i=a=>{a.preventDefault(),t&&g&&(e(t,g),n(""),r(""))};return G.jsx("div",{className:"crear-meta-container",children:G.jsxs("form",{onSubmit:i,className:"crear-meta-form",children:[G.jsx("h4",{children:"Meta a cumplir"}),G.jsx("input",{type:"text",placeholder:"Meta",value:t,onChange:a=>n(a.target.value),required:!0}),G.jsx("h4",{children:"Fecha límite para la tarea"}),G.jsx("input",{type:"date",value:g,onChange:a=>r(a.target.value),required:!0}),G.jsx("button",{type:"submit",children:"Crear meta"})]})})}function bte(){const[e,t]=_.useState([]),n=sessionStorage.getItem("usuarioId");_.useEffect(()=>{(async()=>{try{const d=(await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/metas")).data.filter(u=>u.idUsuario===n);t(d)}catch(c){console.error("Error fetching metas:",c)}})()},[n]);const g=async(I,c)=>{try{await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/metas/${I}`,{realizado:c}),t(e.map(d=>d.id===I?{...d,realizado:c}:d))}catch(d){console.error("Error updating meta:",d)}},r=async I=>{try{await Zt.delete(`https://6668e270f53957909ff9675e.mockapi.io/metas/${I}`),t(e.filter(c=>c.id!==I))}catch(c){console.error("Error deleting meta:",c)}},i=async(I,c,d)=>{try{await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/metas/${I}`,{meta:c,fechaLimite:new Date(d).getTime()}),t(e.map(u=>u.id===I?{...u,meta:c,fechaLimite:d}:u))}catch(u){console.error("Error editing meta:",u)}},a=async(I,c)=>{try{const d=await Zt.post("https://6668e270f53957909ff9675e.mockapi.io/metas",{idUsuario:n,meta:I,fechaInicio:Date.now(),fechaLimite:new Date(c).getTime(),realizado:!1});t([...e,d.data])}catch(d){console.error("Error creating meta:",d)}},o=e.length,s=e.filter(I=>I.realizado).length/o*100||0;return G.jsxs("div",{className:"contenedor-metas-pendientes",children:[G.jsx(zg,{titulo:"Metas actuales"}),G.jsxs("div",{className:"contenedor-meta-pendiente",children:[G.jsx(mte,{metas:e,handleCheck:g,handleDelete:r,handleEdit:i}),G.jsx(fte,{porcentaje:s})]}),G.jsx(zg,{titulo:"Crear una nueva meta"}),G.jsx(pte,{onCreate:a})]})}function yte(){return G.jsxs("div",{className:"contenedor-metas",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(bte,{}),G.jsx(Hg,{})]})}const Zte=({src:e})=>G.jsx("div",{className:"contenedor-imagen-perfil",children:e?G.jsx("img",{src:e,alt:"Perfil",className:"imagen-perfil"}):G.jsx("div",{children:"Cargando imagen..."})}),Kl=({etiqueta:e,valor:t})=>G.jsx("div",{className:"contenedor-informacion",children:G.jsxs("label",{children:[e,": ",t]})}),Gte=()=>G.jsxs("div",{children:[G.jsx("button",{children:"Ver historial de evaluaciones"}),G.jsx(Qn,{to:"/RegistroEvaluacion",children:G.jsx("button",{children:"Registrar evaluación"})})]}),Bte=({formData:e,mensaje:t,handleChange:n,handleSave:g,handleCancel:r})=>G.jsxs(G.Fragment,{children:[t&&G.jsx("p",{className:"mensaje-error",children:t}),G.jsx("h4",{children:"Foto de perfil"}),G.jsx("input",{type:"file",accept:"image/*",onChange:i=>n({target:{name:"foto",value:i.target.files[0]}})}),G.jsx("h4",{children:"Nombre"}),G.jsx("input",{type:"text",name:"nombre",placeholder:"Ingresa tu nombre",value:e.nombre,onChange:n}),G.jsx("h4",{children:"Fecha de nacimiento"}),G.jsx("input",{type:"date",name:"fechaNacimiento",placeholder:"Ingresa tu fecha de nacimiento",value:e.fechaNacimiento,onChange:n}),G.jsx("h4",{children:"Dirección"}),G.jsx("input",{type:"text",name:"direccion",placeholder:"Ingresa tu dirección",value:e.direccion,onChange:n}),G.jsx("h4",{children:"Número de celular"}),G.jsx("input",{type:"tel",name:"numeroCelular",placeholder:"Ingresa tu número de celular",value:e.numeroCelular,onChange:n}),G.jsx("h4",{children:"Email"}),G.jsx("input",{type:"email",name:"email",placeholder:"Ingresa tu correo electrónico",value:e.email,onChange:n}),G.jsx("h4",{children:"CI"}),G.jsx("input",{type:"text",name:"ci",placeholder:"Ingresa tu CI",value:e.ci,onChange:n}),G.jsx("h4",{children:"Género"}),G.jsxs("select",{name:"sexo",value:e.sexo,onChange:n,placeholder:"Ingresa tu género",children:[G.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Selecciona una opción"}),G.jsx("option",{value:"Masculino",children:"Masculino"}),G.jsx("option",{value:"Femenino",children:"Femenino"}),G.jsx("option",{value:"Otro",children:"Otro"})]}),G.jsx("button",{onClick:g,children:"Guardar"}),G.jsx("button",{onClick:r,children:"Cancelar"})]}),Ste=({perfil:e,convertirFecha:t,handleEdit:n})=>G.jsxs(G.Fragment,{children:[G.jsx(Kl,{etiqueta:"Nombre cliente",valor:e.nombre}),G.jsx(Kl,{etiqueta:"Fecha de nacimiento",valor:t(e.fechaNacimiento)}),G.jsx(Kl,{etiqueta:"Dirección",valor:e.direccion}),G.jsx(Kl,{etiqueta:"Número de celular",valor:e.numeroCelular}),G.jsx(Kl,{etiqueta:"Correo electrónico",valor:e.email}),G.jsx(Kl,{etiqueta:"CI",valor:e.ci}),G.jsx(Kl,{etiqueta:"Sexo",valor:e.sexo}),G.jsx("button",{onClick:n,children:"Editar"})]});//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var H3;function De(){return H3.apply(null,arguments)}function vte(e){H3=e}function Ki(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function is(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function SB(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(xt(e,t))return!1;return!0}function $g(e){return e===void 0}function so(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Yd(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function F3(e,t){var n=[],g,r=e.length;for(g=0;g<r;++g)n.push(t(e[g],g));return n}function qo(e,t){for(var n in t)xt(t,n)&&(e[n]=t[n]);return xt(t,"toString")&&(e.toString=t.toString),xt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function ya(e,t,n,g){return a9(e,t,n,g,!0).utc()}function Wte(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Bt(e){return e._pf==null&&(e._pf=Wte()),e._pf}var S2;Array.prototype.some?S2=Array.prototype.some:S2=function(e){var t=Object(this),n=t.length>>>0,g;for(g=0;g<n;g++)if(g in t&&e.call(this,t[g],g,t))return!0;return!1};function vB(e){var t=null,n=!1,g=e._d&&!isNaN(e._d.getTime());if(g&&(t=Bt(e),n=S2.call(t.parsedDateParts,function(r){return r!=null}),g=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(g=g&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=g;else return g;return e._isValid}function Ff(e){var t=ya(NaN);return e!=null?qo(Bt(t),e):Bt(t).userInvalidated=!0,t}var bk=De.momentProperties=[],Ay=!1;function WB(e,t){var n,g,r,i=bk.length;if($g(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),$g(t._i)||(e._i=t._i),$g(t._f)||(e._f=t._f),$g(t._l)||(e._l=t._l),$g(t._strict)||(e._strict=t._strict),$g(t._tzm)||(e._tzm=t._tzm),$g(t._isUTC)||(e._isUTC=t._isUTC),$g(t._offset)||(e._offset=t._offset),$g(t._pf)||(e._pf=Bt(t)),$g(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)g=bk[n],r=t[g],$g(r)||(e[g]=r);return e}function Nd(e){WB(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Ay===!1&&(Ay=!0,De.updateOffset(this),Ay=!1)}function Li(e){return e instanceof Nd||e!=null&&e._isAMomentObject!=null}function x3(e){De.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function ii(e,t){var n=!0;return qo(function(){if(De.deprecationHandler!=null&&De.deprecationHandler(null,e),n){var g=[],r,i,a,o=arguments.length;for(i=0;i<o;i++){if(r="",typeof arguments[i]=="object"){r+=`
[`+i+"] ";for(a in arguments[0])xt(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[i];g.push(r)}x3(e+`
Arguments: `+Array.prototype.slice.call(g).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var yk={};function K3(e,t){De.deprecationHandler!=null&&De.deprecationHandler(e,t),yk[e]||(x3(t),yk[e]=!0)}De.suppressDeprecationWarnings=!1;De.deprecationHandler=null;function Za(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Vte(e){var t,n;for(n in e)xt(e,n)&&(t=e[n],Za(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function v2(e,t){var n=qo({},e),g;for(g in t)xt(t,g)&&(is(e[g])&&is(t[g])?(n[g]={},qo(n[g],e[g]),qo(n[g],t[g])):t[g]!=null?n[g]=t[g]:delete n[g]);for(g in e)xt(e,g)&&!xt(t,g)&&is(e[g])&&(n[g]=qo({},n[g]));return n}function VB(e){e!=null&&this.set(e)}var W2;Object.keys?W2=Object.keys:W2=function(e){var t,n=[];for(t in e)xt(e,t)&&n.push(t);return n};var kte={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Rte(e,t,n){var g=this._calendar[e]||this._calendar.sameElse;return Za(g)?g.call(t,n):g}function pa(e,t,n){var g=""+Math.abs(e),r=t-g.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+g}var kB=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ch=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hy={},OI={};function gt(e,t,n,g){var r=g;typeof g=="string"&&(r=function(){return this[g]()}),e&&(OI[e]=r),t&&(OI[t[0]]=function(){return pa(r.apply(this,arguments),t[1],t[2])}),n&&(OI[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function wte(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Xte(e){var t=e.match(kB),n,g;for(n=0,g=t.length;n<g;n++)OI[t[n]]?t[n]=OI[t[n]]:t[n]=wte(t[n]);return function(r){var i="",a;for(a=0;a<g;a++)i+=Za(t[a])?t[a].call(r,e):t[a];return i}}function Dh(e,t){return e.isValid()?(t=L3(t,e.localeData()),hy[t]=hy[t]||Xte(t),hy[t](e)):e.localeData().invalidDate()}function L3(e,t){var n=5;function g(r){return t.longDateFormat(r)||r}for(Ch.lastIndex=0;n>=0&&Ch.test(e);)e=e.replace(Ch,g),Ch.lastIndex=0,n-=1;return e}var Jte={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Yte(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(kB).map(function(g){return g==="MMMM"||g==="MM"||g==="DD"||g==="dddd"?g.slice(1):g}).join(""),this._longDateFormat[e])}var Nte="Invalid date";function Hte(){return this._invalidDate}var Fte="%d",xte=/\d{1,2}/;function Kte(e){return this._ordinal.replace("%d",e)}var Lte={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ete(e,t,n,g){var r=this._relativeTime[n];return Za(r)?r(e,t,n,g):r.replace(/%d/i,e)}function Mte(e,t){var n=this._relativeTime[e>0?"future":"past"];return Za(n)?n(t):n.replace(/%s/i,t)}var Zk={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ai(e){return typeof e=="string"?Zk[e]||Zk[e.toLowerCase()]:void 0}function RB(e){var t={},n,g;for(g in e)xt(e,g)&&(n=ai(g),n&&(t[n]=e[g]));return t}var zte={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ute(e){var t=[],n;for(n in e)xt(e,n)&&t.push({unit:n,priority:zte[n]});return t.sort(function(g,r){return g.priority-r.priority}),t}var E3=/\d/,wr=/\d\d/,M3=/\d{3}/,wB=/\d{4}/,xf=/[+-]?\d{6}/,dn=/\d\d?/,z3=/\d\d\d\d?/,U3=/\d\d\d\d\d\d?/,Kf=/\d{1,3}/,XB=/\d{1,4}/,Lf=/[+-]?\d{1,6}/,Jc=/\d+/,Ef=/[+-]?\d+/,Tte=/Z|[+-]\d\d:?\d\d/gi,Mf=/Z|[+-]\d\d(?::?\d\d)?/gi,Dte=/[+-]?\d+(\.\d{1,3})?/,Hd=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Yc=/^[1-9]\d?/,JB=/^([1-9]\d|\d)/,n0;n0={};function Oe(e,t,n){n0[e]=Za(t)?t:function(g,r){return g&&n?n:t}}function jte(e,t){return xt(n0,e)?n0[e](t._strict,t._locale):new RegExp(Qte(e))}function Qte(e){return Pa(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,g,r,i){return n||g||r||i}))}function Pa(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Tr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function wt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Tr(t)),n}var V2={};function qt(e,t){var n,g=t,r;for(typeof e=="string"&&(e=[e]),so(t)&&(g=function(i,a){a[t]=wt(i)}),r=e.length,n=0;n<r;n++)V2[e[n]]=g}function Fd(e,t){qt(e,function(n,g,r,i){r._w=r._w||{},t(n,r._w,r,i)})}function Pte(e,t,n){t!=null&&xt(V2,e)&&V2[e](t,n._a,n,e)}function zf(e){return e%4===0&&e%100!==0||e%400===0}var Xg=0,Da=1,sa=2,ng=3,Yi=4,ja=5,$l=6,Ote=7,_te=8;gt("Y",0,0,function(){var e=this.year();return e<=9999?pa(e,4):"+"+e});gt(0,["YY",2],0,function(){return this.year()%100});gt(0,["YYYY",4],0,"year");gt(0,["YYYYY",5],0,"year");gt(0,["YYYYYY",6,!0],0,"year");Oe("Y",Ef);Oe("YY",dn,wr);Oe("YYYY",XB,wB);Oe("YYYYY",Lf,xf);Oe("YYYYYY",Lf,xf);qt(["YYYYY","YYYYYY"],Xg);qt("YYYY",function(e,t){t[Xg]=e.length===2?De.parseTwoDigitYear(e):wt(e)});qt("YY",function(e,t){t[Xg]=De.parseTwoDigitYear(e)});qt("Y",function(e,t){t[Xg]=parseInt(e,10)});function au(e){return zf(e)?366:365}De.parseTwoDigitYear=function(e){return wt(e)+(wt(e)>68?1900:2e3)};var T3=Nc("FullYear",!0);function qte(){return zf(this.year())}function Nc(e,t){return function(n){return n!=null?(D3(this,e,n),De.updateOffset(this,t),this):gd(this,e)}}function gd(e,t){if(!e.isValid())return NaN;var n=e._d,g=e._isUTC;switch(t){case"Milliseconds":return g?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return g?n.getUTCSeconds():n.getSeconds();case"Minutes":return g?n.getUTCMinutes():n.getMinutes();case"Hours":return g?n.getUTCHours():n.getHours();case"Date":return g?n.getUTCDate():n.getDate();case"Day":return g?n.getUTCDay():n.getDay();case"Month":return g?n.getUTCMonth():n.getMonth();case"FullYear":return g?n.getUTCFullYear():n.getFullYear();default:return NaN}}function D3(e,t,n){var g,r,i,a,o;if(!(!e.isValid()||isNaN(n))){switch(g=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?g.setUTCMilliseconds(n):g.setMilliseconds(n));case"Seconds":return void(r?g.setUTCSeconds(n):g.setSeconds(n));case"Minutes":return void(r?g.setUTCMinutes(n):g.setMinutes(n));case"Hours":return void(r?g.setUTCHours(n):g.setHours(n));case"Date":return void(r?g.setUTCDate(n):g.setDate(n));case"FullYear":break;default:return}i=n,a=e.month(),o=e.date(),o=o===29&&a===1&&!zf(i)?28:o,r?g.setUTCFullYear(i,a,o):g.setFullYear(i,a,o)}}function $te(e){return e=ai(e),Za(this[e])?this[e]():this}function ene(e,t){if(typeof e=="object"){e=RB(e);var n=Ute(e),g,r=n.length;for(g=0;g<r;g++)this[n[g].unit](e[n[g].unit])}else if(e=ai(e),Za(this[e]))return this[e](t);return this}function tne(e,t){return(e%t+t)%t}var Hn;Array.prototype.indexOf?Hn=Array.prototype.indexOf:Hn=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function YB(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tne(t,12);return e+=(t-n)/12,n===1?zf(e)?29:28:31-n%7%2}gt("M",["MM",2],"Mo",function(){return this.month()+1});gt("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});gt("MMMM",0,0,function(e){return this.localeData().months(this,e)});Oe("M",dn,Yc);Oe("MM",dn,wr);Oe("MMM",function(e,t){return t.monthsShortRegex(e)});Oe("MMMM",function(e,t){return t.monthsRegex(e)});qt(["M","MM"],function(e,t){t[Da]=wt(e)-1});qt(["MMM","MMMM"],function(e,t,n,g){var r=n._locale.monthsParse(e,g,n._strict);r!=null?t[Da]=r:Bt(n).invalidMonth=e});var nne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),j3="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Q3=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,gne=Hd,rne=Hd;function ine(e,t){return e?Ki(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Q3).test(t)?"format":"standalone"][e.month()]:Ki(this._months)?this._months:this._months.standalone}function ane(e,t){return e?Ki(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Q3.test(t)?"format":"standalone"][e.month()]:Ki(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function one(e,t,n){var g,r,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],g=0;g<12;++g)i=ya([2e3,g]),this._shortMonthsParse[g]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[g]=this.months(i,"").toLocaleLowerCase();return n?t==="MMM"?(r=Hn.call(this._shortMonthsParse,a),r!==-1?r:null):(r=Hn.call(this._longMonthsParse,a),r!==-1?r:null):t==="MMM"?(r=Hn.call(this._shortMonthsParse,a),r!==-1?r:(r=Hn.call(this._longMonthsParse,a),r!==-1?r:null)):(r=Hn.call(this._longMonthsParse,a),r!==-1?r:(r=Hn.call(this._shortMonthsParse,a),r!==-1?r:null))}function lne(e,t,n){var g,r,i;if(this._monthsParseExact)return one.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),g=0;g<12;g++){if(r=ya([2e3,g]),n&&!this._longMonthsParse[g]&&(this._longMonthsParse[g]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!n&&!this._monthsParse[g]&&(i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[g]=new RegExp(i.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[g].test(e))return g;if(n&&t==="MMM"&&this._shortMonthsParse[g].test(e))return g;if(!n&&this._monthsParse[g].test(e))return g}}function P3(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=wt(t);else if(t=e.localeData().monthsParse(t),!so(t))return e}var n=t,g=e.date();return g=g<29?g:Math.min(g,YB(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,g):e._d.setMonth(n,g),e}function O3(e){return e!=null?(P3(this,e),De.updateOffset(this,!0),this):gd(this,"Month")}function sne(){return YB(this.year(),this.month())}function Ine(e){return this._monthsParseExact?(xt(this,"_monthsRegex")||_3.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(xt(this,"_monthsShortRegex")||(this._monthsShortRegex=gne),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function cne(e){return this._monthsParseExact?(xt(this,"_monthsRegex")||_3.call(this),e?this._monthsStrictRegex:this._monthsRegex):(xt(this,"_monthsRegex")||(this._monthsRegex=rne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _3(){function e(l,s){return s.length-l.length}var t=[],n=[],g=[],r,i,a,o;for(r=0;r<12;r++)i=ya([2e3,r]),a=Pa(this.monthsShort(i,"")),o=Pa(this.months(i,"")),t.push(a),n.push(o),g.push(o),g.push(a);t.sort(e),n.sort(e),g.sort(e),this._monthsRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Cne(e,t,n,g,r,i,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,g,r,i,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,g,r,i,a),o}function rd(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function g0(e,t,n){var g=7+t-n,r=(7+rd(e,0,g).getUTCDay()-t)%7;return-r+g-1}function q3(e,t,n,g,r){var i=(7+n-g)%7,a=g0(e,g,r),o=1+7*(t-1)+i+a,l,s;return o<=0?(l=e-1,s=au(l)+o):o>au(e)?(l=e+1,s=o-au(e)):(l=e,s=o),{year:l,dayOfYear:s}}function id(e,t,n){var g=g0(e.year(),t,n),r=Math.floor((e.dayOfYear()-g-1)/7)+1,i,a;return r<1?(a=e.year()-1,i=r+Oa(a,t,n)):r>Oa(e.year(),t,n)?(i=r-Oa(e.year(),t,n),a=e.year()+1):(a=e.year(),i=r),{week:i,year:a}}function Oa(e,t,n){var g=g0(e,t,n),r=g0(e+1,t,n);return(au(e)-g+r)/7}gt("w",["ww",2],"wo","week");gt("W",["WW",2],"Wo","isoWeek");Oe("w",dn,Yc);Oe("ww",dn,wr);Oe("W",dn,Yc);Oe("WW",dn,wr);Fd(["w","ww","W","WW"],function(e,t,n,g){t[g.substr(0,1)]=wt(e)});function une(e){return id(e,this._week.dow,this._week.doy).week}var dne={dow:0,doy:6};function Ane(){return this._week.dow}function hne(){return this._week.doy}function mne(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function fne(e){var t=id(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}gt("d",0,"do","day");gt("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});gt("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});gt("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});gt("e",0,0,"weekday");gt("E",0,0,"isoWeekday");Oe("d",dn);Oe("e",dn);Oe("E",dn);Oe("dd",function(e,t){return t.weekdaysMinRegex(e)});Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});Oe("dddd",function(e,t){return t.weekdaysRegex(e)});Fd(["dd","ddd","dddd"],function(e,t,n,g){var r=n._locale.weekdaysParse(e,g,n._strict);r!=null?t.d=r:Bt(n).invalidWeekday=e});Fd(["d","e","E"],function(e,t,n,g){t[g]=wt(e)});function pne(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function bne(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function NB(e,t){return e.slice(t,7).concat(e.slice(0,t))}var yne="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$3="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Zne="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Gne=Hd,Bne=Hd,Sne=Hd;function vne(e,t){var n=Ki(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?NB(n,this._week.dow):e?n[e.day()]:n}function Wne(e){return e===!0?NB(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Vne(e){return e===!0?NB(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function kne(e,t,n){var g,r,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],g=0;g<7;++g)i=ya([2e3,1]).day(g),this._minWeekdaysParse[g]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[g]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[g]=this.weekdays(i,"").toLocaleLowerCase();return n?t==="dddd"?(r=Hn.call(this._weekdaysParse,a),r!==-1?r:null):t==="ddd"?(r=Hn.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=Hn.call(this._minWeekdaysParse,a),r!==-1?r:null):t==="dddd"?(r=Hn.call(this._weekdaysParse,a),r!==-1||(r=Hn.call(this._shortWeekdaysParse,a),r!==-1)?r:(r=Hn.call(this._minWeekdaysParse,a),r!==-1?r:null)):t==="ddd"?(r=Hn.call(this._shortWeekdaysParse,a),r!==-1||(r=Hn.call(this._weekdaysParse,a),r!==-1)?r:(r=Hn.call(this._minWeekdaysParse,a),r!==-1?r:null)):(r=Hn.call(this._minWeekdaysParse,a),r!==-1||(r=Hn.call(this._weekdaysParse,a),r!==-1)?r:(r=Hn.call(this._shortWeekdaysParse,a),r!==-1?r:null))}function Rne(e,t,n){var g,r,i;if(this._weekdaysParseExact)return kne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),g=0;g<7;g++){if(r=ya([2e3,1]).day(g),n&&!this._fullWeekdaysParse[g]&&(this._fullWeekdaysParse[g]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[g]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[g]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[g]||(i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[g]=new RegExp(i.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[g].test(e))return g;if(n&&t==="ddd"&&this._shortWeekdaysParse[g].test(e))return g;if(n&&t==="dd"&&this._minWeekdaysParse[g].test(e))return g;if(!n&&this._weekdaysParse[g].test(e))return g}}function wne(e){if(!this.isValid())return e!=null?this:NaN;var t=gd(this,"Day");return e!=null?(e=pne(e,this.localeData()),this.add(e-t,"d")):t}function Xne(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Jne(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=bne(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Yne(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||HB.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(xt(this,"_weekdaysRegex")||(this._weekdaysRegex=Gne),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Nne(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||HB.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(xt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bne),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Hne(e){return this._weekdaysParseExact?(xt(this,"_weekdaysRegex")||HB.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(xt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Sne),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function HB(){function e(I,c){return c.length-I.length}var t=[],n=[],g=[],r=[],i,a,o,l,s;for(i=0;i<7;i++)a=ya([2e3,1]).day(i),o=Pa(this.weekdaysMin(a,"")),l=Pa(this.weekdaysShort(a,"")),s=Pa(this.weekdays(a,"")),t.push(o),n.push(l),g.push(s),r.push(o),r.push(l),r.push(s);t.sort(e),n.sort(e),g.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function FB(){return this.hours()%12||12}function Fne(){return this.hours()||24}gt("H",["HH",2],0,"hour");gt("h",["hh",2],0,FB);gt("k",["kk",2],0,Fne);gt("hmm",0,0,function(){return""+FB.apply(this)+pa(this.minutes(),2)});gt("hmmss",0,0,function(){return""+FB.apply(this)+pa(this.minutes(),2)+pa(this.seconds(),2)});gt("Hmm",0,0,function(){return""+this.hours()+pa(this.minutes(),2)});gt("Hmmss",0,0,function(){return""+this.hours()+pa(this.minutes(),2)+pa(this.seconds(),2)});function e9(e,t){gt(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}e9("a",!0);e9("A",!1);function t9(e,t){return t._meridiemParse}Oe("a",t9);Oe("A",t9);Oe("H",dn,JB);Oe("h",dn,Yc);Oe("k",dn,Yc);Oe("HH",dn,wr);Oe("hh",dn,wr);Oe("kk",dn,wr);Oe("hmm",z3);Oe("hmmss",U3);Oe("Hmm",z3);Oe("Hmmss",U3);qt(["H","HH"],ng);qt(["k","kk"],function(e,t,n){var g=wt(e);t[ng]=g===24?0:g});qt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});qt(["h","hh"],function(e,t,n){t[ng]=wt(e),Bt(n).bigHour=!0});qt("hmm",function(e,t,n){var g=e.length-2;t[ng]=wt(e.substr(0,g)),t[Yi]=wt(e.substr(g)),Bt(n).bigHour=!0});qt("hmmss",function(e,t,n){var g=e.length-4,r=e.length-2;t[ng]=wt(e.substr(0,g)),t[Yi]=wt(e.substr(g,2)),t[ja]=wt(e.substr(r)),Bt(n).bigHour=!0});qt("Hmm",function(e,t,n){var g=e.length-2;t[ng]=wt(e.substr(0,g)),t[Yi]=wt(e.substr(g))});qt("Hmmss",function(e,t,n){var g=e.length-4,r=e.length-2;t[ng]=wt(e.substr(0,g)),t[Yi]=wt(e.substr(g,2)),t[ja]=wt(e.substr(r))});function xne(e){return(e+"").toLowerCase().charAt(0)==="p"}var Kne=/[ap]\.?m?\.?/i,Lne=Nc("Hours",!0);function Ene(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var n9={calendar:kte,longDateFormat:Jte,invalidDate:Nte,ordinal:Fte,dayOfMonthOrdinalParse:xte,relativeTime:Lte,months:nne,monthsShort:j3,week:dne,weekdays:yne,weekdaysMin:Zne,weekdaysShort:$3,meridiemParse:Kne},mn={},RC={},ad;function Mne(e,t){var n,g=Math.min(e.length,t.length);for(n=0;n<g;n+=1)if(e[n]!==t[n])return n;return g}function Gk(e){return e&&e.toLowerCase().replace("_","-")}function zne(e){for(var t=0,n,g,r,i;t<e.length;){for(i=Gk(e[t]).split("-"),n=i.length,g=Gk(e[t+1]),g=g?g.split("-"):null;n>0;){if(r=Uf(i.slice(0,n).join("-")),r)return r;if(g&&g.length>=n&&Mne(i,g)>=n-1)break;n--}t++}return ad}function Une(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Uf(e){var t=null,n;if(mn[e]===void 0&&typeof module<"u"&&module&&module.exports&&Une(e))try{t=ad._abbr,n=require,n("./locale/"+e),cl(t)}catch{mn[e]=null}return mn[e]}function cl(e,t){var n;return e&&($g(t)?n=uo(e):n=xB(e,t),n?ad=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ad._abbr}function xB(e,t){if(t!==null){var n,g=n9;if(t.abbr=e,mn[e]!=null)K3("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),g=mn[e]._config;else if(t.parentLocale!=null)if(mn[t.parentLocale]!=null)g=mn[t.parentLocale]._config;else if(n=Uf(t.parentLocale),n!=null)g=n._config;else return RC[t.parentLocale]||(RC[t.parentLocale]=[]),RC[t.parentLocale].push({name:e,config:t}),null;return mn[e]=new VB(v2(g,t)),RC[e]&&RC[e].forEach(function(r){xB(r.name,r.config)}),cl(e),mn[e]}else return delete mn[e],null}function Tne(e,t){if(t!=null){var n,g,r=n9;mn[e]!=null&&mn[e].parentLocale!=null?mn[e].set(v2(mn[e]._config,t)):(g=Uf(e),g!=null&&(r=g._config),t=v2(r,t),g==null&&(t.abbr=e),n=new VB(t),n.parentLocale=mn[e],mn[e]=n),cl(e)}else mn[e]!=null&&(mn[e].parentLocale!=null?(mn[e]=mn[e].parentLocale,e===cl()&&cl(e)):mn[e]!=null&&delete mn[e]);return mn[e]}function uo(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ad;if(!Ki(e)){if(t=Uf(e),t)return t;e=[e]}return zne(e)}function Dne(){return W2(mn)}function KB(e){var t,n=e._a;return n&&Bt(e).overflow===-2&&(t=n[Da]<0||n[Da]>11?Da:n[sa]<1||n[sa]>YB(n[Xg],n[Da])?sa:n[ng]<0||n[ng]>24||n[ng]===24&&(n[Yi]!==0||n[ja]!==0||n[$l]!==0)?ng:n[Yi]<0||n[Yi]>59?Yi:n[ja]<0||n[ja]>59?ja:n[$l]<0||n[$l]>999?$l:-1,Bt(e)._overflowDayOfYear&&(t<Xg||t>sa)&&(t=sa),Bt(e)._overflowWeeks&&t===-1&&(t=Ote),Bt(e)._overflowWeekday&&t===-1&&(t=_te),Bt(e).overflow=t),e}var jne=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qne=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pne=/Z|[+-]\d\d(?::?\d\d)?/,uh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],my=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],One=/^\/?Date\((-?\d+)/i,_ne=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qne={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function g9(e){var t,n,g=e._i,r=jne.exec(g)||Qne.exec(g),i,a,o,l,s=uh.length,I=my.length;if(r){for(Bt(e).iso=!0,t=0,n=s;t<n;t++)if(uh[t][1].exec(r[1])){a=uh[t][0],i=uh[t][2]!==!1;break}if(a==null){e._isValid=!1;return}if(r[3]){for(t=0,n=I;t<n;t++)if(my[t][1].exec(r[3])){o=(r[2]||" ")+my[t][0];break}if(o==null){e._isValid=!1;return}}if(!i&&o!=null){e._isValid=!1;return}if(r[4])if(Pne.exec(r[4]))l="Z";else{e._isValid=!1;return}e._f=a+(o||"")+(l||""),EB(e)}else e._isValid=!1}function $ne(e,t,n,g,r,i){var a=[ege(e),j3.indexOf(t),parseInt(n,10),parseInt(g,10),parseInt(r,10)];return i&&a.push(parseInt(i,10)),a}function ege(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function tge(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nge(e,t,n){if(e){var g=$3.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(g!==r)return Bt(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function gge(e,t,n){if(e)return qne[e];if(t)return 0;var g=parseInt(n,10),r=g%100,i=(g-r)/100;return i*60+r}function r9(e){var t=_ne.exec(tge(e._i)),n;if(t){if(n=$ne(t[4],t[3],t[2],t[5],t[6],t[7]),!nge(t[1],n,e))return;e._a=n,e._tzm=gge(t[8],t[9],t[10]),e._d=rd.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Bt(e).rfc2822=!0}else e._isValid=!1}function rge(e){var t=One.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(g9(e),e._isValid===!1)delete e._isValid;else return;if(r9(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:De.createFromInputFallback(e)}De.createFromInputFallback=ii("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function mI(e,t,n){return e??t??n}function ige(e){var t=new Date(De.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function LB(e){var t,n,g=[],r,i,a;if(!e._d){for(r=ige(e),e._w&&e._a[sa]==null&&e._a[Da]==null&&age(e),e._dayOfYear!=null&&(a=mI(e._a[Xg],r[Xg]),(e._dayOfYear>au(a)||e._dayOfYear===0)&&(Bt(e)._overflowDayOfYear=!0),n=rd(a,0,e._dayOfYear),e._a[Da]=n.getUTCMonth(),e._a[sa]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=g[t]=r[t];for(;t<7;t++)e._a[t]=g[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ng]===24&&e._a[Yi]===0&&e._a[ja]===0&&e._a[$l]===0&&(e._nextDay=!0,e._a[ng]=0),e._d=(e._useUTC?rd:Cne).apply(null,g),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ng]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Bt(e).weekdayMismatch=!0)}}function age(e){var t,n,g,r,i,a,o,l,s;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,a=4,n=mI(t.GG,e._a[Xg],id(un(),1,4).year),g=mI(t.W,1),r=mI(t.E,1),(r<1||r>7)&&(l=!0)):(i=e._locale._week.dow,a=e._locale._week.doy,s=id(un(),i,a),n=mI(t.gg,e._a[Xg],s.year),g=mI(t.w,s.week),t.d!=null?(r=t.d,(r<0||r>6)&&(l=!0)):t.e!=null?(r=t.e+i,(t.e<0||t.e>6)&&(l=!0)):r=i),g<1||g>Oa(n,i,a)?Bt(e)._overflowWeeks=!0:l!=null?Bt(e)._overflowWeekday=!0:(o=q3(n,g,r,i,a),e._a[Xg]=o.year,e._dayOfYear=o.dayOfYear)}De.ISO_8601=function(){};De.RFC_2822=function(){};function EB(e){if(e._f===De.ISO_8601){g9(e);return}if(e._f===De.RFC_2822){r9(e);return}e._a=[],Bt(e).empty=!0;var t=""+e._i,n,g,r,i,a,o=t.length,l=0,s,I;for(r=L3(e._f,e._locale).match(kB)||[],I=r.length,n=0;n<I;n++)i=r[n],g=(t.match(jte(i,e))||[])[0],g&&(a=t.substr(0,t.indexOf(g)),a.length>0&&Bt(e).unusedInput.push(a),t=t.slice(t.indexOf(g)+g.length),l+=g.length),OI[i]?(g?Bt(e).empty=!1:Bt(e).unusedTokens.push(i),Pte(i,g,e)):e._strict&&!g&&Bt(e).unusedTokens.push(i);Bt(e).charsLeftOver=o-l,t.length>0&&Bt(e).unusedInput.push(t),e._a[ng]<=12&&Bt(e).bigHour===!0&&e._a[ng]>0&&(Bt(e).bigHour=void 0),Bt(e).parsedDateParts=e._a.slice(0),Bt(e).meridiem=e._meridiem,e._a[ng]=oge(e._locale,e._a[ng],e._meridiem),s=Bt(e).era,s!==null&&(e._a[Xg]=e._locale.erasConvertYear(s,e._a[Xg])),LB(e),KB(e)}function oge(e,t,n){var g;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(g=e.isPM(n),g&&t<12&&(t+=12),!g&&t===12&&(t=0)),t)}function lge(e){var t,n,g,r,i,a,o=!1,l=e._f.length;if(l===0){Bt(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<l;r++)i=0,a=!1,t=WB({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],EB(t),vB(t)&&(a=!0),i+=Bt(t).charsLeftOver,i+=Bt(t).unusedTokens.length*10,Bt(t).score=i,o?i<g&&(g=i,n=t):(g==null||i<g||a)&&(g=i,n=t,a&&(o=!0));qo(e,n||t)}function sge(e){if(!e._d){var t=RB(e._i),n=t.day===void 0?t.date:t.day;e._a=F3([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(g){return g&&parseInt(g,10)}),LB(e)}}function Ige(e){var t=new Nd(KB(i9(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function i9(e){var t=e._i,n=e._f;return e._locale=e._locale||uo(e._l),t===null||n===void 0&&t===""?Ff({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Li(t)?new Nd(KB(t)):(Yd(t)?e._d=t:Ki(n)?lge(e):n?EB(e):cge(e),vB(e)||(e._d=null),e))}function cge(e){var t=e._i;$g(t)?e._d=new Date(De.now()):Yd(t)?e._d=new Date(t.valueOf()):typeof t=="string"?rge(e):Ki(t)?(e._a=F3(t.slice(0),function(n){return parseInt(n,10)}),LB(e)):is(t)?sge(e):so(t)?e._d=new Date(t):De.createFromInputFallback(e)}function a9(e,t,n,g,r){var i={};return(t===!0||t===!1)&&(g=t,t=void 0),(n===!0||n===!1)&&(g=n,n=void 0),(is(e)&&SB(e)||Ki(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=r,i._l=n,i._i=e,i._f=t,i._strict=g,Ige(i)}function un(e,t,n,g){return a9(e,t,n,g,!1)}var Cge=ii("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=un.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Ff()}),uge=ii("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=un.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Ff()});function o9(e,t){var n,g;if(t.length===1&&Ki(t[0])&&(t=t[0]),!t.length)return un();for(n=t[0],g=1;g<t.length;++g)(!t[g].isValid()||t[g][e](n))&&(n=t[g]);return n}function dge(){var e=[].slice.call(arguments,0);return o9("isBefore",e)}function Age(){var e=[].slice.call(arguments,0);return o9("isAfter",e)}var hge=function(){return Date.now?Date.now():+new Date},wC=["year","quarter","month","week","day","hour","minute","second","millisecond"];function mge(e){var t,n=!1,g,r=wC.length;for(t in e)if(xt(e,t)&&!(Hn.call(wC,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(g=0;g<r;++g)if(e[wC[g]]){if(n)return!1;parseFloat(e[wC[g]])!==wt(e[wC[g]])&&(n=!0)}return!0}function fge(){return this._isValid}function pge(){return Mi(NaN)}function Tf(e){var t=RB(e),n=t.year||0,g=t.quarter||0,r=t.month||0,i=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,l=t.minute||0,s=t.second||0,I=t.millisecond||0;this._isValid=mge(t),this._milliseconds=+I+s*1e3+l*6e4+o*1e3*60*60,this._days=+a+i*7,this._months=+r+g*3+n*12,this._data={},this._locale=uo(),this._bubble()}function jh(e){return e instanceof Tf}function k2(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function bge(e,t,n){var g=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,a;for(a=0;a<g;a++)wt(e[a])!==wt(t[a])&&i++;return i+r}function l9(e,t){gt(e,0,0,function(){var n=this.utcOffset(),g="+";return n<0&&(n=-n,g="-"),g+pa(~~(n/60),2)+t+pa(~~n%60,2)})}l9("Z",":");l9("ZZ","");Oe("Z",Mf);Oe("ZZ",Mf);qt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=MB(Mf,e)});var yge=/([\+\-]|\d\d)/gi;function MB(e,t){var n=(t||"").match(e),g,r,i;return n===null?null:(g=n[n.length-1]||[],r=(g+"").match(yge)||["-",0,0],i=+(r[1]*60)+wt(r[2]),i===0?0:r[0]==="+"?i:-i)}function zB(e,t){var n,g;return t._isUTC?(n=t.clone(),g=(Li(e)||Yd(e)?e.valueOf():un(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+g),De.updateOffset(n,!1),n):un(e).local()}function R2(e){return-Math.round(e._d.getTimezoneOffset())}De.updateOffset=function(){};function Zge(e,t,n){var g=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=MB(Mf,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(r=R2(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),g!==e&&(!t||this._changeInProgress?c9(this,Mi(e-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,De.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?g:R2(this)}function Gge(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Bge(e){return this.utcOffset(0,e)}function Sge(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(R2(this),"m")),this}function vge(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=MB(Tte,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Wge(e){return this.isValid()?(e=e?un(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Vge(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function kge(){if(!$g(this._isDSTShifted))return this._isDSTShifted;var e={},t;return WB(e,this),e=i9(e),e._a?(t=e._isUTC?ya(e._a):un(e._a),this._isDSTShifted=this.isValid()&&bge(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Rge(){return this.isValid()?!this._isUTC:!1}function wge(){return this.isValid()?this._isUTC:!1}function s9(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Xge=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jge=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mi(e,t){var n=e,g=null,r,i,a;return jh(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:so(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(g=Xge.exec(e))?(r=g[1]==="-"?-1:1,n={y:0,d:wt(g[sa])*r,h:wt(g[ng])*r,m:wt(g[Yi])*r,s:wt(g[ja])*r,ms:wt(k2(g[$l]*1e3))*r}):(g=Jge.exec(e))?(r=g[1]==="-"?-1:1,n={y:Ll(g[2],r),M:Ll(g[3],r),w:Ll(g[4],r),d:Ll(g[5],r),h:Ll(g[6],r),m:Ll(g[7],r),s:Ll(g[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=Yge(un(n.from),un(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),i=new Tf(n),jh(e)&&xt(e,"_locale")&&(i._locale=e._locale),jh(e)&&xt(e,"_isValid")&&(i._isValid=e._isValid),i}Mi.fn=Tf.prototype;Mi.invalid=pge;function Ll(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Bk(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Yge(e,t){var n;return e.isValid()&&t.isValid()?(t=zB(t,e),e.isBefore(t)?n=Bk(e,t):(n=Bk(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function I9(e,t){return function(n,g){var r,i;return g!==null&&!isNaN(+g)&&(K3(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=g,g=i),r=Mi(n,g),c9(this,r,e),this}}function c9(e,t,n,g){var r=t._milliseconds,i=k2(t._days),a=k2(t._months);e.isValid()&&(g=g??!0,a&&P3(e,gd(e,"Month")+a*n),i&&D3(e,"Date",gd(e,"Date")+i*n),r&&e._d.setTime(e._d.valueOf()+r*n),g&&De.updateOffset(e,i||a))}var Nge=I9(1,"add"),Hge=I9(-1,"subtract");function C9(e){return typeof e=="string"||e instanceof String}function Fge(e){return Li(e)||Yd(e)||C9(e)||so(e)||Kge(e)||xge(e)||e===null||e===void 0}function xge(e){var t=is(e)&&!SB(e),n=!1,g=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,i,a=g.length;for(r=0;r<a;r+=1)i=g[r],n=n||xt(e,i);return t&&n}function Kge(e){var t=Ki(e),n=!1;return t&&(n=e.filter(function(g){return!so(g)&&C9(e)}).length===0),t&&n}function Lge(e){var t=is(e)&&!SB(e),n=!1,g=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,i;for(r=0;r<g.length;r+=1)i=g[r],n=n||xt(e,i);return t&&n}function Ege(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Mge(e,t){arguments.length===1&&(arguments[0]?Fge(arguments[0])?(e=arguments[0],t=void 0):Lge(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||un(),g=zB(n,this).startOf("day"),r=De.calendarFormat(this,g)||"sameElse",i=t&&(Za(t[r])?t[r].call(this,n):t[r]);return this.format(i||this.localeData().calendar(r,this,un(n)))}function zge(){return new Nd(this)}function Uge(e,t){var n=Li(e)?e:un(e);return this.isValid()&&n.isValid()?(t=ai(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function Tge(e,t){var n=Li(e)?e:un(e);return this.isValid()&&n.isValid()?(t=ai(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function Dge(e,t,n,g){var r=Li(e)?e:un(e),i=Li(t)?t:un(t);return this.isValid()&&r.isValid()&&i.isValid()?(g=g||"()",(g[0]==="("?this.isAfter(r,n):!this.isBefore(r,n))&&(g[1]===")"?this.isBefore(i,n):!this.isAfter(i,n))):!1}function jge(e,t){var n=Li(e)?e:un(e),g;return this.isValid()&&n.isValid()?(t=ai(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(g=n.valueOf(),this.clone().startOf(t).valueOf()<=g&&g<=this.clone().endOf(t).valueOf())):!1}function Qge(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Pge(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Oge(e,t,n){var g,r,i;if(!this.isValid())return NaN;if(g=zB(e,this),!g.isValid())return NaN;switch(r=(g.utcOffset()-this.utcOffset())*6e4,t=ai(t),t){case"year":i=Qh(this,g)/12;break;case"month":i=Qh(this,g);break;case"quarter":i=Qh(this,g)/3;break;case"second":i=(this-g)/1e3;break;case"minute":i=(this-g)/6e4;break;case"hour":i=(this-g)/36e5;break;case"day":i=(this-g-r)/864e5;break;case"week":i=(this-g-r)/6048e5;break;default:i=this-g}return n?i:Tr(i)}function Qh(e,t){if(e.date()<t.date())return-Qh(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),g=e.clone().add(n,"months"),r,i;return t-g<0?(r=e.clone().add(n-1,"months"),i=(t-g)/(g-r)):(r=e.clone().add(n+1,"months"),i=(t-g)/(r-g)),-(n+i)||0}De.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";De.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function _ge(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qge(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Dh(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Za(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Dh(n,"Z")):Dh(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $ge(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,g,r,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(n+g+r+i)}function ere(e){e||(e=this.isUtc()?De.defaultFormatUtc:De.defaultFormat);var t=Dh(this,e);return this.localeData().postformat(t)}function tre(e,t){return this.isValid()&&(Li(e)&&e.isValid()||un(e).isValid())?Mi({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function nre(e){return this.from(un(),e)}function gre(e,t){return this.isValid()&&(Li(e)&&e.isValid()||un(e).isValid())?Mi({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function rre(e){return this.to(un(),e)}function u9(e){var t;return e===void 0?this._locale._abbr:(t=uo(e),t!=null&&(this._locale=t),this)}var d9=ii("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function A9(){return this._locale}var r0=1e3,_I=60*r0,i0=60*_I,h9=(365*400+97)*24*i0;function qI(e,t){return(e%t+t)%t}function m9(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-h9:new Date(e,t,n).valueOf()}function f9(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-h9:Date.UTC(e,t,n)}function ire(e){var t,n;if(e=ai(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?f9:m9,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=qI(t+(this._isUTC?0:this.utcOffset()*_I),i0);break;case"minute":t=this._d.valueOf(),t-=qI(t,_I);break;case"second":t=this._d.valueOf(),t-=qI(t,r0);break}return this._d.setTime(t),De.updateOffset(this,!0),this}function are(e){var t,n;if(e=ai(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?f9:m9,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=i0-qI(t+(this._isUTC?0:this.utcOffset()*_I),i0)-1;break;case"minute":t=this._d.valueOf(),t+=_I-qI(t,_I)-1;break;case"second":t=this._d.valueOf(),t+=r0-qI(t,r0)-1;break}return this._d.setTime(t),De.updateOffset(this,!0),this}function ore(){return this._d.valueOf()-(this._offset||0)*6e4}function lre(){return Math.floor(this.valueOf()/1e3)}function sre(){return new Date(this.valueOf())}function Ire(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function cre(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Cre(){return this.isValid()?this.toISOString():null}function ure(){return vB(this)}function dre(){return qo({},Bt(this))}function Are(){return Bt(this).overflow}function hre(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}gt("N",0,0,"eraAbbr");gt("NN",0,0,"eraAbbr");gt("NNN",0,0,"eraAbbr");gt("NNNN",0,0,"eraName");gt("NNNNN",0,0,"eraNarrow");gt("y",["y",1],"yo","eraYear");gt("y",["yy",2],0,"eraYear");gt("y",["yyy",3],0,"eraYear");gt("y",["yyyy",4],0,"eraYear");Oe("N",UB);Oe("NN",UB);Oe("NNN",UB);Oe("NNNN",Wre);Oe("NNNNN",Vre);qt(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,g){var r=n._locale.erasParse(e,g,n._strict);r?Bt(n).era=r:Bt(n).invalidEra=e});Oe("y",Jc);Oe("yy",Jc);Oe("yyy",Jc);Oe("yyyy",Jc);Oe("yo",kre);qt(["y","yy","yyy","yyyy"],Xg);qt(["yo"],function(e,t,n,g){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Xg]=n._locale.eraYearOrdinalParse(e,r):t[Xg]=parseInt(e,10)});function mre(e,t){var n,g,r,i=this._eras||uo("en")._eras;for(n=0,g=i.length;n<g;++n){switch(typeof i[n].since){case"string":r=De(i[n].since).startOf("day"),i[n].since=r.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":r=De(i[n].until).startOf("day").valueOf(),i[n].until=r.valueOf();break}}return i}function fre(e,t,n){var g,r,i=this.eras(),a,o,l;for(e=e.toUpperCase(),g=0,r=i.length;g<r;++g)if(a=i[g].name.toUpperCase(),o=i[g].abbr.toUpperCase(),l=i[g].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return i[g];break;case"NNNN":if(a===e)return i[g];break;case"NNNNN":if(l===e)return i[g];break}else if([a,o,l].indexOf(e)>=0)return i[g]}function pre(e,t){var n=e.since<=e.until?1:-1;return t===void 0?De(e.since).year():De(e.since).year()+(t-e.offset)*n}function bre(){var e,t,n,g=this.localeData().eras();for(e=0,t=g.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),g[e].since<=n&&n<=g[e].until||g[e].until<=n&&n<=g[e].since)return g[e].name;return""}function yre(){var e,t,n,g=this.localeData().eras();for(e=0,t=g.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),g[e].since<=n&&n<=g[e].until||g[e].until<=n&&n<=g[e].since)return g[e].narrow;return""}function Zre(){var e,t,n,g=this.localeData().eras();for(e=0,t=g.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),g[e].since<=n&&n<=g[e].until||g[e].until<=n&&n<=g[e].since)return g[e].abbr;return""}function Gre(){var e,t,n,g,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=r[e].since<=r[e].until?1:-1,g=this.clone().startOf("day").valueOf(),r[e].since<=g&&g<=r[e].until||r[e].until<=g&&g<=r[e].since)return(this.year()-De(r[e].since).year())*n+r[e].offset;return this.year()}function Bre(e){return xt(this,"_erasNameRegex")||TB.call(this),e?this._erasNameRegex:this._erasRegex}function Sre(e){return xt(this,"_erasAbbrRegex")||TB.call(this),e?this._erasAbbrRegex:this._erasRegex}function vre(e){return xt(this,"_erasNarrowRegex")||TB.call(this),e?this._erasNarrowRegex:this._erasRegex}function UB(e,t){return t.erasAbbrRegex(e)}function Wre(e,t){return t.erasNameRegex(e)}function Vre(e,t){return t.erasNarrowRegex(e)}function kre(e,t){return t._eraYearOrdinalRegex||Jc}function TB(){var e=[],t=[],n=[],g=[],r,i,a,o,l,s=this.eras();for(r=0,i=s.length;r<i;++r)a=Pa(s[r].name),o=Pa(s[r].abbr),l=Pa(s[r].narrow),t.push(a),e.push(o),n.push(l),g.push(a),g.push(o),g.push(l);this._erasRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}gt(0,["gg",2],0,function(){return this.weekYear()%100});gt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Df(e,t){gt(0,[e,e.length],0,t)}Df("gggg","weekYear");Df("ggggg","weekYear");Df("GGGG","isoWeekYear");Df("GGGGG","isoWeekYear");Oe("G",Ef);Oe("g",Ef);Oe("GG",dn,wr);Oe("gg",dn,wr);Oe("GGGG",XB,wB);Oe("gggg",XB,wB);Oe("GGGGG",Lf,xf);Oe("ggggg",Lf,xf);Fd(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,g){t[g.substr(0,2)]=wt(e)});Fd(["gg","GG"],function(e,t,n,g){t[g]=De.parseTwoDigitYear(e)});function Rre(e){return p9.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function wre(e){return p9.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Xre(){return Oa(this.year(),1,4)}function Jre(){return Oa(this.isoWeekYear(),1,4)}function Yre(){var e=this.localeData()._week;return Oa(this.year(),e.dow,e.doy)}function Nre(){var e=this.localeData()._week;return Oa(this.weekYear(),e.dow,e.doy)}function p9(e,t,n,g,r){var i;return e==null?id(this,g,r).year:(i=Oa(e,g,r),t>i&&(t=i),Hre.call(this,e,t,n,g,r))}function Hre(e,t,n,g,r){var i=q3(e,t,n,g,r),a=rd(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}gt("Q",0,"Qo","quarter");Oe("Q",E3);qt("Q",function(e,t){t[Da]=(wt(e)-1)*3});function Fre(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}gt("D",["DD",2],"Do","date");Oe("D",dn,Yc);Oe("DD",dn,wr);Oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});qt(["D","DD"],sa);qt("Do",function(e,t){t[sa]=wt(e.match(dn)[0])});var b9=Nc("Date",!0);gt("DDD",["DDDD",3],"DDDo","dayOfYear");Oe("DDD",Kf);Oe("DDDD",M3);qt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=wt(e)});function xre(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}gt("m",["mm",2],0,"minute");Oe("m",dn,JB);Oe("mm",dn,wr);qt(["m","mm"],Yi);var Kre=Nc("Minutes",!1);gt("s",["ss",2],0,"second");Oe("s",dn,JB);Oe("ss",dn,wr);qt(["s","ss"],ja);var Lre=Nc("Seconds",!1);gt("S",0,0,function(){return~~(this.millisecond()/100)});gt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});gt(0,["SSS",3],0,"millisecond");gt(0,["SSSS",4],0,function(){return this.millisecond()*10});gt(0,["SSSSS",5],0,function(){return this.millisecond()*100});gt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});gt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});gt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});gt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Oe("S",Kf,E3);Oe("SS",Kf,wr);Oe("SSS",Kf,M3);var $o,y9;for($o="SSSS";$o.length<=9;$o+="S")Oe($o,Jc);function Ere(e,t){t[$l]=wt(("0."+e)*1e3)}for($o="S";$o.length<=9;$o+="S")qt($o,Ere);y9=Nc("Milliseconds",!1);gt("z",0,0,"zoneAbbr");gt("zz",0,0,"zoneName");function Mre(){return this._isUTC?"UTC":""}function zre(){return this._isUTC?"Coordinated Universal Time":""}var Ye=Nd.prototype;Ye.add=Nge;Ye.calendar=Mge;Ye.clone=zge;Ye.diff=Oge;Ye.endOf=are;Ye.format=ere;Ye.from=tre;Ye.fromNow=nre;Ye.to=gre;Ye.toNow=rre;Ye.get=$te;Ye.invalidAt=Are;Ye.isAfter=Uge;Ye.isBefore=Tge;Ye.isBetween=Dge;Ye.isSame=jge;Ye.isSameOrAfter=Qge;Ye.isSameOrBefore=Pge;Ye.isValid=ure;Ye.lang=d9;Ye.locale=u9;Ye.localeData=A9;Ye.max=uge;Ye.min=Cge;Ye.parsingFlags=dre;Ye.set=ene;Ye.startOf=ire;Ye.subtract=Hge;Ye.toArray=Ire;Ye.toObject=cre;Ye.toDate=sre;Ye.toISOString=qge;Ye.inspect=$ge;typeof Symbol<"u"&&Symbol.for!=null&&(Ye[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ye.toJSON=Cre;Ye.toString=_ge;Ye.unix=lre;Ye.valueOf=ore;Ye.creationData=hre;Ye.eraName=bre;Ye.eraNarrow=yre;Ye.eraAbbr=Zre;Ye.eraYear=Gre;Ye.year=T3;Ye.isLeapYear=qte;Ye.weekYear=Rre;Ye.isoWeekYear=wre;Ye.quarter=Ye.quarters=Fre;Ye.month=O3;Ye.daysInMonth=sne;Ye.week=Ye.weeks=mne;Ye.isoWeek=Ye.isoWeeks=fne;Ye.weeksInYear=Yre;Ye.weeksInWeekYear=Nre;Ye.isoWeeksInYear=Xre;Ye.isoWeeksInISOWeekYear=Jre;Ye.date=b9;Ye.day=Ye.days=wne;Ye.weekday=Xne;Ye.isoWeekday=Jne;Ye.dayOfYear=xre;Ye.hour=Ye.hours=Lne;Ye.minute=Ye.minutes=Kre;Ye.second=Ye.seconds=Lre;Ye.millisecond=Ye.milliseconds=y9;Ye.utcOffset=Zge;Ye.utc=Bge;Ye.local=Sge;Ye.parseZone=vge;Ye.hasAlignedHourOffset=Wge;Ye.isDST=Vge;Ye.isLocal=Rge;Ye.isUtcOffset=wge;Ye.isUtc=s9;Ye.isUTC=s9;Ye.zoneAbbr=Mre;Ye.zoneName=zre;Ye.dates=ii("dates accessor is deprecated. Use date instead.",b9);Ye.months=ii("months accessor is deprecated. Use month instead",O3);Ye.years=ii("years accessor is deprecated. Use year instead",T3);Ye.zone=ii("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Gge);Ye.isDSTShifted=ii("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",kge);function Ure(e){return un(e*1e3)}function Tre(){return un.apply(null,arguments).parseZone()}function Z9(e){return e}var Lt=VB.prototype;Lt.calendar=Rte;Lt.longDateFormat=Yte;Lt.invalidDate=Hte;Lt.ordinal=Kte;Lt.preparse=Z9;Lt.postformat=Z9;Lt.relativeTime=Ete;Lt.pastFuture=Mte;Lt.set=Vte;Lt.eras=mre;Lt.erasParse=fre;Lt.erasConvertYear=pre;Lt.erasAbbrRegex=Sre;Lt.erasNameRegex=Bre;Lt.erasNarrowRegex=vre;Lt.months=ine;Lt.monthsShort=ane;Lt.monthsParse=lne;Lt.monthsRegex=cne;Lt.monthsShortRegex=Ine;Lt.week=une;Lt.firstDayOfYear=hne;Lt.firstDayOfWeek=Ane;Lt.weekdays=vne;Lt.weekdaysMin=Vne;Lt.weekdaysShort=Wne;Lt.weekdaysParse=Rne;Lt.weekdaysRegex=Yne;Lt.weekdaysShortRegex=Nne;Lt.weekdaysMinRegex=Hne;Lt.isPM=xne;Lt.meridiem=Ene;function a0(e,t,n,g){var r=uo(),i=ya().set(g,t);return r[n](i,e)}function G9(e,t,n){if(so(e)&&(t=e,e=void 0),e=e||"",t!=null)return a0(e,t,n,"month");var g,r=[];for(g=0;g<12;g++)r[g]=a0(e,g,n,"month");return r}function DB(e,t,n,g){typeof e=="boolean"?(so(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,so(t)&&(n=t,t=void 0),t=t||"");var r=uo(),i=e?r._week.dow:0,a,o=[];if(n!=null)return a0(t,(n+i)%7,g,"day");for(a=0;a<7;a++)o[a]=a0(t,(a+i)%7,g,"day");return o}function Dre(e,t){return G9(e,t,"months")}function jre(e,t){return G9(e,t,"monthsShort")}function Qre(e,t,n){return DB(e,t,n,"weekdays")}function Pre(e,t,n){return DB(e,t,n,"weekdaysShort")}function Ore(e,t,n){return DB(e,t,n,"weekdaysMin")}cl("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=wt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});De.lang=ii("moment.lang is deprecated. Use moment.locale instead.",cl);De.langData=ii("moment.langData is deprecated. Use moment.localeData instead.",uo);var Ha=Math.abs;function _re(){var e=this._data;return this._milliseconds=Ha(this._milliseconds),this._days=Ha(this._days),this._months=Ha(this._months),e.milliseconds=Ha(e.milliseconds),e.seconds=Ha(e.seconds),e.minutes=Ha(e.minutes),e.hours=Ha(e.hours),e.months=Ha(e.months),e.years=Ha(e.years),this}function B9(e,t,n,g){var r=Mi(t,n);return e._milliseconds+=g*r._milliseconds,e._days+=g*r._days,e._months+=g*r._months,e._bubble()}function qre(e,t){return B9(this,e,t,1)}function $re(e,t){return B9(this,e,t,-1)}function Sk(e){return e<0?Math.floor(e):Math.ceil(e)}function eie(){var e=this._milliseconds,t=this._days,n=this._months,g=this._data,r,i,a,o,l;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Sk(w2(n)+t)*864e5,t=0,n=0),g.milliseconds=e%1e3,r=Tr(e/1e3),g.seconds=r%60,i=Tr(r/60),g.minutes=i%60,a=Tr(i/60),g.hours=a%24,t+=Tr(a/24),l=Tr(S9(t)),n+=l,t-=Sk(w2(l)),o=Tr(n/12),n%=12,g.days=t,g.months=n,g.years=o,this}function S9(e){return e*4800/146097}function w2(e){return e*146097/4800}function tie(e){if(!this.isValid())return NaN;var t,n,g=this._milliseconds;if(e=ai(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+g/864e5,n=this._months+S9(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(w2(this._months)),e){case"week":return t/7+g/6048e5;case"day":return t+g/864e5;case"hour":return t*24+g/36e5;case"minute":return t*1440+g/6e4;case"second":return t*86400+g/1e3;case"millisecond":return Math.floor(t*864e5)+g;default:throw new Error("Unknown unit "+e)}}function Ao(e){return function(){return this.as(e)}}var v9=Ao("ms"),nie=Ao("s"),gie=Ao("m"),rie=Ao("h"),iie=Ao("d"),aie=Ao("w"),oie=Ao("M"),lie=Ao("Q"),sie=Ao("y"),Iie=v9;function cie(){return Mi(this)}function Cie(e){return e=ai(e),this.isValid()?this[e+"s"]():NaN}function Ss(e){return function(){return this.isValid()?this._data[e]:NaN}}var uie=Ss("milliseconds"),die=Ss("seconds"),Aie=Ss("minutes"),hie=Ss("hours"),mie=Ss("days"),fie=Ss("months"),pie=Ss("years");function bie(){return Tr(this.days()/7)}var La=Math.round,NI={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function yie(e,t,n,g,r){return r.relativeTime(t||1,!!n,e,g)}function Zie(e,t,n,g){var r=Mi(e).abs(),i=La(r.as("s")),a=La(r.as("m")),o=La(r.as("h")),l=La(r.as("d")),s=La(r.as("M")),I=La(r.as("w")),c=La(r.as("y")),d=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||I<=1&&["w"]||I<n.w&&["ww",I]),d=d||s<=1&&["M"]||s<n.M&&["MM",s]||c<=1&&["y"]||["yy",c],d[2]=t,d[3]=+e>0,d[4]=g,yie.apply(null,d)}function Gie(e){return e===void 0?La:typeof e=="function"?(La=e,!0):!1}function Bie(e,t){return NI[e]===void 0?!1:t===void 0?NI[e]:(NI[e]=t,e==="s"&&(NI.ss=t-1),!0)}function Sie(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,g=NI,r,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(g=Object.assign({},NI,t),t.s!=null&&t.ss==null&&(g.ss=t.s-1)),r=this.localeData(),i=Zie(this,!n,g,r),n&&(i=r.pastFuture(+this,i)),r.postformat(i)}var fy=Math.abs;function uI(e){return(e>0)-(e<0)||+e}function jf(){if(!this.isValid())return this.localeData().invalidDate();var e=fy(this._milliseconds)/1e3,t=fy(this._days),n=fy(this._months),g,r,i,a,o=this.asSeconds(),l,s,I,c;return o?(g=Tr(e/60),r=Tr(g/60),e%=60,g%=60,i=Tr(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",s=uI(this._months)!==uI(o)?"-":"",I=uI(this._days)!==uI(o)?"-":"",c=uI(this._milliseconds)!==uI(o)?"-":"",l+"P"+(i?s+i+"Y":"")+(n?s+n+"M":"")+(t?I+t+"D":"")+(r||g||e?"T":"")+(r?c+r+"H":"")+(g?c+g+"M":"")+(e?c+a+"S":"")):"P0D"}var Jt=Tf.prototype;Jt.isValid=fge;Jt.abs=_re;Jt.add=qre;Jt.subtract=$re;Jt.as=tie;Jt.asMilliseconds=v9;Jt.asSeconds=nie;Jt.asMinutes=gie;Jt.asHours=rie;Jt.asDays=iie;Jt.asWeeks=aie;Jt.asMonths=oie;Jt.asQuarters=lie;Jt.asYears=sie;Jt.valueOf=Iie;Jt._bubble=eie;Jt.clone=cie;Jt.get=Cie;Jt.milliseconds=uie;Jt.seconds=die;Jt.minutes=Aie;Jt.hours=hie;Jt.days=mie;Jt.weeks=bie;Jt.months=fie;Jt.years=pie;Jt.humanize=Sie;Jt.toISOString=jf;Jt.toString=jf;Jt.toJSON=jf;Jt.locale=u9;Jt.localeData=A9;Jt.toIsoString=ii("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jf);Jt.lang=d9;gt("X",0,0,"unix");gt("x",0,0,"valueOf");Oe("x",Ef);Oe("X",Dte);qt("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});qt("x",function(e,t,n){n._d=new Date(wt(e))});//! moment.js
De.version="2.30.1";vte(un);De.fn=Ye;De.min=dge;De.max=Age;De.now=hge;De.utc=ya;De.unix=Ure;De.months=Dre;De.isDate=Yd;De.locale=cl;De.invalid=Ff;De.duration=Mi;De.isMoment=Li;De.weekdays=Qre;De.parseZone=Tre;De.localeData=uo;De.isDuration=jh;De.monthsShort=jre;De.weekdaysMin=Ore;De.defineLocale=xB;De.updateLocale=Tne;De.locales=Dne;De.weekdaysShort=Pre;De.normalizeUnits=ai;De.relativeTimeRounding=Gie;De.relativeTimeThreshold=Bie;De.calendarFormat=Ege;De.prototype=Ye;De.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const vie=()=>{const[e,t]=_.useState(null),[n,g]=_.useState(!1),[r,i]=_.useState({}),[a,o]=_.useState(null);_.useEffect(()=>{const u=sessionStorage.getItem("usuario");if(u){const m=JSON.parse(u);t(m),i({...m,fechaNacimiento:l(m.fechaNacimiento)})}},[]);const l=u=>De(u).format("YYYY-MM-DD"),s=()=>{g(!0)},I=u=>{const{name:m,value:f}=u.target;i({...r,[m]:f})},c=async()=>{try{if((await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/cliente")).data.some(y=>y.email===r.email&&y.id!==e.id)){o("El correo electrónico ya está en uso.");return}await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/cliente/${e.id}`,r),t(r),sessionStorage.setItem("usuario",JSON.stringify(r)),g(!1),o(null)}catch(u){console.error("Error actualizando el perfil:",u)}},d=()=>{g(!1),i(e),o(null)};return e?G.jsxs("div",{className:"contenedor-informacion-perfil",children:[G.jsx(zg,{titulo:"Mi perfil"}),G.jsxs("div",{className:"tarjeta-informacion-perfil",children:[G.jsx(Zte,{src:e.foto}),n?G.jsx(Bte,{formData:r,mensaje:a,handleChange:I,handleSave:c,handleCancel:d}):G.jsx(Ste,{perfil:e,convertirFecha:l,handleEdit:s}),G.jsx(Gte,{})]})]}):G.jsx("p",{children:"Cargando información del perfil..."})},Wie=()=>G.jsx(G.Fragment,{children:G.jsxs("div",{className:"perfil-container",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(vie,{}),G.jsx(Hg,{})]})});function Vie(e,t,n){return(t=U_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kie(e){if(Array.isArray(e))return e}function Rie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var g,r,i,a,o=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(l=(g=i.call(n)).done)&&(o.push(g.value),o.length!==t);l=!0);}catch(I){s=!0,r=I}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw r}}return o}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,g=Array(t);n<t;n++)g[n]=e[n];return g}function wie(e,t){if(e){if(typeof e=="string")return vk(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vk(e,t):void 0}}function Xie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jie(e,t){return kie(e)||Rie(e,t)||wie(e,t)||Xie()}function Yie(e,t){if(e==null)return{};var n,g,r=Jn(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(g=0;g<i.length;g++)n=i[g],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var W9={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=typeof Symbol=="function"&&Symbol.for,jB=Cg?Symbol.for("react.element"):60103,QB=Cg?Symbol.for("react.portal"):60106,Qf=Cg?Symbol.for("react.fragment"):60107,Pf=Cg?Symbol.for("react.strict_mode"):60108,Of=Cg?Symbol.for("react.profiler"):60114,_f=Cg?Symbol.for("react.provider"):60109,qf=Cg?Symbol.for("react.context"):60110,PB=Cg?Symbol.for("react.async_mode"):60111,$f=Cg?Symbol.for("react.concurrent_mode"):60111,ep=Cg?Symbol.for("react.forward_ref"):60112,tp=Cg?Symbol.for("react.suspense"):60113,Nie=Cg?Symbol.for("react.suspense_list"):60120,np=Cg?Symbol.for("react.memo"):60115,gp=Cg?Symbol.for("react.lazy"):60116,Hie=Cg?Symbol.for("react.block"):60121,Fie=Cg?Symbol.for("react.fundamental"):60117,xie=Cg?Symbol.for("react.responder"):60118,Kie=Cg?Symbol.for("react.scope"):60119;function Xr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jB:switch(e=e.type,e){case PB:case $f:case Qf:case Of:case Pf:case tp:return e;default:switch(e=e&&e.$$typeof,e){case qf:case ep:case gp:case np:case _f:return e;default:return t}}case QB:return t}}}function V9(e){return Xr(e)===$f}$t.AsyncMode=PB;$t.ConcurrentMode=$f;$t.ContextConsumer=qf;$t.ContextProvider=_f;$t.Element=jB;$t.ForwardRef=ep;$t.Fragment=Qf;$t.Lazy=gp;$t.Memo=np;$t.Portal=QB;$t.Profiler=Of;$t.StrictMode=Pf;$t.Suspense=tp;$t.isAsyncMode=function(e){return V9(e)||Xr(e)===PB};$t.isConcurrentMode=V9;$t.isContextConsumer=function(e){return Xr(e)===qf};$t.isContextProvider=function(e){return Xr(e)===_f};$t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jB};$t.isForwardRef=function(e){return Xr(e)===ep};$t.isFragment=function(e){return Xr(e)===Qf};$t.isLazy=function(e){return Xr(e)===gp};$t.isMemo=function(e){return Xr(e)===np};$t.isPortal=function(e){return Xr(e)===QB};$t.isProfiler=function(e){return Xr(e)===Of};$t.isStrictMode=function(e){return Xr(e)===Pf};$t.isSuspense=function(e){return Xr(e)===tp};$t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Qf||e===$f||e===Of||e===Pf||e===tp||e===Nie||typeof e=="object"&&e!==null&&(e.$$typeof===gp||e.$$typeof===np||e.$$typeof===_f||e.$$typeof===qf||e.$$typeof===ep||e.$$typeof===Fie||e.$$typeof===xie||e.$$typeof===Kie||e.$$typeof===Hie)};$t.typeOf=Xr;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Wk=Object.getOwnPropertySymbols,Lie=Object.prototype.hasOwnProperty,Eie=Object.prototype.propertyIsEnumerable;function Mie(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function zie(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var g=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(g.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(i){r[i]=i}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}zie();var Uie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tie=Uie;Function.call.bind(Object.prototype.hasOwnProperty);var Die=Tie;function k9(){}function R9(){}R9.resetWarningCache=k9;var jie=function(){function e(g,r,i,a,o,l){if(l!==Die){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:R9,resetWarningCache:k9};return n.PropTypes=n,n};W9.exports=jie();var dI=W9.exports;function Qie(e,t){var n=atob(e);return n}function Pie(e,t,n){var g=Qie(e),r=g.indexOf(`
`,10)+1,i=g.substring(r)+"",a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}function Oie(e,t,n){var g;return function(i){return g=g||Pie(e),new Worker(g,i)}}var _ie=Oie("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),qie=["constraints","onError","onLoad","onScan","resolution","qrArea"];function Vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,g)}return n}function kk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(n),!0).forEach(function(g){Vie(e,g,n[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(n,g))})}return e}var $ie=function(){return new _ie},Rk=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},OB=function(t){var n=t.constraints,g=t.onError,r=t.onLoad,i=t.onScan,a=t.resolution,o=t.qrArea,l=Yie(t,qie),s=_.useRef(null),I=_.useRef(null),c=_.useRef(document.createElement("canvas")),d=_.useRef(null),u=_.useRef(),m=_.useState(null),f=Jie(m,2),y=f[0],h=f[1],p=_.useRef(!1),b=_.useRef();_.useEffect(function(){b.current=$ie();var V=b.current;return V.onmessage=function(R){i&&i(R.data?kk(kk({},R.data),{},{canvas:c.current}):null),p.current=!1},function(){V.terminate()}},[i]);var S=JSON.stringify(o),X=_.useCallback(function(){var V=JSON.parse(S),R=b.current,z=I.current&&I.current.readyState===I.current.HAVE_ENOUGH_DATA;if(!p.current&&z){p.current=!0;var L=I.current.videoWidth,k=I.current.videoHeight,v=L>k?L:k,K=Math.floor(a/v*100)/100;k=Math.floor(K*k),L=Math.floor(K*L),c.current.width=L,c.current.height=k,d.current=c.current.getContext("2d"),d.current.drawImage(I.current,0,0,L,k);var x;V&&V.length===2&&V[0]>0&&V[1]>0?x=d.current.getImageData(Math.floor((L-V[0])/2),Math.floor((k-V[1])/2),V[0],V[1]):x=d.current.getImageData(0,0,L,k),R.postMessage(x)}u.current=requestAnimationFrame(X)},[a,S]),W=JSON.stringify(n);return _.useEffect(function(){var V=JSON.parse(W),R=!0;return navigator.mediaDevices.getUserMedia(V).then(function(z){if(!R)Rk(z);else{s.current=z;try{I.current&&(I.current.srcObject=z,I.current.setAttribute("playsinline",!0))}catch{h(window.URL.createObjectURL(z))}r&&r(),u.current=requestAnimationFrame(X)}}).catch(function(z){return R?g(z):null}),function(){cancelAnimationFrame(u.current),R=!1,Rk(s.current),y&&window.URL.revokeObjectURL(y)}},[X,W,g,r,y]),_.createElement("video",Se({autoPlay:!0,playsInline:!0,src:y,ref:I},l))};OB.propTypes={constraints:dI.object,onError:dI.func.isRequired,onLoad:dI.func,onScan:dI.func.isRequired,resolution:dI.number,qrArea:dI.array};OB.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};const eae=()=>{const[e,t]=_.useState(null),[n,g]=_.useState(!1),[r,i]=_.useState([]);_.useEffect(()=>{fetch("https://6668e270f53957909ff9675e.mockapi.io/maquinas").then(I=>I.json()).then(I=>i(I)).catch(I=>console.error("Error fetching machines:",I))},[]);const a=I=>{if(I&&I.text){const c=I.text;t(c),g(!1)}},o=I=>{console.error(I)},l={height:240,width:320},s=r.find(I=>I.identificador===e);return G.jsxs("div",{className:"contenedor-escaner-qr",children:[G.jsx(zg,{titulo:"Escanear QR de máquina"}),G.jsxs("div",{className:"pantalla-principal",children:[G.jsx("h3",{children:"Información de la Máquina"}),s?G.jsxs("div",{className:"machine-details",children:[G.jsx("h4",{children:s.nombre}),G.jsx("img",{src:s.imagen,alt:s.nombre}),G.jsx("p",{children:s.descripcion}),G.jsx("ul",{children:s.detalles.split(", ").map((I,c)=>G.jsx("li",{children:I},c))})]}):e&&G.jsx("p",{children:"Máquina no encontrada."}),G.jsx("button",{className:"Guardar",onClick:()=>g(!0),children:"Escanear máquina"}),n&&G.jsxs("div",{className:"qr-scanner",children:[G.jsx(OB,{delay:300,style:l,onError:o,onScan:a}),G.jsx("button",{onClick:()=>g(!1),children:"Cancelar"})]})]})]})},tae=()=>G.jsxs("div",{className:"contenedor-info-maquinas",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(eae,{}),G.jsx(Hg,{})]}),nae=()=>{const[e,t]=_.useState([]);return _.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://6668e270f53957909ff9675e.mockapi.io/maquinas")).json();t(r)}catch(g){console.error("Error fetching data: ",g)}})()},[]),G.jsxs("div",{className:"pantalla-inicial",children:[G.jsx(zg,{titulo:"Informacion de máquinas"}),e.map(n=>G.jsxs("div",{className:"contenedor-tarjeta",children:[G.jsx(k0,{titulo:n.nombre}),G.jsx(EG,{imagen:n.imagen,descripcion:n.descripcion})]},n.id))]})},gae=()=>G.jsxs("div",{className:"contenedor-ejercicios",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(nae,{}),G.jsx(Hg,{})]}),rae=()=>{const[e,t]=_.useState(""),[n,g]=_.useState(""),[r,i]=_.useState(""),[a,o]=_.useState(""),[l,s]=_.useState(""),[I,c]=_.useState(""),[d,u]=_.useState(""),[m,f]=_.useState(""),[y,h]=_.useState(""),[p,b]=_.useState(null),[S,X]=_.useState(null),[W,V]=_.useState(null),R=sessionStorage.getItem("usuarioId"),z=Bl();_.useEffect(()=>{(async()=>{try{const q=(await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/evolucion")).data.find(Q=>Q.idCliente===parseInt(R));q&&b(q)}catch(K){console.error("Error fetching data:",K)}})()},[R]);const L=()=>{t(""),g(""),i(""),o(""),s(""),c(""),u(""),f(""),h("")},k=async v=>{if(v.preventDefault(),!e||!n||!r||!a||!l||!I||!d||!m||!y){V("Por favor, complete todos los campos."),X("error");return}const K=Math.floor(Date.now()/1e3),x={fecha:K,pecho:parseFloat(e),grasaPorcentaje:parseFloat(n),abdomen:parseFloat(r),pierna:parseFloat(a),pesoKg:parseFloat(l),alturaM:parseFloat(I),objetivo:d,grasaVisceral:parseFloat(m),imc:parseFloat(y)};try{if(p){const q={...p,fecha:{...p.fecha,[`fecha${Object.keys(p.fecha).length+1}`]:K},pecho:{...p.pecho,[`pecho${Object.keys(p.pecho).length+1}`]:x.pecho},grasaPorcentaje:{...p.grasaPorcentaje,[`grasa${Object.keys(p.grasaPorcentaje).length+1}`]:x.grasaPorcentaje},abdomen:{...p.abdomen,[`abdomen${Object.keys(p.abdomen).length+1}`]:x.abdomen},pierna:{...p.pierna,[`pierna${Object.keys(p.pierna).length+1}`]:x.pierna},pesoKg:{...p.pesoKg,[`peso${Object.keys(p.pesoKg).length+1}`]:x.pesoKg},grasaVisceral:{...p.grasaVisceral,[`grasaVisceral${Object.keys(p.grasaVisceral).length+1}`]:x.grasaVisceral},imc:{...p.imc,[`imc${Object.keys(p.imc).length+1}`]:x.imc}};await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/evolucion/${p.id}`,q),V("Evaluación actualizada con éxito"),X("exito"),L(),z("/EvaluacionUsuario")}else{const q={idCliente:parseInt(R),fecha:{fecha1:K},pecho:{pecho1:x.pecho},grasaPorcentaje:{grasa1:x.grasaPorcentaje},abdomen:{abdomen1:x.abdomen},pierna:{pierna1:x.pierna},pesoKg:{peso1:x.pesoKg},alturaM:x.alturaM,objetivo:x.objetivo,grasaVisceral:{grasaVisceral1:x.grasaVisceral},imc:{imc1:x.imc}};await Zt.post("https://6668e270f53957909ff9675e.mockapi.io/evolucion",q),V("Evaluación registrada con éxito"),X("exito"),L(),z("/EvaluacionUsuario")}}catch{V("Error al registrar la evaluación"),X("error")}};return G.jsx("div",{className:"contenedor-registrar-evaluacion",children:G.jsxs("form",{className:"registro-evaluacion",onSubmit:k,children:[G.jsx("h4",{children:"Objetivo"}),G.jsx("input",{type:"text",value:d,onChange:v=>u(v.target.value),placeholder:"Ingresa tu objetivo"}),G.jsx("h4",{children:"Pecho (cm)"}),G.jsx("input",{type:"text",value:e,onChange:v=>t(v.target.value),placeholder:"Ingresa las medidas de pecho en (cm)"}),G.jsx("h4",{children:"Porcentaje de grasa (%)"}),G.jsx("input",{type:"text",value:n,onChange:v=>g(v.target.value),placeholder:"Ingresa el porcentaje de grasa en (%)"}),G.jsx("h4",{children:"Abdomen (cm)"}),G.jsx("input",{type:"text",value:r,onChange:v=>i(v.target.value),placeholder:"Ingresa las medidas de abdomen en (cm)"}),G.jsx("h4",{children:"Pierna (cm)"}),G.jsx("input",{type:"text",value:a,onChange:v=>o(v.target.value),placeholder:"Ingresa las medidas de pierna en (cm)"}),G.jsx("h4",{children:"Peso (kg)"}),G.jsx("input",{type:"text",value:l,onChange:v=>s(v.target.value),placeholder:"Ingresa las medidas de peso en (kg)"}),G.jsx("h4",{children:"Altura (m)"}),G.jsx("input",{type:"text",value:I,onChange:v=>c(v.target.value),placeholder:"Ingresa las medidas de altura en (m)"}),G.jsx("h4",{children:"Porcentaje de grasa visceral (%)"}),G.jsx("input",{type:"text",value:m,onChange:v=>f(v.target.value),placeholder:"Ingresa el porcentaje de grasa visceral en (%)"}),G.jsx("h4",{children:"IMC (kg/m²)"}),G.jsx("input",{type:"text",value:y,onChange:v=>h(v.target.value),placeholder:"Ingresa tu IMC en(kg/m²)"}),G.jsx("button",{type:"submit",children:"Registrar Evaluación"}),G.jsx(t1,{mensaje:W,tipo:S})]})})},iae=()=>G.jsxs("div",{className:"pagina-registro-evaluacion",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(rae,{onSubmit:e=>console.log(e)}),G.jsx(Hg,{})]}),aae="modulepreload",oae=function(e){return"https://ferchox.github.io/territoriof4-13/"+e},wk={},X2=function(t,n,g){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.all(n.map(o=>{if(o=oae(o),o in wk)return;wk[o]=!0;const l=o.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const I=document.createElement("link");if(I.rel=l?"stylesheet":aae,l||(I.as="script",I.crossOrigin=""),I.href=o,a&&I.setAttribute("nonce",a),document.head.appendChild(I),l)return new Promise((c,d)=>{I.addEventListener("load",c),I.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};var ar=Uint8Array,Eg=Uint16Array,od=Uint32Array,rp=new ar([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ip=new ar([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),J2=new ar([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w9=function(e,t){for(var n=new Eg(31),g=0;g<31;++g)n[g]=t+=1<<e[g-1];for(var r=new od(n[30]),g=1;g<30;++g)for(var i=n[g];i<n[g+1];++i)r[i]=i-n[g]<<5|g;return[n,r]},X9=w9(rp,2),J9=X9[0],Y2=X9[1];J9[28]=258,Y2[258]=28;var Y9=w9(ip,0),lae=Y9[0],Xk=Y9[1],N2=new Eg(32768);for(var In=0;In<32768;++In){var Fo=(In&43690)>>>1|(In&21845)<<1;Fo=(Fo&52428)>>>2|(Fo&13107)<<2,Fo=(Fo&61680)>>>4|(Fo&3855)<<4,N2[In]=((Fo&65280)>>>8|(Fo&255)<<8)>>>1}var ma=function(e,t,n){for(var g=e.length,r=0,i=new Eg(t);r<g;++r)++i[e[r]-1];var a=new Eg(t);for(r=0;r<t;++r)a[r]=a[r-1]+i[r-1]<<1;var o;if(n){o=new Eg(1<<t);var l=15-t;for(r=0;r<g;++r)if(e[r])for(var s=r<<4|e[r],I=t-e[r],c=a[e[r]-1]++<<I,d=c|(1<<I)-1;c<=d;++c)o[N2[c]>>>l]=s}else for(o=new Eg(g),r=0;r<g;++r)o[r]=N2[a[e[r]-1]++]>>>15-e[r];return o},fl=new ar(288);for(var In=0;In<144;++In)fl[In]=8;for(var In=144;In<256;++In)fl[In]=9;for(var In=256;In<280;++In)fl[In]=7;for(var In=280;In<288;++In)fl[In]=8;var ld=new ar(32);for(var In=0;In<32;++In)ld[In]=5;var sae=ma(fl,9,0),Iae=ma(fl,9,1),cae=ma(ld,5,0),Cae=ma(ld,5,1),py=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Zi=function(e,t,n){var g=t/8>>0;return(e[g]|e[g+1]<<8)>>>(t&7)&n},by=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(t&7)},_B=function(e){return(e/8>>0)+(e&7&&1)},N9=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var g=new(e instanceof Eg?Eg:e instanceof od?od:ar)(n-t);return g.set(e.subarray(t,n)),g},uae=function(e,t,n){var g=e.length,r=!t||n,i=!n||n.i;n||(n={}),t||(t=new ar(g*3));var a=function(te){var se=t.length;if(te>se){var ce=new ar(Math.max(se*2,te));ce.set(t),t=ce}},o=n.f||0,l=n.p||0,s=n.b||0,I=n.l,c=n.d,d=n.m,u=n.n,m=g*8;do{if(!I){n.f=o=Zi(e,l,1);var f=Zi(e,l+1,3);if(l+=3,f)if(f==1)I=Iae,c=Cae,d=9,u=5;else if(f==2){var b=Zi(e,l,31)+257,S=Zi(e,l+10,15)+4,X=b+Zi(e,l+5,31)+1;l+=14;for(var W=new ar(X),V=new ar(19),R=0;R<S;++R)V[J2[R]]=Zi(e,l+R*3,7);l+=S*3;var z=py(V),L=(1<<z)-1;if(!i&&l+X*(z+7)>m)break;for(var k=ma(V,z,1),R=0;R<X;){var v=k[Zi(e,l,L)];l+=v&15;var y=v>>>4;if(y<16)W[R++]=y;else{var K=0,x=0;for(y==16?(x=3+Zi(e,l,3),l+=2,K=W[R-1]):y==17?(x=3+Zi(e,l,7),l+=3):y==18&&(x=11+Zi(e,l,127),l+=7);x--;)W[R++]=K}}var q=W.subarray(0,b),Q=W.subarray(b);d=py(q),u=py(Q),I=ma(q,d,1),c=ma(Q,u,1)}else throw"invalid block type";else{var y=_B(l)+4,h=e[y-4]|e[y-3]<<8,p=y+h;if(p>g){if(i)throw"unexpected EOF";break}r&&a(s+h),t.set(e.subarray(y,p),s),n.b=s+=h,n.p=l=p*8;continue}if(l>m)throw"unexpected EOF"}r&&a(s+131072);for(var D=(1<<d)-1,U=(1<<u)-1,P=d+u+18;i||l+P<m;){var K=I[by(e,l)&D],N=K>>>4;if(l+=K&15,l>m)throw"unexpected EOF";if(!K)throw"invalid length/literal";if(N<256)t[s++]=N;else if(N==256){I=null;break}else{var le=N-254;if(N>264){var R=N-257,Y=rp[R];le=Zi(e,l,(1<<Y)-1)+J9[R],l+=Y}var J=c[by(e,l)&U],O=J>>>4;if(!J)throw"invalid distance";l+=J&15;var Q=lae[O];if(O>3){var Y=ip[O];Q+=by(e,l)&(1<<Y)-1,l+=Y}if(l>m)throw"unexpected EOF";r&&a(s+131072);for(var ee=s+le;s<ee;s+=4)t[s]=t[s-Q],t[s+1]=t[s+1-Q],t[s+2]=t[s+2-Q],t[s+3]=t[s+3-Q];s=ee}}n.l=I,n.p=l,n.b=s,I&&(o=1,n.m=d,n.d=c,n.n=u)}while(!o);return s==t.length?t:N9(t,0,s)},Fa=function(e,t,n){n<<=t&7;var g=t/8>>0;e[g]|=n,e[g+1]|=n>>>8},XC=function(e,t,n){n<<=t&7;var g=t/8>>0;e[g]|=n,e[g+1]|=n>>>8,e[g+2]|=n>>>16},yy=function(e,t){for(var n=[],g=0;g<e.length;++g)e[g]&&n.push({s:g,f:e[g]});var r=n.length,i=n.slice();if(!r)return[new ar(0),0];if(r==1){var a=new ar(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort(function(X,W){return X.f-W.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],s=0,I=1,c=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};I!=r-1;)o=n[n[s].f<n[c].f?s++:c++],l=n[s!=I&&n[s].f<n[c].f?s++:c++],n[I++]={s:-1,f:o.f+l.f,l:o,r:l};for(var d=i[0].s,g=1;g<r;++g)i[g].s>d&&(d=i[g].s);var u=new Eg(d+1),m=H2(n[I-1],u,0);if(m>t){var g=0,f=0,y=m-t,h=1<<y;for(i.sort(function(W,V){return u[V.s]-u[W.s]||W.f-V.f});g<r;++g){var p=i[g].s;if(u[p]>t)f+=h-(1<<m-u[p]),u[p]=t;else break}for(f>>>=y;f>0;){var b=i[g].s;u[b]<t?f-=1<<t-u[b]++-1:++g}for(;g>=0&&f;--g){var S=i[g].s;u[S]==t&&(--u[S],++f)}m=t}return[new ar(u),m]},H2=function(e,t,n){return e.s==-1?Math.max(H2(e.l,t,n+1),H2(e.r,t,n+1)):t[e.s]=n},Jk=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Eg(++t),g=0,r=e[0],i=1,a=function(l){n[g++]=l},o=1;o<=t;++o)if(e[o]==r&&o!=t)++i;else{if(!r&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(r),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(r);i=1,r=e[o]}return[n.subarray(0,g),t]},JC=function(e,t){for(var n=0,g=0;g<t.length;++g)n+=e[g]*t[g];return n},F2=function(e,t,n){var g=n.length,r=_B(t+2);e[r]=g&255,e[r+1]=g>>>8,e[r+2]=e[r]^255,e[r+3]=e[r+1]^255;for(var i=0;i<g;++i)e[r+i+4]=n[i];return(r+4+g)*8},Yk=function(e,t,n,g,r,i,a,o,l,s,I){Fa(t,I++,n),++r[256];for(var c=yy(r,15),d=c[0],u=c[1],m=yy(i,15),f=m[0],y=m[1],h=Jk(d),p=h[0],b=h[1],S=Jk(f),X=S[0],W=S[1],V=new Eg(19),R=0;R<p.length;++R)V[p[R]&31]++;for(var R=0;R<X.length;++R)V[X[R]&31]++;for(var z=yy(V,7),L=z[0],k=z[1],v=19;v>4&&!L[J2[v-1]];--v);var K=s+5<<3,x=JC(r,fl)+JC(i,ld)+a,q=JC(r,d)+JC(i,f)+a+14+3*v+JC(V,L)+(2*V[16]+3*V[17]+7*V[18]);if(K<=x&&K<=q)return F2(t,I,e.subarray(l,l+s));var Q,D,U,P;if(Fa(t,I,1+(q<x)),I+=2,q<x){Q=ma(d,u,0),D=d,U=ma(f,y,0),P=f;var N=ma(L,k,0);Fa(t,I,b-257),Fa(t,I+5,W-1),Fa(t,I+10,v-4),I+=14;for(var R=0;R<v;++R)Fa(t,I+3*R,L[J2[R]]);I+=3*v;for(var le=[p,X],Y=0;Y<2;++Y)for(var J=le[Y],R=0;R<J.length;++R){var O=J[R]&31;Fa(t,I,N[O]),I+=L[O],O>15&&(Fa(t,I,J[R]>>>5&127),I+=J[R]>>>12)}}else Q=sae,D=fl,U=cae,P=ld;for(var R=0;R<o;++R)if(g[R]>255){var O=g[R]>>>18&31;XC(t,I,Q[O+257]),I+=D[O+257],O>7&&(Fa(t,I,g[R]>>>23&31),I+=rp[O]);var ee=g[R]&31;XC(t,I,U[ee]),I+=P[ee],ee>3&&(XC(t,I,g[R]>>>5&8191),I+=ip[ee])}else XC(t,I,Q[g[R]]),I+=D[g[R]];return XC(t,I,Q[256]),I+D[256]},dae=new od([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Aae=function(e,t,n,g,r,i){var a=e.length,o=new ar(g+a+5*(1+Math.floor(a/7e3))+r),l=o.subarray(g,o.length-r),s=0;if(!t||a<8)for(var I=0;I<=a;I+=65535){var c=I+65535;c<a?s=F2(l,s,e.subarray(I,c)):(l[I]=i,s=F2(l,s,e.subarray(I,a)))}else{for(var d=dae[t-1],u=d>>>13,m=d&8191,f=(1<<n)-1,y=new Eg(32768),h=new Eg(f+1),p=Math.ceil(n/3),b=2*p,S=function(Le){return(e[Le]^e[Le+1]<<p^e[Le+2]<<b)&f},X=new od(25e3),W=new Eg(288),V=new Eg(32),R=0,z=0,I=0,L=0,k=0,v=0;I<a;++I){var K=S(I),x=I&32767,q=h[K];if(y[x]=q,h[K]=x,k<=I){var Q=a-I;if((R>7e3||L>24576)&&Q>423){s=Yk(e,l,0,X,W,V,z,L,v,I-v,s),L=R=z=0,v=I;for(var D=0;D<286;++D)W[D]=0;for(var D=0;D<30;++D)V[D]=0}var U=2,P=0,N=m,le=x-q&32767;if(Q>2&&K==S(I-le))for(var Y=Math.min(u,Q)-1,J=Math.min(32767,I),O=Math.min(258,Q);le<=J&&--N&&x!=q;){if(e[I+U]==e[I+U-le]){for(var ee=0;ee<O&&e[I+ee]==e[I+ee-le];++ee);if(ee>U){if(U=ee,P=le,ee>Y)break;for(var te=Math.min(le,ee-2),se=0,D=0;D<te;++D){var ce=I-le+D+32768&32767,re=y[ce],fe=ce-re+32768&32767;fe>se&&(se=fe,q=ce)}}}x=q,q=y[x],le+=x-q+32768&32767}if(P){X[L++]=268435456|Y2[U]<<18|Xk[P];var be=Y2[U]&31,ue=Xk[P]&31;z+=rp[be]+ip[ue],++W[257+be],++V[ue],k=I+U,++R}else X[L++]=e[I],++W[e[I]]}}s=Yk(e,l,i,X,W,V,z,L,v,I-v,s)}return N9(o,0,g+_B(s)+r)},hae=function(){var e=1,t=0;return{p:function(n){for(var g=e,r=t,i=n.length,a=0;a!=i;){for(var o=Math.min(a+5552,i);a<o;++a)g+=n[a],r+=g;g%=65521,r%=65521}e=g,t=r},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},mae=function(e,t,n,g,r){return Aae(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,g,!r)},fae=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pae=function(e,t){var n=t.level,g=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=g<<6|(g?32-2*g:1)},bae=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function x2(e,t){t===void 0&&(t={});var n=hae();n.p(e);var g=mae(e,t,2,4);return pae(g,t),fae(g,g.length-4,n.d()),g}function yae(e,t){return uae((bae(e),e.subarray(2,-4)),t)}var st=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Zy(){st.console&&typeof st.console.log=="function"&&st.console.log.apply(st.console,arguments)}var tn={log:Zy,warn:function(e){st.console&&(typeof st.console.warn=="function"?st.console.warn.apply(st.console,arguments):Zy.call(null,arguments))},error:function(e){st.console&&(typeof st.console.error=="function"?st.console.error.apply(st.console,arguments):Zy(e))}};function Gy(e,t,n){var g=new XMLHttpRequest;g.open("GET",e),g.responseType="blob",g.onload=function(){zl(g.response,t,n)},g.onerror=function(){tn.error("could not download file")},g.send()}function Nk(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function dh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ou,K2,zl=st.saveAs||((typeof window>"u"?"undefined":Ft(window))!=="object"||window!==st?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var g=st.URL||st.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin!==location.origin?Nk(r.href)?Gy(e,t,n):dh(r,r.target="_blank"):dh(r)):(r.href=g.createObjectURL(e),setTimeout(function(){g.revokeObjectURL(r.href)},4e4),setTimeout(function(){dh(r)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Nk(e))Gy(e,t,n);else{var g=document.createElement("a");g.href=e,g.target="_blank",setTimeout(function(){dh(g)})}else navigator.msSaveOrOpenBlob(function(r,i){return i===void 0?i={autoBom:!1}:Ft(i)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(e,n),t)}:function(e,t,n,g){if((g=g||open("","_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),typeof e=="string")return Gy(e,t,n);var r=e.type==="application/octet-stream",i=/constructor/i.test(st.HTMLElement)||st.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&i)&&(typeof FileReader>"u"?"undefined":Ft(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var I=o.result;I=a?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=I:location=I,g=null},o.readAsDataURL(e)}else{var l=st.URL||st.webkitURL,s=l.createObjectURL(e);g?g.location=s:location.href=s,g=null,setTimeout(function(){l.revokeObjectURL(s)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function H9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],g=0;g<n.length;g++){var r=n[g].re,i=n[g].process,a=r.exec(e);a&&(t=i(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),s=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),s.length==1&&(s="0"+s),"#"+o+l+s}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function By(e,t){var n=e[0],g=e[1],r=e[2],i=e[3];n=vg(n,g,r,i,t[0],7,-680876936),i=vg(i,n,g,r,t[1],12,-389564586),r=vg(r,i,n,g,t[2],17,606105819),g=vg(g,r,i,n,t[3],22,-1044525330),n=vg(n,g,r,i,t[4],7,-176418897),i=vg(i,n,g,r,t[5],12,1200080426),r=vg(r,i,n,g,t[6],17,-1473231341),g=vg(g,r,i,n,t[7],22,-45705983),n=vg(n,g,r,i,t[8],7,1770035416),i=vg(i,n,g,r,t[9],12,-1958414417),r=vg(r,i,n,g,t[10],17,-42063),g=vg(g,r,i,n,t[11],22,-1990404162),n=vg(n,g,r,i,t[12],7,1804603682),i=vg(i,n,g,r,t[13],12,-40341101),r=vg(r,i,n,g,t[14],17,-1502002290),n=Wg(n,g=vg(g,r,i,n,t[15],22,1236535329),r,i,t[1],5,-165796510),i=Wg(i,n,g,r,t[6],9,-1069501632),r=Wg(r,i,n,g,t[11],14,643717713),g=Wg(g,r,i,n,t[0],20,-373897302),n=Wg(n,g,r,i,t[5],5,-701558691),i=Wg(i,n,g,r,t[10],9,38016083),r=Wg(r,i,n,g,t[15],14,-660478335),g=Wg(g,r,i,n,t[4],20,-405537848),n=Wg(n,g,r,i,t[9],5,568446438),i=Wg(i,n,g,r,t[14],9,-1019803690),r=Wg(r,i,n,g,t[3],14,-187363961),g=Wg(g,r,i,n,t[8],20,1163531501),n=Wg(n,g,r,i,t[13],5,-1444681467),i=Wg(i,n,g,r,t[2],9,-51403784),r=Wg(r,i,n,g,t[7],14,1735328473),n=Vg(n,g=Wg(g,r,i,n,t[12],20,-1926607734),r,i,t[5],4,-378558),i=Vg(i,n,g,r,t[8],11,-2022574463),r=Vg(r,i,n,g,t[11],16,1839030562),g=Vg(g,r,i,n,t[14],23,-35309556),n=Vg(n,g,r,i,t[1],4,-1530992060),i=Vg(i,n,g,r,t[4],11,1272893353),r=Vg(r,i,n,g,t[7],16,-155497632),g=Vg(g,r,i,n,t[10],23,-1094730640),n=Vg(n,g,r,i,t[13],4,681279174),i=Vg(i,n,g,r,t[0],11,-358537222),r=Vg(r,i,n,g,t[3],16,-722521979),g=Vg(g,r,i,n,t[6],23,76029189),n=Vg(n,g,r,i,t[9],4,-640364487),i=Vg(i,n,g,r,t[12],11,-421815835),r=Vg(r,i,n,g,t[15],16,530742520),n=kg(n,g=Vg(g,r,i,n,t[2],23,-995338651),r,i,t[0],6,-198630844),i=kg(i,n,g,r,t[7],10,1126891415),r=kg(r,i,n,g,t[14],15,-1416354905),g=kg(g,r,i,n,t[5],21,-57434055),n=kg(n,g,r,i,t[12],6,1700485571),i=kg(i,n,g,r,t[3],10,-1894986606),r=kg(r,i,n,g,t[10],15,-1051523),g=kg(g,r,i,n,t[1],21,-2054922799),n=kg(n,g,r,i,t[8],6,1873313359),i=kg(i,n,g,r,t[15],10,-30611744),r=kg(r,i,n,g,t[6],15,-1560198380),g=kg(g,r,i,n,t[13],21,1309151649),n=kg(n,g,r,i,t[4],6,-145523070),i=kg(i,n,g,r,t[11],10,-1120210379),r=kg(r,i,n,g,t[2],15,718787259),g=kg(g,r,i,n,t[9],21,-343485551),e[0]=el(n,e[0]),e[1]=el(g,e[1]),e[2]=el(r,e[2]),e[3]=el(i,e[3])}function ap(e,t,n,g,r,i){return t=el(el(t,e),el(g,i)),el(t<<r|t>>>32-r,n)}function vg(e,t,n,g,r,i,a){return ap(t&n|~t&g,e,t,r,i,a)}function Wg(e,t,n,g,r,i,a){return ap(t&g|n&~g,e,t,r,i,a)}function Vg(e,t,n,g,r,i,a){return ap(t^n^g,e,t,r,i,a)}function kg(e,t,n,g,r,i,a){return ap(n^(t|~g),e,t,r,i,a)}function F9(e){var t,n=e.length,g=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)By(g,Zae(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(By(g,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,By(g,r),g}function Zae(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ou=st.atob.bind(st),K2=st.btoa.bind(st);var Hk="0123456789abcdef".split("");function Gae(e){for(var t="",n=0;n<4;n++)t+=Hk[e>>8*n+4&15]+Hk[e>>8*n&15];return t}function Bae(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function L2(e){return F9(e).map(Bae).join("")}var Sae=function(e){for(var t=0;t<e.length;t++)e[t]=Gae(e[t]);return e.join("")}(F9("hello"))!="5d41402abc4b2a76b9719d911017c592";function el(e,t){if(Sae){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function E2(e,t){var n,g,r,i;if(e!==n){for(var a=(r=e,i=1+(256/e.length>>0),new Array(i+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var s=0;for(l=0;l<256;l++){var I=o[l];s=(s+I+a.charCodeAt(l))%256,o[l]=o[s],o[s]=I}n=e,g=o}else o=g;var c=t.length,d=0,u=0,m="";for(l=0;l<c;l++)u=(u+(I=o[d=(d+1)%256]))%256,o[d]=o[u],o[u]=I,a=o[(o[d]+o[u])%256],m+=String.fromCharCode(t.charCodeAt(l)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Fk={print:4,modify:8,copy:16,"annot-forms":32};function fI(e,t,n,g){this.v=1,this.r=2;var r=192;e.forEach(function(o){if(Fk.perm!==void 0)throw new Error("Invalid permission: "+o);r+=Fk[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^r)),this.encryptionKey=L2(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(g)).substr(0,5),this.U=E2(this.encryptionKey,this.padding)}function pI(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,g=0;g<n;g++){var r=e.charCodeAt(g);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?t+="#"+("0"+r.toString(16)).slice(-2):t+=e[g]}return t}function xk(e){if(Ft(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,g,r){if(r=r||!1,typeof n!="string"||typeof g!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[g,!!r],i},this.unsubscribe=function(n){for(var g in t)if(t[g][n])return delete t[g][n],Object.keys(t[g]).length===0&&delete t[g],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var g=Array.prototype.slice.call(arguments,1),r=[];for(var i in t[n]){var a=t[n][i];try{a[0].apply(e,g)}catch(o){st.console&&tn.error("jsPDF PubSub Error",o.message,o)}a[1]&&r.push(i)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function sd(e){if(!(this instanceof sd))return new sd(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function x9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Do(e,t,n,g,r){if(!(this instanceof Do))return new Do(e,t,n,g,r);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,x9.call(this,g,r)}function es(e,t,n,g,r){if(!(this instanceof es))return new es(e,t,n,g,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,x9.call(this,g,r)}function ot(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",g=arguments[1],r=arguments[2],i=arguments[3],a=[],o=1,l=16,s="S",I=null;Ft(e=e||{})==="object"&&(n=e.orientation,g=e.unit||g,r=e.format||r,i=e.compress||e.compressPdf||i,(I=e.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),s=e.defaultPathOperation||"S"),a=e.filters||(i===!0?["FlateEncode"]:a),g=g||"mm",n=(""+(n||"P")).toLowerCase();var c=e.putOnlyUsedFonts||!1,d={},u={internal:{},__private__:{}};u.__private__.PubSub=xk;var m="1.3",f=u.__private__.getPdfVersion=function(){return m};u.__private__.setPdfVersion=function(Z){m=Z};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};u.__private__.getPageFormats=function(){return y};var h=u.__private__.getPageFormat=function(Z){return y[Z]};r=r||"a4";var p={COMPAT:"compat",ADVANCED:"advanced"},b=p.COMPAT;function S(){this.saveGraphicsState(),ge(new lt(Fe,0,0,-Fe,0,po()*Fe).toString()+" cm"),this.setFontSize(this.getFontSize()/Fe),s="n",b=p.ADVANCED}function X(){this.restoreGraphicsState(),s="S",b=p.COMPAT}var W=u.__private__.combineFontStyleAndFontWeight=function(Z,F){if(Z=="bold"&&F=="normal"||Z=="bold"&&F==400||Z=="normal"&&F=="italic"||Z=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(Z=F==400||F==="normal"?Z==="italic"?"italic":"normal":F!=700&&F!=="bold"||Z!=="normal"?(F==700?"bold":F)+""+Z:"bold"),Z};u.advancedAPI=function(Z){var F=b===p.COMPAT;return F&&S.call(this),typeof Z!="function"||(Z(this),F&&X.call(this)),this},u.compatAPI=function(Z){var F=b===p.ADVANCED;return F&&X.call(this),typeof Z!="function"||(Z(this),F&&S.call(this)),this},u.isAdvancedAPI=function(){return b===p.ADVANCED};var V,R=function(Z){if(b!==p.ADVANCED)throw new Error(Z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=u.roundToPrecision=u.__private__.roundToPrecision=function(Z,F){var ne=t||F;if(isNaN(Z)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Z.toFixed(ne).replace(/0+$/,"")};V=u.hpf=u.__private__.hpf=typeof l=="number"?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Z,l)}:l==="smart"?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Z,Z>-1&&Z<1?16:5)}:function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return z(Z,16)};var L=u.f2=u.__private__.f2=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f2");return z(Z,2)},k=u.__private__.f3=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f3");return z(Z,3)},v=u.scale=u.__private__.scale=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.scale");return b===p.COMPAT?Z*Fe:b===p.ADVANCED?Z:void 0},K=function(Z){return b===p.COMPAT?po()-Z:b===p.ADVANCED?Z:void 0},x=function(Z){return v(K(Z))};u.__private__.setPrecision=u.setPrecision=function(Z){typeof parseInt(Z,10)=="number"&&(t=parseInt(Z,10))};var q,Q="00000000000000000000000000000000",D=u.__private__.getFileId=function(){return Q},U=u.__private__.setFileId=function(Z){return Q=Z!==void 0&&/^[a-fA-F0-9]{32}$/.test(Z)?Z.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(Zg=new fI(I.userPermissions,I.userPassword,I.ownerPassword,Q)),Q};u.setFileId=function(Z){return U(Z),this},u.getFileId=function(){return D()};var P=u.__private__.convertDateToPDFDate=function(Z){var F=Z.getTimezoneOffset(),ne=F<0?"+":"-",ie=Math.floor(Math.abs(F/60)),de=Math.abs(F%60),Ge=[ne,O(ie),"'",O(de),"'"].join("");return["D:",Z.getFullYear(),O(Z.getMonth()+1),O(Z.getDate()),O(Z.getHours()),O(Z.getMinutes()),O(Z.getSeconds()),Ge].join("")},N=u.__private__.convertPDFDateToDate=function(Z){var F=parseInt(Z.substr(2,4),10),ne=parseInt(Z.substr(6,2),10)-1,ie=parseInt(Z.substr(8,2),10),de=parseInt(Z.substr(10,2),10),Ge=parseInt(Z.substr(12,2),10),Re=parseInt(Z.substr(14,2),10);return new Date(F,ne,ie,de,Ge,Re,0)},le=u.__private__.setCreationDate=function(Z){var F;if(Z===void 0&&(Z=new Date),Z instanceof Date)F=P(Z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=Z}return q=F},Y=u.__private__.getCreationDate=function(Z){var F=q;return Z==="jsDate"&&(F=N(q)),F};u.setCreationDate=function(Z){return le(Z),this},u.getCreationDate=function(Z){return Y(Z)};var J,O=u.__private__.padd2=function(Z){return("0"+parseInt(Z)).slice(-2)},ee=u.__private__.padd2Hex=function(Z){return("00"+(Z=Z.toString())).substr(Z.length)},te=0,se=[],ce=[],re=0,fe=[],be=[],ue=!1,He=ce,Le=function(){te=0,re=0,ce=[],se=[],fe=[],Sa=zn(),si=zn()};u.__private__.setCustomOutputDestination=function(Z){ue=!0,He=Z};var pe=function(Z){ue||(He=Z)};u.__private__.resetCustomOutputDestination=function(){ue=!1,He=ce};var ge=u.__private__.out=function(Z){return Z=Z.toString(),re+=Z.length+1,He.push(Z),He},rt=u.__private__.write=function(Z){return ge(arguments.length===1?Z.toString():Array.prototype.join.call(arguments," "))},qe=u.__private__.getArrayBuffer=function(Z){for(var F=Z.length,ne=new ArrayBuffer(F),ie=new Uint8Array(ne);F--;)ie[F]=Z.charCodeAt(F);return ne},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];u.__private__.getStandardFonts=function(){return we};var Ke=e.fontSize||16;u.__private__.setFontSize=u.setFontSize=function(Z){return Ke=b===p.ADVANCED?Z/Fe:Z,this};var Ue,Me=u.__private__.getFontSize=u.getFontSize=function(){return b===p.COMPAT?Ke:Ke*Fe},nt=e.R2L||!1;u.__private__.setR2L=u.setR2L=function(Z){return nt=Z,this},u.__private__.getR2L=u.getR2L=function(){return nt};var ct,At=u.__private__.setZoomMode=function(Z){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Z))Ue=Z;else if(isNaN(Z)){if(F.indexOf(Z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Z+'" is not recognized.');Ue=Z}else Ue=parseInt(Z,10)};u.__private__.getZoomMode=function(){return Ue};var me,We=u.__private__.setPageMode=function(Z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Z+'" is not recognized.');ct=Z};u.__private__.getPageMode=function(){return ct};var Te=u.__private__.setLayoutMode=function(Z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Z+'" is not recognized.');me=Z};u.__private__.getLayoutMode=function(){return me},u.__private__.setDisplayMode=u.setDisplayMode=function(Z,F,ne){return At(Z),Te(F),We(ne),this};var xe={title:"",subject:"",author:"",keywords:"",creator:""};u.__private__.getDocumentProperty=function(Z){if(Object.keys(xe).indexOf(Z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xe[Z]},u.__private__.getDocumentProperties=function(){return xe},u.__private__.setDocumentProperties=u.setProperties=u.setDocumentProperties=function(Z){for(var F in xe)xe.hasOwnProperty(F)&&Z[F]&&(xe[F]=Z[F]);return this},u.__private__.setDocumentProperty=function(Z,F){if(Object.keys(xe).indexOf(Z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xe[Z]=F};var $e,Fe,An,ft,ug,Yt={},Vt={},dg=[],vt={},Wl={},Bn={},oi={},Ba=null,Sn=0,ut=[],Tt=new xk(u),Vl=e.hotfixes||[],Ag={},Ti={},Di=[],lt=function Z(F,ne,ie,de,Ge,Re){if(!(this instanceof Z))return new Z(F,ne,ie,de,Ge,Re);isNaN(F)&&(F=1),isNaN(ne)&&(ne=0),isNaN(ie)&&(ie=0),isNaN(de)&&(de=1),isNaN(Ge)&&(Ge=0),isNaN(Re)&&(Re=0),this._matrix=[F,ne,ie,de,Ge,Re]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(Z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(Z)},lt.prototype.multiply=function(Z){var F=Z.sx*this.sx+Z.shy*this.shx,ne=Z.sx*this.shy+Z.shy*this.sy,ie=Z.shx*this.sx+Z.sy*this.shx,de=Z.shx*this.shy+Z.sy*this.sy,Ge=Z.tx*this.sx+Z.ty*this.shx+this.tx,Re=Z.tx*this.shy+Z.ty*this.sy+this.ty;return new lt(F,ne,ie,de,Ge,Re)},lt.prototype.decompose=function(){var Z=this.sx,F=this.shy,ne=this.shx,ie=this.sy,de=this.tx,Ge=this.ty,Re=Math.sqrt(Z*Z+F*F),je=(Z/=Re)*ne+(F/=Re)*ie;ne-=Z*je,ie-=F*je;var it=Math.sqrt(ne*ne+ie*ie);return je/=it,Z*(ie/=it)<F*(ne/=it)&&(Z=-Z,F=-F,je=-je,Re=-Re),{scale:new lt(Re,0,0,it,0,0),translate:new lt(1,0,0,1,de,Ge),rotate:new lt(Z,F,-F,Z,0,0),skew:new lt(1,0,je,1,0,0)}},lt.prototype.toString=function(Z){return this.join(" ")},lt.prototype.inversed=function(){var Z=this.sx,F=this.shy,ne=this.shx,ie=this.sy,de=this.tx,Ge=this.ty,Re=1/(Z*ie-F*ne),je=ie*Re,it=-F*Re,ht=-ne*Re,Wt=Z*Re;return new lt(je,it,ht,Wt,-je*de-ht*Ge,-it*de-Wt*Ge)},lt.prototype.applyToPoint=function(Z){var F=Z.x*this.sx+Z.y*this.shx+this.tx,ne=Z.x*this.shy+Z.y*this.sy+this.ty;return new Ls(F,ne)},lt.prototype.applyToRectangle=function(Z){var F=this.applyToPoint(Z),ne=this.applyToPoint(new Ls(Z.x+Z.w,Z.y+Z.h));return new Dc(F.x,F.y,ne.x-F.x,ne.y-F.y)},lt.prototype.clone=function(){var Z=this.sx,F=this.shy,ne=this.shx,ie=this.sy,de=this.tx,Ge=this.ty;return new lt(Z,F,ne,ie,de,Ge)},u.Matrix=lt;var li=u.matrixMult=function(Z,F){return F.multiply(Z)},ji=new lt(1,0,0,1,0,0);u.unitMatrix=u.identityMatrix=ji;var Dg=function(Z,F){if(!Wl[Z]){var ne=(F instanceof Do?"Sh":"P")+(Object.keys(vt).length+1).toString(10);F.id=ne,Wl[Z]=ne,vt[ne]=F,Tt.publish("addPattern",F)}};u.ShadingPattern=Do,u.TilingPattern=es,u.addShadingPattern=function(Z,F){return R("addShadingPattern()"),Dg(Z,F),this},u.beginTilingPattern=function(Z){R("beginTilingPattern()"),nA(Z.boundingBox[0],Z.boundingBox[1],Z.boundingBox[2]-Z.boundingBox[0],Z.boundingBox[3]-Z.boundingBox[1],Z.matrix)},u.endTilingPattern=function(Z,F){R("endTilingPattern()"),F.stream=be[J].join(`
`),Dg(Z,F),Tt.publish("endTilingPattern",F),Di.pop().restore()};var _n=u.__private__.newObject=function(){var Z=zn();return dr(Z,!0),Z},zn=u.__private__.newObjectDeferred=function(){return te++,se[te]=function(){return re},te},dr=function(Z,F){return F=typeof F=="boolean"&&F,se[Z]=re,F&&ge(Z+" 0 obj"),Z},Ws=u.__private__.newAdditionalObject=function(){var Z={objId:zn(),content:""};return fe.push(Z),Z},Sa=zn(),si=zn(),Ii=u.__private__.decodeColorString=function(Z){var F=Z.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ne=parseFloat(F[0]);F=[ne,ne,ne,"r"]}for(var ie="#",de=0;de<3;de++)ie+=("0"+Math.floor(255*parseFloat(F[de])).toString(16)).slice(-2);return ie},ci=u.__private__.encodeColorString=function(Z){var F;typeof Z=="string"&&(Z={ch1:Z});var ne=Z.ch1,ie=Z.ch2,de=Z.ch3,Ge=Z.ch4,Re=Z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var je=new H9(ne);if(je.ok)ne=je.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var it=parseInt(ne.substr(1),16);ne=it>>16&255,ie=it>>8&255,de=255&it}if(ie===void 0||Ge===void 0&&ne===ie&&ie===de)if(typeof ne=="string")F=ne+" "+Re[0];else switch(Z.precision){case 2:F=L(ne/255)+" "+Re[0];break;case 3:default:F=k(ne/255)+" "+Re[0]}else if(Ge===void 0||Ft(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return F=["1.","1.","1.",Re[1]].join(" ");if(typeof ne=="string")F=[ne,ie,de,Re[1]].join(" ");else switch(Z.precision){case 2:F=[L(ne/255),L(ie/255),L(de/255),Re[1]].join(" ");break;default:case 3:F=[k(ne/255),k(ie/255),k(de/255),Re[1]].join(" ")}}else if(typeof ne=="string")F=[ne,ie,de,Ge,Re[2]].join(" ");else switch(Z.precision){case 2:F=[L(ne),L(ie),L(de),L(Ge),Re[2]].join(" ");break;case 3:default:F=[k(ne),k(ie),k(de),k(Ge),Re[2]].join(" ")}return F},Qi=u.__private__.getFilters=function(){return a},Jr=u.__private__.putStream=function(Z){var F=(Z=Z||{}).data||"",ne=Z.filters||Qi(),ie=Z.alreadyAppliedFilters||[],de=Z.addLength1||!1,Ge=F.length,Re=Z.objectId,je=function(Gg){return Gg};if(I!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(je=Zg.encryptor(Re,0));var it={};ne===!0&&(ne=["FlateEncode"]);var ht=Z.additionalKeyValues||[],Wt=(it=ot.API.processDataByFilters!==void 0?ot.API.processDataByFilters(F,ne):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(it.data.length!==0&&(ht.push({key:"Length",value:it.data.length}),de===!0&&ht.push({key:"Length1",value:Ge})),Wt.length!=0)if(Wt.split("/").length-1==1)ht.push({key:"Filter",value:Wt});else{ht.push({key:"Filter",value:"["+Wt+"]"});for(var Xt=0;Xt<ht.length;Xt+=1)if(ht[Xt].key==="DecodeParms"){for(var pn=[],vn=0;vn<it.reverseChain.split("/").length-1;vn+=1)pn.push("null");pn.push(ht[Xt].value),ht[Xt].value="["+pn.join(" ")+"]"}}ge("<<");for(var Un=0;Un<ht.length;Un++)ge("/"+ht[Un].key+" "+ht[Un].value);ge(">>"),it.data.length!==0&&(ge("stream"),ge(je(it.data)),ge("endstream"))},Pi=u.__private__.putPage=function(Z){var F=Z.number,ne=Z.data,ie=Z.objId,de=Z.contentsObjId;dr(ie,!0),ge("<</Type /Page"),ge("/Parent "+Z.rootDictionaryObjId+" 0 R"),ge("/Resources "+Z.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(V(Z.mediaBox.bottomLeftX))+" "+parseFloat(V(Z.mediaBox.bottomLeftY))+" "+V(Z.mediaBox.topRightX)+" "+V(Z.mediaBox.topRightY)+"]"),Z.cropBox!==null&&ge("/CropBox ["+V(Z.cropBox.bottomLeftX)+" "+V(Z.cropBox.bottomLeftY)+" "+V(Z.cropBox.topRightX)+" "+V(Z.cropBox.topRightY)+"]"),Z.bleedBox!==null&&ge("/BleedBox ["+V(Z.bleedBox.bottomLeftX)+" "+V(Z.bleedBox.bottomLeftY)+" "+V(Z.bleedBox.topRightX)+" "+V(Z.bleedBox.topRightY)+"]"),Z.trimBox!==null&&ge("/TrimBox ["+V(Z.trimBox.bottomLeftX)+" "+V(Z.trimBox.bottomLeftY)+" "+V(Z.trimBox.topRightX)+" "+V(Z.trimBox.topRightY)+"]"),Z.artBox!==null&&ge("/ArtBox ["+V(Z.artBox.bottomLeftX)+" "+V(Z.artBox.bottomLeftY)+" "+V(Z.artBox.topRightX)+" "+V(Z.artBox.topRightY)+"]"),typeof Z.userUnit=="number"&&Z.userUnit!==1&&ge("/UserUnit "+Z.userUnit),Tt.publish("putPage",{objId:ie,pageContext:ut[F],pageNumber:F,page:ne}),ge("/Contents "+de+" 0 R"),ge(">>"),ge("endobj");var Ge=ne.join(`
`);return b===p.ADVANCED&&(Ge+=`
Q`),dr(de,!0),Jr({data:Ge,filters:Qi(),objectId:de}),ge("endobj"),ie},kl=u.__private__.putPages=function(){var Z,F,ne=[];for(Z=1;Z<=Sn;Z++)ut[Z].objId=zn(),ut[Z].contentsObjId=zn();for(Z=1;Z<=Sn;Z++)ne.push(Pi({number:Z,data:be[Z],objId:ut[Z].objId,contentsObjId:ut[Z].contentsObjId,mediaBox:ut[Z].mediaBox,cropBox:ut[Z].cropBox,bleedBox:ut[Z].bleedBox,trimBox:ut[Z].trimBox,artBox:ut[Z].artBox,userUnit:ut[Z].userUnit,rootDictionaryObjId:Sa,resourceDictionaryObjId:si}));dr(Sa,!0),ge("<</Type /Pages");var ie="/Kids [";for(F=0;F<Sn;F++)ie+=ne[F]+" 0 R ";ge(ie+"]"),ge("/Count "+Sn),ge(">>"),ge("endobj"),Tt.publish("postPutPages")},Vs=function(Z){Tt.publish("putFont",{font:Z,out:ge,newObject:_n,putStream:Jr}),Z.isAlreadyPutted!==!0&&(Z.objectNumber=_n(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+pI(Z.postScriptName)),ge("/Subtype /Type1"),typeof Z.encoding=="string"&&ge("/Encoding /"+Z.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},ks=function(){for(var Z in Yt)Yt.hasOwnProperty(Z)&&(c===!1||c===!0&&d.hasOwnProperty(Z))&&Vs(Yt[Z])},Rs=function(Z){Z.objectNumber=_n();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[V(Z.x),V(Z.y),V(Z.x+Z.width),V(Z.y+Z.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"});var ne=Z.pages[1].join(`
`);Jr({data:ne,additionalKeyValues:F,objectId:Z.objectNumber}),ge("endobj")},ws=function(){for(var Z in Ag)Ag.hasOwnProperty(Z)&&Rs(Ag[Z])},xd=function(Z,F){var ne,ie=[],de=1/(F-1);for(ne=0;ne<1;ne+=de)ie.push(ne);if(ie.push(1),Z[0].offset!=0){var Ge={offset:0,color:Z[0].color};Z.unshift(Ge)}if(Z[Z.length-1].offset!=1){var Re={offset:1,color:Z[Z.length-1].color};Z.push(Re)}for(var je="",it=0,ht=0;ht<ie.length;ht++){for(ne=ie[ht];ne>Z[it+1].offset;)it++;var Wt=Z[it].offset,Xt=(ne-Wt)/(Z[it+1].offset-Wt),pn=Z[it].color,vn=Z[it+1].color;je+=ee(Math.round((1-Xt)*pn[0]+Xt*vn[0]).toString(16))+ee(Math.round((1-Xt)*pn[1]+Xt*vn[1]).toString(16))+ee(Math.round((1-Xt)*pn[2]+Xt*vn[2]).toString(16))}return je.trim()},op=function(Z,F){F||(F=21);var ne=_n(),ie=xd(Z.colors,F),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+F+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Jr({data:ie,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),ge("endobj"),Z.objectNumber=_n(),ge("<< /ShadingType "+Z.type),ge("/ColorSpace /DeviceRGB");var Ge="/Coords ["+V(parseFloat(Z.coords[0]))+" "+V(parseFloat(Z.coords[1]))+" ";Z.type===2?Ge+=V(parseFloat(Z.coords[2]))+" "+V(parseFloat(Z.coords[3])):Ge+=V(parseFloat(Z.coords[2]))+" "+V(parseFloat(Z.coords[3]))+" "+V(parseFloat(Z.coords[4]))+" "+V(parseFloat(Z.coords[5])),ge(Ge+="]"),Z.matrix&&ge("/Matrix ["+Z.matrix.toString()+"]"),ge("/Function "+ne+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},lp=function(Z,F){var ne=zn(),ie=_n();F.push({resourcesOid:ne,objectOid:ie}),Z.objectNumber=ie;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+Z.boundingBox.map(V).join(" ")+"]"}),de.push({key:"XStep",value:V(Z.xStep)}),de.push({key:"YStep",value:V(Z.yStep)}),de.push({key:"Resources",value:ne+" 0 R"}),Z.matrix&&de.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"}),Jr({data:Z.stream,additionalKeyValues:de,objectId:Z.objectNumber}),ge("endobj")},Xs=function(Z){var F;for(F in vt)vt.hasOwnProperty(F)&&(vt[F]instanceof Do?op(vt[F]):vt[F]instanceof es&&lp(vt[F],Z))},Kd=function(Z){for(var F in Z.objectNumber=_n(),ge("<<"),Z)switch(F){case"opacity":ge("/ca "+L(Z[F]));break;case"stroke-opacity":ge("/CA "+L(Z[F]))}ge(">>"),ge("endobj")},sp=function(){var Z;for(Z in Bn)Bn.hasOwnProperty(Z)&&Kd(Bn[Z])},Hc=function(){for(var Z in ge("/XObject <<"),Ag)Ag.hasOwnProperty(Z)&&Ag[Z].objectNumber>=0&&ge("/"+Z+" "+Ag[Z].objectNumber+" 0 R");Tt.publish("putXobjectDict"),ge(">>")},Ip=function(){Zg.oid=_n(),ge("<<"),ge("/Filter /Standard"),ge("/V "+Zg.v),ge("/R "+Zg.r),ge("/U <"+Zg.toHexString(Zg.U)+">"),ge("/O <"+Zg.toHexString(Zg.O)+">"),ge("/P "+Zg.P),ge(">>"),ge("endobj")},Ld=function(){for(var Z in ge("/Font <<"),Yt)Yt.hasOwnProperty(Z)&&(c===!1||c===!0&&d.hasOwnProperty(Z))&&ge("/"+Z+" "+Yt[Z].objectNumber+" 0 R");ge(">>")},cp=function(){if(Object.keys(vt).length>0){for(var Z in ge("/Shading <<"),vt)vt.hasOwnProperty(Z)&&vt[Z]instanceof Do&&vt[Z].objectNumber>=0&&ge("/"+Z+" "+vt[Z].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),ge(">>")}},Js=function(Z){if(Object.keys(vt).length>0){for(var F in ge("/Pattern <<"),vt)vt.hasOwnProperty(F)&&vt[F]instanceof u.TilingPattern&&vt[F].objectNumber>=0&&vt[F].objectNumber<Z&&ge("/"+F+" "+vt[F].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),ge(">>")}},Cp=function(){if(Object.keys(Bn).length>0){var Z;for(Z in ge("/ExtGState <<"),Bn)Bn.hasOwnProperty(Z)&&Bn[Z].objectNumber>=0&&ge("/"+Z+" "+Bn[Z].objectNumber+" 0 R");Tt.publish("putGStateDict"),ge(">>")}},Yn=function(Z){dr(Z.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ld(),cp(),Js(Z.objectOid),Cp(),Hc(),ge(">>"),ge("endobj")},Ed=function(){var Z=[];ks(),sp(),ws(),Xs(Z),Tt.publish("putResources"),Z.forEach(Yn),Yn({resourcesOid:si,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources")},Md=function(){Tt.publish("putAdditionalObjects");for(var Z=0;Z<fe.length;Z++){var F=fe[Z];dr(F.objId,!0),ge(F.content),ge("endobj")}Tt.publish("postPutAdditionalObjects")},zd=function(Z){Vt[Z.fontName]=Vt[Z.fontName]||{},Vt[Z.fontName][Z.fontStyle]=Z.id},Fc=function(Z,F,ne,ie,de){var Ge={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:Z,fontName:F,fontStyle:ne,encoding:ie,isStandardFont:de||!1,metadata:{}};return Tt.publish("addFont",{font:Ge,instance:this}),Yt[Ge.id]=Ge,zd(Ge),Ge.id},up=function(Z){for(var F=0,ne=we.length;F<ne;F++){var ie=Fc.call(this,Z[F][0],Z[F][1],Z[F][2],we[F][3],!0);c===!1&&(d[ie]=!0);var de=Z[F][0].split("-");zd({id:ie,fontName:de[0],fontStyle:de[1]||""})}Tt.publish("addFonts",{fonts:Yt,dictionary:Vt})},Ci=function(Z){return Z.foo=function(){try{return Z.apply(this,arguments)}catch(ie){var F=ie.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var ne="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ie.message;if(!st.console)throw new Error(ne);st.console.error(ne,ie),st.alert&&alert(ne)}},Z.foo.bar=Z,Z.foo},Ys=function(Z,F){var ne,ie,de,Ge,Re,je,it,ht,Wt;if(de=(F=F||{}).sourceEncoding||"Unicode",Re=F.outputEncoding,(F.autoencode||Re)&&Yt[$e].metadata&&Yt[$e].metadata[de]&&Yt[$e].metadata[de].encoding&&(Ge=Yt[$e].metadata[de].encoding,!Re&&Yt[$e].encoding&&(Re=Yt[$e].encoding),!Re&&Ge.codePages&&(Re=Ge.codePages[0]),typeof Re=="string"&&(Re=Ge[Re]),Re)){for(it=!1,je=[],ne=0,ie=Z.length;ne<ie;ne++)(ht=Re[Z.charCodeAt(ne)])?je.push(String.fromCharCode(ht)):je.push(Z[ne]),je[ne].charCodeAt(0)>>8&&(it=!0);Z=je.join("")}for(ne=Z.length;it===void 0&&ne!==0;)Z.charCodeAt(ne-1)>>8&&(it=!0),ne--;if(!it)return Z;for(je=F.noBOM?[]:[254,255],ne=0,ie=Z.length;ne<ie;ne++){if((Wt=(ht=Z.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");je.push(Wt),je.push(ht-(Wt<<8))}return String.fromCharCode.apply(void 0,je)},jg=u.__private__.pdfEscape=u.pdfEscape=function(Z,F){return Ys(Z,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xc=u.__private__.beginPage=function(Z){be[++Sn]=[],ut[Sn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Z[0]),topRightY:Number(Z[1])}},Td(Sn),pe(be[J])},Ud=function(Z,F){var ne,ie,de;switch(n=F||n,typeof Z=="string"&&(ne=h(Z.toLowerCase()),Array.isArray(ne)&&(ie=ne[0],de=ne[1])),Array.isArray(Z)&&(ie=Z[0]*Fe,de=Z[1]*Fe),isNaN(ie)&&(ie=r[0],de=r[1]),(ie>14400||de>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),de=Math.min(14400,de)),r=[ie,de],n.substr(0,1)){case"l":de>ie&&(r=[de,ie]);break;case"p":ie>de&&(r=[de,ie])}xc(r),_d(Mc),ge(ui),Uc!==0&&ge(Uc+" J"),Tc!==0&&ge(Tc+" j"),Tt.publish("addPage",{pageNumber:Sn})},dp=function(Z){Z>0&&Z<=Sn&&(be.splice(Z,1),ut.splice(Z,1),Sn--,J>Sn&&(J=Sn),this.setPage(J))},Td=function(Z){Z>0&&Z<=Sn&&(J=Z)},Ap=u.__private__.getNumberOfPages=u.getNumberOfPages=function(){return be.length-1},Dd=function(Z,F,ne){var ie,de=void 0;return ne=ne||{},Z=Z!==void 0?Z:Yt[$e].fontName,F=F!==void 0?F:Yt[$e].fontStyle,ie=Z.toLowerCase(),Vt[ie]!==void 0&&Vt[ie][F]!==void 0?de=Vt[ie][F]:Vt[Z]!==void 0&&Vt[Z][F]!==void 0?de=Vt[Z][F]:ne.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+Z+"', '"+F+"'. Refer to getFontList() for available fonts."),de||ne.noFallback||(de=Vt.times[F])==null&&(de=Vt.times.normal),de},hp=u.__private__.putInfo=function(){var Z=_n(),F=function(ie){return ie};for(var ne in I!==null&&(F=Zg.encryptor(Z,0)),ge("<<"),ge("/Producer ("+jg(F("jsPDF "+ot.version))+")"),xe)xe.hasOwnProperty(ne)&&xe[ne]&&ge("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+jg(F(xe[ne]))+")");ge("/CreationDate ("+jg(F(q))+")"),ge(">>"),ge("endobj")},Kc=u.__private__.putCatalog=function(Z){var F=(Z=Z||{}).rootDictionaryObjId||Sa;switch(_n(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+F+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+Ue;ne.substr(ne.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+L(Ue)+"]")}switch(me||(me="continuous"),me){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}ct&&ge("/PageMode /"+ct),Tt.publish("putCatalog"),ge(">>"),ge("endobj")},mp=u.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(te+1)),ge("/Root "+te+" 0 R"),ge("/Info "+(te-1)+" 0 R"),I!==null&&ge("/Encrypt "+Zg.oid+" 0 R"),ge("/ID [ <"+Q+"> <"+Q+"> ]"),ge(">>")},fp=u.__private__.putHeader=function(){ge("%PDF-"+m),ge("%ºß¬à")},pp=u.__private__.putXRef=function(){var Z="0000000000";ge("xref"),ge("0 "+(te+1)),ge("0000000000 65535 f ");for(var F=1;F<=te;F++)typeof se[F]=="function"?ge((Z+se[F]()).slice(-10)+" 00000 n "):se[F]!==void 0?ge((Z+se[F]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},va=u.__private__.buildDocument=function(){Le(),pe(ce),Tt.publish("buildDocument"),fp(),kl(),Md(),Ed(),I!==null&&Ip(),hp(),Kc();var Z=re;return pp(),mp(),ge("startxref"),ge(""+Z),ge("%%EOF"),pe(be[J]),ce.join(`
`)},Ns=u.__private__.getBlob=function(Z){return new Blob([qe(Z)],{type:"application/pdf"})},Hs=u.output=u.__private__.output=Ci(function(Z,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",Z){case void 0:return va();case"save":u.save(F.filename);break;case"arraybuffer":return qe(va());case"blob":return Ns(va());case"bloburi":case"bloburl":if(st.URL!==void 0&&typeof st.URL.createObjectURL=="function")return st.URL&&st.URL.createObjectURL(Ns(va()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",ie=va();try{ne=K2(ie)}catch{ne=K2(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+F.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(de=F.pdfObjectUrl,Ge="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",je=st.open();return je!==null&&je.document.write(Re),je}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',ht=st.open();if(ht!==null){ht.document.write(it);var Wt=this;ht.document.documentElement.querySelector("#pdfViewer").onload=function(){ht.document.title=F.filename,ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wt.output("bloburl"))}}return ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(st)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',pn=st.open();if(pn!==null&&(pn.document.write(Xt),pn.document.title=F.filename),pn||typeof safari>"u")return pn;break;case"datauri":case"dataurl":return st.document.location.href=this.output("datauristring",F);default:return null}}),jd=function(Z){return Array.isArray(Vl)===!0&&Vl.indexOf(Z)>-1};switch(g){case"pt":Fe=1;break;case"mm":Fe=72/25.4;break;case"cm":Fe=72/2.54;break;case"in":Fe=72;break;case"px":Fe=jd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Fe=12;break;case"ex":Fe=6;break;default:if(typeof g!="number")throw new Error("Invalid unit: "+g);Fe=g}var Zg=null;le(),U();var bp=function(Z){return I!==null?Zg.encryptor(Z,0):function(F){return F}},Qd=u.__private__.getPageInfo=u.getPageInfo=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[Z].objId,pageNumber:Z,pageContext:ut[Z]}},Ct=u.__private__.getPageInfoByObjId=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in ut)if(ut[F].objId===Z)break;return Qd(F)},yp=u.__private__.getCurrentPageInfo=u.getCurrentPageInfo=function(){return{objId:ut[J].objId,pageNumber:J,pageContext:ut[J]}};u.addPage=function(){return Ud.apply(this,arguments),this},u.setPage=function(){return Td.apply(this,arguments),pe.call(this,be[J]),this},u.insertPage=function(Z){return this.addPage(),this.movePage(J,Z),this},u.movePage=function(Z,F){var ne,ie;if(Z>F){ne=be[Z],ie=ut[Z];for(var de=Z;de>F;de--)be[de]=be[de-1],ut[de]=ut[de-1];be[F]=ne,ut[F]=ie,this.setPage(F)}else if(Z<F){ne=be[Z],ie=ut[Z];for(var Ge=Z;Ge<F;Ge++)be[Ge]=be[Ge+1],ut[Ge]=ut[Ge+1];be[F]=ne,ut[F]=ie,this.setPage(F)}return this},u.deletePage=function(){return dp.apply(this,arguments),this},u.__private__.text=u.text=function(Z,F,ne,ie,de){var Ge,Re,je,it,ht,Wt,Xt,pn,vn,Un=(ie=ie||{}).scope||this;if(typeof Z=="number"&&typeof F=="number"&&(typeof ne=="string"||Array.isArray(ne))){var Gg=ne;ne=F,F=Z,Z=Gg}if(arguments[3]instanceof lt?(R("The transform parameter of text() with a Matrix value"),vn=de):(je=arguments[4],it=arguments[5],Ft(Xt=arguments[3])==="object"&&Xt!==null||(typeof je=="string"&&(it=je,je=null),typeof Xt=="string"&&(it=Xt,Xt=null),typeof Xt=="number"&&(je=Xt,Xt=null),ie={flags:Xt,angle:je,align:it})),isNaN(F)||isNaN(ne)||Z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Z.length===0)return Un;var ig="",di=!1,Ar=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:wl,Va=Un.internal.scaleFactor;function gA(nn){return nn=nn.split("	").join(Array(ie.TabLen||9).join(" ")),jg(nn,Xt)}function Oc(nn){for(var gn,Nn=nn.concat(),qn=[],Xa=Nn.length;Xa--;)typeof(gn=Nn.shift())=="string"?qn.push(gn):Array.isArray(nn)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?qn.push(gn[0]):qn.push([gn[0],gn[1],gn[2]]);return qn}function _c(nn,gn){var Nn;if(typeof nn=="string")Nn=gn(nn)[0];else if(Array.isArray(nn)){for(var qn,Xa,Bo=nn.concat(),Os=[],iA=Bo.length;iA--;)typeof(qn=Bo.shift())=="string"?Os.push(gn(qn)[0]):Array.isArray(qn)&&typeof qn[0]=="string"&&(Xa=gn(qn[0],qn[1],qn[2]),Os.push([Xa[0],Xa[1],Xa[2]]));Nn=Os}return Nn}var Ms=!1,qc=!0;if(typeof Z=="string")Ms=!0;else if(Array.isArray(Z)){var $c=Z.concat();Re=[];for(var zs,Qg=$c.length;Qg--;)(typeof(zs=$c.shift())!="string"||Array.isArray(zs)&&typeof zs[0]!="string")&&(qc=!1);Ms=qc}if(Ms===!1)throw new Error('Type of text must be string or Array. "'+Z+'" is not recognized.');typeof Z=="string"&&(Z=Z.match(/[\r?\n]/)?Z.split(/\r\n|\r|\n/g):[Z]);var Us=Ke/Un.internal.scaleFactor,Ts=Us*(Ar-1);switch(ie.baseline){case"bottom":ne-=Ts;break;case"top":ne+=Us-Ts;break;case"hanging":ne+=Us-2*Ts;break;case"middle":ne+=Us/2-Ts}if((Wt=ie.maxWidth||0)>0&&(typeof Z=="string"?Z=Un.splitTextToSize(Z,Wt):Object.prototype.toString.call(Z)==="[object Array]"&&(Z=Z.reduce(function(nn,gn){return nn.concat(Un.splitTextToSize(gn,Wt))},[]))),Ge={text:Z,x:F,y:ne,options:ie,mutex:{pdfEscape:jg,activeFontKey:$e,fonts:Yt,activeFontSize:Ke}},Tt.publish("preProcessText",Ge),Z=Ge.text,je=(ie=Ge.options).angle,!(vn instanceof lt)&&je&&typeof je=="number"){je*=Math.PI/180,ie.rotationDirection===0&&(je=-je),b===p.ADVANCED&&(je=-je);var Ds=Math.cos(je),eC=Math.sin(je);vn=new lt(Ds,eC,-eC,Ds,0,0)}else je&&je instanceof lt&&(vn=je);b!==p.ADVANCED||vn||(vn=ji),(ht=ie.charSpace||Ks)!==void 0&&(ig+=V(v(ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pn=ie.horizontalScale)!==void 0&&(ig+=V(100*pn)+` Tz
`),ie.lang;var Pg=-1,wp=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,tC=Un.internal.getCurrentPageInfo().pageContext;switch(wp){case 0:case!1:case"fill":Pg=0;break;case 1:case!0:case"stroke":Pg=1;break;case 2:case"fillThenStroke":Pg=2;break;case 3:case"invisible":Pg=3;break;case 4:case"fillAndAddForClipping":Pg=4;break;case 5:case"strokeAndAddPathForClipping":Pg=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pg=6;break;case 7:case"addToPathForClipping":Pg=7}var rA=tC.usedRenderingMode!==void 0?tC.usedRenderingMode:-1;Pg!==-1?ig+=Pg+` Tr
`:rA!==-1&&(ig+=`0 Tr
`),Pg!==-1&&(tC.usedRenderingMode=Pg),it=ie.align||"left";var Ai,nC=Ke*Ar,Xp=Un.internal.pageSize.getWidth(),Jp=Yt[$e];ht=ie.charSpace||Ks,Wt=ie.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var bo=[];if(Object.prototype.toString.call(Z)==="[object Array]"){var Yr;Re=Oc(Z),it!=="left"&&(Ai=Re.map(function(nn){return Un.getStringUnitWidth(nn,{font:Jp,charSpace:ht,fontSize:Ke,doKerning:!1})*Ke/Va}));var hi,yo=0;if(it==="right"){F-=Ai[0],Z=[],Qg=Re.length;for(var _i=0;_i<Qg;_i++)_i===0?(hi=Wa(F),Yr=mo(ne)):(hi=v(yo-Ai[_i]),Yr=-nC),Z.push([Re[_i],hi,Yr]),yo=Ai[_i]}else if(it==="center"){F-=Ai[0]/2,Z=[],Qg=Re.length;for(var ka=0;ka<Qg;ka++)ka===0?(hi=Wa(F),Yr=mo(ne)):(hi=v((yo-Ai[ka])/2),Yr=-nC),Z.push([Re[ka],hi,Yr]),yo=Ai[ka]}else if(it==="left"){Z=[],Qg=Re.length;for(var js=0;js<Qg;js++)Z.push(Re[js])}else{if(it!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');Z=[],Qg=Re.length,Wt=Wt!==0?Wt:Xp;for(var mi=0;mi<Qg;mi++)Yr=mi===0?mo(ne):-nC,hi=mi===0?Wa(F):0,mi<Qg-1?bo.push(V(v((Wt-Ai[mi])/(Re[mi].split(" ").length-1)))):bo.push(0),Z.push([Re[mi],hi,Yr])}}var Qs=typeof ie.R2L=="boolean"?ie.R2L:nt;Qs===!0&&(Z=_c(Z,function(nn,gn,Nn){return[nn.split("").reverse().join(""),gn,Nn]})),Ge={text:Z,x:F,y:ne,options:ie,mutex:{pdfEscape:jg,activeFontKey:$e,fonts:Yt,activeFontSize:Ke}},Tt.publish("postProcessText",Ge),Z=Ge.text,di=Ge.mutex.isHex||!1;var gC=Yt[$e].encoding;gC!=="WinAnsiEncoding"&&gC!=="StandardEncoding"||(Z=_c(Z,function(nn,gn,Nn){return[gA(nn),gn,Nn]})),Re=Oc(Z),Z=[];for(var Zo,fi,Ra,Yl=0,Ps=1,Nl=Array.isArray(Re[0])?Ps:Yl,Go="",rC=function(nn,gn,Nn){var qn="";return Nn instanceof lt?(Nn=typeof ie.angle=="number"?li(Nn,new lt(1,0,0,1,nn,gn)):li(new lt(1,0,0,1,nn,gn),Nn),b===p.ADVANCED&&(Nn=li(new lt(1,0,0,-1,0,0),Nn)),qn=Nn.join(" ")+` Tm
`):qn=V(nn)+" "+V(gn)+` Td
`,qn},Nr=0;Nr<Re.length;Nr++){switch(Go="",Nl){case Ps:Ra=(di?"<":"(")+Re[Nr][0]+(di?">":")"),Zo=parseFloat(Re[Nr][1]),fi=parseFloat(Re[Nr][2]);break;case Yl:Ra=(di?"<":"(")+Re[Nr]+(di?">":")"),Zo=Wa(F),fi=mo(ne)}bo!==void 0&&bo[Nr]!==void 0&&(Go=bo[Nr]+` Tw
`),Nr===0?Z.push(Go+rC(Zo,fi,vn)+Ra):Nl===Yl?Z.push(Go+Ra):Nl===Ps&&Z.push(Go+rC(Zo,fi,vn)+Ra)}Z=Nl===Yl?Z.join(` Tj
T* `):Z.join(` Tj
`),Z+=` Tj
`;var wa=`BT
/`;return wa+=$e+" "+Ke+` Tf
`,wa+=V(Ke*Ar)+` TL
`,wa+=Xl+`
`,wa+=ig,wa+=Z,ge(wa+="ET"),d[$e]=!0,Un};var Zp=u.__private__.clip=u.clip=function(Z){return ge(Z==="evenodd"?"W*":"W"),this};u.clipEvenOdd=function(){return Zp("evenodd")},u.__private__.discardPath=u.discardPath=function(){return ge("n"),this};var Oi=u.__private__.isValidStyle=function(Z){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Z)!==-1&&(F=!0),F};u.__private__.setDefaultPathOperation=u.setDefaultPathOperation=function(Z){return Oi(Z)&&(s=Z),this};var Pd=u.__private__.getStyle=u.getStyle=function(Z){var F=s;switch(Z){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=Z}return F},Od=u.close=function(){return ge("h"),this};u.stroke=function(){return ge("S"),this},u.fill=function(Z){return Fs("f",Z),this},u.fillEvenOdd=function(Z){return Fs("f*",Z),this},u.fillStroke=function(Z){return Fs("B",Z),this},u.fillStrokeEvenOdd=function(Z){return Fs("B*",Z),this};var Fs=function(Z,F){Ft(F)==="object"?Bp(F,Z):ge(Z)},Lc=function(Z){Z===null||b===p.ADVANCED&&Z===void 0||(Z=Pd(Z),ge(Z))};function Gp(Z,F,ne,ie,de){var Ge=new es(F||this.boundingBox,ne||this.xStep,ie||this.yStep,this.gState,de||this.matrix);Ge.stream=this.stream;var Re=Z+"$$"+this.cloneIndex+++"$$";return Dg(Re,Ge),Ge}var Bp=function(Z,F){var ne=Wl[Z.key],ie=vt[ne];if(ie instanceof Do)ge("q"),ge(Sp(F)),ie.gState&&u.setGState(ie.gState),ge(Z.matrix.toString()+" cm"),ge("/"+ne+" sh"),ge("Q");else if(ie instanceof es){var de=new lt(1,0,0,-1,0,po());Z.matrix&&(de=de.multiply(Z.matrix||ji),ne=Gp.call(ie,Z.key,Z.boundingBox,Z.xStep,Z.yStep,de).id),ge("q"),ge("/Pattern cs"),ge("/"+ne+" scn"),ie.gState&&u.setGState(ie.gState),ge(F),ge("Q")}},Sp=function(Z){switch(Z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ec=u.moveTo=function(Z,F){return ge(V(v(Z))+" "+V(x(F))+" m"),this},Rl=u.lineTo=function(Z,F){return ge(V(v(Z))+" "+V(x(F))+" l"),this},ho=u.curveTo=function(Z,F,ne,ie,de,Ge){return ge([V(v(Z)),V(x(F)),V(v(ne)),V(x(ie)),V(v(de)),V(x(Ge)),"c"].join(" ")),this};u.__private__.line=u.line=function(Z,F,ne,ie,de){if(isNaN(Z)||isNaN(F)||isNaN(ne)||isNaN(ie)||!Oi(de))throw new Error("Invalid arguments passed to jsPDF.line");return b===p.COMPAT?this.lines([[ne-Z,ie-F]],Z,F,[1,1],de||"S"):this.lines([[ne-Z,ie-F]],Z,F,[1,1]).stroke()},u.__private__.lines=u.lines=function(Z,F,ne,ie,de,Ge){var Re,je,it,ht,Wt,Xt,pn,vn,Un,Gg,ig,di;if(typeof Z=="number"&&(di=ne,ne=F,F=Z,Z=di),ie=ie||[1,1],Ge=Ge||!1,isNaN(F)||isNaN(ne)||!Array.isArray(Z)||!Array.isArray(ie)||!Oi(de)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ec(F,ne),Re=ie[0],je=ie[1],ht=Z.length,Gg=F,ig=ne,it=0;it<ht;it++)(Wt=Z[it]).length===2?(Gg=Wt[0]*Re+Gg,ig=Wt[1]*je+ig,Rl(Gg,ig)):(Xt=Wt[0]*Re+Gg,pn=Wt[1]*je+ig,vn=Wt[2]*Re+Gg,Un=Wt[3]*je+ig,Gg=Wt[4]*Re+Gg,ig=Wt[5]*je+ig,ho(Xt,pn,vn,Un,Gg,ig));return Ge&&Od(),Lc(de),this},u.path=function(Z){for(var F=0;F<Z.length;F++){var ne=Z[F],ie=ne.c;switch(ne.op){case"m":Ec(ie[0],ie[1]);break;case"l":Rl(ie[0],ie[1]);break;case"c":ho.apply(this,ie);break;case"h":Od()}}return this},u.__private__.rect=u.rect=function(Z,F,ne,ie,de){if(isNaN(Z)||isNaN(F)||isNaN(ne)||isNaN(ie)||!Oi(de))throw new Error("Invalid arguments passed to jsPDF.rect");return b===p.COMPAT&&(ie=-ie),ge([V(v(Z)),V(x(F)),V(v(ne)),V(v(ie)),"re"].join(" ")),Lc(de),this},u.__private__.triangle=u.triangle=function(Z,F,ne,ie,de,Ge,Re){if(isNaN(Z)||isNaN(F)||isNaN(ne)||isNaN(ie)||isNaN(de)||isNaN(Ge)||!Oi(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-Z,ie-F],[de-ne,Ge-ie],[Z-de,F-Ge]],Z,F,[1,1],Re,!0),this},u.__private__.roundedRect=u.roundedRect=function(Z,F,ne,ie,de,Ge,Re){if(isNaN(Z)||isNaN(F)||isNaN(ne)||isNaN(ie)||isNaN(de)||isNaN(Ge)||!Oi(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var je=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*ne),Ge=Math.min(Ge,.5*ie),this.lines([[ne-2*de,0],[de*je,0,de,Ge-Ge*je,de,Ge],[0,ie-2*Ge],[0,Ge*je,-de*je,Ge,-de,Ge],[2*de-ne,0],[-de*je,0,-de,-Ge*je,-de,-Ge],[0,2*Ge-ie],[0,-Ge*je,de*je,-Ge,de,-Ge]],Z+de,F,[1,1],Re,!0),this},u.__private__.ellipse=u.ellipse=function(Z,F,ne,ie,de){if(isNaN(Z)||isNaN(F)||isNaN(ne)||isNaN(ie)||!Oi(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*ne,Re=4/3*(Math.SQRT2-1)*ie;return Ec(Z+ne,F),ho(Z+ne,F-Re,Z+Ge,F-ie,Z,F-ie),ho(Z-Ge,F-ie,Z-ne,F-Re,Z-ne,F),ho(Z-ne,F+Re,Z-Ge,F+ie,Z,F+ie),ho(Z+Ge,F+ie,Z+ne,F+Re,Z+ne,F),Lc(de),this},u.__private__.circle=u.circle=function(Z,F,ne,ie){if(isNaN(Z)||isNaN(F)||isNaN(ne)||!Oi(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Z,F,ne,ne,ie)},u.setFont=function(Z,F,ne){return ne&&(F=W(F,ne)),$e=Dd(Z,F,{disableWarning:!1}),this};var vp=u.__private__.getFont=u.getFont=function(){return Yt[Dd.apply(u,arguments)]};u.__private__.getFontList=u.getFontList=function(){var Z,F,ne={};for(Z in Vt)if(Vt.hasOwnProperty(Z))for(F in ne[Z]=[],Vt[Z])Vt[Z].hasOwnProperty(F)&&ne[Z].push(F);return ne},u.addFont=function(Z,F,ne,ie,de){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(ne=W(ne,ie)),de=de||"Identity-H",Fc.call(this,Z,F,ne,de)};var wl,Mc=e.lineWidth||.200025,xs=u.__private__.getLineWidth=u.getLineWidth=function(){return Mc},_d=u.__private__.setLineWidth=u.setLineWidth=function(Z){return Mc=Z,ge(V(v(Z))+" w"),this};u.__private__.setLineDash=ot.API.setLineDash=ot.API.setLineDashPattern=function(Z,F){if(Z=Z||[],F=F||0,isNaN(F)||!Array.isArray(Z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Z=Z.map(function(ne){return V(v(ne))}).join(" "),F=V(v(F)),ge("["+Z+"] "+F+" d"),this};var qd=u.__private__.getLineHeight=u.getLineHeight=function(){return Ke*wl};u.__private__.getLineHeight=u.getLineHeight=function(){return Ke*wl};var $d=u.__private__.setLineHeightFactor=u.setLineHeightFactor=function(Z){return typeof(Z=Z||1.15)=="number"&&(wl=Z),this},eA=u.__private__.getLineHeightFactor=u.getLineHeightFactor=function(){return wl};$d(e.lineHeight);var Wa=u.__private__.getHorizontalCoordinate=function(Z){return v(Z)},mo=u.__private__.getVerticalCoordinate=function(Z){return b===p.ADVANCED?Z:ut[J].mediaBox.topRightY-ut[J].mediaBox.bottomLeftY-v(Z)},Wp=u.__private__.getHorizontalCoordinateString=u.getHorizontalCoordinateString=function(Z){return V(Wa(Z))},fo=u.__private__.getVerticalCoordinateString=u.getVerticalCoordinateString=function(Z){return V(mo(Z))},ui=e.strokeColor||"0 G";u.__private__.getStrokeColor=u.getDrawColor=function(){return Ii(ui)},u.__private__.setStrokeColor=u.setDrawColor=function(Z,F,ne,ie){return ui=ci({ch1:Z,ch2:F,ch3:ne,ch4:ie,pdfColorType:"draw",precision:2}),ge(ui),this};var zc=e.fillColor||"0 g";u.__private__.getFillColor=u.getFillColor=function(){return Ii(zc)},u.__private__.setFillColor=u.setFillColor=function(Z,F,ne,ie){return zc=ci({ch1:Z,ch2:F,ch3:ne,ch4:ie,pdfColorType:"fill",precision:2}),ge(zc),this};var Xl=e.textColor||"0 g",Vp=u.__private__.getTextColor=u.getTextColor=function(){return Ii(Xl)};u.__private__.setTextColor=u.setTextColor=function(Z,F,ne,ie){return Xl=ci({ch1:Z,ch2:F,ch3:ne,ch4:ie,pdfColorType:"text",precision:3}),this};var Ks=e.charSpace,kp=u.__private__.getCharSpace=u.getCharSpace=function(){return parseFloat(Ks||0)};u.__private__.setCharSpace=u.setCharSpace=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ks=Z,this};var Uc=0;u.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},u.__private__.setLineCap=u.setLineCap=function(Z){var F=u.CapJoinStyles[Z];if(F===void 0)throw new Error("Line cap style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Uc=F,ge(F+" J"),this};var Tc=0;u.__private__.setLineJoin=u.setLineJoin=function(Z){var F=u.CapJoinStyles[Z];if(F===void 0)throw new Error("Line join style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tc=F,ge(F+" j"),this},u.__private__.setLineMiterLimit=u.__private__.setMiterLimit=u.setLineMiterLimit=u.setMiterLimit=function(Z){if(Z=Z||0,isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(V(v(Z))+" M"),this},u.GState=sd,u.setGState=function(Z){(Z=typeof Z=="string"?Bn[oi[Z]]:tA(null,Z)).equals(Ba)||(ge("/"+Z.id+" gs"),Ba=Z)};var tA=function(Z,F){if(!Z||!oi[Z]){var ne=!1;for(var ie in Bn)if(Bn.hasOwnProperty(ie)&&Bn[ie].equals(F)){ne=!0;break}if(ne)F=Bn[ie];else{var de="GS"+(Object.keys(Bn).length+1).toString(10);Bn[de]=F,F.id=de}return Z&&(oi[Z]=F.id),Tt.publish("addGState",F),F}};u.addGState=function(Z,F){return tA(Z,F),this},u.saveGraphicsState=function(){return ge("q"),dg.push({key:$e,size:Ke,color:Xl}),this},u.restoreGraphicsState=function(){ge("Q");var Z=dg.pop();return $e=Z.key,Ke=Z.size,Xl=Z.color,Ba=null,this},u.setCurrentTransformationMatrix=function(Z){return ge(Z.toString()+" cm"),this},u.comment=function(Z){return ge("#"+Z),this};var Ls=function(Z,F){var ne=Z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Ge){isNaN(Ge)||(ne=parseFloat(Ge))}});var ie=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Ge){isNaN(Ge)||(ie=parseFloat(Ge))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(Ge){de=Ge.toString()}}),this},Dc=function(Z,F,ne,ie){Ls.call(this,Z,F),this.type="rect";var de=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Re){isNaN(Re)||(de=parseFloat(Re))}});var Ge=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(Re){isNaN(Re)||(Ge=parseFloat(Re))}}),this},jc=function(){this.page=Sn,this.currentPage=J,this.pages=be.slice(0),this.pagesContext=ut.slice(0),this.x=An,this.y=ft,this.matrix=ug,this.width=Jl(J),this.height=po(J),this.outputDestination=He,this.id="",this.objectNumber=-1};jc.prototype.restore=function(){Sn=this.page,J=this.currentPage,ut=this.pagesContext,be=this.pages,An=this.x,ft=this.y,ug=this.matrix,Qc(J,this.width),Pc(J,this.height),He=this.outputDestination};var nA=function(Z,F,ne,ie,de){Di.push(new jc),Sn=J=0,be=[],An=Z,ft=F,ug=de,xc([ne,ie])},Rp=function(Z){if(Ti[Z])Di.pop().restore();else{var F=new jc,ne="Xo"+(Object.keys(Ag).length+1).toString(10);F.id=ne,Ti[Z]=ne,Ag[ne]=F,Tt.publish("addFormObject",F),Di.pop().restore()}};for(var Es in u.beginFormObject=function(Z,F,ne,ie,de){return nA(Z,F,ne,ie,de),this},u.endFormObject=function(Z){return Rp(Z),this},u.doFormObject=function(Z,F){var ne=Ag[Ti[Z]];return ge("q"),ge(F.toString()+" cm"),ge("/"+ne.id+" Do"),ge("Q"),this},u.getFormObject=function(Z){var F=Ag[Ti[Z]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},u.save=function(Z,F){return Z=Z||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(zl(Ns(va()),Z),typeof zl.unload=="function"&&st.setTimeout&&setTimeout(zl.unload,911),this):new Promise(function(ne,ie){try{var de=zl(Ns(va()),Z);typeof zl.unload=="function"&&st.setTimeout&&setTimeout(zl.unload,911),ne(de)}catch(Ge){ie(Ge.message)}})},ot.API)ot.API.hasOwnProperty(Es)&&(Es==="events"&&ot.API.events.length?function(Z,F){var ne,ie,de;for(de=F.length-1;de!==-1;de--)ne=F[de][0],ie=F[de][1],Z.subscribe.apply(Z,[ne].concat(typeof ie=="function"?[ie]:ie))}(Tt,ot.API.events):u[Es]=ot.API[Es]);var Jl=u.getPageWidth=function(Z){return(ut[Z=Z||J].mediaBox.topRightX-ut[Z].mediaBox.bottomLeftX)/Fe},Qc=u.setPageWidth=function(Z,F){ut[Z].mediaBox.topRightX=F*Fe+ut[Z].mediaBox.bottomLeftX},po=u.getPageHeight=function(Z){return(ut[Z=Z||J].mediaBox.topRightY-ut[Z].mediaBox.bottomLeftY)/Fe},Pc=u.setPageHeight=function(Z,F){ut[Z].mediaBox.topRightY=F*Fe+ut[Z].mediaBox.bottomLeftY};return u.internal={pdfEscape:jg,getStyle:Pd,getFont:vp,getFontSize:Me,getCharSpace:kp,getTextColor:Vp,getLineHeight:qd,getLineHeightFactor:eA,getLineWidth:xs,write:rt,getHorizontalCoordinate:Wa,getVerticalCoordinate:mo,getCoordinateString:Wp,getVerticalCoordinateString:fo,collections:{},newObject:_n,newAdditionalObject:Ws,newObjectDeferred:zn,newObjectDeferredBegin:dr,getFilters:Qi,putStream:Jr,events:Tt,scaleFactor:Fe,pageSize:{getWidth:function(){return Jl(J)},setWidth:function(Z){Qc(J,Z)},getHeight:function(){return po(J)},setHeight:function(Z){Pc(J,Z)}},encryptionOptions:I,encryption:Zg,getEncryptor:bp,output:Hs,getNumberOfPages:Ap,pages:be,out:ge,f2:L,f3:k,getPageInfo:Qd,getPageInfoByObjId:Ct,getCurrentPageInfo:yp,getPDFVersion:f,Point:Ls,Rectangle:Dc,Matrix:lt,hasHotfix:jd},Object.defineProperty(u.internal.pageSize,"width",{get:function(){return Jl(J)},set:function(Z){Qc(J,Z)},enumerable:!0,configurable:!0}),Object.defineProperty(u.internal.pageSize,"height",{get:function(){return po(J)},set:function(Z){Pc(J,Z)},enumerable:!0,configurable:!0}),up.call(u,we),$e="F1",Ud(r,n),Tt.publish("initialized"),u}fI.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},fI.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fI.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},fI.prototype.processOwnerPassword=function(e,t){return E2(L2(t).substr(0,5),e)},fI.prototype.encryptor=function(e,t){var n=L2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(g){return E2(n,g)}},sd.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Ft(e)!==Ft(this))return!1;var g=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;g++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&g--;return g===0},ot.API={events:[]},ot.version="2.5.1";var Rn=ot.API,qB=1,vs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},AI=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dt=function(e){return e.toFixed(2)},xo=function(e){return e.toFixed(5)};Rn.__acroform__={};var ur=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Kk=function(e){return e*qB},ea=function(e){var t=new L9,n=et.internal.getHeight(e)||0,g=et.internal.getWidth(e)||0;return t.BBox=[0,0,Number(dt(g)),Number(dt(n))],t},vae=Rn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Wae=Rn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Vae=Rn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},xn=Rn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Vae(e,t-1)},Kn=Rn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vae(e,t-1)},Ln=Rn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Wae(e,t-1)},kae=Rn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,g=t.internal.getVerticalCoordinate,r=e[0],i=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=g(i+o)||0,l.upperRight_X=n(r+a)||0,l.upperRight_Y=g(i)||0,[Number(dt(l.lowerLeft_X)),Number(dt(l.lowerLeft_Y)),Number(dt(l.upperRight_X)),Number(dt(l.upperRight_Y))]},Rae=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,g=M2(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+dt(g.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(g.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ea(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},M2=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,g={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map(function(k){return k.split(`
`)}):r.map(function(k){return[k]});var i=n,a=et.internal.getHeight(e)||0;a=a<0?-a:a;var o=et.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(k,v,K){if(k+1<r.length){var x=v+" "+r[k+1][0];return Ah(x,e,K).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var s,I,c=Ah("3",e,i).height,d=e.multiline?a-i:(a-c)/2,u=d+=2,m=0,f=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ah(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var h="",p=0,b=0;b<r.length;b++)if(r.hasOwnProperty(b)){var S=!1;if(r[b].length!==1&&y!==r[b].length-1){if((c+2)*(p+2)+2>a)continue e;h+=r[b][y],S=!0,f=b,b--}else{h=(h+=r[b][y]+" ").substr(h.length-1)==" "?h.substr(0,h.length-1):h;var X=parseInt(b),W=l(X,h,i),V=b>=r.length-1;if(W&&!V){h+=" ",y=0;continue}if(W||V){if(V)f=X;else if(e.multiline&&(c+2)*(p+2)+2>a)continue e}else{if(!e.multiline||(c+2)*(p+2)+2>a)continue e;f=X}}for(var R="",z=m;z<=f;z++){var L=r[z];if(e.multiline){if(z===f){R+=L[y]+" ",y=(y+1)%L.length;continue}if(z===m){R+=L[L.length-1]+" ";continue}}R+=L[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,I=Ah(R,e,i).width,e.textAlign){case"right":s=o-I-2;break;case"center":s=(o-I)/2;break;case"left":default:s=2}t+=dt(s)+" "+dt(u)+` Td
`,t+="("+vs(R)+`) Tj
`,t+=-dt(s)+` 0 Td
`,u=-(i+2),I=0,m=S?f:f+1,p++,h=""}break}return g.text=t,g.fontSize=i,g},Ah=function(e,t,n){var g=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:g,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:g,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},wae={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Xae=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(g){return g.type===n.type&&g.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Jae=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var g=n,r=e[n];t.internal.newObjectDeferredBegin(r.objId,!0),Ft(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete e[g]}},Yae=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(zi.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(wae)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");qB=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new E9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var g=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in g)if(g.hasOwnProperty(r)){var i=g[r];i.objId=void 0,i.hasAnnotation&&Xae(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(g,r){var i=!g;for(var a in g||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),g=g||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(g.hasOwnProperty(a)){var o=g[a],l=[],s=o.Rect;if(o.Rect&&(o.Rect=kae(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=et.createDefaultAppearanceStream(o),Ft(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=s,o.hasAppearanceStream&&!o.appearanceStreamContent){var I=Rae(o);l.push({key:"AP",value:"<</N "+I+">>"}),r.internal.acroformPlugin.xForms.push(I)}if(o.appearanceStreamContent){var c="";for(var d in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(d)){var u=o.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var a in u)if(u.hasOwnProperty(a)){var m=u[a];typeof m=="function"&&(m=m.call(r,o)),c+="/"+a+" "+m+" ",r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m)}}else typeof(m=u)=="function"&&(m=m.call(r,o)),c+="/"+a+" "+m,r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m);c+=">>"}l.push({key:"AP",value:`<<
`+c+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}i&&Jae(r.internal.acroformPlugin.xForms,r)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},K9=Rn.__acroform__.arrayToPdfArray=function(e,t,n){var g=function(a){return a};if(Array.isArray(e)){for(var r="[",i=0;i<e.length;i++)switch(i!==0&&(r+=" "),Ft(e[i])){case"boolean":case"number":case"object":r+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(g=n.internal.getEncryptor(t)),r+="("+vs(g(e[i].toString()))+")"):r+=e[i].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Sy=function(e,t,n){var g=function(r){return r};return t!==void 0&&n&&(g=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+vs(g(e))+")"},ca=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ca.prototype.toString=function(){return this.objId+" 0 R"},ca.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ca.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var g=t[n],r=this[g];r&&(Array.isArray(r)?e.push({key:g,value:K9(r,this.objId,this.scope)}):r instanceof ca?(r.scope=this.scope,e.push({key:g,value:r.objId+" 0 R"})):typeof r!="function"&&e.push({key:g,value:r}))}return e};var L9=function(){ca.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ur(L9,ca);var E9=function(){ca.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(g){return g};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+vs(n(e))+")"}},set:function(n){e=n}})};ur(E9,ca);var zi=function e(){ca.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(h){if(isNaN(h))throw new Error('Invalid value "'+h+'" for attribute F supplied.');t=h}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xn(t,3)},set:function(h){h?this.F=Kn(t,3):this.F=Ln(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(h){if(isNaN(h))throw new Error('Invalid value "'+h+'" for attribute Ff supplied.');n=h}});var g=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(g.length!==0)return g},set:function(h){g=h!==void 0?h:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!g||isNaN(g[0])?0:g[0]},set:function(h){g[0]=h}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!g||isNaN(g[1])?0:g[1]},set:function(h){g[1]=h}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!g||isNaN(g[2])?0:g[2]},set:function(h){g[2]=h}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!g||isNaN(g[3])?0:g[3]},set:function(h){g[3]=h}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(h){switch(h){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=h;break;default:throw new Error('Invalid value "'+h+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof o0)return;i="FieldObject"+e.FieldNum++}var h=function(p){return p};return this.scope&&(h=this.scope.internal.getEncryptor(this.objId)),"("+vs(h(i))+")"},set:function(h){i=h.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(h){i=h}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(h){a=h}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(h){o=h}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(h){l=h}});var s=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return s===void 0?50/qB:s},set:function(h){s=h}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(h){I=h}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof o0||this instanceof Cl))return Sy(c,this.objId,this.scope)},set:function(h){h=h.toString(),c=h}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof eg?d:Sy(d,this.objId,this.scope)},set:function(h){h=h.toString(),d=this instanceof eg?h:h.substr(0,1)==="("?AI(h.substr(1,h.length-2)):AI(h)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof eg?AI(d.substr(1,d.length-1)):d},set:function(h){h=h.toString(),d=this instanceof eg?"/"+h:h}});var u=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(u)return u},set:function(h){this.V=h}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof eg?u:Sy(u,this.objId,this.scope)},set:function(h){h=h.toString(),u=this instanceof eg?h:h.substr(0,1)==="("?AI(h.substr(1,h.length-2)):AI(h)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof eg?AI(u.substr(1,u.length-1)):u},set:function(h){h=h.toString(),u=this instanceof eg?"/"+h:h}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(h){h=!!h,f=h}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(h){m=h}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,1)},set:function(h){h?this.Ff=Kn(this.Ff,1):this.Ff=Ln(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,2)},set:function(h){h?this.Ff=Kn(this.Ff,2):this.Ff=Ln(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,3)},set:function(h){h?this.Ff=Kn(this.Ff,3):this.Ff=Ln(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(h){if([0,1,2].indexOf(h)===-1)throw new Error('Invalid value "'+h+'" for attribute Q supplied.');y=h}}),Object.defineProperty(this,"textAlign",{get:function(){var h;switch(y){case 0:default:h="left";break;case 1:h="center";break;case 2:h="right"}return h},configurable:!0,enumerable:!0,set:function(h){switch(h){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};ur(zi,ca);var as=function(){zi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K9(t,this.objId,this.scope)},set:function(n){var g,r;r=[],typeof(g=n)=="string"&&(r=function(i,a,o){o||(o=1);for(var l,s=[];l=a.exec(i);)s.push(l[o]);return s}(g,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,g){for(g=g||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),g!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,18)},set:function(n){n?this.Ff=Kn(this.Ff,18):this.Ff=Ln(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Kn(this.Ff,19):this.Ff=Ln(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,20)},set:function(n){n?(this.Ff=Kn(this.Ff,20),t.sort()):this.Ff=Ln(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,22)},set:function(n){n?this.Ff=Kn(this.Ff,22):this.Ff=Ln(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,23)},set:function(n){n?this.Ff=Kn(this.Ff,23):this.Ff=Ln(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,27)},set:function(n){n?this.Ff=Kn(this.Ff,27):this.Ff=Ln(this.Ff,27)}}),this.hasAppearanceStream=!1};ur(as,zi);var os=function(){as.call(this),this.fontName="helvetica",this.combo=!1};ur(os,as);var ls=function(){os.call(this),this.combo=!0};ur(ls,os);var lu=function(){ls.call(this),this.edit=!0};ur(lu,ls);var eg=function(){zi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,15)},set:function(n){n?this.Ff=Kn(this.Ff,15):this.Ff=Ln(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,16)},set:function(n){n?this.Ff=Kn(this.Ff,16):this.Ff=Ln(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,17)},set:function(n){n?this.Ff=Kn(this.Ff,17):this.Ff=Ln(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,26)},set:function(n){n?this.Ff=Kn(this.Ff,26):this.Ff=Ln(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var g,r=[];for(g in r.push("<<"),t)r.push("/"+g+" ("+vs(n(t[g]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){Ft(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ur(eg,zi);var su=function(){eg.call(this),this.pushButton=!0};ur(su,eg);var ss=function(){eg.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ur(ss,eg);var o0=function(){var e,t;zi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var n,g={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),g)a.push("/"+i+" ("+vs(r(g[i]))+")");return a.push(">>"),a.join(`
`)},set:function(r){Ft(r)==="object"&&(g=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return g.CA||""},set:function(r){typeof r=="string"&&(g.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ur(o0,zi),ss.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ss.prototype.createOption=function(e){var t=new o0;return t.Parent=this,t.optionName=e,this.Kids.push(t),Nae.call(this.scope,t),t};var Iu=function(){eg.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};ur(Iu,eg);var Cl=function(){zi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,13)},set:function(t){t?this.Ff=Kn(this.Ff,13):this.Ff=Ln(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,21)},set:function(t){t?this.Ff=Kn(this.Ff,21):this.Ff=Ln(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Ln(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,24)},set:function(t){t?this.Ff=Kn(this.Ff,24):this.Ff=Ln(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,25)},set:function(t){t?this.Ff=Kn(this.Ff,25):this.Ff=Ln(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Ln(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ur(Cl,zi);var cu=function(){Cl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xn(this.Ff,14)},set:function(e){e?this.Ff=Kn(this.Ff,14):this.Ff=Ln(this.Ff,14)}}),this.password=!0};ur(cu,Cl);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=[],g=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=M2(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+dt(et.internal.getWidth(e))+" "+dt(et.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+g+" "+dt(i.fontSize)+" Tf "+r),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ea(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,g=e.scope.__private__.encodeColorString(e.color),r=[],i=et.internal.getHeight(e),a=et.internal.getWidth(e),o=M2(e,e.caption);return r.push("1 g"),r.push("0 0 "+dt(a)+" "+dt(i)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+dt(a-1)+" "+dt(i-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+dt(o.fontSize)+" Tf "+g),r.push(o.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dt(et.internal.getWidth(e))+" "+dt(et.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=et.RadioButton.Circle.YesNormal,t.D[e]=et.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ea(e);t.scope=e.scope;var n=[],g=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;g=Number((.9*g).toFixed(5));var r=et.internal.Bezier_C,i=Number((g*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+xo(et.internal.getWidth(e)/2)+" "+xo(et.internal.getHeight(e)/2)+" cm"),n.push(g+" 0 m"),n.push(g+" "+i+" "+i+" "+g+" 0 "+g+" c"),n.push("-"+i+" "+g+" -"+g+" "+i+" -"+g+" 0 c"),n.push("-"+g+" -"+i+" -"+i+" -"+g+" 0 -"+g+" c"),n.push(i+" -"+g+" "+g+" -"+i+" "+g+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=[],g=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;g=Number((.9*g).toFixed(5));var r=Number((2*g).toFixed(5)),i=Number((r*et.internal.Bezier_C).toFixed(5)),a=Number((g*et.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xo(et.internal.getWidth(e)/2)+" "+xo(et.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+xo(et.internal.getWidth(e)/2)+" "+xo(et.internal.getHeight(e)/2)+" cm"),n.push(g+" 0 m"),n.push(g+" "+a+" "+a+" "+g+" 0 "+g+" c"),n.push("-"+a+" "+g+" -"+g+" "+a+" -"+g+" 0 c"),n.push("-"+g+" -"+a+" -"+a+" -"+g+" 0 -"+g+" c"),n.push(a+" -"+g+" "+g+" -"+a+" "+g+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=[],g=et.internal.getWidth(e)<=et.internal.getHeight(e)?et.internal.getWidth(e)/4:et.internal.getHeight(e)/4;g=Number((.9*g).toFixed(5));var r=Number((2*g).toFixed(5)),i=Number((r*et.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+xo(et.internal.getWidth(e)/2)+" "+xo(et.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=et.RadioButton.Cross.YesNormal,t.D[e]=et.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ea(e);t.scope=e.scope;var n=[],g=et.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+dt(et.internal.getWidth(e)-2)+" "+dt(et.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(dt(g.x1.x)+" "+dt(g.x1.y)+" m"),n.push(dt(g.x2.x)+" "+dt(g.x2.y)+" l"),n.push(dt(g.x4.x)+" "+dt(g.x4.y)+" m"),n.push(dt(g.x3.x)+" "+dt(g.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=et.internal.calculateCross(e),g=[];return g.push("0.749023 g"),g.push("0 0 "+dt(et.internal.getWidth(e))+" "+dt(et.internal.getHeight(e))+" re"),g.push("f"),g.push("q"),g.push("1 1 "+dt(et.internal.getWidth(e)-2)+" "+dt(et.internal.getHeight(e)-2)+" re"),g.push("W"),g.push("n"),g.push(dt(n.x1.x)+" "+dt(n.x1.y)+" m"),g.push(dt(n.x2.x)+" "+dt(n.x2.y)+" l"),g.push(dt(n.x4.x)+" "+dt(n.x4.y)+" m"),g.push(dt(n.x3.x)+" "+dt(n.x3.y)+" l"),g.push("s"),g.push("Q"),t.stream=g.join(`
`),t},OffPushDown:function(e){var t=ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dt(et.internal.getWidth(e))+" "+dt(et.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};et.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=et.internal.getWidth(e),n=et.internal.getHeight(e),g=Math.min(t,n);return{x1:{x:(t-g)/2,y:(n-g)/2+g},x2:{x:(t-g)/2+g,y:(n-g)/2},x3:{x:(t-g)/2,y:(n-g)/2},x4:{x:(t-g)/2+g,y:(n-g)/2+g}}}},et.internal.getWidth=function(e){var t=0;return Ft(e)==="object"&&(t=Kk(e.Rect[2])),t},et.internal.getHeight=function(e){var t=0;return Ft(e)==="object"&&(t=Kk(e.Rect[3])),t};var Nae=Rn.addField=function(e){if(Yae(this,e),!(e instanceof zi))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Rn.AcroFormChoiceField=as,Rn.AcroFormListBox=os,Rn.AcroFormComboBox=ls,Rn.AcroFormEditBox=lu,Rn.AcroFormButton=eg,Rn.AcroFormPushButton=su,Rn.AcroFormRadioButton=ss,Rn.AcroFormCheckBox=Iu,Rn.AcroFormTextField=Cl,Rn.AcroFormPasswordField=cu,Rn.AcroFormAppearance=et,Rn.AcroForm={ChoiceField:as,ListBox:os,ComboBox:ls,EditBox:lu,Button:eg,PushButton:su,RadioButton:ss,CheckBox:Iu,TextField:Cl,PasswordField:cu,Appearance:et},ot.AcroForm={ChoiceField:as,ListBox:os,ComboBox:ls,EditBox:lu,Button:eg,PushButton:su,RadioButton:ss,CheckBox:Iu,TextField:Cl,PasswordField:cu,Appearance:et};var Hae=ot.AcroForm;function M9(e){return e.reduce(function(t,n,g){return t[n]=g,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},g=e.__addimage__.getImageFileTypeByImageData=function(k,v){var K,x,q,Q,D,U=t;if((v=v||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(W(k))for(D in n)for(q=n[D],K=0;K<q.length;K+=1){for(Q=!0,x=0;x<q[K].length;x+=1)if(q[K][x]!==void 0&&q[K][x]!==k[x]){Q=!1;break}if(Q===!0){U=D;break}}else for(D in n)for(q=n[D],K=0;K<q.length;K+=1){for(Q=!0,x=0;x<q[K].length;x+=1)if(q[K][x]!==void 0&&q[K][x]!==k.charCodeAt(x)){Q=!1;break}if(Q===!0){U=D;break}}return U===t&&v!==t&&(U=v),U},r=function k(v){for(var K=this.internal.write,x=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);v.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:v.width}),Q.push({key:"Height",value:v.height}),v.colorSpace===y.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(v.palette.length/3-1)+" "+("sMask"in v&&v.sMask!==void 0?v.objectId+2:v.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+v.colorSpace}),v.colorSpace===y.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:v.bitsPerComponent}),"decodeParameters"in v&&v.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+v.decodeParameters+">>"}),"transparency"in v&&Array.isArray(v.transparency)){for(var D="",U=0,P=v.transparency.length;U<P;U++)D+=v.transparency[U]+" "+v.transparency[U]+" ";Q.push({key:"Mask",value:"["+D+"]"})}v.sMask!==void 0&&Q.push({key:"SMask",value:v.objectId+1+" 0 R"});var N=v.filter!==void 0?["/"+v.filter]:void 0;if(x({data:v.data,additionalKeyValues:Q,alreadyAppliedFilters:N,objectId:v.objectId}),K("endobj"),"sMask"in v&&v.sMask!==void 0){var le="/Predictor "+v.predictor+" /Colors 1 /BitsPerComponent "+v.bitsPerComponent+" /Columns "+v.width,Y={width:v.width,height:v.height,colorSpace:"DeviceGray",bitsPerComponent:v.bitsPerComponent,decodeParameters:le,data:v.sMask};"filter"in v&&(Y.filter=v.filter),k.call(this,Y)}if(v.colorSpace===y.INDEXED){var J=this.internal.newObject();x({data:R(new Uint8Array(v.palette)),objectId:J}),K("endobj")}},i=function(){var k=this.internal.collections.addImage_images;for(var v in k)r.call(this,k[v])},a=function(){var k,v=this.internal.collections.addImage_images,K=this.internal.write;for(var x in v)K("/I"+(k=v[x]).index,k.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var k=this.internal.collections.addImage_images;return o.call(this),k},s=function(){return Object.keys(this.internal.collections.addImage_images).length},I=function(k){return typeof e["process"+k.toUpperCase()]=="function"},c=function(k){return Ft(k)==="object"&&k.nodeType===1},d=function(k,v){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var K=""+k.getAttribute("src");if(K.indexOf("data:image/")===0)return ou(unescape(K).split("base64,").pop());var x=e.loadFile(K,!0);if(x!==void 0)return x}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var q;switch(v){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;case"JPEG":case"JPG":default:q="image/jpeg"}return ou(k.toDataURL(q,1).split("base64,").pop())}},u=function(k){var v=this.internal.collections.addImage_images;if(v){for(var K in v)if(k===v[K].alias)return v[K]}},m=function(k,v,K){return k||v||(k=-96,v=-96),k<0&&(k=-1*K.width*72/k/this.internal.scaleFactor),v<0&&(v=-1*K.height*72/v/this.internal.scaleFactor),k===0&&(k=v*K.width/K.height),v===0&&(v=k*K.height/K.width),[k,v]},f=function(k,v,K,x,q,Q){var D=m.call(this,K,x,q),U=this.internal.getCoordinateString,P=this.internal.getVerticalCoordinateString,N=l.call(this);if(K=D[0],x=D[1],N[q.index]=q,Q){Q*=Math.PI/180;var le=Math.cos(Q),Y=Math.sin(Q),J=function(ee){return ee.toFixed(4)},O=[J(le),J(Y),J(-1*Y),J(le),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,U(k),P(v+x),"cm"].join(" ")),this.internal.write(O.join(" ")),this.internal.write([U(K),"0","0",U(x),"0","0","cm"].join(" "))):this.internal.write([U(K),"0","0",U(x),U(k),P(v+x),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var h=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},p=e.__addimage__.sHashCode=function(k){var v,K,x=0;if(typeof k=="string")for(K=k.length,v=0;v<K;v++)x=(x<<5)-x+k.charCodeAt(v),x|=0;else if(W(k))for(K=k.byteLength/2,v=0;v<K;v++)x=(x<<5)-x+k[v],x|=0;return x},b=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var v=!0;return k.length===0&&(v=!1),k.length%4!=0&&(v=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(v=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(v=!1),v},S=e.__addimage__.extractImageFromDataUrl=function(k){var v=(k=k||"").split("base64,"),K=null;if(v.length===2){var x=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(v[0]);Array.isArray(x)&&(K={mimeType:x[1],charset:x[2],data:v[1]})}return K},X=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(k){return X()&&k instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(k){return X()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},V=e.__addimage__.binaryStringToUint8Array=function(k){for(var v=k.length,K=new Uint8Array(v),x=0;x<v;x++)K[x]=k.charCodeAt(x);return K},R=e.__addimage__.arrayBufferToBinaryString=function(k){for(var v="",K=W(k)?k:new Uint8Array(k),x=0;x<K.length;x+=8192)v+=String.fromCharCode.apply(null,K.subarray(x,x+8192));return v};e.addImage=function(){var k,v,K,x,q,Q,D,U,P;if(typeof arguments[1]=="number"?(v=t,K=arguments[1],x=arguments[2],q=arguments[3],Q=arguments[4],D=arguments[5],U=arguments[6],P=arguments[7]):(v=arguments[1],K=arguments[2],x=arguments[3],q=arguments[4],Q=arguments[5],D=arguments[6],U=arguments[7],P=arguments[8]),Ft(k=arguments[0])==="object"&&!c(k)&&"imageData"in k){var N=k;k=N.imageData,v=N.format||v||t,K=N.x||K||0,x=N.y||x||0,q=N.w||N.width||q,Q=N.h||N.height||Q,D=N.alias||D,U=N.compression||U,P=N.rotation||N.angle||P}var le=this.internal.getFilters();if(U===void 0&&le.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(K)||isNaN(x))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var Y=z.call(this,k,v,D,U);return f.call(this,K,x,q,Q,Y,P),this};var z=function(k,v,K,x){var q,Q,D;if(typeof k=="string"&&g(k)===t){k=unescape(k);var U=L(k,!1);(U!==""||(U=e.loadFile(k,!0))!==void 0)&&(k=U)}if(c(k)&&(k=d(k,v)),v=g(k,v),!I(v))throw new Error("addImage does not support files of type '"+v+"', please ensure that a plugin for '"+v+"' support is added.");if(((D=K)==null||D.length===0)&&(K=function(P){return typeof P=="string"||W(P)?p(P):W(P.data)?p(P.data):null}(k)),(q=u.call(this,K))||(X()&&(k instanceof Uint8Array||v==="RGBA"||(Q=k,k=V(k))),q=this["process"+v.toUpperCase()](k,s.call(this),K,function(P){return P&&typeof P=="string"&&(P=P.toUpperCase()),P in e.image_compression?P:h.NONE}(x),Q)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},L=e.__addimage__.convertBase64ToBinaryString=function(k,v){var K;v=typeof v!="boolean"||v;var x,q="";if(typeof k=="string"){x=(K=S(k))!==null?K.data:k;try{q=ou(x)}catch(Q){if(v)throw b(x)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(k){var v,K,x="";if(c(k)&&(k=d(k)),typeof k=="string"&&g(k)===t&&((x=L(k,!1))===""&&(x=e.loadFile(k)||""),k=x),K=g(k),!I(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!X()||k instanceof Uint8Array||(k=V(k)),!(v=this["process"+K.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return v.fileType=K,v}})(ot.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};ot.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var g,r,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),s=n.pageContext.annotations,I=!1,c=0;c<s.length&&!I;c++)switch((g=s[c]).type){case"link":(t(g.options.url)||t(g.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var d=0;d<s.length;d++){g=s[d];var u=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(g.type){case"reference":this.internal.write(" "+g.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),h=this.internal.getEncryptor(f.objId),p=g.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(g.bounds.x)+" "+o(g.bounds.y+g.bounds.h)+" "+a(g.bounds.x+g.bounds.w)+" "+o(g.bounds.y)+"] ")+"/Contents ("+u(h(g.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+u(h(p))+") >>",f.content=i;var b=f.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(g.bounds.x+30)+" "+o(g.bounds.y+g.bounds.h)+" "+a(g.bounds.x+g.bounds.w+30)+" "+o(g.bounds.y)+"] ")+" /Parent "+b,g.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(f.objId,"0 R",y.objId,"0 R");break;case"freetext":r="/Rect ["+a(g.bounds.x)+" "+o(g.bounds.y)+" "+a(g.bounds.x+g.bounds.w)+" "+o(g.bounds.y+g.bounds.h)+"] ";var S=g.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+u(m(g.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(g.options.name){var X=this.annotations._nameMap[g.options.name];g.options.pageNumber=X.page,g.options.top=X.y}else g.options.top||(g.options.top=0);if(r="/Rect ["+g.finalBounds.x+" "+g.finalBounds.y+" "+g.finalBounds.w+" "+g.finalBounds.h+"] ",i="",g.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+u(m(g.options.url))+") >>";else if(g.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(g.options.pageNumber).objId+" 0 R",g.options.magFactor=g.options.magFactor||"XYZ",g.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+g.options.top+"]";break;case"FitV":g.options.left=g.options.left||0,i+=" /FitV "+g.options.left+"]";break;case"XYZ":default:var W=o(g.options.top);g.options.left=g.options.left||0,g.options.zoom===void 0&&(g.options.zoom=0),i+=" /XYZ "+g.options.left+" "+W+" "+g.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var g=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":g.pageContext.annotations.push(n)}},e.link=function(n,g,r,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:s(g),w:l(n+r),h:s(g+i)},options:a,type:"link"})},e.textWithLink=function(n,g,r,i){var a,o,l=this.getTextWidth(n),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var I=this.splitTextToSize(n,o).length;a=Math.ceil(s*I)}else o=l,a=s;return this.text(n,g,r,i),r+=.2*s,i.align==="center"&&(g-=l/2),i.align==="right"&&(g-=l),this.link(g,r-s,o,a,i),l},e.getTextWidth=function(n){var g=this.internal.getFontSize();return this.getStringUnitWidth(n)*g/this.internal.scaleFactor}}(ot.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},g={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(f){return t[f.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(f){return typeof f=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(f)},o=e.__arabicParser__.isArabicEndLetter=function(f){return a(f)&&i(f)&&t[f.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(f){return a(f)&&r.indexOf(f.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(f){return a(f)&&i(f)&&t[f.charCodeAt(0)].length>=1};var s=e.__arabicParser__.arabicLetterHasFinalForm=function(f){return a(f)&&i(f)&&t[f.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(f){return a(f)&&i(f)&&t[f.charCodeAt(0)].length>=3};var I=e.__arabicParser__.arabicLetterHasMedialForm=function(f){return a(f)&&i(f)&&t[f.charCodeAt(0)].length==4},c=e.__arabicParser__.resolveLigatures=function(f){var y=0,h=n,p="",b=0;for(y=0;y<f.length;y+=1)h[f.charCodeAt(y)]!==void 0?(b++,typeof(h=h[f.charCodeAt(y)])=="number"&&(p+=String.fromCharCode(h),h=n,b=0),y===f.length-1&&(h=n,p+=f.charAt(y-(b-1)),y-=b-1,b=0)):(h=n,p+=f.charAt(y-b),y-=b,b=0);return p};e.__arabicParser__.isArabicDiacritic=function(f){return f!==void 0&&g[f.charCodeAt(0)]!==void 0};var d=e.__arabicParser__.getCorrectForm=function(f,y,h){return a(f)?i(f)===!1?-1:!s(f)||!a(y)&&!a(h)||!a(h)&&o(y)||o(f)&&!a(y)||o(f)&&l(y)||o(f)&&o(y)?0:I(f)&&a(y)&&!o(y)&&a(h)&&s(h)?3:o(f)||!a(h)?1:2:-1},u=function(f){var y=0,h=0,p=0,b="",S="",X="",W=(f=f||"").split("\\s+"),V=[];for(y=0;y<W.length;y+=1){for(V.push(""),h=0;h<W[y].length;h+=1)b=W[y][h],S=W[y][h-1],X=W[y][h+1],a(b)?(p=d(b,S,X),V[y]+=p!==-1?String.fromCharCode(t[b.charCodeAt(0)][p]):b):V[y]+=b;V[y]=c(V[y])}return V.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var f,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,h=[];if(Array.isArray(y)){var p=0;for(h=[],p=0;p<y.length;p+=1)Array.isArray(y[p])?h.push([u(y[p][0]),y[p][1],y[p][2]]):h.push([u(y[p])]);f=h}else f=u(y);return typeof arguments[0]=="string"?f:(arguments[0].text=f,arguments[0])};e.events.push(["preProcessText",m])}(ot.API),ot.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var g=150;Object.defineProperty(this,"width",{get:function(){return g},set:function(o){g=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=g+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,g){var r;if((n=n||"2d")!=="2d")return null;for(r in g)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=g[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ot.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,g=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(f){l=f}});var s=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return s},set:function(f){s=f}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(f){I=f}});var c=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return c},set:function(f){c=f}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(f){d=f}});var u=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return u},set:function(f){u=f}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(f){m=f}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return g.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,s){g.call(this);var I=(s=s||{}).fontSize||this.getFontSize(),c=s.font||this.getFont(),d=s.scaleFactor||this.internal.scaleFactor,u=0,m=0,f=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var h=s.maxWidth;h>0?typeof l=="string"?l=this.splitTextToSize(l,h):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(b,S){return b.concat(y.splitTextToSize(S,h))},[])):l=Array.isArray(l)?l:[l];for(var p=0;p<l.length;p++)u<(f=this.getStringUnitWidth(l[p],{font:c})*I)&&(u=f);return u!==0&&(m=l.length),{w:u/=d,h:Math.max((m*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/d,0)}},e.cellAddPage=function(){g.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),g.call(this);var s=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,c=this.internal.__cell__.margins||t,d=this.internal.__cell__.tableHeaderRow,u=this.internal.__cell__.printHeaders;return s.lineNumber!==void 0&&(s.lineNumber===l.lineNumber?(l.x=(s.x||0)+(s.width||0),l.y=s.y||0):s.y+s.height+l.height+c.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=c.top,u&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=s.y+s.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-I,l.y+I,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+I,{align:"center",baseline:"top",maxWidth:l.width-I-I}):this.text(l.text,l.x+I,l.y+I,{align:"left",baseline:"top",maxWidth:l.width-I-I})),this.internal.__cell__.lastCell=l,this};e.table=function(l,s,I,c,d){if(g.call(this),!I)throw new Error("No data for PDF table.");var u,m,f,y,h=[],p=[],b=[],S={},X={},W=[],V=[],R=(d=d||{}).autoSize||!1,z=d.printHeaders!==!1,L=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},t),v=typeof d.padding=="number"?d.padding:3,K=d.headerBackgroundColor||"#c8c8c8",x=d.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=v,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=x,this.setFontSize(L),c==null)p=h=Object.keys(I[0]),b=h.map(function(){return"left"});else if(Array.isArray(c)&&Ft(c[0])==="object")for(h=c.map(function(N){return N.name}),p=c.map(function(N){return N.prompt||N.name||""}),b=c.map(function(N){return N.align||"left"}),u=0;u<c.length;u+=1)X[c[u].name]=c[u].width*(19.049976/25.4);else Array.isArray(c)&&typeof c[0]=="string"&&(p=h=c,b=h.map(function(){return"left"}));if(R||Array.isArray(c)&&typeof c[0]=="string")for(u=0;u<h.length;u+=1){for(S[y=h[u]]=I.map(function(N){return N[y]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(p[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=S[y],this.setFont(void 0,"normal"),f=0;f<m.length;f+=1)W.push(this.getTextDimensions(m[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[y]=Math.max.apply(null,W)+v+v,W=[]}if(z){var q={};for(u=0;u<h.length;u+=1)q[h[u]]={},q[h[u]].text=p[u],q[h[u]].align=b[u];var Q=o.call(this,q,X);V=h.map(function(N){return new i(l,s,X[N],Q,q[N].text,void 0,q[N].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var D=c.reduce(function(N,le){return N[le.name]=le.align,N},{});for(u=0;u<I.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:I[u]},this);var U=o.call(this,I[u],X);for(f=0;f<h.length;f+=1){var P=I[u][h[f]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:f,data:P},this),a.call(this,new i(l,s,X[h[f]],U,P,u+2,D[h[f]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=s,this};var o=function(l,s){var I=this.internal.__cell__.padding,c=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(u){var m=l[u];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,s[u]-I-I)},this).map(function(u){return this.getLineHeightFactor()*u.length*c/d+I+I},this).reduce(function(u,m){return Math.max(u,m)},0)};e.setTableHeaderRow=function(l){g.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,s){if(g.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var c=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(c[0],c[1],c[2],c[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],u=0;u<this.internal.__cell__.tableHeaderRow.length;u+=1){I=this.internal.__cell__.tableHeaderRow[u].clone(),s&&(I.y=this.internal.__cell__.margins.top||0,d.push(I)),I.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,I),this.setTextColor(m)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),n=!1}}(ot.API);var z9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},U9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],z2=M9(U9),T9=[100,200,300,400,500,600,700,800,900],Fae=M9(T9);function U2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return z9[i=i||"normal"]?i:"normal"}(e.style),g=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),r=function(i){return typeof z2[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:g,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,g].join(" ")}}}function Lk(e,t,n,g){var r;for(r=n;r>=0&&r<t.length;r+=g)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=g)if(e[t[r]])return e[t[r]]}var xae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ek={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Mk(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Kae(e,t,n){for(var g=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},xae,n.genericFontFamilies||{}),i=null,a=null,o=0;o<t.length;++o)if(r[(i=U2(t[o])).family]&&(i.family=r[i.family]),e.hasOwnProperty(i.family)){a=e[i.family];break}if(!(a=a||e[g]))throw new Error("Could not find a font-family for the rule '"+Mk(i)+"' and default family '"+g+"'.");if(a=function(l,s){if(s[l])return s[l];var I=z2[l],c=I<=z2.normal?-1:1,d=Lk(s,U9,I,c);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(i.stretch,a),a=function(l,s){if(s[l])return s[l];for(var I=z9[l],c=0;c<I.length;++c)if(s[I[c]])return s[I[c]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,s){if(s[l])return s[l];if(l===400&&s[500])return s[500];if(l===500&&s[400])return s[400];var I=Fae[l],c=Lk(s,T9,I,l<400?-1:1);if(!c)throw new Error("Could not find a matching font-weight for value "+l);return c}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Mk(i)+"'.");return a}function zk(e){return e.trimLeft()}function Lae(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Eae(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var hh,Uk,Tk,vy=["times"];(function(e){var t,n,g,r,i,a,o,l,s,I=function(Y){return Y=Y||{},this.isStrokeTransparent=Y.isStrokeTransparent||!1,this.strokeOpacity=Y.strokeOpacity||1,this.strokeStyle=Y.strokeStyle||"#000000",this.fillStyle=Y.fillStyle||"#000000",this.isFillTransparent=Y.isFillTransparent||!1,this.fillOpacity=Y.fillOpacity||1,this.font=Y.font||"10px sans-serif",this.textBaseline=Y.textBaseline||"alphabetic",this.textAlign=Y.textAlign||"left",this.lineWidth=Y.lineWidth||1,this.lineJoin=Y.lineJoin||"miter",this.lineCap=Y.lineCap||"butt",this.path=Y.path||[],this.transform=Y.transform!==void 0?Y.transform.clone():new l,this.globalCompositeOperation=Y.globalCompositeOperation||"normal",this.globalAlpha=Y.globalAlpha||1,this.clip_path=Y.clip_path||[],this.currentPoint=Y.currentPoint||new a,this.miterLimit=Y.miterLimit||10,this.lastPoint=Y.lastPoint||new a,this.lineDashOffset=Y.lineDashOffset||0,this.lineDash=Y.lineDash||[],this.margin=Y.margin||[0,0,0,0],this.prevPageLastElemOffset=Y.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Y.ignoreClearRect!="boolean"||Y.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new c(this),t=this.internal.f2,n=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,s=new I}]);var c=function(Y){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=Y;Object.defineProperty(this,"pdf",{get:function(){return J}});var O=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return O},set:function(pe){O=!!pe}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(pe){ee=!!pe}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(pe){isNaN(pe)||(te=pe)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(pe){isNaN(pe)||(se=pe)}}),Object.defineProperty(this,"margin",{get:function(){return s.margin},set:function(pe){var ge;typeof pe=="number"?ge=[pe,pe,pe,pe]:((ge=new Array(4))[0]=pe[0],ge[1]=pe.length>=2?pe[1]:ge[0],ge[2]=pe.length>=3?pe[2]:ge[0],ge[3]=pe.length>=4?pe[3]:ge[1]),s.margin=ge}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(pe){ce=pe}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(pe){re=pe}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(pe){fe=pe}}),Object.defineProperty(this,"ctx",{get:function(){return s},set:function(pe){pe instanceof I&&(s=pe)}}),Object.defineProperty(this,"path",{get:function(){return s.path},set:function(pe){s.path=pe}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(pe){be=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var ge;ge=d(pe),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var ge=d(pe);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var ue=null;function He(pe,ge){if(ue===null){var rt=function(qe){var we=[];return Object.keys(qe).forEach(function(Ke){qe[Ke].forEach(function(Ue){var Me=null;switch(Ue){case"bold":Me={family:Ke,weight:"bold"};break;case"italic":Me={family:Ke,style:"italic"};break;case"bolditalic":Me={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Ke}}Me!==null&&(Me.ref={name:Ke,style:Ue},we.push(Me))})}),we}(pe.getFontList());ue=function(qe){for(var we={},Ke=0;Ke<qe.length;++Ke){var Ue=U2(qe[Ke]),Me=Ue.family,nt=Ue.stretch,ct=Ue.style,At=Ue.weight;we[Me]=we[Me]||{},we[Me][nt]=we[Me][nt]||{},we[Me][nt][ct]=we[Me][nt][ct]||{},we[Me][nt][ct][At]=Ue}return we}(rt.concat(ge))}return ue}var Le=null;Object.defineProperty(this,"fontFaces",{get:function(){return Le},set:function(pe){ue=null,Le=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var ge;if(this.ctx.font=pe,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var rt=ge[1],qe=(ge[2],ge[3]),we=ge[4],Ke=(ge[5],ge[6]),Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(we)[2];we=Math.floor(Ue==="px"?parseFloat(we)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(we)*this.pdf.getFontSize():parseFloat(we)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(we);var Me=function(xe){var $e,Fe,An=[],ft=xe.trim();if(ft==="")return vy;if(ft in Ek)return[Ek[ft]];for(;ft!=="";){switch(Fe=null,$e=(ft=zk(ft)).charAt(0)){case'"':case"'":Fe=Lae(ft.substring(1),$e);break;default:Fe=Eae(ft)}if(Fe===null||(An.push(Fe[0]),(ft=zk(Fe[1]))!==""&&ft.charAt(0)!==","))return vy;ft=ft.replace(/^,/,"")}return An}(Ke);if(this.fontFaces){var nt=Kae(He(this.pdf,this.fontFaces),Me.map(function(xe){return{family:xe,stretch:"normal",weight:qe,style:rt}}));this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var ct="";(qe==="bold"||parseInt(qe,10)>=700||rt==="bold")&&(ct="bold"),rt==="italic"&&(ct+="italic"),ct.length===0&&(ct="normal");for(var At="",me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<Me.length;We++){if(this.pdf.internal.getFont(Me[We],ct,{noFallback:!0,disableWarning:!0})!==void 0){At=Me[We];break}if(ct==="bolditalic"&&this.pdf.internal.getFont(Me[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=Me[We],ct="bold";else if(this.pdf.internal.getFont(Me[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=Me[We],ct="normal";break}}if(At===""){for(var Te=0;Te<Me.length;Te++)if(me[Me[Te]]){At=me[Me[Te]];break}}At=At===""?"Times":At,this.pdf.setFont(At,ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};c.prototype.setLineDash=function(Y){this.lineDash=Y},c.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},c.prototype.fill=function(){S.call(this,"fill",!1)},c.prototype.stroke=function(){S.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(Y,J){if(isNaN(Y)||isNaN(J))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var O=this.ctx.transform.applyToPoint(new a(Y,J));this.path.push({type:"mt",x:O.x,y:O.y}),this.ctx.lastPoint=new a(Y,J)},c.prototype.closePath=function(){var Y=new a(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Ft(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){Y=new a(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(Y.x,Y.y)},c.prototype.lineTo=function(Y,J){if(isNaN(Y)||isNaN(J))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var O=this.ctx.transform.applyToPoint(new a(Y,J));this.path.push({type:"lt",x:O.x,y:O.y}),this.ctx.lastPoint=new a(O.x,O.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},c.prototype.quadraticCurveTo=function(Y,J,O,ee){if(isNaN(O)||isNaN(ee)||isNaN(Y)||isNaN(J))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(O,ee)),se=this.ctx.transform.applyToPoint(new a(Y,J));this.path.push({type:"qct",x1:se.x,y1:se.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},c.prototype.bezierCurveTo=function(Y,J,O,ee,te,se){if(isNaN(te)||isNaN(se)||isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new a(te,se)),re=this.ctx.transform.applyToPoint(new a(Y,J)),fe=this.ctx.transform.applyToPoint(new a(O,ee));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:fe.x,y2:fe.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},c.prototype.arc=function(Y,J,O,ee,te,se){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee)||isNaN(te))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new a(Y,J));Y=ce.x,J=ce.y;var re=this.ctx.transform.applyToPoint(new a(0,O)),fe=this.ctx.transform.applyToPoint(new a(0,0));O=Math.sqrt(Math.pow(re.x-fe.x,2)+Math.pow(re.y-fe.y,2))}Math.abs(te-ee)>=2*Math.PI&&(ee=0,te=2*Math.PI),this.path.push({type:"arc",x:Y,y:J,radius:O,startAngle:ee,endAngle:te,counterclockwise:se})},c.prototype.arcTo=function(Y,J,O,ee,te){throw new Error("arcTo not implemented.")},c.prototype.rect=function(Y,J,O,ee){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Y,J),this.lineTo(Y+O,J),this.lineTo(Y+O,J+ee),this.lineTo(Y,J+ee),this.lineTo(Y,J),this.lineTo(Y+O,J),this.lineTo(Y,J)},c.prototype.fillRect=function(Y,J,O,ee){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!u.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Y,J,O,ee),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},c.prototype.strokeRect=function(Y,J,O,ee){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(Y,J,O,ee),this.stroke())},c.prototype.clearRect=function(Y,J,O,ee){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Y,J,O,ee))},c.prototype.save=function(Y){Y=typeof Y!="boolean"||Y;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,O=0;O<this.pdf.internal.getNumberOfPages();O++)this.pdf.setPage(O+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),Y){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},c.prototype.restore=function(Y){Y=typeof Y!="boolean"||Y;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,O=0;O<this.pdf.internal.getNumberOfPages();O++)this.pdf.setPage(O+1),this.pdf.internal.out("Q");this.pdf.setPage(J),Y&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(Y){var J,O,ee,te;if(Y.isCanvasGradient===!0&&(Y=Y.getColor()),!Y)return{r:0,g:0,b:0,a:0,style:Y};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Y))J=0,O=0,ee=0,te=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Y);if(se!==null)J=parseInt(se[1]),O=parseInt(se[2]),ee=parseInt(se[3]),te=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Y))!==null)J=parseInt(se[1]),O=parseInt(se[2]),ee=parseInt(se[3]),te=parseFloat(se[4]);else{if(te=1,typeof Y=="string"&&Y.charAt(0)!=="#"){var ce=new H9(Y);Y=ce.ok?ce.toHex():"#000000"}Y.length===4?(J=Y.substring(1,2),J+=J,O=Y.substring(2,3),O+=O,ee=Y.substring(3,4),ee+=ee):(J=Y.substring(1,3),O=Y.substring(3,5),ee=Y.substring(5,7)),J=parseInt(J,16),O=parseInt(O,16),ee=parseInt(ee,16)}}return{r:J,g:O,b:ee,a:te,style:Y}},u=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};c.prototype.fillText=function(Y,J,O,ee){if(isNaN(J)||isNaN(O)||typeof Y!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!u.call(this)){var te=U(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;v.call(this,{text:Y,x:J,y:O,scale:se,angle:te,align:this.textAlign,maxWidth:ee})}},c.prototype.strokeText=function(Y,J,O,ee){if(isNaN(J)||isNaN(O)||typeof Y!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ee=isNaN(ee)?void 0:ee;var te=U(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;v.call(this,{text:Y,x:J,y:O,scale:se,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:ee})}},c.prototype.measureText=function(Y){if(typeof Y!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,O=this.pdf.internal.scaleFactor,ee=J.internal.getFontSize(),te=J.getStringUnitWidth(Y)*ee/J.internal.scaleFactor,se=function(ce){var re=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return re}}),this};return new se({width:te*=Math.round(96*O/72*1e4)/1e4})},c.prototype.scale=function(Y,J){if(isNaN(Y)||isNaN(J))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var O=new l(Y,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(O)},c.prototype.rotate=function(Y){if(isNaN(Y))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new l(Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},c.prototype.translate=function(Y,J){if(isNaN(Y)||isNaN(J))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var O=new l(1,0,0,1,Y,J);this.ctx.transform=this.ctx.transform.multiply(O)},c.prototype.transform=function(Y,J,O,ee,te,se){if(isNaN(Y)||isNaN(J)||isNaN(O)||isNaN(ee)||isNaN(te)||isNaN(se))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new l(Y,J,O,ee,te,se);this.ctx.transform=this.ctx.transform.multiply(ce)},c.prototype.setTransform=function(Y,J,O,ee,te,se){Y=isNaN(Y)?1:Y,J=isNaN(J)?0:J,O=isNaN(O)?0:O,ee=isNaN(ee)?1:ee,te=isNaN(te)?0:te,se=isNaN(se)?0:se,this.ctx.transform=new l(Y,J,O,ee,te,se)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};c.prototype.drawImage=function(Y,J,O,ee,te,se,ce,re,fe){var be=this.pdf.getImageProperties(Y),ue=1,He=1,Le=1,pe=1;ee!==void 0&&re!==void 0&&(Le=re/ee,pe=fe/te,ue=be.width/ee*re/ee,He=be.height/te*fe/te),se===void 0&&(se=J,ce=O,J=0,O=0),ee!==void 0&&re===void 0&&(re=ee,fe=te),ee===void 0&&re===void 0&&(re=be.width,fe=be.height);for(var ge,rt=this.ctx.transform.decompose(),qe=U(rt.rotate.shx),we=new l,Ke=(we=(we=(we=we.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new o(se-J*Le,ce-O*pe,ee*ue,te*He)),Ue=y.call(this,Ke),Me=[],nt=0;nt<Ue.length;nt+=1)Me.indexOf(Ue[nt])===-1&&Me.push(Ue[nt]);if(b(Me),this.autoPaging)for(var ct=Me[0],At=Me[Me.length-1],me=ct;me<At+1;me++){this.pdf.setPage(me);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=me===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Fe=me===1?0:xe+(me-2)*$e;if(this.ctx.clip_path.length!==0){var An=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=p(ge,this.posX+this.margin[3],-Fe+Te+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=An}var ft=JSON.parse(JSON.stringify(Ke));ft=p([ft],this.posX+this.margin[3],-Fe+Te+this.ctx.prevPageLastElemOffset)[0];var ug=(me>ct||me<At)&&f.call(this);ug&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,$e,null).clip().discardPath()),this.pdf.addImage(Y,"JPEG",ft.x,ft.y,ft.w,ft.h,null,null,qe),ug&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Y,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,qe)};var y=function(Y,J,O){var ee=[];J=J||this.pdf.internal.pageSize.width,O=O||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(Y.type){default:case"mt":case"lt":ee.push(Math.floor((Y.y+te)/O)+1);break;case"arc":ee.push(Math.floor((Y.y+te-Y.radius)/O)+1),ee.push(Math.floor((Y.y+te+Y.radius)/O)+1);break;case"qct":var se=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x,Y.y);ee.push(Math.floor((se.y+te)/O)+1),ee.push(Math.floor((se.y+se.h+te)/O)+1);break;case"bct":var ce=N(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y);ee.push(Math.floor((ce.y+te)/O)+1),ee.push(Math.floor((ce.y+ce.h+te)/O)+1);break;case"rect":ee.push(Math.floor((Y.y+te)/O)+1),ee.push(Math.floor((Y.y+Y.h+te)/O)+1)}for(var re=0;re<ee.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<ee[re];)h.call(this);return ee},h=function(){var Y=this.fillStyle,J=this.strokeStyle,O=this.font,ee=this.lineCap,te=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=Y,this.strokeStyle=J,this.font=O,this.lineCap=ee,this.lineWidth=te,this.lineJoin=se},p=function(Y,J,O){for(var ee=0;ee<Y.length;ee++)switch(Y[ee].type){case"bct":Y[ee].x2+=J,Y[ee].y2+=O;case"qct":Y[ee].x1+=J,Y[ee].y1+=O;case"mt":case"lt":case"arc":default:Y[ee].x+=J,Y[ee].y+=O}return Y},b=function(Y){return Y.sort(function(J,O){return J-O})},S=function(Y,J){for(var O,ee,te=this.fillStyle,se=this.strokeStyle,ce=this.lineCap,re=this.lineWidth,fe=Math.abs(re*this.ctx.transform.scaleX),be=this.lineJoin,ue=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Le=[],pe=0;pe<He.length;pe++)if(He[pe].x!==void 0)for(var ge=y.call(this,He[pe]),rt=0;rt<ge.length;rt+=1)Le.indexOf(ge[rt])===-1&&Le.push(ge[rt]);for(var qe=0;qe<Le.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Le[qe];)h.call(this);if(b(Le),this.autoPaging)for(var we=Le[0],Ke=Le[Le.length-1],Ue=we;Ue<Ke+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=te,this.strokeStyle=se,this.lineCap=ce,this.lineWidth=fe,this.lineJoin=be;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=Ue===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],me=Ue===1?0:ct+(Ue-2)*At;if(this.ctx.clip_path.length!==0){var We=this.path;O=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=p(O,this.posX+this.margin[3],-me+nt+this.ctx.prevPageLastElemOffset),X.call(this,Y,!0),this.path=We}if(ee=JSON.parse(JSON.stringify(ue)),this.path=p(ee,this.posX+this.margin[3],-me+nt+this.ctx.prevPageLastElemOffset),J===!1||Ue===0){var Te=(Ue>we||Ue<Ke)&&f.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,At,null).clip().discardPath()),X.call(this,Y,J),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=fe,X.call(this,Y,J),this.lineWidth=re;this.path=ue},X=function(Y,J){if((Y!=="stroke"||J||!m.call(this))&&(Y==="stroke"||J||!u.call(this))){for(var O,ee,te=[],se=this.path,ce=0;ce<se.length;ce++){var re=se[ce];switch(re.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:re,deltas:[],abs:[]});break;case"lt":var fe=te.length;if(se[ce-1]&&!isNaN(se[ce-1].x)&&(O=[re.x-se[ce-1].x,re.y-se[ce-1].y],fe>0)){for(;fe>=0;fe--)if(te[fe-1].close!==!0&&te[fe-1].begin!==!0){te[fe-1].deltas.push(O),te[fe-1].abs.push(re);break}}break;case"bct":O=[re.x1-se[ce-1].x,re.y1-se[ce-1].y,re.x2-se[ce-1].x,re.y2-se[ce-1].y,re.x-se[ce-1].x,re.y-se[ce-1].y],te[te.length-1].deltas.push(O);break;case"qct":var be=se[ce-1].x+2/3*(re.x1-se[ce-1].x),ue=se[ce-1].y+2/3*(re.y1-se[ce-1].y),He=re.x+2/3*(re.x1-re.x),Le=re.y+2/3*(re.y1-re.y),pe=re.x,ge=re.y;O=[be-se[ce-1].x,ue-se[ce-1].y,He-se[ce-1].x,Le-se[ce-1].y,pe-se[ce-1].x,ge-se[ce-1].y],te[te.length-1].deltas.push(O);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(re)}}ee=J?null:Y==="stroke"?"stroke":"fill";for(var rt=!1,qe=0;qe<te.length;qe++)if(te[qe].arc)for(var we=te[qe].abs,Ke=0;Ke<we.length;Ke++){var Ue=we[Ke];Ue.type==="arc"?R.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,J,!rt):K.call(this,Ue.x,Ue.y),rt=!0}else if(te[qe].close===!0)this.pdf.internal.out("h"),rt=!1;else if(te[qe].begin!==!0){var Me=te[qe].start.x,nt=te[qe].start.y;x.call(this,te[qe].deltas,Me,nt),rt=!0}ee&&z.call(this,ee),J&&L.call(this)}},W=function(Y){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,O=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Y-O;case"top":return Y+J-O;case"hanging":return Y+J-2*O;case"middle":return Y+J/2-O;case"ideographic":return Y;case"alphabetic":default:return Y}},V=function(Y){return Y+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};c.prototype.createLinearGradient=function(){var Y=function(){};return Y.colorStops=[],Y.addColorStop=function(J,O){this.colorStops.push([J,O])},Y.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Y.isCanvasGradient=!0,Y},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(Y,J,O,ee,te,se,ce,re,fe){for(var be=Q.call(this,O,ee,te,se),ue=0;ue<be.length;ue++){var He=be[ue];ue===0&&(fe?k.call(this,He.x1+Y,He.y1+J):K.call(this,He.x1+Y,He.y1+J)),q.call(this,Y,J,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}re?L.call(this):z.call(this,ce)},z=function(Y){switch(Y){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(Y,J){this.pdf.internal.out(n(Y)+" "+g(J)+" m")},v=function(Y){var J;switch(Y.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var O=this.pdf.getTextDimensions(Y.text),ee=W.call(this,Y.y),te=V.call(this,ee)-O.h,se=this.ctx.transform.applyToPoint(new a(Y.x,ee)),ce=this.ctx.transform.decompose(),re=new l;re=(re=(re=re.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var fe,be,ue,He=this.ctx.transform.applyToRectangle(new o(Y.x,ee,O.w,O.h)),Le=re.applyToRectangle(new o(Y.x,te,O.w,O.h)),pe=y.call(this,Le),ge=[],rt=0;rt<pe.length;rt+=1)ge.indexOf(pe[rt])===-1&&ge.push(pe[rt]);if(b(ge),this.autoPaging)for(var qe=ge[0],we=ge[ge.length-1],Ke=qe;Ke<we+1;Ke++){this.pdf.setPage(Ke);var Ue=Ke===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],ct=nt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],me=At-this.margin[3],We=Ke===1?0:Me+(Ke-2)*ct;if(this.ctx.clip_path.length!==0){var Te=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=p(fe,this.posX+this.margin[3],-1*We+Ue),X.call(this,"fill",!0),this.path=Te}var xe=p([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-We+Ue+this.ctx.prevPageLastElemOffset)[0];Y.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*Y.scale),ue=this.lineWidth,this.lineWidth=ue*Y.scale);var $e=this.autoPaging!=="text";if($e||xe.y+xe.h<=nt){if($e||xe.y>=Ue&&xe.x<=At){var Fe=$e?Y.text:this.pdf.splitTextToSize(Y.text,Y.maxWidth||At-xe.x)[0],An=p([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-We+Ue+this.ctx.prevPageLastElemOffset)[0],ft=$e&&(Ke>qe||Ke<we)&&f.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,ct,null).clip().discardPath()),this.pdf.text(Fe,An.x,An.y,{angle:Y.angle,align:J,renderingMode:Y.renderingMode}),ft&&this.pdf.restoreGraphicsState()}}else xe.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-xe.y);Y.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ue)}else Y.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*Y.scale),ue=this.lineWidth,this.lineWidth=ue*Y.scale),this.pdf.text(Y.text,se.x+this.posX,se.y+this.posY,{angle:Y.angle,align:J,renderingMode:Y.renderingMode,maxWidth:Y.maxWidth}),Y.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ue)},K=function(Y,J,O,ee){O=O||0,ee=ee||0,this.pdf.internal.out(n(Y+O)+" "+g(J+ee)+" l")},x=function(Y,J,O){return this.pdf.lines(Y,J,O,null,null)},q=function(Y,J,O,ee,te,se,ce,re){this.pdf.internal.out([t(r(O+Y)),t(i(ee+J)),t(r(te+Y)),t(i(se+J)),t(r(ce+Y)),t(i(re+J)),"c"].join(" "))},Q=function(Y,J,O,ee){for(var te=2*Math.PI,se=Math.PI/2;J>O;)J-=te;var ce=Math.abs(O-J);ce<te&&ee&&(ce=te-ce);for(var re=[],fe=ee?-1:1,be=J;ce>1e-5;){var ue=be+fe*Math.min(ce,se);re.push(D.call(this,Y,be,ue)),ce-=Math.abs(ue-be),be=ue}return re},D=function(Y,J,O){var ee=(O-J)/2,te=Y*Math.cos(ee),se=Y*Math.sin(ee),ce=te,re=-se,fe=ce*ce+re*re,be=fe+ce*te+re*se,ue=4/3*(Math.sqrt(2*fe*be)-be)/(ce*se-re*te),He=ce-ue*re,Le=re+ue*ce,pe=He,ge=-Le,rt=ee+J,qe=Math.cos(rt),we=Math.sin(rt);return{x1:Y*Math.cos(J),y1:Y*Math.sin(J),x2:He*qe-Le*we,y2:He*we+Le*qe,x3:pe*qe-ge*we,y3:pe*we+ge*qe,x4:Y*Math.cos(O),y4:Y*Math.sin(O)}},U=function(Y){return 180*Y/Math.PI},P=function(Y,J,O,ee,te,se){var ce=Y+.5*(O-Y),re=J+.5*(ee-J),fe=te+.5*(O-te),be=se+.5*(ee-se),ue=Math.min(Y,te,ce,fe),He=Math.max(Y,te,ce,fe),Le=Math.min(J,se,re,be),pe=Math.max(J,se,re,be);return new o(ue,Le,He-ue,pe-Le)},N=function(Y,J,O,ee,te,se,ce,re){var fe,be,ue,He,Le,pe,ge,rt,qe,we,Ke,Ue,Me,nt,ct=O-Y,At=ee-J,me=te-O,We=se-ee,Te=ce-te,xe=re-se;for(be=0;be<41;be++)qe=(ge=(ue=Y+(fe=be/40)*ct)+fe*((Le=O+fe*me)-ue))+fe*(Le+fe*(te+fe*Te-Le)-ge),we=(rt=(He=J+fe*At)+fe*((pe=ee+fe*We)-He))+fe*(pe+fe*(se+fe*xe-pe)-rt),be==0?(Ke=qe,Ue=we,Me=qe,nt=we):(Ke=Math.min(Ke,qe),Ue=Math.min(Ue,we),Me=Math.max(Me,qe),nt=Math.max(nt,we));return new o(Math.round(Ke),Math.round(Ue),Math.round(Me-Ke),Math.round(nt-Ue))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Y,J,O=(Y=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:Y,lineDashOffset:J}));this.prevLineDash!==O&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=O)}}})(ot.API),function(e){var t=function(i){var a,o,l,s,I,c,d,u,m,f;for(o=[],l=0,s=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;s>l;l+=4)(I=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(c=(I=((I=((I=((I=(I-(f=I%85))/85)-(m=I%85))/85)-(u=I%85))/85)-(d=I%85))/85)%85,o.push(c+33,d+33,u+33,m+33,f+33)):o.push(122);return function(y,h){for(var p=h;p>0;p--)y.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(i){var a,o,l,s,I,c=String,d="length",u=255,m="charCodeAt",f="slice",y="replace";for(i[f](-2),i=i[f](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],s=0,I=(i+=a="uuuuu"[f](i[d]%5||5))[d];I>s;s+=5)o=52200625*(i[m](s)-33)+614125*(i[m](s+1)-33)+7225*(i[m](s+2)-33)+85*(i[m](s+3)-33)+(i[m](s+4)-33),l.push(u&o>>24,u&o>>16,u&o>>8,u&o);return function(h,p){for(var b=p;b>0;b--)h.pop()}(l,a[d]),c.fromCharCode.apply(c,l)},g=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},r=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=x2(a)).reduce(function(l,s){return l+String.fromCharCode(s)},"")};e.processDataByFilters=function(i,a){var o=0,l=i||"",s=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),s.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),s.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=g(l),s.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(I){return("0"+I.charCodeAt().toString(16)).slice(-2)}).join("")+">",s.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),s.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:s.reverse().join(" ")}}}(ot.API),function(e){e.loadFile=function(t,n,g){return function(r,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,s,I){var c=new XMLHttpRequest,d=0,u=function(m){var f=m.length,y=[],h=String.fromCharCode;for(d=0;d<f;d+=1)y.push(h(255&m.charCodeAt(d)));return y.join("")};if(c.open("GET",l,!s),c.overrideMimeType("text/plain; charset=x-user-defined"),s===!1&&(c.onload=function(){c.status===200?I(u(this.responseText)):I(void 0)}),c.send(null),s&&c.status===200)return u(c.responseText)}(r,i,a)}catch{}return o}(t,n,g)},e.loadImageFile=e.loadFile}(ot.API),function(e){function t(){return(st.html2canvas?Promise.resolve(st.html2canvas):X2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(st.DOMPurify?Promise.resolve(st.DOMPurify):X2(()=>import("./purify.es-DmrQBWoP.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var g=function(a){var o=Ft(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},r=function(a,o){var l=document.createElement(a);for(var s in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[s]=o.style[s];return l},i=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),s=a.convert(Promise.resolve(),l);return s=(s=s.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(g(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:r("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(s,I){for(var c=s.nodeType===3?document.createTextNode(s.nodeValue):s.cloneNode(!1),d=s.firstChild;d;d=d.nextSibling)I!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||c.appendChild(l(d,I));return s.nodeType===1&&(s.nodeName==="CANVAS"?(c.width=s.width,c.height=s.height,c.getContext("2d").drawImage(s,0,0)):s.nodeName!=="TEXTAREA"&&s.nodeName!=="SELECT"||(c.value=s.value),c.addEventListener("load",function(){c.scrollTop=s.scrollTop,c.scrollLeft=s.scrollLeft},!0)),c}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=this.opt.jsPDF,s=this.opt.fontFaces,I=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,c=Object.assign({async:!0,allowTaint:!0,scale:I,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete c.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=s,s)for(var d=0;d<s.length;++d){var u=s[d],m=u.src.find(function(f){return f.format==="truetype"});m&&l.addFont(m.url,u.ref.name,u.ref.style)}return c.windowHeight=c.windowHeight||0,c.windowHeight=c.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):c.windowHeight,l.context2d.save(!0),o(this.prop.container,c)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(g(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(g(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(l,s){return Math.floor(l*s/72*96)}return this.then(function(){(a=a||ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,l,s){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),s!=null&&(this.progress.stack=s),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,l,s){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,s?this.progress.stack.concat(s):null)},i.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(s,I){return l.updateProgress(null,null,1,[s]),Promise.prototype.then.call(this,function(c){return l.updateProgress(null,s),c}).then(s,I).then(function(c){return l.updateProgress(1),c})})},i.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var s=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),I=l.call(s,a,o);return i.convert(I,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,ot.getPageSize=function(a,o,l){if(Ft(a)==="object"){var s=a;a=s.orientation,o=s.unit||o,l=s.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var I,c=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":I=1;break;case"mm":I=72/25.4;break;case"cm":I=72/2.54;break;case"in":I=72;break;case"px":I=.75;break;case"pc":case"em":I=12;break;case"ex":I=6;break;default:throw"Invalid unit: "+o}var u,m=0,f=0;if(d.hasOwnProperty(c))m=d[c][1]/I,f=d[c][0]/I;else try{m=l[1],f=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",f>m&&(u=f,f=m,m=u);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",m>f&&(u=f,f=m,m=u)}return{width:f,height:m,unit:o,k:I,orientation:a}},e.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(U2):null;var l=new i(o);return o.worker?l:l.from(a).doCallback()}}(ot.API),ot.API.addJS=function(e){return Tk=e,this.internal.events.subscribe("postPutResources",function(){hh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Uk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Tk+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hh!==void 0&&Uk!==void 0&&this.internal.out("/Names <</JavaScript "+hh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,g=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),i=0;i<r.length;i++){var a=r[i],o=g.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,I=[];for(i=0;i<s;i++){var c=n.internal.newObject();I.push(c);var d=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var u=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<I.length;i++)n.internal.write("(page_"+(i+1)+")"+I[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+u+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(g,r,i){var a={title:r,options:i,children:[]};return g==null&&(g=this.root),g.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(g){g.id=n.internal.newObjectDeferred();for(var r=0;r<g.children.length;r++)this.genIds_r(g.children[r])},n.outline.renderRoot=function(g){this.objStart(g),this.line("/Type /Outlines"),g.children.length>0&&(this.line("/First "+this.makeRef(g.children[0])),this.line("/Last "+this.makeRef(g.children[g.children.length-1]))),this.line("/Count "+this.count_r({count:0},g)),this.objEnd()},n.outline.renderItems=function(g){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<g.children.length;i++){var a=g.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(g)),i>0&&this.line("/Prev "+this.makeRef(g.children[i-1])),i<g.children.length-1&&this.line("/Next "+this.makeRef(g.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var s=0;s<g.children.length;s++)this.renderItems(g.children[s])},n.outline.line=function(g){this.ctx.val+=g+`\r
`},n.outline.makeRef=function(g){return g.id+" 0 R"},n.outline.makeString=function(g){return"("+n.internal.pdfEscape(g)+")"},n.outline.objStart=function(g){this.ctx.val+=`\r
`+g.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(g,r){for(var i=0;i<r.children.length;i++)g.count++,this.count_r(g,r.children[i]);return g.count}}])}(ot.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,g,r,i,a,o){var l,s=this.decode.DCT_DECODE,I=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(c){for(var d,u=256*c.charCodeAt(4)+c.charCodeAt(5),m=c.length,f={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(y+=u,t.indexOf(c.charCodeAt(y+1))!==-1){d=256*c.charCodeAt(y+5)+c.charCodeAt(y+6),f={width:256*c.charCodeAt(y+7)+c.charCodeAt(y+8),height:d,numcomponents:c.charCodeAt(y+9)};break}u=256*c.charCodeAt(y+2)+c.charCodeAt(y+3)}return f}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}I={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:s,index:g,alias:r}}return I}}(ot.API);var hI,mh,Dk,jk,Qk,Mae=function(){var e,t,n;function g(i){var a,o,l,s,I,c,d,u,m,f,y,h,p,b;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},c=null;;){switch(a=this.readUInt32(),m=(function(){var S,X;for(X=[],S=0;S<4;++S)X.push(String.fromCharCode(this.data[this.pos++]));return X}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":c&&this.animation.frames.push(c),this.pos+=4,c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},I=this.readUInt16(),s=this.readUInt16()||100,c.delay=1e3*I/s,c.disposeOp=this.data[this.pos++],c.blendOp=this.data[this.pos++],c.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,a-=4),i=(c!=null?c.data:void 0)||this.imgData,h=0;0<=a?h<a:h>a;0<=a?++h:--h)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((f=l-this.transparency.indexed.length)>0)for(p=0;0<=f?p<f:p>f;0<=f?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":d=(y=this.read(a)).indexOf(0),u=String.fromCharCode.apply(String,y.slice(0,d)),this.text[u]=String.fromCharCode.apply(String,y.slice(d+1));break;case"IEND":return c&&this.animation.frames.push(c),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}g.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},g.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,s=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function I(c,d,u,m){var f,y,h,p,b,S,X,W,V,R,z,L,k,v,K,x,q,Q,D,U,P,N=Math.ceil((s.width-c)/u),le=Math.ceil((s.height-d)/m),Y=s.width==N&&s.height==le;for(v=a*N,L=Y?o:new Uint8Array(v*le),S=i.length,k=0,y=0;k<le&&l<S;){switch(i[l++]){case 0:for(p=q=0;q<v;p=q+=1)L[y++]=i[l++];break;case 1:for(p=Q=0;Q<v;p=Q+=1)f=i[l++],b=p<a?0:L[y-a],L[y++]=(f+b)%256;break;case 2:for(p=D=0;D<v;p=D+=1)f=i[l++],h=(p-p%a)/a,K=k&&L[(k-1)*v+h*a+p%a],L[y++]=(K+f)%256;break;case 3:for(p=U=0;U<v;p=U+=1)f=i[l++],h=(p-p%a)/a,b=p<a?0:L[y-a],K=k&&L[(k-1)*v+h*a+p%a],L[y++]=(f+Math.floor((b+K)/2))%256;break;case 4:for(p=P=0;P<v;p=P+=1)f=i[l++],h=(p-p%a)/a,b=p<a?0:L[y-a],k===0?K=x=0:(K=L[(k-1)*v+h*a+p%a],x=h&&L[(k-1)*v+(h-1)*a+p%a]),X=b+K-x,W=Math.abs(X-b),R=Math.abs(X-K),z=Math.abs(X-x),V=W<=R&&W<=z?b:R<=z?K:x,L[y++]=(f+V)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!Y){var J=((d+k*m)*s.width+c)*a,O=k*v;for(p=0;p<N;p+=1){for(var ee=0;ee<a;ee+=1)o[J++]=L[O++];J+=(u-1)*a}}k++}}return i=yae(i),s.interlaceMethod==1?(I(0,0,8,8),I(4,0,8,8),I(0,4,4,8),I(2,0,4,4),I(0,2,2,4),I(1,0,2,2),I(0,1,1,2)):I(0,0,1,1),o},g.prototype.decodePalette=function(){var i,a,o,l,s,I,c,d,u;for(o=this.palette,I=this.transparency.indexed||[],s=new Uint8Array((I.length||0)+o.length),l=0,i=0,a=c=0,d=o.length;c<d;a=c+=3)s[l++]=o[a],s[l++]=o[a+1],s[l++]=o[a+2],s[l++]=(u=I[i++])!=null?u:255;return s},g.prototype.copyToImageData=function(i,a){var o,l,s,I,c,d,u,m,f,y,h;if(l=this.colors,f=null,o=this.hasAlphaChannel,this.palette.length&&(f=(h=this._decodedPalette)!=null?h:this._decodedPalette=this.decodePalette(),l=4,o=!0),m=(s=i.data||i).length,c=f||a,I=d=0,l===1)for(;I<m;)u=f?4*a[I/4]:d,y=c[u++],s[I++]=y,s[I++]=y,s[I++]=y,s[I++]=o?c[u++]:255,d=u;else for(;I<m;)u=f?4*a[I/4]:d,s[I++]=c[u++],s[I++]=c[u++],s[I++]=c[u++],s[I++]=o?c[u++]:255,d=u},g.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var r=function(){if(Object.prototype.toString.call(st)==="[object Window]"){try{t=st.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return r(),e=function(i){var a;if(r()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},g.prototype.decodeFrames=function(i){var a,o,l,s,I,c,d,u;if(this.animation){for(u=[],o=I=0,c=(d=this.animation.frames).length;I<c;o=++I)a=d[o],l=i.createImageData(a.width,a.height),s=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,s),a.imageData=l,u.push(a.image=e(l));return u}},g.prototype.renderFrame=function(i,a){var o,l,s;return o=(l=this.animation.frames)[a],s=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(s!=null?s.disposeOp:void 0)===1?i.clearRect(s.xOffset,s.yOffset,s.width,s.height):(s!=null?s.disposeOp:void 0)===2&&i.putImageData(s.imageData,s.xOffset,s.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},g.prototype.animate=function(i){var a,o,l,s,I,c,d=this;return o=0,c=this.animation,s=c.numFrames,l=c.frames,I=c.numPlays,(a=function(){var u,m;if(u=o++%s,m=l[u],d.renderFrame(i,u),s>1&&o/s<I)return d.animation._timeout=setTimeout(a,m.delay)})()},g.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},g.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},g}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function zae(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,r=e[t++],i=r>>7,a=1<<(7&r)+1;e[t++],e[t++];var o=null,l=null;i&&(o=t,l=a,t+=3*a);var s=!0,I=[],c=0,d=null,u=0,m=null;for(this.width=n,this.height=g;s&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var f=e[t++];c=e[t++]|e[t++]<<8,d=e[t++],!(1&f)&&(d=null),u=f>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,h=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++],X=S>>6&1,W=1<<(7&S)+1,V=o,R=l,z=!1;S>>7&&(z=!0,V=t,R=W,t+=3*W);var L=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}I.push({x:y,y:h,width:p,height:b,has_local_palette:z,palette_offset:V,palette_size:R,data_offset:L,data_length:t-L,transparent_index:d,interlaced:!!X,delay:c,disposal:u});break;case 59:s=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return m},this.frameInfo=function(v){if(v<0||v>=I.length)throw new Error("Frame index out of range.");return I[v]},this.decodeAndBlitFrameBGRA=function(v,K){var x=this.frameInfo(v),q=x.width*x.height,Q=new Uint8Array(q);Pk(e,x.data_offset,Q,q);var D=x.palette_offset,U=x.transparent_index;U===null&&(U=256);var P=x.width,N=n-P,le=P,Y=4*(x.y*n+x.x),J=4*((x.y+x.height)*n+x.x),O=Y,ee=4*N;x.interlaced===!0&&(ee+=4*n*7);for(var te=8,se=0,ce=Q.length;se<ce;++se){var re=Q[se];if(le===0&&(le=P,(O+=ee)>=J&&(ee=4*N+4*n*(te-1),O=Y+(P+N)*(te<<1),te>>=1)),re===U)O+=4;else{var fe=e[D+3*re],be=e[D+3*re+1],ue=e[D+3*re+2];K[O++]=ue,K[O++]=be,K[O++]=fe,K[O++]=255}--le}},this.decodeAndBlitFrameRGBA=function(v,K){var x=this.frameInfo(v),q=x.width*x.height,Q=new Uint8Array(q);Pk(e,x.data_offset,Q,q);var D=x.palette_offset,U=x.transparent_index;U===null&&(U=256);var P=x.width,N=n-P,le=P,Y=4*(x.y*n+x.x),J=4*((x.y+x.height)*n+x.x),O=Y,ee=4*N;x.interlaced===!0&&(ee+=4*n*7);for(var te=8,se=0,ce=Q.length;se<ce;++se){var re=Q[se];if(le===0&&(le=P,(O+=ee)>=J&&(ee=4*N+4*n*(te-1),O=Y+(P+N)*(te<<1),te>>=1)),re===U)O+=4;else{var fe=e[D+3*re],be=e[D+3*re+1],ue=e[D+3*re+2];K[O++]=fe,K[O++]=be,K[O++]=ue,K[O++]=255}--le}}}function Pk(e,t,n,g){for(var r=e[t++],i=1<<r,a=i+1,o=a+1,l=r+1,s=(1<<l)-1,I=0,c=0,d=0,u=e[t++],m=new Int32Array(4096),f=null;;){for(;I<16&&u!==0;)c|=e[t++]<<I,I+=8,u===1?u=e[t++]:--u;if(I<l)break;var y=c&s;if(c>>=l,I-=l,y!==i){if(y===a)break;for(var h=y<o?y:f,p=0,b=h;b>i;)b=m[b]>>8,++p;var S=b;if(d+p+(h!==y?1:0)>g)return void tn.log("Warning, gif stream longer than expected.");n[d++]=S;var X=d+=p;for(h!==y&&(n[d++]=S),b=h;p--;)b=m[b],n[--X]=255&b,b>>=8;f!==null&&o<4096&&(m[o++]=f<<8|S,o>=s+1&&l<12&&(++l,s=s<<1|1)),f=y}else o=a+1,s=(1<<(l=r+1))-1,f=null}return d!==g&&tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Wy(e){var t,n,g,r,i,a=Math.floor,o=new Array(64),l=new Array(64),s=new Array(64),I=new Array(64),c=new Array(65535),d=new Array(65535),u=new Array(64),m=new Array(64),f=[],y=0,h=7,p=new Array(64),b=new Array(64),S=new Array(64),X=new Array(256),W=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],v=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],x=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(Y,J){for(var O=0,ee=0,te=new Array,se=1;se<=16;se++){for(var ce=1;ce<=Y[se];ce++)te[J[ee]]=[],te[J[ee]][0]=O,te[J[ee]][1]=se,ee++,O++;O*=2}return te}function D(Y){for(var J=Y[0],O=Y[1]-1;O>=0;)J&1<<O&&(y|=1<<h),O--,--h<0&&(y==255?(U(255),U(0)):U(y),h=7,y=0)}function U(Y){f.push(Y)}function P(Y){U(Y>>8&255),U(255&Y)}function N(Y,J,O,ee,te){for(var se,ce=te[0],re=te[240],fe=function(we,Ke){var Ue,Me,nt,ct,At,me,We,Te,xe,$e,Fe=0;for(xe=0;xe<8;++xe){Ue=we[Fe],Me=we[Fe+1],nt=we[Fe+2],ct=we[Fe+3],At=we[Fe+4],me=we[Fe+5],We=we[Fe+6];var An=Ue+(Te=we[Fe+7]),ft=Ue-Te,ug=Me+We,Yt=Me-We,Vt=nt+me,dg=nt-me,vt=ct+At,Wl=ct-At,Bn=An+vt,oi=An-vt,Ba=ug+Vt,Sn=ug-Vt;we[Fe]=Bn+Ba,we[Fe+4]=Bn-Ba;var ut=.707106781*(Sn+oi);we[Fe+2]=oi+ut,we[Fe+6]=oi-ut;var Tt=.382683433*((Bn=Wl+dg)-(Sn=Yt+ft)),Vl=.5411961*Bn+Tt,Ag=1.306562965*Sn+Tt,Ti=.707106781*(Ba=dg+Yt),Di=ft+Ti,lt=ft-Ti;we[Fe+5]=lt+Vl,we[Fe+3]=lt-Vl,we[Fe+1]=Di+Ag,we[Fe+7]=Di-Ag,Fe+=8}for(Fe=0,xe=0;xe<8;++xe){Ue=we[Fe],Me=we[Fe+8],nt=we[Fe+16],ct=we[Fe+24],At=we[Fe+32],me=we[Fe+40],We=we[Fe+48];var li=Ue+(Te=we[Fe+56]),ji=Ue-Te,Dg=Me+We,_n=Me-We,zn=nt+me,dr=nt-me,Ws=ct+At,Sa=ct-At,si=li+Ws,Ii=li-Ws,ci=Dg+zn,Qi=Dg-zn;we[Fe]=si+ci,we[Fe+32]=si-ci;var Jr=.707106781*(Qi+Ii);we[Fe+16]=Ii+Jr,we[Fe+48]=Ii-Jr;var Pi=.382683433*((si=Sa+dr)-(Qi=_n+ji)),kl=.5411961*si+Pi,Vs=1.306562965*Qi+Pi,ks=.707106781*(ci=dr+_n),Rs=ji+ks,ws=ji-ks;we[Fe+40]=ws+kl,we[Fe+24]=ws-kl,we[Fe+8]=Rs+Vs,we[Fe+56]=Rs-Vs,Fe++}for(xe=0;xe<64;++xe)$e=we[xe]*Ke[xe],u[xe]=$e>0?$e+.5|0:$e-.5|0;return u}(Y,J),be=0;be<64;++be)m[V[be]]=fe[be];var ue=m[0]-O;O=m[0],ue==0?D(ee[0]):(D(ee[d[se=32767+ue]]),D(c[se]));for(var He=63;He>0&&m[He]==0;)He--;if(He==0)return D(ce),O;for(var Le,pe=1;pe<=He;){for(var ge=pe;m[pe]==0&&pe<=He;)++pe;var rt=pe-ge;if(rt>=16){Le=rt>>4;for(var qe=1;qe<=Le;++qe)D(re);rt&=15}se=32767+m[pe],D(te[(rt<<4)+d[se]]),D(c[se]),pe++}return He!=63&&D(ce),O}function le(Y){Y=Math.min(Math.max(Y,1),100),i!=Y&&(function(J){for(var O=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var te=a((O[ee]*J+50)/100);te=Math.min(Math.max(te,1),255),o[V[ee]]=te}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var re=a((se[ce]*J+50)/100);re=Math.min(Math.max(re,1),255),l[V[ce]]=re}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,ue=0;ue<8;ue++)for(var He=0;He<8;He++)s[be]=1/(o[V[be]]*fe[ue]*fe[He]*8),I[be]=1/(l[V[be]]*fe[ue]*fe[He]*8),be++}(Y<50?Math.floor(5e3/Y):Math.floor(200-2*Y)),i=Y)}this.encode=function(Y,J){J&&le(J),f=new Array,y=0,h=7,P(65496),P(65504),P(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),P(1),P(1),U(0),U(0),function(){P(65499),P(132),U(0);for(var Me=0;Me<64;Me++)U(o[Me]);U(1);for(var nt=0;nt<64;nt++)U(l[nt])}(),function(Me,nt){P(65472),P(17),U(8),P(nt),P(Me),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(Y.width,Y.height),function(){P(65476),P(418),U(0);for(var Me=0;Me<16;Me++)U(R[Me+1]);for(var nt=0;nt<=11;nt++)U(z[nt]);U(16);for(var ct=0;ct<16;ct++)U(L[ct+1]);for(var At=0;At<=161;At++)U(k[At]);U(1);for(var me=0;me<16;me++)U(v[me+1]);for(var We=0;We<=11;We++)U(K[We]);U(17);for(var Te=0;Te<16;Te++)U(x[Te+1]);for(var xe=0;xe<=161;xe++)U(q[xe])}(),P(65498),P(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var O=0,ee=0,te=0;y=0,h=7,this.encode.displayName="_encode_";for(var se,ce,re,fe,be,ue,He,Le,pe,ge=Y.data,rt=Y.width,qe=Y.height,we=4*rt,Ke=0;Ke<qe;){for(se=0;se<we;){for(be=we*Ke+se,He=-1,Le=0,pe=0;pe<64;pe++)ue=be+(Le=pe>>3)*we+(He=4*(7&pe)),Ke+Le>=qe&&(ue-=we*(Ke+1+Le-qe)),se+He>=we&&(ue-=se+He-we+4),ce=ge[ue++],re=ge[ue++],fe=ge[ue++],p[pe]=(W[ce]+W[re+256>>0]+W[fe+512>>0]>>16)-128,b[pe]=(W[ce+768>>0]+W[re+1024>>0]+W[fe+1280>>0]>>16)-128,S[pe]=(W[ce+1280>>0]+W[re+1536>>0]+W[fe+1792>>0]>>16)-128;O=N(p,s,O,t,g),ee=N(b,I,ee,n,r),te=N(S,I,te,n,r),se+=32}Ke+=8}if(h>=0){var Ue=[];Ue[1]=h+1,Ue[0]=(1<<h+1)-1,D(Ue)}return P(65497),new Uint8Array(f)},e=e||50,function(){for(var Y=String.fromCharCode,J=0;J<256;J++)X[J]=Y(J)}(),t=Q(R,z),n=Q(v,K),g=Q(L,k),r=Q(x,q),function(){for(var Y=1,J=2,O=1;O<=15;O++){for(var ee=Y;ee<J;ee++)d[32767+ee]=O,c[32767+ee]=[],c[32767+ee][1]=O,c[32767+ee][0]=ee;for(var te=-(J-1);te<=-Y;te++)d[32767+te]=O,c[32767+te]=[],c[32767+te][1]=O,c[32767+te][0]=J-1+te;Y<<=1,J<<=1}}(),function(){for(var Y=0;Y<256;Y++)W[Y]=19595*Y,W[Y+256>>0]=38470*Y,W[Y+512>>0]=7471*Y+32768,W[Y+768>>0]=-11059*Y,W[Y+1024>>0]=-21709*Y,W[Y+1280>>0]=32768*Y+8421375,W[Y+1536>>0]=-27439*Y,W[Y+1792>>0]=-5329*Y}(),le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Gi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ok(e){function t(R){if(!R)throw Error("assert :P")}function n(R,z,L){for(var k=0;4>k;k++)if(R[z+k]!=L.charCodeAt(k))return!0;return!1}function g(R,z,L,k,v){for(var K=0;K<v;K++)R[z+K]=L[k+K]}function r(R,z,L,k){for(var v=0;v<k;v++)R[z+v]=L}function i(R){return new Int32Array(R)}function a(R,z){for(var L=[],k=0;k<R;k++)L.push(new z);return L}function o(R,z){var L=[];return function k(v,K,x){for(var q=x[K],Q=0;Q<q&&(v.push(x.length>K+1?[]:new z),!(x.length<K+1));Q++)k(v[Q],K+1,x)}(L,0,R),L}var l=function(){var R=this;function z(C,A){for(var B=1<<A-1>>>0;C&B;)B>>>=1;return B?(C&B-1)+B:C}function L(C,A,B,w,H){t(!(w%B));do C[A+(w-=B)]=H;while(0<w)}function k(C,A,B,w,H){if(t(2328>=H),512>=H)var E=i(512);else if((E=i(H))==null)return 0;return function(M,T,j,$,ae,Ae){var he,Ce,Ve=T,ye=1<<j,oe=i(16),Ie=i(16);for(t(ae!=0),t($!=null),t(M!=null),t(0<j),Ce=0;Ce<ae;++Ce){if(15<$[Ce])return 0;++oe[$[Ce]]}if(oe[0]==ae)return 0;for(Ie[1]=0,he=1;15>he;++he){if(oe[he]>1<<he)return 0;Ie[he+1]=Ie[he]+oe[he]}for(Ce=0;Ce<ae;++Ce)he=$[Ce],0<$[Ce]&&(Ae[Ie[he]++]=Ce);if(Ie[15]==1)return($=new v).g=0,$.value=Ae[0],L(M,Ve,1,ye,$),ye;var Be,ke=-1,ve=ye-1,Qe=0,Ee=1,at=1,ze=1<<j;for(Ce=0,he=1,ae=2;he<=j;++he,ae<<=1){if(Ee+=at<<=1,0>(at-=oe[he]))return 0;for(;0<oe[he];--oe[he])($=new v).g=he,$.value=Ae[Ce++],L(M,Ve+Qe,ae,ze,$),Qe=z(Qe,he)}for(he=j+1,ae=2;15>=he;++he,ae<<=1){if(Ee+=at<<=1,0>(at-=oe[he]))return 0;for(;0<oe[he];--oe[he]){if($=new v,(Qe&ve)!=ke){for(Ve+=ze,Be=1<<(ke=he)-j;15>ke&&!(0>=(Be-=oe[ke]));)++ke,Be<<=1;ye+=ze=1<<(Be=ke-j),M[T+(ke=Qe&ve)].g=Be+j,M[T+ke].value=Ve-T-ke}$.g=he-j,$.value=Ae[Ce++],L(M,Ve+(Qe>>j),ae,ze,$),Qe=z(Qe,he)}}return Ee!=2*Ie[15]-1?0:ye}(C,A,B,w,H,E)}function v(){this.value=this.g=0}function K(){this.value=this.g=0}function x(){this.G=a(5,v),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Qg,K)}function q(C,A,B,w){t(C!=null),t(A!=null),t(2147483648>w),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=A,C.pa=B,C.Jd=A,C.Yc=B+w,C.Zc=4<=w?B+w-4+1:B,se(C)}function Q(C,A){for(var B=0;0<A--;)B|=re(C,128)<<A;return B}function D(C,A){var B=Q(C,A);return ce(C)?-B:B}function U(C,A,B,w){var H,E=0;for(t(C!=null),t(A!=null),t(4294967288>w),C.Sb=w,C.Ra=0,C.u=0,C.h=0,4<w&&(w=4),H=0;H<w;++H)E+=A[B+H]<<8*H;C.Ra=E,C.bb=w,C.oa=A,C.pa=B}function P(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Ds-8>>>0,++C.bb,C.u-=8;O(C)&&(C.h=1,C.u=0)}function N(C,A){if(t(0<=A),!C.h&&A<=Ts){var B=J(C)&Us[A];return C.u+=A,P(C),B}return C.h=1,C.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(C){return C.Ra>>>(C.u&Ds-1)>>>0}function O(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Ds}function ee(C,A){C.u=A,C.h=O(C)}function te(C){C.u>=eC&&(t(C.u>=eC),P(C))}function se(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function ce(C){return Q(C,1)}function re(C,A){var B=C.Ca;0>C.b&&se(C);var w=C.b,H=B*A>>>8,E=(C.I>>>w>H)+0;for(E?(B-=H,C.I-=H+1<<w>>>0):B=H+1,w=B,H=0;256<=w;)H+=8,w>>=8;return w=7^H+Pg[w],C.b-=w,C.Ca=(B<<w)-1,E}function fe(C,A,B){C[A+0]=B>>24&255,C[A+1]=B>>16&255,C[A+2]=B>>8&255,C[A+3]=B>>0&255}function be(C,A){return C[A+0]<<0|C[A+1]<<8}function ue(C,A){return be(C,A)|C[A+2]<<16}function He(C,A){return be(C,A)|be(C,A+2)<<16}function Le(C,A){var B=1<<A;return t(C!=null),t(0<A),C.X=i(B),C.X==null?0:(C.Mb=32-A,C.Xa=A,1)}function pe(C,A){t(C!=null),t(A!=null),t(C.Xa==A.Xa),g(A.X,0,C.X,0,1<<A.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function rt(C,A,B,w){t(B!=null),t(w!=null);var H=B[0],E=w[0];return H==0&&(H=(C*E+A/2)/A),E==0&&(E=(A*H+C/2)/C),0>=H||0>=E?0:(B[0]=H,w[0]=E,1)}function qe(C,A){return C+(1<<A)-1>>>A}function we(C,A){return((4278255360&C)+(4278255360&A)>>>0&4278255360)+((16711935&C)+(16711935&A)>>>0&16711935)>>>0}function Ke(C,A){R[A]=function(B,w,H,E,M,T,j){var $;for($=0;$<M;++$){var ae=R[C](T[j+$-1],H,E+$);T[j+$]=we(B[w+$],ae)}}}function Ue(){this.ud=this.hd=this.jd=0}function Me(C,A){return((4278124286&(C^A))>>>1)+(C&A)>>>0}function nt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function ct(C,A){return nt(C+(C-A+.5>>1))}function At(C,A,B){return Math.abs(A-B)-Math.abs(C-B)}function me(C,A,B,w,H,E,M){for(w=E[M-1],B=0;B<H;++B)E[M+B]=w=we(C[A+B],w)}function We(C,A,B,w,H){var E;for(E=0;E<B;++E){var M=C[A+E],T=M>>8&255,j=16711935&(j=(j=16711935&M)+((T<<16)+T));w[H+E]=(4278255360&M)+j>>>0}}function Te(C,A){A.jd=C>>0&255,A.hd=C>>8&255,A.ud=C>>16&255}function xe(C,A,B,w,H,E){var M;for(M=0;M<w;++M){var T=A[B+M],j=T>>>8,$=T,ae=255&(ae=(ae=T>>>16)+((C.jd<<24>>24)*(j<<24>>24)>>>5));$=255&($=($=$+((C.hd<<24>>24)*(j<<24>>24)>>>5))+((C.ud<<24>>24)*(ae<<24>>24)>>>5)),H[E+M]=(4278255360&T)+(ae<<16)+$}}function $e(C,A,B,w,H){R[A]=function(E,M,T,j,$,ae,Ae,he,Ce){for(j=Ae;j<he;++j)for(Ae=0;Ae<Ce;++Ae)$[ae++]=H(T[w(E[M++])])},R[C]=function(E,M,T,j,$,ae,Ae){var he=8>>E.b,Ce=E.Ea,Ve=E.K[0],ye=E.w;if(8>he)for(E=(1<<E.b)-1,ye=(1<<he)-1;M<T;++M){var oe,Ie=0;for(oe=0;oe<Ce;++oe)oe&E||(Ie=w(j[$++])),ae[Ae++]=H(Ve[Ie&ye]),Ie>>=he}else R["VP8LMapColor"+B](j,$,Ve,ye,ae,Ae,M,T,Ce)}}function Fe(C,A,B,w,H){for(B=A+B;A<B;){var E=C[A++];w[H++]=E>>16&255,w[H++]=E>>8&255,w[H++]=E>>0&255}}function An(C,A,B,w,H){for(B=A+B;A<B;){var E=C[A++];w[H++]=E>>16&255,w[H++]=E>>8&255,w[H++]=E>>0&255,w[H++]=E>>24&255}}function ft(C,A,B,w,H){for(B=A+B;A<B;){var E=(M=C[A++])>>16&240|M>>12&15,M=M>>0&240|M>>28&15;w[H++]=E,w[H++]=M}}function ug(C,A,B,w,H){for(B=A+B;A<B;){var E=(M=C[A++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;w[H++]=E,w[H++]=M}}function Yt(C,A,B,w,H){for(B=A+B;A<B;){var E=C[A++];w[H++]=E>>0&255,w[H++]=E>>8&255,w[H++]=E>>16&255}}function Vt(C,A,B,w,H,E){if(E==0)for(B=A+B;A<B;)fe(w,((E=C[A++])[0]>>24|E[1]>>8&65280|E[2]<<8&16711680|E[3]<<24)>>>0),H+=32;else g(w,H,C,A,B)}function dg(C,A){R[A][0]=R[C+"0"],R[A][1]=R[C+"1"],R[A][2]=R[C+"2"],R[A][3]=R[C+"3"],R[A][4]=R[C+"4"],R[A][5]=R[C+"5"],R[A][6]=R[C+"6"],R[A][7]=R[C+"7"],R[A][8]=R[C+"8"],R[A][9]=R[C+"9"],R[A][10]=R[C+"10"],R[A][11]=R[C+"11"],R[A][12]=R[C+"12"],R[A][13]=R[C+"13"],R[A][14]=R[C+"0"],R[A][15]=R[C+"0"]}function vt(C){return C==Hp||C==Fp||C==cA||C==xp}function Wl(){this.eb=[],this.size=this.A=this.fb=0}function Bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Wl,this.f.kb=new Bn,this.sd=null}function Ba(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function Tt(C,A){var B=C.T,w=A.ba.f.RGBA,H=w.eb,E=w.fb+C.ka*w.A,M=Fr[A.ba.S],T=C.y,j=C.O,$=C.f,ae=C.N,Ae=C.ea,he=C.W,Ce=A.cc,Ve=A.dc,ye=A.Mc,oe=A.Nc,Ie=C.ka,Be=C.ka+C.T,ke=C.U,ve=ke+1>>1;for(Ie==0?M(T,j,null,null,$,ae,Ae,he,$,ae,Ae,he,H,E,null,null,ke):(M(A.ec,A.fc,T,j,Ce,Ve,ye,oe,$,ae,Ae,he,H,E-w.A,H,E,ke),++B);Ie+2<Be;Ie+=2)Ce=$,Ve=ae,ye=Ae,oe=he,ae+=C.Rc,he+=C.Rc,E+=2*w.A,M(T,(j+=2*C.fa)-C.fa,T,j,Ce,Ve,ye,oe,$,ae,Ae,he,H,E-w.A,H,E,ke);return j+=C.fa,C.j+Be<C.o?(g(A.ec,A.fc,T,j,ke),g(A.cc,A.dc,$,ae,ve),g(A.Mc,A.Nc,Ae,he,ve),B--):1&Be||M(T,j,null,null,$,ae,Ae,he,$,ae,Ae,he,H,E+w.A,null,null,ke),B}function Vl(C,A,B){var w=C.F,H=[C.J];if(w!=null){var E=C.U,M=A.ba.S,T=M==IA||M==cA;A=A.ba.f.RGBA;var j=[0],$=C.ka;j[0]=C.T,C.Kb&&($==0?--j[0]:(--$,H[0]-=C.width),C.j+C.ka+C.T==C.o&&(j[0]=C.o-C.j-$));var ae=A.eb;$=A.fb+$*A.A,C=iA(w,H[0],C.width,E,j,ae,$+(T?0:3),A.A),t(B==j),C&&vt(M)&&Bo(ae,$,T,E,j,A.A)}return 0}function Ag(C){var A=C.ma,B=A.ba.S,w=11>B,H=B==lA||B==sA||B==IA||B==Np||B==12||vt(B);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!qc(A.Oa,C,H?11:12))return 0;if(H&&vt(B)&&Re(),C.da)alert("todo:use_scaling");else{if(w){if(A.Ib=ut,C.Kb){if(B=C.U+1>>1,A.memory=i(C.U+2*B),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+C.U,A.Mc=A.cc,A.Nc=A.dc+B,A.Ib=Tt,Re()}}else alert("todo:EmitYUV");H&&(A.Jb=Vl,w&&de())}if(w&&!AS){for(C=0;256>C;++C)AH[C]=89858*(C-128)+uA>>CA,fH[C]=-22014*(C-128)+uA,mH[C]=-45773*(C-128),hH[C]=113618*(C-128)+uA>>CA;for(C=aC;C<Ep;++C)A=76283*(C-16)+uA>>CA,pH[C-aC]=Ar(A,255),bH[C-aC]=Ar(A+8>>4,15);AS=1}return 1}function Ti(C){var A=C.ma,B=C.U,w=C.T;return t(!(1&C.ka)),0>=B||0>=w?0:(B=A.Ib(C,A),A.Jb!=null&&A.Jb(C,A,B),A.Dc+=B,1)}function Di(C){C.ma.memory=null}function lt(C,A,B,w){return N(C,8)!=47?0:(A[0]=N(C,14)+1,B[0]=N(C,14)+1,w[0]=N(C,1),N(C,3)!=0?0:!C.h)}function li(C,A){if(4>C)return C+1;var B=C-2>>1;return(2+(1&C)<<B)+N(A,B)+1}function ji(C,A){return 120<A?A-120:1<=(B=((B=tH[A-1])>>4)*C+(8-(15&B)))?B:1;var B}function Dg(C,A,B){var w=J(B),H=C[A+=255&w].g-8;return 0<H&&(ee(B,B.u+8),w=J(B),A+=C[A].value,A+=w&(1<<H)-1),ee(B,B.u+C[A].g),C[A].value}function _n(C,A,B){return B.g+=C.g,B.value+=C.value<<A>>>0,t(8>=B.g),C.g}function zn(C,A,B){var w=C.xc;return t((A=w==0?0:C.vc[C.md*(B>>w)+(A>>w)])<C.Wb),C.Ya[A]}function dr(C,A,B,w){var H=C.ab,E=C.c*A,M=C.C;A=M+A;var T=B,j=w;for(w=C.Ta,B=C.Ua;0<H--;){var $=C.gc[H],ae=M,Ae=A,he=T,Ce=j,Ve=(j=w,T=B,$.Ea);switch(t(ae<Ae),t(Ae<=$.nc),$.hc){case 2:rA(he,Ce,(Ae-ae)*Ve,j,T);break;case 0:var ye=ae,oe=Ae,Ie=j,Be=T,ke=(ze=$).Ea;ye==0&&(wp(he,Ce,null,null,1,Ie,Be),me(he,Ce+1,0,0,ke-1,Ie,Be+1),Ce+=ke,Be+=ke,++ye);for(var ve=1<<ze.b,Qe=ve-1,Ee=qe(ke,ze.b),at=ze.K,ze=ze.w+(ye>>ze.b)*Ee;ye<oe;){var Et=at,Dt=ze,Nt=1;for(tC(he,Ce,Ie,Be-ke,1,Ie,Be);Nt<ke;){var Rt=(Nt&~Qe)+ve;Rt>ke&&(Rt=ke),(0,bo[Et[Dt++]>>8&15])(he,Ce+ +Nt,Ie,Be+Nt-ke,Rt-Nt,Ie,Be+Nt),Nt=Rt}Ce+=ke,Be+=ke,++ye&Qe||(ze+=Ee)}Ae!=$.nc&&g(j,T-Ve,j,T+(Ae-ae-1)*Ve,Ve);break;case 1:for(Ve=he,oe=Ce,ke=(he=$.Ea)-(Be=he&~(Ie=(Ce=1<<$.b)-1)),ye=qe(he,$.b),ve=$.K,$=$.w+(ae>>$.b)*ye;ae<Ae;){for(Qe=ve,Ee=$,at=new Ue,ze=oe+Be,Et=oe+he;oe<ze;)Te(Qe[Ee++],at),Yr(at,Ve,oe,Ce,j,T),oe+=Ce,T+=Ce;oe<Et&&(Te(Qe[Ee++],at),Yr(at,Ve,oe,ke,j,T),oe+=ke,T+=ke),++ae&Ie||($+=ye)}break;case 3:if(he==j&&Ce==T&&0<$.b){for(oe=j,he=Ve=T+(Ae-ae)*Ve-(Be=(Ae-ae)*qe($.Ea,$.b)),Ce=j,Ie=T,ye=[],Be=(ke=Be)-1;0<=Be;--Be)ye[Be]=Ce[Ie+Be];for(Be=ke-1;0<=Be;--Be)oe[he+Be]=ye[Be];Ai($,ae,Ae,j,Ve,j,T)}else Ai($,ae,Ae,he,Ce,j,T)}T=w,j=B}j!=B&&g(w,B,T,j,E)}function Ws(C,A){var B=C.V,w=C.Ba+C.c*C.C,H=A-C.C;if(t(A<=C.l.o),t(16>=H),0<H){var E=C.l,M=C.Ta,T=C.Ua,j=E.width;if(dr(C,H,B,w),H=T=[T],t((B=C.C)<(w=A)),t(E.v<E.va),w>E.o&&(w=E.o),B<E.j){var $=E.j-B;B=E.j,H[0]+=$*j}if(B>=w?B=0:(H[0]+=4*E.v,E.ka=B-E.j,E.U=E.va-E.v,E.T=w-B,B=1),B){if(T=T[0],11>(B=C.ca).S){var ae=B.f.RGBA,Ae=(w=B.S,H=E.U,E=E.T,$=ae.eb,ae.A),he=E;for(ae=ae.fb+C.Ma*ae.A;0<he--;){var Ce=M,Ve=T,ye=H,oe=$,Ie=ae;switch(w){case oA:hi(Ce,Ve,ye,oe,Ie);break;case lA:yo(Ce,Ve,ye,oe,Ie);break;case Hp:yo(Ce,Ve,ye,oe,Ie),Bo(oe,Ie,0,ye,1,0);break;case iS:js(Ce,Ve,ye,oe,Ie);break;case sA:Vt(Ce,Ve,ye,oe,Ie,1);break;case Fp:Vt(Ce,Ve,ye,oe,Ie,1),Bo(oe,Ie,0,ye,1,0);break;case IA:Vt(Ce,Ve,ye,oe,Ie,0);break;case cA:Vt(Ce,Ve,ye,oe,Ie,0),Bo(oe,Ie,1,ye,1,0);break;case Np:_i(Ce,Ve,ye,oe,Ie);break;case xp:_i(Ce,Ve,ye,oe,Ie),Os(oe,Ie,ye,1,0);break;case aS:ka(Ce,Ve,ye,oe,Ie);break;default:t(0)}T+=j,ae+=Ae}C.Ma+=E}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=B.height)}}C.C=A,t(C.C<=C.i)}function Sa(C){var A;if(0<C.ua)return 0;for(A=0;A<C.Wb;++A){var B=C.Ya[A].G,w=C.Ya[A].H;if(0<B[1][w[1]+0].g||0<B[2][w[2]+0].g||0<B[3][w[3]+0].g)return 0}return 1}function si(C,A,B,w,H,E){if(C.Z!=0){var M=C.qd,T=C.rd;for(t(vo[C.Z]!=null);A<B;++A)vo[C.Z](M,T,w,H,w,H,E),M=w,T=H,H+=E;C.qd=M,C.rd=T}}function Ii(C,A){var B=C.l.ma,w=B.Z==0||B.Z==1?C.l.j:C.C;if(w=C.C<w?w:C.C,t(A<=C.l.o),A>w){var H=C.l.width,E=B.ca,M=B.tb+H*w,T=C.V,j=C.Ba+C.c*w,$=C.gc;t(C.ab==1),t($[0].hc==3),Xp($[0],w,A,T,j,E,M),si(B,w,A,E,M,H)}C.C=C.Ma=A}function ci(C,A,B,w,H,E,M){var T=C.$/w,j=C.$%w,$=C.m,ae=C.s,Ae=B+C.$,he=Ae;H=B+w*H;var Ce=B+w*E,Ve=280+ae.ua,ye=C.Pb?T:16777216,oe=0<ae.ua?ae.Wa:null,Ie=ae.wc,Be=Ae<Ce?zn(ae,j,T):null;t(C.C<E),t(Ce<=H);var ke=!1;e:for(;;){for(;ke||Ae<Ce;){var ve=0;if(T>=ye){var Qe=Ae-B;t((ye=C).Pb),ye.wd=ye.m,ye.xd=Qe,0<ye.s.ua&&pe(ye.s.Wa,ye.s.vb),ye=T+gH}if(j&Ie||(Be=zn(ae,j,T)),t(Be!=null),Be.Qb&&(A[Ae]=Be.qb,ke=!0),!ke)if(te($),Be.jc){ve=$,Qe=A;var Ee=Ae,at=Be.pd[J(ve)&Qg-1];t(Be.jc),256>at.g?(ee(ve,ve.u+at.g),Qe[Ee]=at.value,ve=0):(ee(ve,ve.u+at.g-256),t(256<=at.value),ve=at.value),ve==0&&(ke=!0)}else ve=Dg(Be.G[0],Be.H[0],$);if($.h)break;if(ke||256>ve){if(!ke)if(Be.nd)A[Ae]=(Be.qb|ve<<8)>>>0;else{if(te($),ke=Dg(Be.G[1],Be.H[1],$),te($),Qe=Dg(Be.G[2],Be.H[2],$),Ee=Dg(Be.G[3],Be.H[3],$),$.h)break;A[Ae]=(Ee<<24|ke<<16|ve<<8|Qe)>>>0}if(ke=!1,++Ae,++j>=w&&(j=0,++T,M!=null&&T<=E&&!(T%16)&&M(C,T),oe!=null))for(;he<Ae;)ve=A[he++],oe.X[(506832829*ve&4294967295)>>>oe.Mb]=ve}else if(280>ve){if(ve=li(ve-256,$),Qe=Dg(Be.G[4],Be.H[4],$),te($),Qe=ji(w,Qe=li(Qe,$)),$.h)break;if(Ae-B<Qe||H-Ae<ve)break e;for(Ee=0;Ee<ve;++Ee)A[Ae+Ee]=A[Ae+Ee-Qe];for(Ae+=ve,j+=ve;j>=w;)j-=w,++T,M!=null&&T<=E&&!(T%16)&&M(C,T);if(t(Ae<=H),j&Ie&&(Be=zn(ae,j,T)),oe!=null)for(;he<Ae;)ve=A[he++],oe.X[(506832829*ve&4294967295)>>>oe.Mb]=ve}else{if(!(ve<Ve))break e;for(ke=ve-280,t(oe!=null);he<Ae;)ve=A[he++],oe.X[(506832829*ve&4294967295)>>>oe.Mb]=ve;ve=Ae,t(!(ke>>>(Qe=oe).Xa)),A[ve]=Qe.X[ke],ke=!0}ke||t($.h==O($))}if(C.Pb&&$.h&&Ae<H)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&pe(C.s.vb,C.s.Wa);else{if($.h)break e;M!=null&&M(C,T>E?E:T),C.a=0,C.$=Ae-B}return 1}return C.a=3,0}function Qi(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var A=C.Wa;A!=null&&(A.X=null),C.vb=null,t(C!=null)}function Jr(){var C=new Rp;return C==null?null:(C.a=0,C.xb=sS,dg("Predictor","VP8LPredictors"),dg("Predictor","VP8LPredictors_C"),dg("PredictorAdd","VP8LPredictorsAdd"),dg("PredictorAdd","VP8LPredictorsAdd_C"),rA=We,Yr=xe,hi=Fe,yo=An,_i=ft,ka=ug,js=Yt,R.VP8LMapColor32b=nC,R.VP8LMapColor8b=Jp,C)}function Pi(C,A,B,w,H){var E=1,M=[C],T=[A],j=w.m,$=w.s,ae=null,Ae=0;e:for(;;){if(B)for(;E&&N(j,1);){var he=M,Ce=T,Ve=w,ye=1,oe=Ve.m,Ie=Ve.gc[Ve.ab],Be=N(oe,2);if(Ve.Oc&1<<Be)E=0;else{switch(Ve.Oc|=1<<Be,Ie.hc=Be,Ie.Ea=he[0],Ie.nc=Ce[0],Ie.K=[null],++Ve.ab,t(4>=Ve.ab),Be){case 0:case 1:Ie.b=N(oe,3)+2,ye=Pi(qe(Ie.Ea,Ie.b),qe(Ie.nc,Ie.b),0,Ve,Ie.K),Ie.K=Ie.K[0];break;case 3:var ke,ve=N(oe,8)+1,Qe=16<ve?0:4<ve?1:2<ve?2:3;if(he[0]=qe(Ie.Ea,Qe),Ie.b=Qe,ke=ye=Pi(ve,1,0,Ve,Ie.K)){var Ee,at=ve,ze=Ie,Et=1<<(8>>ze.b),Dt=i(Et);if(Dt==null)ke=0;else{var Nt=ze.K[0],Rt=ze.w;for(Dt[0]=ze.K[0][0],Ee=1;Ee<1*at;++Ee)Dt[Ee]=we(Nt[Rt+Ee],Dt[Ee-1]);for(;Ee<4*Et;++Ee)Dt[Ee]=0;ze.K[0]=null,ze.K[0]=Dt,ke=1}}ye=ke;break;case 2:break;default:t(0)}E=ye}}if(M=M[0],T=T[0],E&&N(j,1)&&!(E=1<=(Ae=N(j,4))&&11>=Ae)){w.a=3;break e}var en;if(en=E)t:{var _t,pt,Tn,Og=w,Dn=M,_g=T,jt=Ae,mr=B,fr=Og.m,ag=Og.s,hg=[null],xg=1,xr=0,qi=nH[jt];n:for(;;){if(mr&&N(fr,1)){var og=N(fr,3)+2,Ya=qe(Dn,og),Hl=qe(_g,og),_s=Ya*Hl;if(!Pi(Ya,Hl,0,Og,hg))break n;for(hg=hg[0],ag.xc=og,_t=0;_t<_s;++_t){var Wo=hg[_t]>>8&65535;hg[_t]=Wo,Wo>=xg&&(xg=Wo+1)}}if(fr.h)break n;for(pt=0;5>pt;++pt){var Wn=oS[pt];!pt&&0<jt&&(Wn+=1<<jt),xr<Wn&&(xr=Wn)}var Mp=a(xg*qi,v),fS=xg,pS=a(fS,x);if(pS==null)var AA=null;else t(65536>=fS),AA=pS;var oC=i(xr);if(AA==null||oC==null||Mp==null){Og.a=1;break n}var hA=Mp;for(_t=Tn=0;_t<xg;++_t){var bi=AA[_t],qs=bi.G,$s=bi.H,bS=0,mA=1,yS=0;for(pt=0;5>pt;++pt){Wn=oS[pt],qs[pt]=hA,$s[pt]=Tn,!pt&&0<jt&&(Wn+=1<<jt);r:{var fA,zp=Wn,pA=Og,lC=oC,GH=hA,BH=Tn,Up=0,Vo=pA.m,SH=N(Vo,1);if(r(lC,0,0,zp),SH){var vH=N(Vo,1)+1,WH=N(Vo,1),ZS=N(Vo,WH==0?1:8);lC[ZS]=1,vH==2&&(lC[ZS=N(Vo,8)]=1);var bA=1}else{var GS=i(19),BS=N(Vo,4)+4;if(19<BS){pA.a=3;var yA=0;break r}for(fA=0;fA<BS;++fA)GS[eH[fA]]=N(Vo,3);var Tp=void 0,sC=void 0,SS=pA,VH=GS,ZA=zp,vS=lC,Dp=0,ko=SS.m,WS=8,VS=a(128,v);g:for(;k(VS,0,7,VH,19);){if(N(ko,1)){var kH=2+2*N(ko,3);if((Tp=2+N(ko,kH))>ZA)break g}else Tp=ZA;for(sC=0;sC<ZA&&Tp--;){te(ko);var kS=VS[0+(127&J(ko))];ee(ko,ko.u+kS.g);var eI=kS.value;if(16>eI)vS[sC++]=eI,eI!=0&&(WS=eI);else{var RH=eI==16,RS=eI-16,wH=q9[RS],wS=N(ko,_9[RS])+wH;if(sC+wS>ZA)break g;for(var XH=RH?WS:0;0<wS--;)vS[sC++]=XH}}Dp=1;break g}Dp||(SS.a=3),bA=Dp}(bA=bA&&!Vo.h)&&(Up=k(GH,BH,8,lC,zp)),bA&&Up!=0?yA=Up:(pA.a=3,yA=0)}if(yA==0)break n;if(mA&&$9[pt]==1&&(mA=hA[Tn].g==0),bS+=hA[Tn].g,Tn+=yA,3>=pt){var IC,jp=oC[0];for(IC=1;IC<Wn;++IC)oC[IC]>jp&&(jp=oC[IC]);yS+=jp}}if(bi.nd=mA,bi.Qb=0,mA&&(bi.qb=(qs[3][$s[3]+0].value<<24|qs[1][$s[1]+0].value<<16|qs[2][$s[2]+0].value)>>>0,bS==0&&256>qs[0][$s[0]+0].value&&(bi.Qb=1,bi.qb+=qs[0][$s[0]+0].value<<8)),bi.jc=!bi.Qb&&6>yS,bi.jc){var GA,Na=bi;for(GA=0;GA<Qg;++GA){var Ro=GA,wo=Na.pd[Ro],BA=Na.G[0][Na.H[0]+Ro];256<=BA.value?(wo.g=BA.g+256,wo.value=BA.value):(wo.g=0,wo.value=0,Ro>>=_n(BA,8,wo),Ro>>=_n(Na.G[1][Na.H[1]+Ro],16,wo),Ro>>=_n(Na.G[2][Na.H[2]+Ro],0,wo),_n(Na.G[3][Na.H[3]+Ro],24,wo))}}}ag.vc=hg,ag.Wb=xg,ag.Ya=AA,ag.yc=Mp,en=1;break t}en=0}if(!(E=en)){w.a=3;break e}if(0<Ae){if($.ua=1<<Ae,!Le($.Wa,Ae)){w.a=1,E=0;break e}}else $.ua=0;var Qp=w,XS=M,JH=T,Pp=Qp.s,Op=Pp.xc;if(Qp.c=XS,Qp.i=JH,Pp.md=qe(XS,Op),Pp.wc=Op==0?-1:(1<<Op)-1,B){w.xb=IH;break e}if((ae=i(M*T))==null){w.a=1,E=0;break e}E=(E=ci(w,ae,0,M,T,T,null))&&!j.h;break e}return E?(H!=null?H[0]=ae:(t(ae==null),t(B)),w.$=0,B||Qi($)):Qi($),E}function kl(C,A){var B=C.c*C.i,w=B+A+16*A;return t(C.c<=A),C.V=i(w),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+B+A,1)}function Vs(C,A){var B=C.C,w=A-B,H=C.V,E=C.Ba+C.c*B;for(t(A<=C.l.o);0<w;){var M=16<w?16:w,T=C.l.ma,j=C.l.width,$=j*M,ae=T.ca,Ae=T.tb+j*B,he=C.Ta,Ce=C.Ua;dr(C,M,H,E),$B(he,Ce,ae,Ae,$),si(T,B,B+M,ae,Ae,j),w-=M,H+=M*C.c,B+=M}t(B==A),C.C=C.Ma=A}function ks(){this.ub=this.yd=this.td=this.Rb=0}function Rs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ws(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function xd(){this.Yb=function(){var C=[];return function A(B,w,H){for(var E=H[w],M=0;M<E&&(B.push(H.length>w+1?[]:0),!(H.length<w+1));M++)A(B[M],w+1,H)}(C,0,[3,11]),C}()}function op(){this.jb=i(3),this.Wc=o([4,8],xd),this.Xc=o([4,17],xd)}function lp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Xs(){this.ld=this.La=this.dd=this.tc=0}function Kd(){this.Na=this.la=0}function sp(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ip(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xs),this.Y=0,this.ya=Array(new Hc),this.aa=0,this.l=new Js}function Ld(){this.y=i(16),this.f=i(8),this.ea=i(8)}function cp(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new ks,this.Kc=new Rs,this.ed=new lp,this.Qa=new ws,this.Ic=this.$c=this.Aa=0,this.D=new Ip,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,le),this.ia=0,this.pb=a(4,sp),this.Pa=new op,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ld),this.Hd=0,this.rb=Array(new Kd),this.sb=0,this.wa=Array(new Xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hc),this.L=this.aa=0,this.gd=o([4,2],Xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Js(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Cp(){var C=new cp;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,iC||(iC=zd)),C}function Yn(C,A,B){return C.a==0&&(C.a=A,C.sc=B,C.cb=0),0}function Ed(C,A,B){return 3<=B&&C[A+0]==157&&C[A+1]==1&&C[A+2]==42}function Md(C,A){if(C==null)return 0;if(C.a=0,C.sc="OK",A==null)return Yn(C,2,"null VP8Io passed to VP8GetHeaders()");var B=A.data,w=A.w,H=A.ha;if(4>H)return Yn(C,7,"Truncated header.");var E=B[w+0]|B[w+1]<<8|B[w+2]<<16,M=C.Od;if(M.Rb=!(1&E),M.td=E>>1&7,M.yd=E>>4&1,M.ub=E>>5,3<M.td)return Yn(C,3,"Incorrect keyframe parameters.");if(!M.yd)return Yn(C,4,"Frame not displayable.");w+=3,H-=3;var T=C.Kc;if(M.Rb){if(7>H)return Yn(C,7,"cannot parse picture header");if(!Ed(B,w,H))return Yn(C,3,"Bad code word");T.c=16383&(B[w+4]<<8|B[w+3]),T.Td=B[w+4]>>6,T.i=16383&(B[w+6]<<8|B[w+5]),T.Ud=B[w+6]>>6,w+=7,H-=7,C.za=T.c+15>>4,C.Ub=T.i+15>>4,A.width=T.c,A.height=T.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,r((E=C.Pa).jb,0,255,E.jb.length),t((E=C.Qa)!=null),E.Cb=0,E.Bb=0,E.Fb=1,r(E.Zb,0,0,E.Zb.length),r(E.Lb,0,0,E.Lb)}if(M.ub>H)return Yn(C,7,"bad partition length");q(E=C.m,B,w,M.ub),w+=M.ub,H-=M.ub,M.Rb&&(T.Ld=ce(E),T.Kd=ce(E)),T=C.Qa;var j,$=C.Pa;if(t(E!=null),t(T!=null),T.Cb=ce(E),T.Cb){if(T.Bb=ce(E),ce(E)){for(T.Fb=ce(E),j=0;4>j;++j)T.Zb[j]=ce(E)?D(E,7):0;for(j=0;4>j;++j)T.Lb[j]=ce(E)?D(E,6):0}if(T.Bb)for(j=0;3>j;++j)$.jb[j]=ce(E)?Q(E,8):255}else T.Bb=0;if(E.Ka)return Yn(C,3,"cannot parse segment header");if((T=C.ed).zd=ce(E),T.Tb=Q(E,6),T.wb=Q(E,3),T.Pc=ce(E),T.Pc&&ce(E)){for($=0;4>$;++$)ce(E)&&(T.vd[$]=D(E,6));for($=0;4>$;++$)ce(E)&&(T.od[$]=D(E,6))}if(C.L=T.Tb==0?0:T.zd?1:2,E.Ka)return Yn(C,3,"cannot parse filter header");var ae=H;if(H=j=w,w=j+ae,T=ae,C.Xb=(1<<Q(C.m,2))-1,ae<3*($=C.Xb))B=7;else{for(j+=3*$,T-=3*$,ae=0;ae<$;++ae){var Ae=B[H+0]|B[H+1]<<8|B[H+2]<<16;Ae>T&&(Ae=T),q(C.Jc[+ae],B,j,Ae),j+=Ae,T-=Ae,H+=3}q(C.Jc[+$],B,j,T),B=j<w?0:5}if(B!=0)return Yn(C,B,"cannot parse partitions");for(B=Q(j=C.m,7),H=ce(j)?D(j,4):0,w=ce(j)?D(j,4):0,T=ce(j)?D(j,4):0,$=ce(j)?D(j,4):0,j=ce(j)?D(j,4):0,ae=C.Qa,Ae=0;4>Ae;++Ae){if(ae.Cb){var he=ae.Zb[Ae];ae.Fb||(he+=B)}else{if(0<Ae){C.pb[Ae]=C.pb[0];continue}he=B}var Ce=C.pb[Ae];Ce.Sc[0]=Kp[Ar(he+H,127)],Ce.Sc[1]=Lp[Ar(he+0,127)],Ce.Eb[0]=2*Kp[Ar(he+w,127)],Ce.Eb[1]=101581*Lp[Ar(he+T,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Kp[Ar(he+$,117)],Ce.Qc[1]=Lp[Ar(he+j,127)],Ce.lc=he+j}if(!M.Rb)return Yn(C,4,"Not a key frame.");for(ce(E),M=C.Pa,B=0;4>B;++B){for(H=0;8>H;++H)for(w=0;3>w;++w)for(T=0;11>T;++T)$=re(E,lH[B][H][w][T])?Q(E,8):aH[B][H][w][T],M.Wc[B][H].Yb[w][T]=$;for(H=0;17>H;++H)M.Xc[B][H]=M.Wc[B][sH[H]]}return C.kc=ce(E),C.kc&&(C.Bd=Q(E,8)),C.cb=1}function zd(C,A,B,w,H,E,M){var T=A[H].Yb[B];for(B=0;16>H;++H){if(!re(C,T[B+0]))return H;for(;!re(C,T[B+1]);)if(T=A[++H].Yb[0],B=0,H==16)return 16;var j=A[H+1].Yb;if(re(C,T[B+2])){var $=C,ae=0;if(re($,(he=T)[(Ae=B)+3]))if(re($,he[Ae+6])){for(T=0,Ae=2*(ae=re($,he[Ae+8]))+(he=re($,he[Ae+9+ae])),ae=0,he=rH[Ae];he[T];++T)ae+=ae+re($,he[T]);ae+=3+(8<<Ae)}else re($,he[Ae+7])?(ae=7+2*re($,165),ae+=re($,145)):ae=5+re($,159);else ae=re($,he[Ae+4])?3+re($,he[Ae+5]):2;T=j[2]}else ae=1,T=j[1];j=M+iH[H],0>($=C).b&&se($);var Ae,he=$.b,Ce=(Ae=$.Ca>>1)-($.I>>he)>>31;--$.b,$.Ca+=Ce,$.Ca|=1,$.I-=(Ae+1&Ce)<<he,E[j]=((ae^Ce)-Ce)*w[(0<H)+0]}return 16}function Fc(C){var A=C.rb[C.sb-1];A.la=0,A.Na=0,r(C.zc,0,0,C.zc.length),C.ja=0}function up(C,A){if(C==null)return 0;if(A==null)return Yn(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!Md(C,A))return 0;if(t(C.cb),A.ac==null||A.ac(A)){A.ob&&(C.L=0);var B=dA[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=A.v-B>>4,C.zb=A.j-B>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=A.o+15+B>>4,C.Hb=A.va+15+B>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var w=C.ed;for(B=0;4>B;++B){var H;if(C.Qa.Cb){var E=C.Qa.Lb[B];C.Qa.Fb||(E+=w.Tb)}else E=w.Tb;for(H=0;1>=H;++H){var M=C.gd[B][H],T=E;if(w.Pc&&(T+=w.vd[0],H&&(T+=w.od[0])),0<(T=0>T?0:63<T?63:T)){var j=T;0<w.wb&&(j=4<w.wb?j>>2:j>>1)>9-w.wb&&(j=9-w.wb),1>j&&(j=1),M.dd=j,M.tc=2*T+j,M.ld=40<=T?2:15<=T?1:0}else M.tc=0;M.La=H}}}B=0}else Yn(C,6,"Frame setup failed"),B=C.a;if(B=B==0){if(B){C.$c=0,0<C.Aa||(C.Ic=ZH);e:{B=C.Ic,w=4*(j=C.za);var $=32*j,ae=j+1,Ae=0<C.L?j*(0<C.Aa?2:1):0,he=(C.Aa==2?2:1)*j;if((M=w+832+(H=3*(16*B+dA[C.L])/2*$)+(E=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=M)B=0;else{if(M>C.Vb){if(C.Vb=0,C.Ec=i(M),C.Fc=0,C.Ec==null){B=Yn(C,1,"no memory during frame initialization.");break e}C.Vb=M}M=C.Ec,T=C.Fc,C.Ac=M,C.Bc=T,T+=w,C.Gd=a($,Ld),C.Hd=0,C.rb=a(ae+1,Kd),C.sb=1,C.wa=Ae?a(Ae,Xs):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=j),t(!0),C.oc=M,C.pc=T,T+=832,C.ya=a(he,Hc),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=j),C.R=16*j,C.B=8*j,j=($=dA[C.L])*C.R,$=$/2*C.B,C.sa=M,C.ta=T+j,C.qa=C.sa,C.ra=C.ta+16*B*C.R+$,C.Ha=C.qa,C.Ia=C.ra+8*B*C.B+$,C.$c=0,T+=H,C.mb=E?M:null,C.nb=E?T:null,t(T+E<=C.Fc+C.Vb),Fc(C),r(C.Ac,C.Bc,0,w),B=1}}if(B){if(A.ka=0,A.y=C.sa,A.O=C.ta,A.f=C.qa,A.N=C.ra,A.ea=C.Ha,A.Vd=C.Ia,A.fa=C.R,A.Rc=C.B,A.F=null,A.J=0,!rS){for(B=-255;255>=B;++B)eS[255+B]=0>B?-B:B;for(B=-1020;1020>=B;++B)tS[1020+B]=-128>B?-128:127<B?127:B;for(B=-112;112>=B;++B)nS[112+B]=-16>B?-16:15<B?15:B;for(B=-255;510>=B;++B)gS[255+B]=0>B?0:255<B?255:B;rS=1}mi=hp,Qs=dp,Zo=Td,fi=Ap,Ra=Dd,gC=Ud,Yl=zc,Ps=Xl,Nl=kp,Go=Uc,rC=Vp,Nr=Ks,wa=Tc,nn=tA,gn=eA,Nn=Wa,qn=mo,Xa=Wp,pi[0]=Oi,pi[1]=mp,pi[2]=yp,pi[3]=Zp,pi[4]=Pd,pi[5]=Fs,pi[6]=Od,pi[7]=Lc,pi[8]=Bp,pi[9]=Gp,So[0]=jd,So[1]=pp,So[2]=va,So[3]=Ns,So[4]=Zg,So[5]=bp,So[6]=Qd,Ja[0]=ho,Ja[1]=fp,Ja[2]=Sp,Ja[3]=Ec,Ja[4]=wl,Ja[5]=vp,Ja[6]=Mc,B=1}else B=0}B&&(B=function(Ce,Ve){for(Ce.M=0;Ce.M<Ce.Va;++Ce.M){var ye,oe=Ce.Jc[Ce.M&Ce.Xb],Ie=Ce.m,Be=Ce;for(ye=0;ye<Be.za;++ye){var ke=Ie,ve=Be,Qe=ve.Ac,Ee=ve.Bc+4*ye,at=ve.zc,ze=ve.ya[ve.aa+ye];if(ve.Qa.Bb?ze.$b=re(ke,ve.Pa.jb[0])?2+re(ke,ve.Pa.jb[2]):re(ke,ve.Pa.jb[1]):ze.$b=0,ve.kc&&(ze.Ad=re(ke,ve.Bd)),ze.Za=!re(ke,145)+0,ze.Za){var Et=ze.Ob,Dt=0;for(ve=0;4>ve;++ve){var Nt,Rt=at[0+ve];for(Nt=0;4>Nt;++Nt){Rt=oH[Qe[Ee+Nt]][Rt];for(var en=lS[re(ke,Rt[0])];0<en;)en=lS[2*en+re(ke,Rt[en])];Rt=-en,Qe[Ee+Nt]=Rt}g(Et,Dt,Qe,Ee,4),Dt+=4,at[0+ve]=Rt}}else Rt=re(ke,156)?re(ke,128)?1:3:re(ke,163)?2:0,ze.Ob[0]=Rt,r(Qe,Ee,Rt,4),r(at,0,Rt,4);ze.Dd=re(ke,142)?re(ke,114)?re(ke,183)?1:3:2:0}if(Be.m.Ka)return Yn(Ce,7,"Premature end-of-partition0 encountered.");for(;Ce.ja<Ce.za;++Ce.ja){if(Be=oe,ke=(Ie=Ce).rb[Ie.sb-1],Qe=Ie.rb[Ie.sb+Ie.ja],ye=Ie.ya[Ie.aa+Ie.ja],Ee=Ie.kc?ye.Ad:0)ke.la=Qe.la=0,ye.Za||(ke.Na=Qe.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var _t,pt;if(ke=Qe,Qe=Be,Ee=Ie.Pa.Xc,at=Ie.ya[Ie.aa+Ie.ja],ze=Ie.pb[at.$b],ve=at.ad,Et=0,Dt=Ie.rb[Ie.sb-1],Rt=Nt=0,r(ve,Et,0,384),at.Za)var Tn=0,Og=Ee[3];else{en=i(16);var Dn=ke.Na+Dt.Na;if(Dn=iC(Qe,Ee[1],Dn,ze.Eb,0,en,0),ke.Na=Dt.Na=(0<Dn)+0,1<Dn)mi(en,0,ve,Et);else{var _g=en[0]+3>>3;for(en=0;256>en;en+=16)ve[Et+en]=_g}Tn=1,Og=Ee[0]}var jt=15&ke.la,mr=15&Dt.la;for(en=0;4>en;++en){var fr=1&mr;for(_g=pt=0;4>_g;++_g)jt=jt>>1|(fr=(Dn=iC(Qe,Og,Dn=fr+(1&jt),ze.Sc,Tn,ve,Et))>Tn)<<7,pt=pt<<2|(3<Dn?3:1<Dn?2:ve[Et+0]!=0),Et+=16;jt>>=4,mr=mr>>1|fr<<7,Nt=(Nt<<8|pt)>>>0}for(Og=jt,Tn=mr>>4,_t=0;4>_t;_t+=2){for(pt=0,jt=ke.la>>4+_t,mr=Dt.la>>4+_t,en=0;2>en;++en){for(fr=1&mr,_g=0;2>_g;++_g)Dn=fr+(1&jt),jt=jt>>1|(fr=0<(Dn=iC(Qe,Ee[2],Dn,ze.Qc,0,ve,Et)))<<3,pt=pt<<2|(3<Dn?3:1<Dn?2:ve[Et+0]!=0),Et+=16;jt>>=2,mr=mr>>1|fr<<5}Rt|=pt<<4*_t,Og|=jt<<4<<_t,Tn|=(240&mr)<<_t}ke.la=Og,Dt.la=Tn,at.Hc=Nt,at.Gc=Rt,at.ia=43690&Rt?0:ze.ia,Ee=!(Nt|Rt)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[ye.$b][ye.Za],Ie.wa[Ie.Y+Ie.ja].La|=!Ee),Be.Ka)return Yn(Ce,7,"Premature end-of-file encountered.")}if(Fc(Ce),Ie=Ve,Be=1,ye=(oe=Ce).D,ke=0<oe.L&&oe.M>=oe.zb&&oe.M<=oe.Va,oe.Aa==0)e:{if(ye.M=oe.M,ye.uc=ke,_c(oe,ye),Be=1,ye=(pt=oe.D).Nb,ke=(Rt=dA[oe.L])*oe.R,Qe=Rt/2*oe.B,en=16*ye*oe.R,_g=8*ye*oe.B,Ee=oe.sa,at=oe.ta-ke+en,ze=oe.qa,ve=oe.ra-Qe+_g,Et=oe.Ha,Dt=oe.Ia-Qe+_g,mr=(jt=pt.M)==0,Nt=jt>=oe.Va-1,oe.Aa==2&&_c(oe,pt),pt.uc)for(fr=(Dn=oe).D.M,t(Dn.D.uc),pt=Dn.yb;pt<Dn.Hb;++pt){Tn=pt,Og=fr;var ag=(hg=(Wn=Dn).D).Nb;_t=Wn.R;var hg=hg.wa[hg.Y+Tn],xg=Wn.sa,xr=Wn.ta+16*ag*_t+16*Tn,qi=hg.dd,og=hg.tc;if(og!=0)if(t(3<=og),Wn.L==1)0<Tn&&Nn(xg,xr,_t,og+4),hg.La&&Xa(xg,xr,_t,og),0<Og&&gn(xg,xr,_t,og+4),hg.La&&qn(xg,xr,_t,og);else{var Ya=Wn.B,Hl=Wn.qa,_s=Wn.ra+8*ag*Ya+8*Tn,Wo=Wn.Ha,Wn=Wn.Ia+8*ag*Ya+8*Tn;ag=hg.ld,0<Tn&&(Ps(xg,xr,_t,og+4,qi,ag),Go(Hl,_s,Wo,Wn,Ya,og+4,qi,ag)),hg.La&&(Nr(xg,xr,_t,og,qi,ag),nn(Hl,_s,Wo,Wn,Ya,og,qi,ag)),0<Og&&(Yl(xg,xr,_t,og+4,qi,ag),Nl(Hl,_s,Wo,Wn,Ya,og+4,qi,ag)),hg.La&&(rC(xg,xr,_t,og,qi,ag),wa(Hl,_s,Wo,Wn,Ya,og,qi,ag))}}if(oe.ia&&alert("todo:DitherRow"),Ie.put!=null){if(pt=16*jt,jt=16*(jt+1),mr?(Ie.y=oe.sa,Ie.O=oe.ta+en,Ie.f=oe.qa,Ie.N=oe.ra+_g,Ie.ea=oe.Ha,Ie.W=oe.Ia+_g):(pt-=Rt,Ie.y=Ee,Ie.O=at,Ie.f=ze,Ie.N=ve,Ie.ea=Et,Ie.W=Dt),Nt||(jt-=Rt),jt>Ie.o&&(jt=Ie.o),Ie.F=null,Ie.J=null,oe.Fa!=null&&0<oe.Fa.length&&pt<jt&&(Ie.J=Pc(oe,Ie,pt,jt-pt),Ie.F=oe.mb,Ie.F==null&&Ie.F.length==0)){Be=Yn(oe,3,"Could not decode alpha data.");break e}pt<Ie.j&&(Rt=Ie.j-pt,pt=Ie.j,t(!(1&Rt)),Ie.O+=oe.R*Rt,Ie.N+=oe.B*(Rt>>1),Ie.W+=oe.B*(Rt>>1),Ie.F!=null&&(Ie.J+=Ie.width*Rt)),pt<jt&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=pt-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=jt-pt,Be=Ie.put(Ie))}ye+1!=oe.Ic||Nt||(g(oe.sa,oe.ta-ke,Ee,at+16*oe.R,ke),g(oe.qa,oe.ra-Qe,ze,ve+8*oe.B,Qe),g(oe.Ha,oe.Ia-Qe,Et,Dt+8*oe.B,Qe))}if(!Be)return Yn(Ce,6,"Output aborted.")}return 1}(C,A)),A.bc!=null&&A.bc(A),B&=1}return B?(C.cb=0,B):0}function Ci(C,A,B,w,H){H=C[A+B+32*w]+(H>>3),C[A+B+32*w]=-256&H?0>H?0:255:H}function Ys(C,A,B,w,H,E){Ci(C,A,0,B,w+H),Ci(C,A,1,B,w+E),Ci(C,A,2,B,w-E),Ci(C,A,3,B,w-H)}function jg(C){return(20091*C>>16)+C}function xc(C,A,B,w){var H,E=0,M=i(16);for(H=0;4>H;++H){var T=C[A+0]+C[A+8],j=C[A+0]-C[A+8],$=(35468*C[A+4]>>16)-jg(C[A+12]),ae=jg(C[A+4])+(35468*C[A+12]>>16);M[E+0]=T+ae,M[E+1]=j+$,M[E+2]=j-$,M[E+3]=T-ae,E+=4,A++}for(H=E=0;4>H;++H)T=(C=M[E+0]+4)+M[E+8],j=C-M[E+8],$=(35468*M[E+4]>>16)-jg(M[E+12]),Ci(B,w,0,0,T+(ae=jg(M[E+4])+(35468*M[E+12]>>16))),Ci(B,w,1,0,j+$),Ci(B,w,2,0,j-$),Ci(B,w,3,0,T-ae),E++,w+=32}function Ud(C,A,B,w){var H=C[A+0]+4,E=35468*C[A+4]>>16,M=jg(C[A+4]),T=35468*C[A+1]>>16;Ys(B,w,0,H+M,C=jg(C[A+1]),T),Ys(B,w,1,H+E,C,T),Ys(B,w,2,H-E,C,T),Ys(B,w,3,H-M,C,T)}function dp(C,A,B,w,H){xc(C,A,B,w),H&&xc(C,A+16,B,w+4)}function Td(C,A,B,w){Qs(C,A+0,B,w,1),Qs(C,A+32,B,w+128,1)}function Ap(C,A,B,w){var H;for(C=C[A+0]+4,H=0;4>H;++H)for(A=0;4>A;++A)Ci(B,w,A,H,C)}function Dd(C,A,B,w){C[A+0]&&fi(C,A+0,B,w),C[A+16]&&fi(C,A+16,B,w+4),C[A+32]&&fi(C,A+32,B,w+128),C[A+48]&&fi(C,A+48,B,w+128+4)}function hp(C,A,B,w){var H,E=i(16);for(H=0;4>H;++H){var M=C[A+0+H]+C[A+12+H],T=C[A+4+H]+C[A+8+H],j=C[A+4+H]-C[A+8+H],$=C[A+0+H]-C[A+12+H];E[0+H]=M+T,E[8+H]=M-T,E[4+H]=$+j,E[12+H]=$-j}for(H=0;4>H;++H)M=(C=E[0+4*H]+3)+E[3+4*H],T=E[1+4*H]+E[2+4*H],j=E[1+4*H]-E[2+4*H],$=C-E[3+4*H],B[w+0]=M+T>>3,B[w+16]=$+j>>3,B[w+32]=M-T>>3,B[w+48]=$-j>>3,w+=64}function Kc(C,A,B){var w,H=A-32,E=hr,M=255-C[H-1];for(w=0;w<B;++w){var T,j=E,$=M+C[A-1];for(T=0;T<B;++T)C[A+T]=j[$+C[H+T]];A+=32}}function mp(C,A){Kc(C,A,4)}function fp(C,A){Kc(C,A,8)}function pp(C,A){Kc(C,A,16)}function va(C,A){var B;for(B=0;16>B;++B)g(C,A+32*B,C,A-32,16)}function Ns(C,A){var B;for(B=16;0<B;--B)r(C,A,C[A-1],16),A+=32}function Hs(C,A,B){var w;for(w=0;16>w;++w)r(A,B+32*w,C,16)}function jd(C,A){var B,w=16;for(B=0;16>B;++B)w+=C[A-1+32*B]+C[A+B-32];Hs(w>>5,C,A)}function Zg(C,A){var B,w=8;for(B=0;16>B;++B)w+=C[A-1+32*B];Hs(w>>4,C,A)}function bp(C,A){var B,w=8;for(B=0;16>B;++B)w+=C[A+B-32];Hs(w>>4,C,A)}function Qd(C,A){Hs(128,C,A)}function Ct(C,A,B){return C+2*A+B+2>>2}function yp(C,A){var B,w=A-32;for(w=new Uint8Array([Ct(C[w-1],C[w+0],C[w+1]),Ct(C[w+0],C[w+1],C[w+2]),Ct(C[w+1],C[w+2],C[w+3]),Ct(C[w+2],C[w+3],C[w+4])]),B=0;4>B;++B)g(C,A+32*B,w,0,w.length)}function Zp(C,A){var B=C[A-1],w=C[A-1+32],H=C[A-1+64],E=C[A-1+96];fe(C,A+0,16843009*Ct(C[A-1-32],B,w)),fe(C,A+32,16843009*Ct(B,w,H)),fe(C,A+64,16843009*Ct(w,H,E)),fe(C,A+96,16843009*Ct(H,E,E))}function Oi(C,A){var B,w=4;for(B=0;4>B;++B)w+=C[A+B-32]+C[A-1+32*B];for(w>>=3,B=0;4>B;++B)r(C,A+32*B,w,4)}function Pd(C,A){var B=C[A-1+0],w=C[A-1+32],H=C[A-1+64],E=C[A-1-32],M=C[A+0-32],T=C[A+1-32],j=C[A+2-32],$=C[A+3-32];C[A+0+96]=Ct(w,H,C[A-1+96]),C[A+1+96]=C[A+0+64]=Ct(B,w,H),C[A+2+96]=C[A+1+64]=C[A+0+32]=Ct(E,B,w),C[A+3+96]=C[A+2+64]=C[A+1+32]=C[A+0+0]=Ct(M,E,B),C[A+3+64]=C[A+2+32]=C[A+1+0]=Ct(T,M,E),C[A+3+32]=C[A+2+0]=Ct(j,T,M),C[A+3+0]=Ct($,j,T)}function Od(C,A){var B=C[A+1-32],w=C[A+2-32],H=C[A+3-32],E=C[A+4-32],M=C[A+5-32],T=C[A+6-32],j=C[A+7-32];C[A+0+0]=Ct(C[A+0-32],B,w),C[A+1+0]=C[A+0+32]=Ct(B,w,H),C[A+2+0]=C[A+1+32]=C[A+0+64]=Ct(w,H,E),C[A+3+0]=C[A+2+32]=C[A+1+64]=C[A+0+96]=Ct(H,E,M),C[A+3+32]=C[A+2+64]=C[A+1+96]=Ct(E,M,T),C[A+3+64]=C[A+2+96]=Ct(M,T,j),C[A+3+96]=Ct(T,j,j)}function Fs(C,A){var B=C[A-1+0],w=C[A-1+32],H=C[A-1+64],E=C[A-1-32],M=C[A+0-32],T=C[A+1-32],j=C[A+2-32],$=C[A+3-32];C[A+0+0]=C[A+1+64]=E+M+1>>1,C[A+1+0]=C[A+2+64]=M+T+1>>1,C[A+2+0]=C[A+3+64]=T+j+1>>1,C[A+3+0]=j+$+1>>1,C[A+0+96]=Ct(H,w,B),C[A+0+64]=Ct(w,B,E),C[A+0+32]=C[A+1+96]=Ct(B,E,M),C[A+1+32]=C[A+2+96]=Ct(E,M,T),C[A+2+32]=C[A+3+96]=Ct(M,T,j),C[A+3+32]=Ct(T,j,$)}function Lc(C,A){var B=C[A+0-32],w=C[A+1-32],H=C[A+2-32],E=C[A+3-32],M=C[A+4-32],T=C[A+5-32],j=C[A+6-32],$=C[A+7-32];C[A+0+0]=B+w+1>>1,C[A+1+0]=C[A+0+64]=w+H+1>>1,C[A+2+0]=C[A+1+64]=H+E+1>>1,C[A+3+0]=C[A+2+64]=E+M+1>>1,C[A+0+32]=Ct(B,w,H),C[A+1+32]=C[A+0+96]=Ct(w,H,E),C[A+2+32]=C[A+1+96]=Ct(H,E,M),C[A+3+32]=C[A+2+96]=Ct(E,M,T),C[A+3+64]=Ct(M,T,j),C[A+3+96]=Ct(T,j,$)}function Gp(C,A){var B=C[A-1+0],w=C[A-1+32],H=C[A-1+64],E=C[A-1+96];C[A+0+0]=B+w+1>>1,C[A+2+0]=C[A+0+32]=w+H+1>>1,C[A+2+32]=C[A+0+64]=H+E+1>>1,C[A+1+0]=Ct(B,w,H),C[A+3+0]=C[A+1+32]=Ct(w,H,E),C[A+3+32]=C[A+1+64]=Ct(H,E,E),C[A+3+64]=C[A+2+64]=C[A+0+96]=C[A+1+96]=C[A+2+96]=C[A+3+96]=E}function Bp(C,A){var B=C[A-1+0],w=C[A-1+32],H=C[A-1+64],E=C[A-1+96],M=C[A-1-32],T=C[A+0-32],j=C[A+1-32],$=C[A+2-32];C[A+0+0]=C[A+2+32]=B+M+1>>1,C[A+0+32]=C[A+2+64]=w+B+1>>1,C[A+0+64]=C[A+2+96]=H+w+1>>1,C[A+0+96]=E+H+1>>1,C[A+3+0]=Ct(T,j,$),C[A+2+0]=Ct(M,T,j),C[A+1+0]=C[A+3+32]=Ct(B,M,T),C[A+1+32]=C[A+3+64]=Ct(w,B,M),C[A+1+64]=C[A+3+96]=Ct(H,w,B),C[A+1+96]=Ct(E,H,w)}function Sp(C,A){var B;for(B=0;8>B;++B)g(C,A+32*B,C,A-32,8)}function Ec(C,A){var B;for(B=0;8>B;++B)r(C,A,C[A-1],8),A+=32}function Rl(C,A,B){var w;for(w=0;8>w;++w)r(A,B+32*w,C,8)}function ho(C,A){var B,w=8;for(B=0;8>B;++B)w+=C[A+B-32]+C[A-1+32*B];Rl(w>>4,C,A)}function vp(C,A){var B,w=4;for(B=0;8>B;++B)w+=C[A+B-32];Rl(w>>3,C,A)}function wl(C,A){var B,w=4;for(B=0;8>B;++B)w+=C[A-1+32*B];Rl(w>>3,C,A)}function Mc(C,A){Rl(128,C,A)}function xs(C,A,B){var w=C[A-B],H=C[A+0],E=3*(H-w)+Yp[1020+C[A-2*B]-C[A+B]],M=aA[112+(E+4>>3)];C[A-B]=hr[255+w+aA[112+(E+3>>3)]],C[A+0]=hr[255+H-M]}function _d(C,A,B,w){var H=C[A+0],E=C[A+B];return Hr[255+C[A-2*B]-C[A-B]]>w||Hr[255+E-H]>w}function qd(C,A,B,w){return 4*Hr[255+C[A-B]-C[A+0]]+Hr[255+C[A-2*B]-C[A+B]]<=w}function $d(C,A,B,w,H){var E=C[A-3*B],M=C[A-2*B],T=C[A-B],j=C[A+0],$=C[A+B],ae=C[A+2*B],Ae=C[A+3*B];return 4*Hr[255+T-j]+Hr[255+M-$]>w?0:Hr[255+C[A-4*B]-E]<=H&&Hr[255+E-M]<=H&&Hr[255+M-T]<=H&&Hr[255+Ae-ae]<=H&&Hr[255+ae-$]<=H&&Hr[255+$-j]<=H}function eA(C,A,B,w){var H=2*w+1;for(w=0;16>w;++w)qd(C,A+w,B,H)&&xs(C,A+w,B)}function Wa(C,A,B,w){var H=2*w+1;for(w=0;16>w;++w)qd(C,A+w*B,1,H)&&xs(C,A+w*B,1)}function mo(C,A,B,w){var H;for(H=3;0<H;--H)eA(C,A+=4*B,B,w)}function Wp(C,A,B,w){var H;for(H=3;0<H;--H)Wa(C,A+=4,B,w)}function fo(C,A,B,w,H,E,M,T){for(E=2*E+1;0<H--;){if($d(C,A,B,E,M))if(_d(C,A,B,T))xs(C,A,B);else{var j=C,$=A,ae=B,Ae=j[$-2*ae],he=j[$-ae],Ce=j[$+0],Ve=j[$+ae],ye=j[$+2*ae],oe=27*(Be=Yp[1020+3*(Ce-he)+Yp[1020+Ae-Ve]])+63>>7,Ie=18*Be+63>>7,Be=9*Be+63>>7;j[$-3*ae]=hr[255+j[$-3*ae]+Be],j[$-2*ae]=hr[255+Ae+Ie],j[$-ae]=hr[255+he+oe],j[$+0]=hr[255+Ce-oe],j[$+ae]=hr[255+Ve-Ie],j[$+2*ae]=hr[255+ye-Be]}A+=w}}function ui(C,A,B,w,H,E,M,T){for(E=2*E+1;0<H--;){if($d(C,A,B,E,M))if(_d(C,A,B,T))xs(C,A,B);else{var j=C,$=A,ae=B,Ae=j[$-ae],he=j[$+0],Ce=j[$+ae],Ve=aA[112+((ye=3*(he-Ae))+4>>3)],ye=aA[112+(ye+3>>3)],oe=Ve+1>>1;j[$-2*ae]=hr[255+j[$-2*ae]+oe],j[$-ae]=hr[255+Ae+ye],j[$+0]=hr[255+he-Ve],j[$+ae]=hr[255+Ce-oe]}A+=w}}function zc(C,A,B,w,H,E){fo(C,A,B,1,16,w,H,E)}function Xl(C,A,B,w,H,E){fo(C,A,1,B,16,w,H,E)}function Vp(C,A,B,w,H,E){var M;for(M=3;0<M;--M)ui(C,A+=4*B,B,1,16,w,H,E)}function Ks(C,A,B,w,H,E){var M;for(M=3;0<M;--M)ui(C,A+=4,1,B,16,w,H,E)}function kp(C,A,B,w,H,E,M,T){fo(C,A,H,1,8,E,M,T),fo(B,w,H,1,8,E,M,T)}function Uc(C,A,B,w,H,E,M,T){fo(C,A,1,H,8,E,M,T),fo(B,w,1,H,8,E,M,T)}function Tc(C,A,B,w,H,E,M,T){ui(C,A+4*H,H,1,8,E,M,T),ui(B,w+4*H,H,1,8,E,M,T)}function tA(C,A,B,w,H,E,M,T){ui(C,A+4,1,H,8,E,M,T),ui(B,w+4,1,H,8,E,M,T)}function Ls(){this.ba=new oi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Dc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function nA(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new x,this.yc=new v}function Rp(){this.xb=this.a=0,this.l=new Js,this.ca=new oi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new nA,this.ab=0,this.gc=a(4,jc),this.Oc=0}function Es(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Js,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Jl(C,A,B,w,H,E,M){for(C=C==null?0:C[A+0],A=0;A<M;++A)H[E+A]=C+B[w+A]&255,C=H[E+A]}function Qc(C,A,B,w,H,E,M){var T;if(C==null)Jl(null,null,B,w,H,E,M);else for(T=0;T<M;++T)H[E+T]=C[A+T]+B[w+T]&255}function po(C,A,B,w,H,E,M){if(C==null)Jl(null,null,B,w,H,E,M);else{var T,j=C[A+0],$=j,ae=j;for(T=0;T<M;++T)$=ae+(j=C[A+T])-$,ae=B[w+T]+(-256&$?0>$?0:255:$)&255,$=j,H[E+T]=ae}}function Pc(C,A,B,w){var H=A.width,E=A.o;if(t(C!=null&&A!=null),0>B||0>=w||B+w>E)return null;if(!C.Cc){if(C.ga==null){var M;if(C.ga=new Es,(M=C.ga==null)||(M=A.width*A.o,t(C.Gb.length==0),C.Gb=i(M),C.Uc=0,C.Gb==null?M=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,M=1),M=!M),!M){M=C.ga;var T=C.Fa,j=C.P,$=C.qc,ae=C.mb,Ae=C.nb,he=j+1,Ce=$-1,Ve=M.l;if(t(T!=null&&ae!=null&&A!=null),vo[0]=null,vo[1]=Jl,vo[2]=Qc,vo[3]=po,M.ca=ae,M.tb=Ae,M.c=A.width,M.i=A.height,t(0<M.c&&0<M.i),1>=$)A=0;else if(M.$a=T[j+0]>>0&3,M.Z=T[j+0]>>2&3,M.Lc=T[j+0]>>4&3,j=T[j+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||j)A=0;else if(Ve.put=Ti,Ve.ac=Ag,Ve.bc=Di,Ve.ma=M,Ve.width=A.width,Ve.height=A.height,Ve.Da=A.Da,Ve.v=A.v,Ve.va=A.va,Ve.j=A.j,Ve.o=A.o,M.$a)e:{t(M.$a==1),A=Jr();t:for(;;){if(A==null){A=0;break e}if(t(M!=null),M.mc=A,A.c=M.c,A.i=M.i,A.l=M.l,A.l.ma=M,A.l.width=M.c,A.l.height=M.i,A.a=0,U(A.m,T,he,Ce),!Pi(M.c,M.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Sa(A.s)?(M.ic=1,T=A.c*A.i,A.Ta=null,A.Ua=0,A.V=i(T),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(M.ic=0,A=kl(A,M.c)),!A))break t;A=1;break e}M.mc=null,A=0}else A=Ce>=M.c*M.i;M=!A}if(M)return null;C.ga.Lc!=1?C.Ga=0:w=E-B}t(C.ga!=null),t(B+w<=E);e:{if(A=(T=C.ga).c,E=T.l.o,T.$a==0){if(he=C.rc,Ce=C.Vc,Ve=C.Fa,j=C.P+1+B*A,$=C.mb,ae=C.nb+B*A,t(j<=C.P+C.qc),T.Z!=0)for(t(vo[T.Z]!=null),M=0;M<w;++M)vo[T.Z](he,Ce,Ve,j,$,ae,A),he=$,Ce=ae,ae+=A,j+=A;else for(M=0;M<w;++M)g($,ae,Ve,j,A),he=$,Ce=ae,ae+=A,j+=A;C.rc=he,C.Vc=Ce}else{if(t(T.mc!=null),A=B+w,t((M=T.mc)!=null),t(A<=M.i),M.C>=A)A=1;else if(T.ic||de(),T.ic){T=M.V,he=M.Ba,Ce=M.c;var ye=M.i,oe=(Ve=1,j=M.$/Ce,$=M.$%Ce,ae=M.m,Ae=M.s,M.$),Ie=Ce*ye,Be=Ce*A,ke=Ae.wc,ve=oe<Be?zn(Ae,$,j):null;t(oe<=Ie),t(A<=ye),t(Sa(Ae));t:for(;;){for(;!ae.h&&oe<Be;){if($&ke||(ve=zn(Ae,$,j)),t(ve!=null),te(ae),256>(ye=Dg(ve.G[0],ve.H[0],ae)))T[he+oe]=ye,++oe,++$>=Ce&&($=0,++j<=A&&!(j%16)&&Ii(M,j));else{if(!(280>ye)){Ve=0;break t}ye=li(ye-256,ae);var Qe,Ee=Dg(ve.G[4],ve.H[4],ae);if(te(ae),!(oe>=(Ee=ji(Ce,Ee=li(Ee,ae)))&&Ie-oe>=ye)){Ve=0;break t}for(Qe=0;Qe<ye;++Qe)T[he+oe+Qe]=T[he+oe+Qe-Ee];for(oe+=ye,$+=ye;$>=Ce;)$-=Ce,++j<=A&&!(j%16)&&Ii(M,j);oe<Be&&$&ke&&(ve=zn(Ae,$,j))}t(ae.h==O(ae))}Ii(M,j>A?A:j);break t}!Ve||ae.h&&oe<Ie?(Ve=0,M.a=ae.h?5:3):M.$=oe,A=Ve}else A=ci(M,M.V,M.Ba,M.c,M.i,A,Vs);if(!A){w=0;break e}}B+w>=E&&(C.Cc=1),w=1}if(!w)return null;if(C.Cc&&((w=C.ga)!=null&&(w.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+B*H}function Z(C,A,B,w,H,E){for(;0<H--;){var M,T=C,j=A+(B?1:0),$=C,ae=A+(B?0:3);for(M=0;M<w;++M){var Ae=$[ae+4*M];Ae!=255&&(Ae*=32897,T[j+4*M+0]=T[j+4*M+0]*Ae>>23,T[j+4*M+1]=T[j+4*M+1]*Ae>>23,T[j+4*M+2]=T[j+4*M+2]*Ae>>23)}A+=E}}function F(C,A,B,w,H){for(;0<w--;){var E;for(E=0;E<B;++E){var M=C[A+2*E+0],T=15&($=C[A+2*E+1]),j=4369*T,$=(240&$|$>>4)*j>>16;C[A+2*E+0]=(240&M|M>>4)*j>>16&240|(15&M|M<<4)*j>>16>>4&15,C[A+2*E+1]=240&$|T}A+=H}}function ne(C,A,B,w,H,E,M,T){var j,$,ae=255;for($=0;$<H;++$){for(j=0;j<w;++j){var Ae=C[A+j];E[M+4*j]=Ae,ae&=Ae}A+=B,M+=T}return ae!=255}function ie(C,A,B,w,H){var E;for(E=0;E<H;++E)B[w+E]=C[A+E]>>8}function de(){Bo=Z,Os=F,iA=ne,$B=ie}function Ge(C,A,B){R[C]=function(w,H,E,M,T,j,$,ae,Ae,he,Ce,Ve,ye,oe,Ie,Be,ke){var ve,Qe=ke-1>>1,Ee=T[j+0]|$[ae+0]<<16,at=Ae[he+0]|Ce[Ve+0]<<16;t(w!=null);var ze=3*Ee+at+131074>>2;for(A(w[H+0],255&ze,ze>>16,ye,oe),E!=null&&(ze=3*at+Ee+131074>>2,A(E[M+0],255&ze,ze>>16,Ie,Be)),ve=1;ve<=Qe;++ve){var Et=T[j+ve]|$[ae+ve]<<16,Dt=Ae[he+ve]|Ce[Ve+ve]<<16,Nt=Ee+Et+at+Dt+524296,Rt=Nt+2*(Et+at)>>3;ze=Rt+Ee>>1,Ee=(Nt=Nt+2*(Ee+Dt)>>3)+Et>>1,A(w[H+2*ve-1],255&ze,ze>>16,ye,oe+(2*ve-1)*B),A(w[H+2*ve-0],255&Ee,Ee>>16,ye,oe+(2*ve-0)*B),E!=null&&(ze=Nt+at>>1,Ee=Rt+Dt>>1,A(E[M+2*ve-1],255&ze,ze>>16,Ie,Be+(2*ve-1)*B),A(E[M+2*ve+0],255&Ee,Ee>>16,Ie,Be+(2*ve+0)*B)),Ee=Et,at=Dt}1&ke||(ze=3*Ee+at+131074>>2,A(w[H+ke-1],255&ze,ze>>16,ye,oe+(ke-1)*B),E!=null&&(ze=3*at+Ee+131074>>2,A(E[M+ke-1],255&ze,ze>>16,Ie,Be+(ke-1)*B)))}}function Re(){Fr[oA]=cH,Fr[lA]=IS,Fr[iS]=CH,Fr[sA]=cS,Fr[IA]=CS,Fr[Np]=uS,Fr[aS]=uH,Fr[Hp]=IS,Fr[Fp]=cS,Fr[cA]=CS,Fr[xp]=uS}function je(C){return C&~dH?0>C?0:255:C>>dS}function it(C,A){return je((19077*C>>8)+(26149*A>>8)-14234)}function ht(C,A,B){return je((19077*C>>8)-(6419*A>>8)-(13320*B>>8)+8708)}function Wt(C,A){return je((19077*C>>8)+(33050*A>>8)-17685)}function Xt(C,A,B,w,H){w[H+0]=it(C,B),w[H+1]=ht(C,A,B),w[H+2]=Wt(C,A)}function pn(C,A,B,w,H){w[H+0]=Wt(C,A),w[H+1]=ht(C,A,B),w[H+2]=it(C,B)}function vn(C,A,B,w,H){var E=ht(C,A,B);A=E<<3&224|Wt(C,A)>>3,w[H+0]=248&it(C,B)|E>>5,w[H+1]=A}function Un(C,A,B,w,H){var E=240&Wt(C,A)|15;w[H+0]=240&it(C,B)|ht(C,A,B)>>4,w[H+1]=E}function Gg(C,A,B,w,H){w[H+0]=255,Xt(C,A,B,w,H+1)}function ig(C,A,B,w,H){pn(C,A,B,w,H),w[H+3]=255}function di(C,A,B,w,H){Xt(C,A,B,w,H),w[H+3]=255}function Ar(C,A){return 0>C?0:C>A?A:C}function Va(C,A,B){R[C]=function(w,H,E,M,T,j,$,ae,Ae){for(var he=ae+(-2&Ae)*B;ae!=he;)A(w[H+0],E[M+0],T[j+0],$,ae),A(w[H+1],E[M+0],T[j+0],$,ae+B),H+=2,++M,++j,ae+=2*B;1&Ae&&A(w[H+0],E[M+0],T[j+0],$,ae)}}function gA(C,A,B){return B==0?C==0?A==0?6:5:A==0?4:0:B}function Oc(C,A,B,w,H){switch(C>>>30){case 3:Qs(A,B,w,H,0);break;case 2:gC(A,B,w,H);break;case 1:fi(A,B,w,H)}}function _c(C,A){var B,w,H=A.M,E=A.Nb,M=C.oc,T=C.pc+40,j=C.oc,$=C.pc+584,ae=C.oc,Ae=C.pc+600;for(B=0;16>B;++B)M[T+32*B-1]=129;for(B=0;8>B;++B)j[$+32*B-1]=129,ae[Ae+32*B-1]=129;for(0<H?M[T-1-32]=j[$-1-32]=ae[Ae-1-32]=129:(r(M,T-32-1,127,21),r(j,$-32-1,127,9),r(ae,Ae-32-1,127,9)),w=0;w<C.za;++w){var he=A.ya[A.aa+w];if(0<w){for(B=-1;16>B;++B)g(M,T+32*B-4,M,T+32*B+12,4);for(B=-1;8>B;++B)g(j,$+32*B-4,j,$+32*B+4,4),g(ae,Ae+32*B-4,ae,Ae+32*B+4,4)}var Ce=C.Gd,Ve=C.Hd+w,ye=he.ad,oe=he.Hc;if(0<H&&(g(M,T-32,Ce[Ve].y,0,16),g(j,$-32,Ce[Ve].f,0,8),g(ae,Ae-32,Ce[Ve].ea,0,8)),he.Za){var Ie=M,Be=T-32+16;for(0<H&&(w>=C.za-1?r(Ie,Be,Ce[Ve].y[15],4):g(Ie,Be,Ce[Ve+1].y,0,4)),B=0;4>B;B++)Ie[Be+128+B]=Ie[Be+256+B]=Ie[Be+384+B]=Ie[Be+0+B];for(B=0;16>B;++B,oe<<=2)Ie=M,Be=T+hS[B],pi[he.Ob[B]](Ie,Be),Oc(oe,ye,16*+B,Ie,Be)}else if(Ie=gA(w,H,he.Ob[0]),So[Ie](M,T),oe!=0)for(B=0;16>B;++B,oe<<=2)Oc(oe,ye,16*+B,M,T+hS[B]);for(B=he.Gc,Ie=gA(w,H,he.Dd),Ja[Ie](j,$),Ja[Ie](ae,Ae),oe=ye,Ie=j,Be=$,255&(he=B>>0)&&(170&he?Zo(oe,256,Ie,Be):Ra(oe,256,Ie,Be)),he=ae,oe=Ae,255&(B>>=8)&&(170&B?Zo(ye,320,he,oe):Ra(ye,320,he,oe)),H<C.Ub-1&&(g(Ce[Ve].y,0,M,T+480,16),g(Ce[Ve].f,0,j,$+224,8),g(Ce[Ve].ea,0,ae,Ae+224,8)),B=8*E*C.B,Ce=C.sa,Ve=C.ta+16*w+16*E*C.R,ye=C.qa,he=C.ra+8*w+B,oe=C.Ha,Ie=C.Ia+8*w+B,B=0;16>B;++B)g(Ce,Ve+B*C.R,M,T+32*B,16);for(B=0;8>B;++B)g(ye,he+B*C.B,j,$+32*B,8),g(oe,Ie+B*C.B,ae,Ae+32*B,8)}}function Ms(C,A,B,w,H,E,M,T,j){var $=[0],ae=[0],Ae=0,he=j!=null?j.kd:0,Ce=j??new Dc;if(C==null||12>B)return 7;Ce.data=C,Ce.w=A,Ce.ha=B,A=[A],B=[B],Ce.gb=[Ce.gb];e:{var Ve=A,ye=B,oe=Ce.gb;if(t(C!=null),t(ye!=null),t(oe!=null),oe[0]=0,12<=ye[0]&&!n(C,Ve[0],"RIFF")){if(n(C,Ve[0]+8,"WEBP")){oe=3;break e}var Ie=He(C,Ve[0]+4);if(12>Ie||4294967286<Ie){oe=3;break e}if(he&&Ie>ye[0]-8){oe=7;break e}oe[0]=Ie,Ve[0]+=12,ye[0]-=12}oe=0}if(oe!=0)return oe;for(Ie=0<Ce.gb[0],B=B[0];;){e:{var Be=C;ye=A,oe=B;var ke=$,ve=ae,Qe=Ve=[0];if((ze=Ae=[Ae])[0]=0,8>oe[0])oe=7;else{if(!n(Be,ye[0],"VP8X")){if(He(Be,ye[0]+4)!=10){oe=3;break e}if(18>oe[0]){oe=7;break e}var Ee=He(Be,ye[0]+8),at=1+ue(Be,ye[0]+12);if(2147483648<=at*(Be=1+ue(Be,ye[0]+15))){oe=3;break e}Qe!=null&&(Qe[0]=Ee),ke!=null&&(ke[0]=at),ve!=null&&(ve[0]=Be),ye[0]+=18,oe[0]-=18,ze[0]=1}oe=0}}if(Ae=Ae[0],Ve=Ve[0],oe!=0)return oe;if(ye=!!(2&Ve),!Ie&&Ae)return 3;if(E!=null&&(E[0]=!!(16&Ve)),M!=null&&(M[0]=ye),T!=null&&(T[0]=0),M=$[0],Ve=ae[0],Ae&&ye&&j==null){oe=0;break}if(4>B){oe=7;break}if(Ie&&Ae||!Ie&&!Ae&&!n(C,A[0],"ALPH")){B=[B],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{Ee=C,oe=A,Ie=B;var ze=Ce.gb;ke=Ce.na,ve=Ce.P,Qe=Ce.Sa,at=22,t(Ee!=null),t(Ie!=null),Be=oe[0];var Et=Ie[0];for(t(ke!=null),t(Qe!=null),ke[0]=null,ve[0]=null,Qe[0]=0;;){if(oe[0]=Be,Ie[0]=Et,8>Et){oe=7;break e}var Dt=He(Ee,Be+4);if(4294967286<Dt){oe=3;break e}var Nt=8+Dt+1&-2;if(at+=Nt,0<ze&&at>ze){oe=3;break e}if(!n(Ee,Be,"VP8 ")||!n(Ee,Be,"VP8L")){oe=0;break e}if(Et[0]<Nt){oe=7;break e}n(Ee,Be,"ALPH")||(ke[0]=Ee,ve[0]=Be+8,Qe[0]=Dt),Be+=Nt,Et-=Nt}}if(B=B[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],oe!=0)break}B=[B],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(ze=C,oe=A,Ie=B,ke=Ce.gb[0],ve=Ce.Ja,Qe=Ce.xa,Ee=oe[0],Be=!n(ze,Ee,"VP8 "),at=!n(ze,Ee,"VP8L"),t(ze!=null),t(Ie!=null),t(ve!=null),t(Qe!=null),8>Ie[0])oe=7;else{if(Be||at){if(ze=He(ze,Ee+4),12<=ke&&ze>ke-12){oe=3;break e}if(he&&ze>Ie[0]-8){oe=7;break e}ve[0]=ze,oe[0]+=8,Ie[0]-=8,Qe[0]=at}else Qe[0]=5<=Ie[0]&&ze[Ee+0]==47&&!(ze[Ee+4]>>5),ve[0]=Ie[0];oe=0}if(B=B[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],A=A[0],oe!=0)break;if(4294967286<Ce.Ja)return 3;if(T==null||ye||(T[0]=Ce.xa?2:1),M=[M],Ve=[Ve],Ce.xa){if(5>B){oe=7;break}T=M,he=Ve,ye=E,C==null||5>B?C=0:5<=B&&C[A+0]==47&&!(C[A+4]>>5)?(Ie=[0],ze=[0],ke=[0],U(ve=new Y,C,A,B),lt(ve,Ie,ze,ke)?(T!=null&&(T[0]=Ie[0]),he!=null&&(he[0]=ze[0]),ye!=null&&(ye[0]=ke[0]),C=1):C=0):C=0}else{if(10>B){oe=7;break}T=Ve,C==null||10>B||!Ed(C,A+3,B-3)?C=0:(he=C[A+0]|C[A+1]<<8|C[A+2]<<16,ye=16383&(C[A+7]<<8|C[A+6]),C=16383&(C[A+9]<<8|C[A+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=Ce.Ja||!ye||!C?C=0:(M&&(M[0]=ye),T&&(T[0]=C),C=1))}if(!C||(M=M[0],Ve=Ve[0],Ae&&($[0]!=M||ae[0]!=Ve)))return 3;j!=null&&(j[0]=Ce,j.offset=A-j.w,t(4294967286>A-j.w),t(j.offset==j.ha-B));break}return oe==0||oe==7&&Ae&&j==null?(E!=null&&(E[0]|=Ce.na!=null&&0<Ce.na.length),w!=null&&(w[0]=M),H!=null&&(H[0]=Ve),0):oe}function qc(C,A,B){var w=A.width,H=A.height,E=0,M=0,T=w,j=H;if(A.Da=C!=null&&0<C.Da,A.Da&&(T=C.cd,j=C.bd,E=C.v,M=C.j,11>B||(E&=-2,M&=-2),0>E||0>M||0>=T||0>=j||E+T>w||M+j>H))return 0;if(A.v=E,A.j=M,A.va=E+T,A.o=M+j,A.U=T,A.T=j,A.da=C!=null&&0<C.da,A.da){if(!rt(T,j,B=[C.ib],E=[C.hb]))return 0;A.ib=B[0],A.hb=E[0]}return A.ob=C!=null&&C.ob,A.Kb=C==null||!C.Sd,A.da&&(A.ob=A.ib<3*w/4&&A.hb<3*H/4,A.Kb=0),1}function $c(C){if(C==null)return 2;if(11>C.S){var A=C.f.RGBA;A.fb+=(C.height-1)*A.A,A.A=-A.A}else A=C.f.kb,C=C.height,A.O+=(C-1)*A.fa,A.fa=-A.fa,A.N+=(C-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(C-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(C-1)*A.lb,A.lb=-A.lb);return 0}function zs(C,A,B,w){if(w==null||0>=C||0>=A)return 2;if(B!=null){if(B.Da){var H=B.cd,E=B.bd,M=-2&B.v,T=-2&B.j;if(0>M||0>T||0>=H||0>=E||M+H>C||T+E>A)return 2;C=H,A=E}if(B.da){if(!rt(C,A,H=[B.ib],E=[B.hb]))return 2;C=H[0],A=E[0]}}w.width=C,w.height=A;e:{var j=w.width,$=w.height;if(C=w.S,0>=j||0>=$||!(C>=oA&&13>C))C=2;else{if(0>=w.Rd&&w.sd==null){M=E=H=A=0;var ae=(T=j*mS[C])*$;if(11>C||(E=($+1)/2*(A=(j+1)/2),C==12&&(M=(H=j)*$)),($=i(ae+2*E+M))==null){C=1;break e}w.sd=$,11>C?((j=w.f.RGBA).eb=$,j.fb=0,j.A=T,j.size=ae):((j=w.f.kb).y=$,j.O=0,j.fa=T,j.Fd=ae,j.f=$,j.N=0+ae,j.Ab=A,j.Cd=E,j.ea=$,j.W=0+ae+E,j.Db=A,j.Ed=E,C==12&&(j.F=$,j.J=0+ae+2*E),j.Tc=M,j.lb=H)}if(A=1,H=w.S,E=w.width,M=w.height,H>=oA&&13>H)if(11>H)C=w.f.RGBA,A&=(T=Math.abs(C.A))*(M-1)+E<=C.size,A&=T>=E*mS[H],A&=C.eb!=null;else{C=w.f.kb,T=(E+1)/2,ae=(M+1)/2,j=Math.abs(C.fa),$=Math.abs(C.Ab);var Ae=Math.abs(C.Db),he=Math.abs(C.lb),Ce=he*(M-1)+E;A&=j*(M-1)+E<=C.Fd,A&=$*(ae-1)+T<=C.Cd,A=(A&=Ae*(ae-1)+T<=C.Ed)&j>=E&$>=T&Ae>=T,A&=C.y!=null,A&=C.f!=null,A&=C.ea!=null,H==12&&(A&=he>=E,A&=Ce<=C.Tc,A&=C.F!=null)}else A=0;C=A?0:2}}return C!=0||B!=null&&B.fd&&(C=$c(w)),C}var Qg=64,Us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ts=24,Ds=32,eC=8,Pg=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(C){return C},R.Predictor2=function(C,A,B){return A[B+0]},R.Predictor3=function(C,A,B){return A[B+1]},R.Predictor4=function(C,A,B){return A[B-1]},R.Predictor5=function(C,A,B){return Me(Me(C,A[B+1]),A[B+0])},R.Predictor6=function(C,A,B){return Me(C,A[B-1])},R.Predictor7=function(C,A,B){return Me(C,A[B+0])},R.Predictor8=function(C,A,B){return Me(A[B-1],A[B+0])},R.Predictor9=function(C,A,B){return Me(A[B+0],A[B+1])},R.Predictor10=function(C,A,B){return Me(Me(C,A[B-1]),Me(A[B+0],A[B+1]))},R.Predictor11=function(C,A,B){var w=A[B+0];return 0>=At(w>>24&255,C>>24&255,(A=A[B-1])>>24&255)+At(w>>16&255,C>>16&255,A>>16&255)+At(w>>8&255,C>>8&255,A>>8&255)+At(255&w,255&C,255&A)?w:C},R.Predictor12=function(C,A,B){var w=A[B+0];return(nt((C>>24&255)+(w>>24&255)-((A=A[B-1])>>24&255))<<24|nt((C>>16&255)+(w>>16&255)-(A>>16&255))<<16|nt((C>>8&255)+(w>>8&255)-(A>>8&255))<<8|nt((255&C)+(255&w)-(255&A)))>>>0},R.Predictor13=function(C,A,B){var w=A[B-1];return(ct((C=Me(C,A[B+0]))>>24&255,w>>24&255)<<24|ct(C>>16&255,w>>16&255)<<16|ct(C>>8&255,w>>8&255)<<8|ct(C>>0&255,w>>0&255))>>>0};var wp=R.PredictorAdd0;R.PredictorAdd1=me,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var tC=R.PredictorAdd2;$e("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),$e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var rA,Ai=R.ColorIndexInverseTransform,nC=R.MapARGB,Xp=R.VP8LColorIndexInverseTransformAlpha,Jp=R.MapAlpha,bo=R.VP8LPredictorsAdd=[];bo.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Yr,hi,yo,_i,ka,js,mi,Qs,gC,Zo,fi,Ra,Yl,Ps,Nl,Go,rC,Nr,wa,nn,gn,Nn,qn,Xa,Bo,Os,iA,$B,eS=i(511),tS=i(2041),nS=i(225),gS=i(767),rS=0,Yp=tS,aA=nS,hr=gS,Hr=eS,oA=0,lA=1,iS=2,sA=3,IA=4,Np=5,aS=6,Hp=7,Fp=8,cA=9,xp=10,_9=[2,3,7],q9=[3,3,11],oS=[280,256,256,256,40],$9=[0,1,1,1,0],eH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gH=8,Kp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],iC=null,rH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],iH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lS=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],aH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oH=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],So=[],pi=[],Ja=[],IH=1,sS=2,vo=[],Fr=[];Ge("UpsampleRgbLinePair",Xt,3),Ge("UpsampleBgrLinePair",pn,3),Ge("UpsampleRgbaLinePair",di,4),Ge("UpsampleBgraLinePair",ig,4),Ge("UpsampleArgbLinePair",Gg,4),Ge("UpsampleRgba4444LinePair",Un,2),Ge("UpsampleRgb565LinePair",vn,2);var cH=R.UpsampleRgbLinePair,CH=R.UpsampleBgrLinePair,IS=R.UpsampleRgbaLinePair,cS=R.UpsampleBgraLinePair,CS=R.UpsampleArgbLinePair,uS=R.UpsampleRgba4444LinePair,uH=R.UpsampleRgb565LinePair,CA=16,uA=1<<CA-1,aC=-227,Ep=482,dS=6,dH=(256<<dS)-1,AS=0,AH=i(256),hH=i(256),mH=i(256),fH=i(256),pH=i(Ep-aC),bH=i(Ep-aC);Va("YuvToRgbRow",Xt,3),Va("YuvToBgrRow",pn,3),Va("YuvToRgbaRow",di,4),Va("YuvToBgraRow",ig,4),Va("YuvToArgbRow",Gg,4),Va("YuvToRgba4444Row",Un,2),Va("YuvToRgb565Row",vn,2);var hS=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dA=[0,2,8],yH=[8,7,6,4,4,2,2,2,1,1,1,1],ZH=1;this.WebPDecodeRGBA=function(C,A,B,w,H){var E=lA,M=new Ls,T=new oi;M.ba=T,T.S=E,T.width=[T.width],T.height=[T.height];var j=T.width,$=T.height,ae=new Ba;if(ae==null||C==null)var Ae=2;else t(ae!=null),Ae=Ms(C,A,B,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(Ae!=0?j=0:(j!=null&&(j[0]=ae.width[0]),$!=null&&($[0]=ae.height[0]),j=1),j){T.width=T.width[0],T.height=T.height[0],w!=null&&(w[0]=T.width),H!=null&&(H[0]=T.height);e:{if(w=new Js,(H=new Dc).data=C,H.w=A,H.ha=B,H.kd=1,A=[0],t(H!=null),((C=Ms(H.data,H.w,H.ha,null,null,null,A,null,H))==0||C==7)&&A[0]&&(C=4),(A=C)==0){if(t(M!=null),w.data=H.data,w.w=H.w+H.offset,w.ha=H.ha-H.offset,w.put=Ti,w.ac=Ag,w.bc=Di,w.ma=M,H.xa){if((C=Jr())==null){M=1;break e}if(function(he,Ce){var Ve=[0],ye=[0],oe=[0];t:for(;;){if(he==null)return 0;if(Ce==null)return he.a=2,0;if(he.l=Ce,he.a=0,U(he.m,Ce.data,Ce.w,Ce.ha),!lt(he.m,Ve,ye,oe)){he.a=3;break t}if(he.xb=sS,Ce.width=Ve[0],Ce.height=ye[0],!Pi(Ve[0],ye[0],1,he,null))break t;return 1}return t(he.a!=0),0}(C,w)){if(w=(A=zs(w.width,w.height,M.Oa,M.ba))==0){t:{w=C;n:for(;;){if(w==null){w=0;break t}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((B=w.l)!=null),t((H=B.ma)!=null),w.xb!=0){if(w.ca=H.ba,w.tb=H.tb,t(w.ca!=null),!qc(H.Oa,B,sA)){w.a=2;break n}if(!kl(w,B.width)||B.da)break n;if((B.da||vt(w.ca.S))&&de(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&de()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!Le(w.s.vb,w.s.Wa.Xa)){w.a=1;break n}w.xb=0}if(!ci(w,w.V,w.Ba,w.c,w.i,B.o,Ws))break n;H.Dc=w.Ma,w=1;break t}t(w.a!=0),w=0}w=!w}w&&(A=C.a)}else A=C.a}else{if((C=new Cp)==null){M=1;break e}if(C.Fa=H.na,C.P=H.P,C.qc=H.Sa,Md(C,w)){if((A=zs(w.width,w.height,M.Oa,M.ba))==0){if(C.Aa=0,B=M.Oa,t((H=C)!=null),B!=null){if(0<(j=0>(j=B.Md)?0:100<j?255:255*j/100)){for($=ae=0;4>$;++$)12>(Ae=H.pb[$]).lc&&(Ae.ia=j*yH[0>Ae.lc?0:Ae.lc]>>3),ae|=Ae.ia;ae&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=B.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}up(C,w)||(A=C.a)}}else A=C.a}A==0&&M.Oa!=null&&M.Oa.fd&&(A=$c(M.ba))}M=A}E=M!=0?null:11>E?T.f.RGBA.eb:T.f.kb.y}else E=null;return E};var mS=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function s(R,z){for(var L="",k=0;k<4;k++)L+=String.fromCharCode(R[z++]);return L}function I(R,z){return(R[z+0]<<0|R[z+1]<<8|R[z+2]<<16)>>>0}function c(R,z){return(R[z+0]<<0|R[z+1]<<8|R[z+2]<<16|R[z+3]<<24)>>>0}new l;var d=[0],u=[0],m=[],f=new l,y=e,h=function(R,z){var L={},k=0,v=!1,K=0,x=0;if(L.frames=[],!function(J,O,ee,te){for(var se=0;se<te;se++)if(J[O+se]!=ee.charCodeAt(se))return!0;return!1}(R,z,"RIFF",4)){var q,Q;for(c(R,z+=4),z+=8;z<R.length;){var D=s(R,z),U=c(R,z+=4);z+=4;var P=U+(1&U);switch(D){case"VP8 ":case"VP8L":L.frames[k]===void 0&&(L.frames[k]={}),(Y=L.frames[k]).src_off=v?x:z-8,Y.src_size=K+U+8,k++,v&&(v=!1,K=0,x=0);break;case"VP8X":(Y=L.header={}).feature_flags=R[z];var N=z+4;Y.canvas_width=1+I(R,N),N+=3,Y.canvas_height=1+I(R,N),N+=3;break;case"ALPH":v=!0,K=P+8,x=z-8;break;case"ANIM":(Y=L.header).bgcolor=c(R,z),N=z+4,Y.loop_count=(q=R)[(Q=N)+0]<<0|q[Q+1]<<8,N+=2;break;case"ANMF":var le,Y;(Y=L.frames[k]={}).offset_x=2*I(R,z),z+=3,Y.offset_y=2*I(R,z),z+=3,Y.width=1+I(R,z),z+=3,Y.height=1+I(R,z),z+=3,Y.duration=I(R,z),z+=3,le=R[z++],Y.dispose=1&le,Y.blend=le>>1&1}D!="ANMF"&&(z+=P)}return L}}(y,0);h.response=y,h.rgbaoutput=!0,h.dataurl=!1;var p=h.header?h.header:null,b=h.frames?h.frames:null;if(p){p.loop_counter=p.loop_count,d=[p.canvas_height],u=[p.canvas_width];for(var S=0;S<b.length&&b[S].blend!=0;S++);}var X=b[0],W=f.WebPDecodeRGBA(y,X.src_off,X.src_size,u,d);X.rgba=W,X.imgwidth=u[0],X.imgheight=d[0];for(var V=0;V<u[0]*d[0]*4;V++)m[V]=W[V];return this.width=u,this.height=d,this.data=m,this}(function(e){var t=function(){return typeof x2=="function"},n=function(d,u,m,f){var y=4,h=a;switch(f){case e.image_compression.FAST:y=1,h=i;break;case e.image_compression.MEDIUM:y=6,h=o;break;case e.image_compression.SLOW:y=9,h=l}d=g(d,u,m,h);var p=x2(d,{level:y});return e.__addimage__.arrayBufferToBinaryString(p)},g=function(d,u,m,f){for(var y,h,p,b=d.length/u,S=new Uint8Array(d.length+b),X=I(),W=0;W<b;W+=1){if(p=W*u,y=d.subarray(p,p+u),f)S.set(f(y,m,h),p+W);else{for(var V,R=X.length,z=[];V<R;V+=1)z[V]=X[V](y,m,h);var L=c(z.concat());S.set(z[L],p+W)}h=y}return S},r=function(d){var u=Array.apply([],d);return u.unshift(0),u},i=function(d,u){var m,f=[],y=d.length;f[0]=1;for(var h=0;h<y;h+=1)m=d[h-u]||0,f[h+1]=d[h]-m+256&255;return f},a=function(d,u,m){var f,y=[],h=d.length;y[0]=2;for(var p=0;p<h;p+=1)f=m&&m[p]||0,y[p+1]=d[p]-f+256&255;return y},o=function(d,u,m){var f,y,h=[],p=d.length;h[0]=3;for(var b=0;b<p;b+=1)f=d[b-u]||0,y=m&&m[b]||0,h[b+1]=d[b]+256-(f+y>>>1)&255;return h},l=function(d,u,m){var f,y,h,p,b=[],S=d.length;b[0]=4;for(var X=0;X<S;X+=1)f=d[X-u]||0,y=m&&m[X]||0,h=m&&m[X-u]||0,p=s(f,y,h),b[X+1]=d[X]-p+256&255;return b},s=function(d,u,m){if(d===u&&u===m)return d;var f=Math.abs(u-m),y=Math.abs(d-m),h=Math.abs(d+u-m-m);return f<=y&&f<=h?d:y<=h?u:m},I=function(){return[r,i,a,o,l]},c=function(d){var u=d.map(function(m){return m.reduce(function(f,y){return f+Math.abs(y)},0)});return u.indexOf(Math.min.apply(null,u))};e.processPNG=function(d,u,m,f){var y,h,p,b,S,X,W,V,R,z,L,k,v,K,x,q=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(p=new Mae(d)).imgData,h=p.bits,y=p.colorSpace,S=p.colors,[4,6].indexOf(p.colorType)!==-1){if(p.bits===8){R=(V=p.pixelBitlength==32?new Uint32Array(p.decodePixels().buffer):p.pixelBitlength==16?new Uint16Array(p.decodePixels().buffer):new Uint8Array(p.decodePixels().buffer)).length,L=new Uint8Array(R*p.colors),z=new Uint8Array(R);var D,U=p.pixelBitlength-p.bits;for(K=0,x=0;K<R;K++){for(v=V[K],D=0;D<U;)L[x++]=v>>>D&255,D+=p.bits;z[K]=v>>>D&255}}if(p.bits===16){R=(V=new Uint32Array(p.decodePixels().buffer)).length,L=new Uint8Array(R*(32/p.pixelBitlength)*p.colors),z=new Uint8Array(R*(32/p.pixelBitlength)),k=p.colors>1,K=0,x=0;for(var P=0;K<R;)v=V[K++],L[x++]=v>>>0&255,k&&(L[x++]=v>>>16&255,v=V[K++],L[x++]=v>>>0&255),z[P++]=v>>>16&255;h=8}f!==e.image_compression.NONE&&t()?(d=n(L,p.width*p.colors,p.colors,f),W=n(z,p.width,1,f)):(d=L,W=z,q=void 0)}if(p.colorType===3&&(y=this.color_spaces.INDEXED,X=p.palette,p.transparency.indexed)){var N=p.transparency.indexed,le=0;for(K=0,R=N.length;K<R;++K)le+=N[K];if((le/=255)===R-1&&N.indexOf(0)!==-1)b=[N.indexOf(0)];else if(le!==R){for(V=p.decodePixels(),z=new Uint8Array(V.length),K=0,R=V.length;K<R;K++)z[K]=N[V[K]];W=n(z,p.width,1)}}var Y=function(J){var O;switch(J){case e.image_compression.FAST:O=11;break;case e.image_compression.MEDIUM:O=13;break;case e.image_compression.SLOW:O=14;break;default:O=12}return O}(f);return q===this.decode.FLATE_DECODE&&(Q="/Predictor "+Y+" "),Q+="/Colors "+S+" /BitsPerComponent "+h+" /Columns "+p.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:m,data:d,index:u,filter:q,decodeParameters:Q,transparency:b,palette:X,sMask:W,predictor:Y,width:p.width,height:p.height,bitsPerComponent:h,colorSpace:y}}}})(ot.API),function(e){e.processGIF89A=function(t,n,g,r){var i=new zae(t),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var s={data:l,width:a,height:o},I=new Wy(100).encode(s,100);return e.processJPEG.call(this,I,n,g,r)},e.processGIF87A=e.processGIF89A}(ot.API),Gi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),g=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:g,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Gi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){tn.log("bit decode error:"+n)}},Gi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var g=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var i=this.datav.getUint8(this.pos++,!0),a=g*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Gi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var g=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var i=this.datav.getUint8(this.pos++,!0),a=g*this.width*4+2*r*4,o=i>>4,l=15&i,s=this.palette[o];if(this.data[a]=s.blue,this.data[a+1]=s.green,this.data[a+2]=s.red,this.data[a+3]=255,2*r+1>=this.width)break;s=this.palette[l],this.data[a+4]=s.blue,this.data[a+4+1]=s.green,this.data[a+4+2]=s.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Gi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,g=0;g<this.width;g++){var r=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*g;if(r<this.palette.length){var a=this.palette[r];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Gi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var g=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,s=i>>15?255:0,I=g*this.width*4+4*r;this.data[I]=l,this.data[I+1]=o,this.data[I+2]=a,this.data[I+3]=s}this.pos+=e}},Gi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),g=this.height-1;g>=0;g--){for(var r=this.bottom_up?g:this.height-1-g,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,s=(a>>11)/t*255|0,I=r*this.width*4+4*i;this.data[I]=s,this.data[I+1]=l,this.data[I+2]=o,this.data[I+3]=255}this.pos+=e}},Gi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var g=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=i,this.data[a+1]=r,this.data[a+2]=g,this.data[a+3]=255}this.pos+=this.width%4}},Gi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var g=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=r,this.data[o+2]=g,this.data[o+3]=a}},Gi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,g,r){var i=new Gi(t,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},s=new Wy(100).encode(l,100);return e.processJPEG.call(this,s,n,g,r)}}(ot.API),Ok.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,g,r){var i=new Ok(t),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},s=new Wy(100).encode(l,100);return e.processJPEG.call(this,s,n,g,r)}}(ot.API),ot.API.processRGBA=function(e,t,n){for(var g=e.data,r=g.length,i=new Uint8Array(r/4*3),a=new Uint8Array(r/4),o=0,l=0,s=0;s<r;s+=4){var I=g[s],c=g[s+1],d=g[s+2],u=g[s+3];i[o++]=I,i[o++]=c,i[o++]=d,a[l++]=u}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ot.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hI=ot.API,mh=hI.getCharWidthsArray=function(e,t){var n,g,r=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,s=t.kerning?t.kerning:r.metadata.Unicode.kerning,I=s.fof?s.fof:1,c=t.doKerning!==!1,d=0,u=e.length,m=0,f=o[0]||l,y=[];for(n=0;n<u;n++)g=e.charCodeAt(n),typeof r.metadata.widthOfString=="function"?y.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(g))+a*(1e3/i)||0)/1e3):(d=c&&Ft(s[g])==="object"&&!isNaN(parseInt(s[g][m],10))?s[g][m]/I:0,y.push((o[g]||f)/l+d)),m=g;return y},Dk=hI.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),g=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return hI.processArabic&&(e=hI.processArabic(e)),typeof g.metadata.widthOfString=="function"?g.metadata.widthOfString(e,n,r)/n:mh.apply(this,arguments).reduce(function(i,a){return i+a},0)},jk=function(e,t,n,g){for(var r=[],i=0,a=e.length,o=0;i!==a&&o+t[i]<n;)o+=t[i],i++;r.push(e.slice(0,i));var l=i;for(o=0;i!==a;)o+t[i]>g&&(r.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&r.push(e.slice(l,i)),r},Qk=function(e,t,n){n||(n={});var g,r,i,a,o,l,s,I=[],c=[I],d=n.textIndent||0,u=0,m=0,f=e.split(" "),y=mh.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?f[0].length+2:n.lineIndent||0){var h=Array(l).join(" "),p=[];f.map(function(S){(S=S.split(/\s*\n/)).length>1?p=p.concat(S.map(function(X,W){return(W&&X.length?`
`:"")+X})):p.push(S[0])}),f=p,l=Dk.apply(this,[h,n])}for(i=0,a=f.length;i<a;i++){var b=0;if(g=f[i],l&&g[0]==`
`&&(g=g.substr(1),b=1),d+u+(m=(r=mh.apply(this,[g,n])).reduce(function(S,X){return S+X},0))>t||b){if(m>t){for(o=jk.apply(this,[g,r,t-(d+u),t]),I.push(o.shift()),I=[o.pop()];o.length;)c.push([o.shift()]);m=r.slice(g.length-(I[0]?I[0].length:0)).reduce(function(S,X){return S+X},0)}else I=[g];c.push(I),d=m+l,u=y}else I.push(g),d+=u+m,u=y}return s=l?function(S,X){return(X?h:"")+S.join(" ")}:function(S){return S.join(" ")},c.map(s)},hI.splitTextToSize=function(e,t,n){var g,r=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var c=this.internal.getFont(I.fontName,I.fontStyle);return c.metadata.Unicode?{widths:c.metadata.Unicode.widths||{0:1},kerning:c.metadata.Unicode.kerning||{}}:{font:c.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);g=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/r;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,i.lineIndent=n.lineIndent;var o,l,s=[];for(o=0,l=g.length;o<l;o++)s=s.concat(Qk.apply(this,[g[o],a,i]));return s},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},g={},r=0;r<t.length;r++)n[t[r]]="0123456789abcdef"[r],g["0123456789abcdef"[r]]=t[r];var i=function(c){return"0x"+parseInt(c,10).toString(16)},a=e.__fontmetrics__.compress=function(c){var d,u,m,f,y=["{"];for(var h in c){if(d=c[h],isNaN(parseInt(h,10))?u="'"+h+"'":(h=parseInt(h,10),u=(u=i(h).slice(2)).slice(0,-1)+g[u.slice(-1)]),typeof d=="number")d<0?(m=i(d).slice(3),f="-"):(m=i(d).slice(2),f=""),m=f+m.slice(0,-1)+g[m.slice(-1)];else{if(Ft(d)!=="object")throw new Error("Don't know what to do with value type "+Ft(d)+".");m=a(d)}y.push(u+m)}return y.push("}"),y.join("")},o=e.__fontmetrics__.uncompress=function(c){if(typeof c!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,u,m,f,y={},h=1,p=y,b=[],S="",X="",W=c.length-1,V=1;V<W;V+=1)(f=c[V])=="'"?d?(m=d.join(""),d=void 0):d=[]:d?d.push(f):f=="{"?(b.push([p,m]),p={},m=void 0):f=="}"?((u=b.pop())[0][u[1]]=p,m=void 0,p=u[0]):f=="-"?h=-1:m===void 0?n.hasOwnProperty(f)?(S+=n[f],m=parseInt(S,16)*h,h=1,S=""):S+=f:n.hasOwnProperty(f)?(X+=n[f],p[m]=parseInt(X,16)*h,h=1,m=void 0,X=""):X+=f;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},s={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},I={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(c){var d=c.font,u=I.Unicode[d.postScriptName];u&&(d.metadata.Unicode={},d.metadata.Unicode.widths=u.widths,d.metadata.Unicode.kerning=u.kerning);var m=s.Unicode[d.postScriptName];m&&(d.metadata.Unicode.encoding=m,d.encoding=m.codePages[0])}])}(ot.API),function(e){var t=function(n){for(var g=n.length,r=new Uint8Array(g),i=0;i<g;i++)r[i]=n.charCodeAt(i);return r};e.API.events.push(["addFont",function(n){var g=void 0,r=n.font,i=n.instance;if(!r.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(g=i.existsFileInVFS(r.postScriptName)===!1?i.loadFile(r.postScriptName):i.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(ou(o)),a.metadata=e.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,g)}}])}(ot),function(e){function t(){return(st.canvg?Promise.resolve(st.canvg):X2(()=>import("./index.es-JvBTieG3.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ot.API.addSvgAsImage=function(n,g,r,i,a,o,l,s){if(isNaN(g)||isNaN(r))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var I=document.createElement("canvas");I.width=i,I.height=a;var c=I.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,I.width,I.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return t().then(function(m){return m.fromString(c,n,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(d)}).then(function(){u.addImage(I.toDataURL("image/jpeg",1),g,r,i,a,l,s)})}}(),ot.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var g=1;g<=this.internal.getNumberOfPages();g++)for(var r=0;r<this.internal.pages[g].length;r++)this.internal.pages[g][r]=this.internal.pages[g][r].replace(t,n);return this},ot.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var g,r,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],s=0,I=0,c=0;function d(m,f){var y,h=!1;for(y=0;y<m.length;y+=1)m[y]===f&&(h=!0);return h}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var u=o.length;for(c=0;c<u;c+=1)n[o[c]].value=n[o[c]].defaultValue,n[o[c]].explicitSet=!1}if(Ft(e)==="object"){for(r in e)if(i=e[r],d(o,r)&&i!==void 0){if(n[r].type==="boolean"&&typeof i=="boolean")n[r].value=i;else if(n[r].type==="name"&&d(n[r].valueSet,i))n[r].value=i;else if(n[r].type==="integer"&&Number.isInteger(i))n[r].value=i;else if(n[r].type==="array"){for(s=0;s<i.length;s+=1)if(g=!0,i[s].length===1&&typeof i[s][0]=="number")l.push(String(i[s]-1));else if(i[s].length>1){for(I=0;I<i[s].length;I+=1)typeof i[s][I]!="number"&&(g=!1);g===!0&&l.push([i[s][0]-1,i[s][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,f=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?f.push("/"+m+" /"+n[m].value):f.push("/"+m+" "+n[m].value));f.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+f.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var g='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(g)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),s=i.length+a.length+o.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(r+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(g,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:g,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(ot.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,s=["","0","00","000","0000"],I=[""],c=0,d=i.length;c<d;++c){if(o=a.metadata.characterToGlyph(i.charCodeAt(c)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(c),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return I.join("");o=o.toString(16),I.push(s[4-o.length],o)}return I.join("")},g=function(i){var a,o,l,s,I,c,d;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],c=0,d=(o=Object.keys(i).sort(function(u,m){return u-m})).length;c<d;c++)a=o[c],l.length>=100&&(I+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(s=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+s+">"));return l.length&&(I+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),I+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,s=a.newObject,I=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var c=o.metadata.Unicode.widths,d=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),u="",m=0;m<d.length;m++)u+=String.fromCharCode(d[m]);var f=s();I({data:u,addLength1:!0,objectId:f}),l("endobj");var y=s();I({data:g(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var h=s();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+pI(o.fontName)),l("/FontFile2 "+f+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var p=s();l("<<"),l("/Type /Font"),l("/BaseFont /"+pI(o.fontName)),l("/FontDescriptor "+h+" 0 R"),l("/W "+e.API.PDFObject.convert(c)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=s(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+pI(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+p+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,s=a.newObject,I=a.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var c=o.metadata.rawData,d="",u=0;u<c.length;u++)d+=String.fromCharCode(c[u]);var m=s();I({data:d,addLength1:!0,objectId:m}),l("endobj");var f=s();I({data:g(o.metadata.toUnicode),addLength1:!0,objectId:f}),l("endobj");var y=s();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+pI(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=s();for(var h=0;h<o.metadata.hmtx.widths.length;h++)o.metadata.hmtx.widths[h]=parseInt(o.metadata.hmtx.widths[h]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+f+" 0 R/BaseFont/"+pI(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var r=function(i){var a,o=i.text||"",l=i.x,s=i.y,I=i.options||{},c=i.mutex||{},d=c.pdfEscape,u=c.activeFontKey,m=c.fonts,f=u,y="",h=0,p="",b=m[f].encoding;if(m[f].encoding!=="Identity-H")return{text:o,x:l,y:s,options:I,mutex:c};for(p=o,f=u,Array.isArray(o)&&(p=o[0]),h=0;h<p.length;h+=1)m[f].metadata.hasOwnProperty("cmap")&&(a=m[f].metadata.cmap.unicode.codeMap[p[h].charCodeAt(0)]),a||p[h].charCodeAt(0)<256&&m[f].metadata.hasOwnProperty("Unicode")?y+=p[h]:y+="";var S="";return parseInt(f.slice(1))<14||b==="WinAnsiEncoding"?S=d(y,f).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(S=n(y,m[f])),c.isHex=!0,{text:S,x:l,y:s,options:I,mutex:c}};t.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var s=0;for(s=0;s<a.length;s+=1)Array.isArray(a[s])&&a[s].length===3?o.push([r(Object.assign({},l,{text:a[s][0]})).text,a[s][1],a[s][2]]):o.push(r(Object.assign({},l,{text:a[s]})).text);i.text=o}else i.text=r(Object.assign({},l,{text:a})).text}])}(ot),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,g){return t.call(this),this.internal.vFS[n]=g,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ot.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(g){var r,i,a,o,l,s,I,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],h=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),p=!1,b=0;this.__bidiEngine__={};var S=function(k){var v=k.charCodeAt(),K=v>>8,x=f[K];return x!==void 0?c[256*x+(255&v)]:K===252||K===253?"AL":h.test(K)?"L":K===8?"R":"N"},X=function(k){for(var v,K=0;K<k.length;K++){if((v=S(k.charAt(K)))==="L")return!1;if(v==="R")return!0}return!1},W=function(k,v,K,x){var q,Q,D,U,P=v[x];switch(P){case"L":case"R":p=!1;break;case"N":case"AN":break;case"EN":p&&(P="AN");break;case"AL":p=!0,P="R";break;case"WS":P="N";break;case"CS":x<1||x+1>=v.length||(q=K[x-1])!=="EN"&&q!=="AN"||(Q=v[x+1])!=="EN"&&Q!=="AN"?P="N":p&&(Q="AN"),P=Q===q?Q:"N";break;case"ES":P=(q=x>0?K[x-1]:"B")==="EN"&&x+1<v.length&&v[x+1]==="EN"?"EN":"N";break;case"ET":if(x>0&&K[x-1]==="EN"){P="EN";break}if(p){P="N";break}for(D=x+1,U=v.length;D<U&&v[D]==="ET";)D++;P=D<U&&v[D]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(U=v.length,D=x+1;D<U&&v[D]==="NSM";)D++;if(D<U){var N=k[x],le=N>=1425&&N<=2303||N===64286;if(q=v[D],le&&(q==="R"||q==="AL")){P="R";break}}}P=x<1||(q=v[x-1])==="B"?"N":K[x-1];break;case"B":p=!1,r=!0,P=b;break;case"S":i=!0,P="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":p=!1;break;case"BN":P="N"}return P},V=function(k,v,K){var x=k.split("");return K&&R(x,K,{hiLevel:b}),x.reverse(),v&&v.reverse(),x.join("")},R=function(k,v,K){var x,q,Q,D,U,P=-1,N=k.length,le=0,Y=[],J=b?u:d,O=[];for(p=!1,r=!1,i=!1,q=0;q<N;q++)O[q]=S(k[q]);for(Q=0;Q<N;Q++){if(U=le,Y[Q]=W(k,O,Y,Q),x=240&(le=J[U][m[Y[Q]]]),le&=15,v[Q]=D=J[le][5],x>0)if(x===16){for(q=P;q<Q;q++)v[q]=1;P=-1}else P=-1;if(J[le][6])P===-1&&(P=Q);else if(P>-1){for(q=P;q<Q;q++)v[q]=D;P=-1}O[Q]==="B"&&(v[Q]=0),K.hiLevel|=D}i&&function(ee,te,se){for(var ce=0;ce<se;ce++)if(ee[ce]==="S"){te[ce]=b;for(var re=ce-1;re>=0&&ee[re]==="WS";re--)te[re]=b}}(O,v,N)},z=function(k,v,K,x,q){if(!(q.hiLevel<k)){if(k===1&&b===1&&!r)return v.reverse(),void(K&&K.reverse());for(var Q,D,U,P,N=v.length,le=0;le<N;){if(x[le]>=k){for(U=le+1;U<N&&x[U]>=k;)U++;for(P=le,D=U-1;P<D;P++,D--)Q=v[P],v[P]=v[D],v[D]=Q,K&&(Q=K[P],K[P]=K[D],K[D]=Q);le=U}le++}}},L=function(k,v,K){var x=k.split(""),q={hiLevel:b};return K||(K=[]),R(x,K,q),function(Q,D,U){if(U.hiLevel!==0&&I)for(var P,N=0;N<Q.length;N++)D[N]===1&&(P=y.indexOf(Q[N]))>=0&&(Q[N]=y[P+1])}(x,K,q),z(2,x,v,K,q),z(1,x,v,K,q),x.join("")};return this.__bidiEngine__.doBidiReorder=function(k,v,K){if(function(q,Q){if(Q)for(var D=0;D<q.length;D++)Q[D]=D;o===void 0&&(o=X(q)),s===void 0&&(s=X(q))}(k,v),a||!l||s)if(a&&l&&o^s)b=o?1:0,k=V(k,v,K);else if(!a&&l&&s)b=o?1:0,k=L(k,v,K),k=V(k,v);else if(!a||o||l||s){if(a&&!l&&o^s)k=V(k,v),o?(b=0,k=L(k,v,K)):(b=1,k=L(k,v,K),k=V(k,v));else if(a&&o&&!l&&s)b=1,k=L(k,v,K),k=V(k,v);else if(!a&&!l&&o^s){var x=I;o?(b=1,k=L(k,v,K),b=0,I=!1,k=L(k,v,K),I=x):(b=0,k=L(k,v,K),k=V(k,v),b=1,I=!1,k=L(k,v,K),I=x,k=V(k,v))}}else b=0,k=L(k,v,K);else b=o?1:0,k=L(k,v,K);return k},this.__bidiEngine__.setOptions=function(k){k&&(a=k.isInputVisual,l=k.isOutputVisual,o=k.isInputRtl,s=k.isOutputRtl,I=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(g),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(g){var r=g.text,i=(g.x,g.y,g.options||{}),a=(g.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(a=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?a.push([n.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):a.push([n.doBidiReorder(r[o])]);g.text=a}else g.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}(ot),ot.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new pl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new roe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Uae(this.contents),this.head=new Dae(this),this.name=new _ae(this),this.cmap=new D9(this),this.toUnicode={},this.hhea=new jae(this),this.maxp=new qae(this),this.hmtx=new $ae(this),this.post=new Pae(this),this.os2=new Qae(this),this.loca=new goe(this),this.glyf=new eoe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,g,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,s;for(s=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],s.push(Math.round(t*this.scaleFactor));return s}).call(this),this.stemV=0,this.post.exists?(g=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+g)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,g){var r,i,a,o;for(a=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)r=t.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(r))+g*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var g;return n==null&&(n=!1),g=n?this.lineGap:0,(this.ascender+g-this.decender)/1e3*t},e}();var Ui,pl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,g;for(g=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)g[n]=String.fromCharCode(this.readByte());return g.join("")},e.prototype.writeString=function(t){var n,g,r;for(r=[],n=0,g=t.length;0<=g?n<g:n>g;n=0<=g?++n:--n)r.push(this.writeByte(t.charCodeAt(n)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,g,r,i,a,o,l;return t=this.readByte(),n=this.readByte(),g=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^g)+4294967296*(255^r)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*n+1099511627776*g+4294967296*r+16777216*i+65536*a+256*o+l},e.prototype.writeLongLong=function(t){var n,g;return n=Math.floor(t/4294967296),g=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(g>>24&255),this.writeByte(g>>16&255),this.writeByte(g>>8&255),this.writeByte(255&g)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,g;for(n=[],g=0;0<=t?g<t:g>t;g=0<=t?++g:--g)n.push(this.readByte());return n},e.prototype.write=function(t){var n,g,r,i;for(i=[],g=0,r=t.length;g<r;g++)n=t[g],i.push(this.writeByte(n));return i},e}(),Uae=function(){var e;function t(n){var g,r,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,i=this.tableCount;0<=i?r<i:r>i;r=0<=i?++r:--r)g={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[g.tag]=g}return t.prototype.encode=function(n){var g,r,i,a,o,l,s,I,c,d,u,m,f;for(f in u=Object.keys(n).length,l=Math.log(2),c=16*Math.floor(Math.log(u)/l),a=Math.floor(c/l),I=16*u-c,(r=new pl).writeInt(this.scalarType),r.writeShort(u),r.writeShort(c),r.writeShort(a),r.writeShort(I),i=16*u,s=r.pos+i,o=null,m=[],n)for(d=n[f],r.writeString(f),r.writeInt(e(d)),r.writeInt(s),r.writeInt(d.length),m=m.concat(d),f==="head"&&(o=s),s+=d.length;s%4;)m.push(0),s++;return r.write(m),g=2981146554-e(r.data),r.pos=o+8,r.writeUInt32(g),r.data},e=function(n){var g,r,i,a;for(n=j9.call(n);n.length%4;)n.push(0);for(i=new pl(n),r=0,g=0,a=n.length;g<a;g=g+=4)r+=i.readUInt32();return 4294967295&r},t}(),Tae={}.hasOwnProperty,Ga=function(e,t){for(var n in t)Tae.call(t,n)&&(e[n]=t[n]);function g(){this.constructor=e}return g.prototype=t.prototype,e.prototype=new g,e.__super__=t.prototype,e};Ui=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Dae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var g;return(g=new pl).writeInt(this.version),g.writeInt(this.revision),g.writeInt(this.checkSumAdjustment),g.writeInt(this.magicNumber),g.writeShort(this.flags),g.writeShort(this.unitsPerEm),g.writeLongLong(this.created),g.writeLongLong(this.modified),g.writeShort(this.xMin),g.writeShort(this.yMin),g.writeShort(this.xMax),g.writeShort(this.yMax),g.writeShort(this.macStyle),g.writeShort(this.lowestRecPPEM),g.writeShort(this.fontDirectionHint),g.writeShort(n),g.writeShort(this.glyphDataFormat),g.data},t}(),_k=function(){function e(t,n){var g,r,i,a,o,l,s,I,c,d,u,m,f,y,h,p,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(u=t.readUInt16(),d=u/2,t.pos+=6,i=function(){var S,X;for(X=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)X.push(t.readUInt16());return X}(),t.pos+=2,f=function(){var S,X;for(X=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)X.push(t.readUInt16());return X}(),s=function(){var S,X;for(X=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)X.push(t.readUInt16());return X}(),I=function(){var S,X;for(X=[],l=S=0;0<=d?S<d:S>d;l=0<=d?++S:--S)X.push(t.readUInt16());return X}(),r=(this.length-t.pos+this.offset)/2,o=function(){var S,X;for(X=[],l=S=0;0<=r?S<r:S>r;l=0<=r?++S:--S)X.push(t.readUInt16());return X}(),l=h=0,b=i.length;h<b;l=++h)for(y=i[l],g=p=m=f[l];m<=y?p<=y:p>=y;g=m<=y?++p:--p)I[l]===0?a=g+s[l]:(a=o[I[l]/2+(g-m)-(d-l)]||0)!==0&&(a+=s[l]),this.codeMap[g]=65535&a}t.pos=c}return e.encode=function(t,n){var g,r,i,a,o,l,s,I,c,d,u,m,f,y,h,p,b,S,X,W,V,R,z,L,k,v,K,x,q,Q,D,U,P,N,le,Y,J,O,ee,te,se,ce,re,fe,be,ue;switch(x=new pl,a=Object.keys(t).sort(function(He,Le){return He-Le}),n){case"macroman":for(f=0,y=function(){var He=[];for(m=0;m<256;++m)He.push(0);return He}(),p={0:0},i={},q=0,P=a.length;q<P;q++)p[re=t[r=a[q]]]==null&&(p[re]=++f),i[r]={old:t[r],new:p[t[r]]},y[r]=p[t[r]];return x.writeUInt16(1),x.writeUInt16(0),x.writeUInt32(12),x.writeUInt16(0),x.writeUInt16(262),x.writeUInt16(0),x.write(y),{charMap:i,subtable:x.data,maxGlyphID:f+1};case"unicode":for(v=[],c=[],b=0,p={},g={},h=s=null,Q=0,N=a.length;Q<N;Q++)p[X=t[r=a[Q]]]==null&&(p[X]=++b),g[r]={old:X,new:p[X]},o=p[X]-r,h!=null&&o===s||(h&&c.push(h),v.push(r),s=o),h=r;for(h&&c.push(h),c.push(65535),v.push(65535),L=2*(z=v.length),R=2*Math.pow(Math.log(z)/Math.LN2,2),d=Math.log(R/2)/Math.LN2,V=2*z-R,l=[],W=[],u=[],m=D=0,le=v.length;D<le;m=++D){if(k=v[m],I=c[m],k===65535){l.push(0),W.push(0);break}if(k-(K=g[k].new)>=32768)for(l.push(0),W.push(2*(u.length+z-m)),r=U=k;k<=I?U<=I:U>=I;r=k<=I?++U:--U)u.push(g[r].new);else l.push(K-k),W.push(0)}for(x.writeUInt16(3),x.writeUInt16(1),x.writeUInt32(12),x.writeUInt16(4),x.writeUInt16(16+8*z+2*u.length),x.writeUInt16(0),x.writeUInt16(L),x.writeUInt16(R),x.writeUInt16(d),x.writeUInt16(V),se=0,Y=c.length;se<Y;se++)r=c[se],x.writeUInt16(r);for(x.writeUInt16(0),ce=0,J=v.length;ce<J;ce++)r=v[ce],x.writeUInt16(r);for(fe=0,O=l.length;fe<O;fe++)o=l[fe],x.writeUInt16(o);for(be=0,ee=W.length;be<ee;be++)S=W[be],x.writeUInt16(S);for(ue=0,te=u.length;ue<te;ue++)f=u[ue],x.writeUInt16(f);return{charMap:g,subtable:x.data,maxGlyphID:b+1}}},e}(),D9=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="cmap",t.prototype.parse=function(n){var g,r,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)g=new _k(n,this.offset),this.tables.push(g),g.isUnicode&&this.unicode==null&&(this.unicode=g);return!0},t.encode=function(n,g){var r,i;return g==null&&(g="macroman"),r=_k.encode(n,g),(i=new pl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),jae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),Qae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var g,r;for(r=[],g=0;g<10;++g)r.push(n.readByte());return r}(),this.charRange=function(){var g,r;for(r=[],g=0;g<4;++g)r.push(n.readInt());return r}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var g,r;for(r=[],g=0;g<2;g=++g)r.push(n.readInt());return r}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),Pae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="post",t.prototype.parse=function(n){var g,r,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(r=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)g=n.readByte(),i.push(this.names.push(n.readString(g)));return i;case 151552:return r=n.readUInt16(),this.offsets=n.read(r);case 196608:break;case 262144:return this.map=(function(){var o,l,s;for(s=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)s.push(n.readUInt32());return s}).call(this)}},t}(),Oae=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_ae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="name",t.prototype.parse=function(n){var g,r,i,a,o,l,s,I,c,d,u;for(n.pos=this.offset,n.readShort(),g=n.readShort(),l=n.readShort(),r=[],a=0;0<=g?a<g:a>g;a=0<=g?++a:--a)r.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(s={},a=c=0,d=r.length;c<d;a=++c)i=r[a],n.pos=i.offset,I=n.readString(i.length),o=new Oae(I,i),s[u=i.nameID]==null&&(s[u]=[]),s[i.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},t}(),qae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),$ae=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="hmtx",t.prototype.parse=function(n){var g,r,i,a,o,l,s;for(n.pos=this.offset,this.metrics=[],g=0,l=this.file.hhea.numberOfMetrics;0<=l?g<l:g>l;g=0<=l?++g:--g)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var I,c;for(c=[],g=I=0;0<=i?I<i:I>i;g=0<=i?++I:--I)c.push(n.readInt16());return c}(),this.widths=(function(){var I,c,d,u;for(u=[],I=0,c=(d=this.metrics).length;I<c;I++)a=d[I],u.push(a.advance);return u}).call(this),r=this.widths[this.widths.length-1],s=[],g=o=0;0<=i?o<i:o>i;g=0<=i?++o:--o)s.push(this.widths.push(r));return s},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),j9=[].slice,eoe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var g,r,i,a,o,l,s,I,c,d;return n in this.cache?this.cache[n]:(a=this.file.loca,g=this.file.contents,r=a.indexOf(n),(i=a.lengthOf(n))===0?this.cache[n]=null:(g.pos=this.offset+r,o=(l=new pl(g.read(i))).readShort(),I=l.readShort(),d=l.readShort(),s=l.readShort(),c=l.readShort(),this.cache[n]=o===-1?new noe(l,I,d,s,c):new toe(l,o,I,d,s,c),this.cache[n]))},t.prototype.encode=function(n,g,r){var i,a,o,l,s;for(o=[],a=[],l=0,s=g.length;l<s;l++)i=n[g[l]],a.push(o.length),i&&(o=o.concat(i.encode(r)));return a.push(o.length),{table:o,offsets:a}},t}(),toe=function(){function e(t,n,g,r,i,a){this.raw=t,this.numberOfContours=n,this.xMin=g,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),noe=function(){function e(t,n,g,r,i){var a,o;for(this.raw=t,this.xMin=n,this.yMin=g,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,g;for(n=new pl(j9.call(this.raw.data)),t=0,g=this.glyphIDs.length;t<g;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),goe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Ga(t,Ui),t.prototype.tag="loca",t.prototype.parse=function(n){var g,r;return n.pos=this.offset,g=this.file.head.indexToLocFormat,this.offsets=g===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,g){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<r.length;++o)if(r[o]=i,a<g.length&&g[a]==o){++a,r[o]=i;var l=this.offsets[o],s=this.offsets[o+1]-l;s>0&&(i+=s)}for(var I=new Array(4*r.length),c=0;c<r.length;++c)I[4*c+3]=255&r[c],I[4*c+2]=(65280&r[c])>>8,I[4*c+1]=(16711680&r[c])>>16,I[4*c]=(4278190080&r[c])>>24;return I},t}(),roe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,g,r,i;for(n in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)g=i[n],t[n]=r[g];return t},e.prototype.glyphsFor=function(t){var n,g,r,i,a,o,l;for(r={},a=0,o=t.length;a<o;a++)r[i=t[a]]=this.font.glyf.glyphFor(i);for(i in n=[],r)(g=r[i])!=null&&g.compound&&n.push.apply(n,g.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))g=l[i],r[i]=g;return r},e.prototype.encode=function(t,n){var g,r,i,a,o,l,s,I,c,d,u,m,f,y,h;for(r in g=D9.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),u={0:0},h=g.charMap)u[(l=h[r]).old]=l.new;for(m in d=g.maxGlyphID,a)m in u||(u[m]=d++);return I=function(p){var b,S;for(b in S={},p)S[p[b]]=b;return S}(u),c=Object.keys(I).sort(function(p,b){return p-b}),f=function(){var p,b,S;for(S=[],p=0,b=c.length;p<b;p++)o=c[p],S.push(I[o]);return S}(),i=this.font.glyf.encode(a,f,u),s=this.font.loca.encode(i.offsets,f),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:s,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();ot.API.PDFObject=function(){var e;function t(){}return e=function(n,g){return(Array(g+1).join("0")+n).slice(-g)},t.convert=function(n){var g,r,i,a;if(Array.isArray(n))return"["+function(){var o,l,s;for(s=[],o=0,l=n.length;o<l;o++)g=n[o],s.push(t.convert(g));return s}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in i=["<<"],n)a=n[r],i.push("/"+r+" "+t.convert(a));return i.push(">>"),i.join(`
`)}return""+n},t}();const ioe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Hae,AcroFormAppearance:et,AcroFormButton:eg,AcroFormCheckBox:Iu,AcroFormChoiceField:as,AcroFormComboBox:ls,AcroFormEditBox:lu,AcroFormListBox:os,AcroFormPasswordField:cu,AcroFormPushButton:su,AcroFormRadioButton:ss,AcroFormTextField:Cl,GState:sd,ShadingPattern:Do,TilingPattern:es,default:ot,jsPDF:ot},Symbol.toStringTag,{value:"Module"}));var Q9={exports:{}};const aoe=ba(ioe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.2
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(g,r){e.exports=r(function(){try{return aoe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof EC<"u"?EC:typeof window<"u"?window:typeof self<"u"?self:EC,function(n){return function(){var g={172:function(o,l){var s=this&&this.__extends||function(){var d=function(u,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(f[h]=y[h])},d(u,m)};return function(u,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(u,m);function f(){this.constructor=u}u.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var I=function(){function d(u,m,f){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=f,this.doc=u.getDocument()}return d}();l.HookData=I;var c=function(d){s(u,d);function u(m,f,y,h,p,b){var S=d.call(this,m,f,b)||this;return S.cell=y,S.row=h,S.column=p,S.section=h.section,S}return u}(I);l.CellHookData=c},340:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0});var I=s(4),c=s(136),d=s(744),u=s(776),m=s(664),f=s(972);function y(h){h.API.autoTable=function(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];var S;p.length===1?S=p[0]:(console.error("Use of deprecated autoTable initiation"),S=p[2]||{},S.columns=p[0],S.body=p[1]);var X=(0,u.parseInput)(this,S),W=(0,f.createTable)(this,X);return(0,m.drawTable)(this,W),this},h.API.lastAutoTable=!1,h.API.previousAutoTable=!1,h.API.autoTable.previous=!1,h.API.autoTableText=function(p,b,S,X){(0,c.default)(p,b,S,X,this)},h.API.autoTableSetDefaults=function(p){return d.DocHandler.setDefaults(p,this),this},h.autoTableSetDefaults=function(p,b){d.DocHandler.setDefaults(p,b)},h.API.autoTableHtmlToJson=function(p,b){var S;if(b===void 0&&(b=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var X=new d.DocHandler(this),W=(0,I.parseHtml)(X,p,window,b,!1),V=W.head,R=W.body,z=((S=V[0])===null||S===void 0?void 0:S.map(function(L){return L.content}))||[];return{columns:z,rows:R,data:R}},h.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var p=this.lastAutoTable;return p&&p.finalY?p.finalY:0},h.API.autoTableAddPageContent=function(p){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),h.API.autoTable.globalDefaults||(h.API.autoTable.globalDefaults={}),h.API.autoTable.globalDefaults.addPageContent=p,this},h.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=y},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function s(I,c,d,u,m){u=u||{};var f=1.15,y=m.internal.scaleFactor,h=m.internal.getFontSize()/y,p=m.getLineHeightFactor?m.getLineHeightFactor():f,b=h*p,S=/\r\n|\r|\n/g,X="",W=1;if((u.valign==="middle"||u.valign==="bottom"||u.halign==="center"||u.halign==="right")&&(X=typeof I=="string"?I.split(S):I,W=X.length||1),d+=h*(2-f),u.valign==="middle"?d-=W/2*b:u.valign==="bottom"&&(d-=W*b),u.halign==="center"||u.halign==="right"){var V=h;if(u.halign==="center"&&(V*=.5),X&&W>=1){for(var R=0;R<X.length;R++)m.text(X[R],c-m.getStringUnitWidth(X[R])*V,d),d+=b;return m}c-=m.getStringUnitWidth(I)*V}return u.halign==="justify"?m.text(I,c,d,{maxWidth:u.maxWidth||100,align:"justify"}):m.text(I,c,d),m}l.default=s},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function s(m,f,y){y.applyStyles(f,!0);var h=Array.isArray(m)?m:[m],p=h.map(function(b){return y.getTextWidth(b)}).reduce(function(b,S){return Math.max(b,S)},0);return p}l.getStringWidth=s;function I(m,f,y,h){var p=f.settings.tableLineWidth,b=f.settings.tableLineColor;m.applyStyles({lineWidth:p,lineColor:b});var S=c(p,!1);S&&m.rect(y.x,y.y,f.getWidth(m.pageSize().width),h.y-y.y,S)}l.addTableBorder=I;function c(m,f){var y=m>0,h=f||f===0;return y&&h?"DF":y?"S":h?"F":null}l.getFillStyle=c;function d(m,f){var y,h,p,b;if(m=m||f,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=f}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(y=m.left)!==null&&y!==void 0?y:f,top:(h=m.top)!==null&&h!==void 0?h:f,right:(p=m.right)!==null&&p!==void 0?p:f,bottom:(b=m.bottom)!==null&&b!==void 0?b:f}):(typeof m!="number"&&(m=f),{top:m,right:m,bottom:m,left:m})}l.parseSpacing=d;function u(m,f){var y=d(f.settings.margin,0);return m.pageSize().width-(y.left+y.right)}l.getPageAvailableWidth=u},796:function(o,l){var s=this&&this.__extends||function(){var u=function(m,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,h){y.__proto__=h}||function(y,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(y[p]=h[p])},u(m,f)};return function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(m,f);function y(){this.constructor=m}m.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var I=function(u){s(m,u);function m(f){var y=u.call(this)||this;return y._element=f,y}return m}(Array);l.HtmlRowInput=I;function c(u){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/u,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=c;function d(u){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[u]}l.getTheme=d},903:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var I=s(420);function c(y,h,p,b,S){var X={},W=1.3333333333333333,V=u(h,function(P){return S.getComputedStyle(P).backgroundColor});V!=null&&(X.fillColor=V);var R=u(h,function(P){return S.getComputedStyle(P).color});R!=null&&(X.textColor=R);var z=f(b,p);z&&(X.cellPadding=z);var L="borderTopColor",k=W*p,v=b.borderTopWidth;if(b.borderBottomWidth===v&&b.borderRightWidth===v&&b.borderLeftWidth===v){var K=(parseFloat(v)||0)/k;K&&(X.lineWidth=K)}else X.lineWidth={top:(parseFloat(b.borderTopWidth)||0)/k,right:(parseFloat(b.borderRightWidth)||0)/k,bottom:(parseFloat(b.borderBottomWidth)||0)/k,left:(parseFloat(b.borderLeftWidth)||0)/k},X.lineWidth.top||(X.lineWidth.right?L="borderRightColor":X.lineWidth.bottom?L="borderBottomColor":X.lineWidth.left&&(L="borderLeftColor"));console.log(X.lineWidth);var x=u(h,function(P){return S.getComputedStyle(P)[L]});x!=null&&(X.lineColor=x);var q=["left","right","center","justify"];q.indexOf(b.textAlign)!==-1&&(X.halign=b.textAlign),q=["middle","bottom","top"],q.indexOf(b.verticalAlign)!==-1&&(X.valign=b.verticalAlign);var Q=parseInt(b.fontSize||"");isNaN(Q)||(X.fontSize=Q/W);var D=d(b);D&&(X.fontStyle=D);var U=(b.fontFamily||"").toLowerCase();return y.indexOf(U)!==-1&&(X.font=U),X}l.parseCss=c;function d(y){var h="";return(y.fontWeight==="bold"||y.fontWeight==="bolder"||parseInt(y.fontWeight)>=700)&&(h="bold"),(y.fontStyle==="italic"||y.fontStyle==="oblique")&&(h+="italic"),h}function u(y,h){var p=m(y,h);if(!p)return null;var b=p.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!b||!Array.isArray(b))return null;var S=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])],X=parseInt(b[4]);return X===0||isNaN(S[0])||isNaN(S[1])||isNaN(S[2])?null:S}function m(y,h){var p=h(y);return p==="rgba(0, 0, 0, 0)"||p==="transparent"||p==="initial"||p==="inherit"?y.parentElement==null?null:m(y.parentElement,h):p}function f(y,h){var p=[y.paddingTop,y.paddingRight,y.paddingBottom,y.paddingLeft],b=96/(72/h),S=(parseInt(y.lineHeight)-parseInt(y.fontSize))/h/2,X=p.map(function(V){return parseInt(V||"0")/b}),W=(0,I.parseSpacing)(X,0);return S>W.top&&(W.top=S),S>W.bottom&&(W.bottom=S),W}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var s={},I=function(){function c(d){this.jsPDFDocument=d,this.userStyles={textColor:d.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:d.internal.getFontSize(),fontStyle:d.internal.getFont().fontStyle,font:d.internal.getFont().fontName,lineWidth:d.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:d.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return c.setDefaults=function(d,u){u===void 0&&(u=null),u?u.__autoTableDocumentDefaults=d:s=d},c.unifyColor=function(d){return Array.isArray(d)?d:typeof d=="number"?[d,d,d]:typeof d=="string"?[d]:null},c.prototype.applyStyles=function(d,u){var m,f,y;u===void 0&&(u=!1),d.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(d.fontStyle);var h=this.jsPDFDocument.internal.getFont(),p=h.fontStyle,b=h.fontName;if(d.font&&(b=d.font),d.fontStyle){p=d.fontStyle;var S=this.getFontList()[b];S&&S.indexOf(p)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(S[0]),p=S[0])}if(this.jsPDFDocument.setFont(b,p),d.fontSize&&this.jsPDFDocument.setFontSize(d.fontSize),!u){var X=c.unifyColor(d.fillColor);X&&(m=this.jsPDFDocument).setFillColor.apply(m,X),X=c.unifyColor(d.textColor),X&&(f=this.jsPDFDocument).setTextColor.apply(f,X),X=c.unifyColor(d.lineColor),X&&(y=this.jsPDFDocument).setDrawColor.apply(y,X),typeof d.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(d.lineWidth)}},c.prototype.splitTextToSize=function(d,u,m){return this.jsPDFDocument.splitTextToSize(d,u,m)},c.prototype.rect=function(d,u,m,f,y){return this.jsPDFDocument.rect(d,u,m,f,y)},c.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},c.prototype.getTextWidth=function(d){return this.jsPDFDocument.getTextWidth(d)},c.prototype.getDocument=function(){return this.jsPDFDocument},c.prototype.setPage=function(d){this.jsPDFDocument.setPage(d)},c.prototype.addPage=function(){return this.jsPDFDocument.addPage()},c.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},c.prototype.getGlobalOptions=function(){return s||{}},c.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},c.prototype.pageSize=function(){var d=this.jsPDFDocument.internal.pageSize;return d.width==null&&(d={width:d.getWidth(),height:d.getHeight()}),d},c.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},c.prototype.getLineHeightFactor=function(){var d=this.jsPDFDocument;return d.getLineHeightFactor?d.getLineHeightFactor():1.15},c.prototype.getLineHeight=function(d){return d/this.scaleFactor()*this.getLineHeightFactor()},c.prototype.pageNumber=function(){var d=this.jsPDFDocument.internal.getCurrentPageInfo();return d?d.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},c}();l.DocHandler=I},4:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var I=s(903),c=s(796);function d(f,y,h,p,b){var S,X;p===void 0&&(p=!1),b===void 0&&(b=!1);var W;typeof y=="string"?W=h.document.querySelector(y):W=y;var V=Object.keys(f.getFontList()),R=f.scaleFactor(),z=[],L=[],k=[];if(!W)return console.error("Html table could not be found with input: ",y),{head:z,body:L,foot:k};for(var v=0;v<W.rows.length;v++){var K=W.rows[v],x=(X=(S=K==null?void 0:K.parentElement)===null||S===void 0?void 0:S.tagName)===null||X===void 0?void 0:X.toLowerCase(),q=u(V,R,h,K,p,b);q&&(x==="thead"?z.push(q):x==="tfoot"?k.push(q):L.push(q))}return{head:z,body:L,foot:k}}l.parseHtml=d;function u(f,y,h,p,b,S){for(var X=new c.HtmlRowInput(p),W=0;W<p.cells.length;W++){var V=p.cells[W],R=h.getComputedStyle(V);if(b||R.display!=="none"){var z=void 0;S&&(z=(0,I.parseCss)(f,V,y,R,h)),X.push({rowSpan:V.rowSpan,colSpan:V.colSpan,styles:z,_element:V,content:m(V)})}}var L=h.getComputedStyle(p);if(X.length>0&&(b||L.display!=="none"))return X}function m(f){var y=f.cloneNode(!0);return y.innerHTML=y.innerHTML.replace(/\n/g,"").replace(/ +/g," "),y.innerHTML=y.innerHTML.split(/<br.*?>/).map(function(h){return h.trim()}).join(`
`),y.innerText||y.textContent||""}},776:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var I=s(4),c=s(356),d=s(420),u=s(744),m=s(792);function f(W,V){var R=new u.DocHandler(W),z=R.getDocumentOptions(),L=R.getGlobalOptions();(0,m.default)(R,L,z,V);var k=(0,c.assign)({},L,z,V),v;typeof window<"u"&&(v=window);var K=y(L,z,V),x=h(L,z,V),q=p(R,k),Q=S(R,k,v);return{id:V.tableId,content:Q,hooks:x,styles:K,settings:q}}l.parseInput=f;function y(W,V,R){for(var z={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},L=function(x){if(x==="columnStyles"){var q=W[x],Q=V[x],D=R[x];z.columnStyles=(0,c.assign)({},q,Q,D)}else{var U=[W,V,R],P=U.map(function(N){return N[x]||{}});z[x]=(0,c.assign)({},P[0],P[1],P[2])}},k=0,v=Object.keys(z);k<v.length;k++){var K=v[k];L(K)}return z}function h(W,V,R){for(var z=[W,V,R],L={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,v=z;k<v.length;k++){var K=v[k];K.didParseCell&&L.didParseCell.push(K.didParseCell),K.willDrawCell&&L.willDrawCell.push(K.willDrawCell),K.didDrawCell&&L.didDrawCell.push(K.didDrawCell),K.willDrawPage&&L.willDrawPage.push(K.willDrawPage),K.didDrawPage&&L.didDrawPage.push(K.didDrawPage)}return L}function p(W,V){var R,z,L,k,v,K,x,q,Q,D,U,P,N=(0,d.parseSpacing)(V.margin,40/W.scaleFactor()),le=(R=b(W,V.startY))!==null&&R!==void 0?R:N.top,Y;V.showFoot===!0?Y="everyPage":V.showFoot===!1?Y="never":Y=(z=V.showFoot)!==null&&z!==void 0?z:"everyPage";var J;V.showHead===!0?J="everyPage":V.showHead===!1?J="never":J=(L=V.showHead)!==null&&L!==void 0?L:"everyPage";var O=(k=V.useCss)!==null&&k!==void 0?k:!1,ee=V.theme||(O?"plain":"striped"),te=!!V.horizontalPageBreak,se=(v=V.horizontalPageBreakRepeat)!==null&&v!==void 0?v:null;return{includeHiddenHtml:(K=V.includeHiddenHtml)!==null&&K!==void 0?K:!1,useCss:O,theme:ee,startY:le,margin:N,pageBreak:(x=V.pageBreak)!==null&&x!==void 0?x:"auto",rowPageBreak:(q=V.rowPageBreak)!==null&&q!==void 0?q:"auto",tableWidth:(Q=V.tableWidth)!==null&&Q!==void 0?Q:"auto",showHead:J,showFoot:Y,tableLineWidth:(D=V.tableLineWidth)!==null&&D!==void 0?D:0,tableLineColor:(U=V.tableLineColor)!==null&&U!==void 0?U:200,horizontalPageBreak:te,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(P=V.horizontalPageBreakBehaviour)!==null&&P!==void 0?P:"afterAllRows"}}function b(W,V){var R=W.getLastAutoTable(),z=W.scaleFactor(),L=W.pageNumber(),k=!1;if(R&&R.startPageNumber){var v=R.startPageNumber+R.pageNumber-1;k=v===L}return typeof V=="number"?V:(V==null||V===!1)&&k&&(R==null?void 0:R.finalY)!=null?R.finalY+20/z:null}function S(W,V,R){var z=V.head||[],L=V.body||[],k=V.foot||[];if(V.html){var v=V.includeHiddenHtml;if(R){var K=(0,I.parseHtml)(W,V.html,R,v,V.useCss)||{};z=K.head||z,L=K.body||z,k=K.foot||z}else console.error("Cannot parse html in non browser environment")}var x=V.columns||X(z,L,k);return{columns:x,head:z,body:L,foot:k}}function X(W,V,R){var z=W[0]||V[0]||R[0]||[],L=[];return Object.keys(z).filter(function(k){return k!=="_element"}).forEach(function(k){var v=1,K;Array.isArray(z)?K=z[parseInt(k)]:K=z[k],typeof K=="object"&&!Array.isArray(K)&&(v=(K==null?void 0:K.colSpan)||1);for(var x=0;x<v;x++){var q=void 0;Array.isArray(z)?q=L.length:q=k+(x>0?"_".concat(x):"");var Q={dataKey:q};L.push(Q)}}),L}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function s(c,d,u,m){for(var f=function(b){b&&typeof b!="object"&&console.error("The options parameter should be of type object, is: "+typeof b),typeof b.extendWidth<"u"&&(b.tableWidth=b.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof b.margins<"u"&&(typeof b.margin>"u"&&(b.margin=b.margins),console.error("Use of deprecated option: margins, use margin instead.")),b.startY&&typeof b.startY!="number"&&(console.error("Invalid value for startY option",b.startY),delete b.startY),!b.didDrawPage&&(b.afterPageContent||b.beforePageContent||b.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),b.didDrawPage=function(k){c.applyStyles(c.userStyles),b.beforePageContent&&b.beforePageContent(k),c.applyStyles(c.userStyles),b.afterPageContent&&b.afterPageContent(k),c.applyStyles(c.userStyles),b.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),c.applyStyles(c.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){b[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var v=k[0],K=k[1];b[K]&&(console.error("Use of deprecated option ".concat(K,". Use ").concat(v," instead")),b[v]=b[K])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var v=typeof k=="string"?k:k[0],K=typeof k=="string"?k:k[1];typeof b[v]<"u"&&(typeof b.styles[K]>"u"&&(b.styles[K]=b[v]),console.error("Use of deprecated option: "+v+", use the style "+K+" instead."))});for(var S=0,X=["styles","bodyStyles","headStyles","footStyles"];S<X.length;S++){var W=X[S];I(b[W]||{})}for(var V=b.columnStyles||{},R=0,z=Object.keys(V);R<z.length;R++){var L=z[R];I(V[L]||{})}},y=0,h=[d,u,m];y<h.length;y++){var p=h[y];f(p)}}l.default=s;function I(c){c.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),c.minCellHeight||(c.minCellHeight=c.rowHeight)):c.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),c.cellWidth||(c.cellWidth=c.columnWidth))}},260:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var I=s(796),c=s(172),d=s(420),u=function(){function h(p,b){this.pageNumber=1,this.pageCount=1,this.id=p.id,this.settings=p.settings,this.styles=p.styles,this.hooks=p.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return h.prototype.getHeadHeight=function(p){return this.head.reduce(function(b,S){return b+S.getMaxCellHeight(p)},0)},h.prototype.getFootHeight=function(p){return this.foot.reduce(function(b,S){return b+S.getMaxCellHeight(p)},0)},h.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},h.prototype.callCellHooks=function(p,b,S,X,W,V){for(var R=0,z=b;R<z.length;R++){var L=z[R],k=new c.CellHookData(p,this,S,X,W,V),v=L(k)===!1;if(S.text=Array.isArray(S.text)?S.text:[S.text],v)return!1}return!0},h.prototype.callEndPageHooks=function(p,b){p.applyStyles(p.userStyles);for(var S=0,X=this.hooks.didDrawPage;S<X.length;S++){var W=X[S];W(new c.HookData(p,this,b))}},h.prototype.callWillDrawPageHooks=function(p,b){for(var S=0,X=this.hooks.willDrawPage;S<X.length;S++){var W=X[S];W(new c.HookData(p,this,b))}},h.prototype.getWidth=function(p){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var b=this.columns.reduce(function(X,W){return X+W.wrappedWidth},0);return b}else{var S=this.settings.margin;return p-S.left-S.right}},h}();l.Table=u;var m=function(){function h(p,b,S,X,W){W===void 0&&(W=!1),this.height=0,this.raw=p,p instanceof I.HtmlRowInput&&(this.raw=p._element,this.element=p._element),this.index=b,this.section=S,this.cells=X,this.spansMultiplePages=W}return h.prototype.getMaxCellHeight=function(p){var b=this;return p.reduce(function(S,X){var W;return Math.max(S,((W=b.cells[X.index])===null||W===void 0?void 0:W.height)||0)},0)},h.prototype.hasRowSpan=function(p){var b=this;return p.filter(function(S){var X=b.cells[S.index];return X?X.rowSpan>1:!1}).length>0},h.prototype.canEntireRowFit=function(p,b){return this.getMaxCellHeight(b)<=p},h.prototype.getMinimumRowHeight=function(p,b){var S=this;return p.reduce(function(X,W){var V=S.cells[W.index];if(!V)return 0;var R=b.getLineHeight(V.styles.fontSize),z=V.padding("vertical"),L=z+R;return L>X?L:X},0)},h}();l.Row=m;var f=function(){function h(p,b,S){var X,W;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=S,this.raw=p;var V=p;p!=null&&typeof p=="object"&&!Array.isArray(p)?(this.rowSpan=p.rowSpan||1,this.colSpan=p.colSpan||1,V=(W=(X=p.content)!==null&&X!==void 0?X:p.title)!==null&&W!==void 0?W:p,p._element&&(this.raw=p._element)):(this.rowSpan=1,this.colSpan=1);var R=V!=null?""+V:"",z=/\r\n|\r|\n/g;this.text=R.split(z)}return h.prototype.getTextPos=function(){var p;if(this.styles.valign==="top")p=this.y+this.padding("top");else if(this.styles.valign==="bottom")p=this.y+this.height-this.padding("bottom");else{var b=this.height-this.padding("vertical");p=this.y+b/2+this.padding("top")}var S;if(this.styles.halign==="right")S=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var X=this.width-this.padding("horizontal");S=this.x+X/2+this.padding("left")}else S=this.x+this.padding("left");return{x:S,y:p}},h.prototype.getContentHeight=function(p,b){b===void 0&&(b=1.15);var S=Array.isArray(this.text)?this.text.length:1,X=this.styles.fontSize/p*b,W=S*X+this.padding("vertical");return Math.max(W,this.styles.minCellHeight)},h.prototype.padding=function(p){var b=(0,d.parseSpacing)(this.styles.cellPadding,0);return p==="vertical"?b.top+b.bottom:p==="horizontal"?b.left+b.right:b[p]},h}();l.Cell=f;var y=function(){function h(p,b,S){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=p,this.raw=b,this.index=S}return h.prototype.getMaxCustomCellWidth=function(p){for(var b=0,S=0,X=p.allRows();S<X.length;S++){var W=X[S],V=W.cells[this.index];V&&typeof V.styles.cellWidth=="number"&&(b=Math.max(b,V.styles.cellWidth))}return b},h}();l.Column=y},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function s(I,c,d,u,m){if(I==null)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(I),y=1;y<arguments.length;y++){var h=arguments[y];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(f[p]=h[p])}return f}l.assign=s},972:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var I=s(744),c=s(260),d=s(324),u=s(796),m=s(356);function f(W,V){var R=new I.DocHandler(W),z=y(V,R.scaleFactor()),L=new c.Table(V,z);return(0,d.calculateWidths)(R,L),R.applyStyles(R.userStyles),L}l.createTable=f;function y(W,V){var R=W.content,z=S(R.columns);if(R.head.length===0){var L=p(z,"head");L&&R.head.push(L)}if(R.foot.length===0){var L=p(z,"foot");L&&R.foot.push(L)}var k=W.settings.theme,v=W.styles;return{columns:z,head:h("head",R.head,z,v,k,V),body:h("body",R.body,z,v,k,V),foot:h("foot",R.foot,z,v,k,V)}}function h(W,V,R,z,L,k){var v={},K=V.map(function(x,q){for(var Q=0,D={},U=0,P=0,N=0,le=R;N<le.length;N++){var Y=le[N];if(v[Y.index]==null||v[Y.index].left===0)if(P===0){var J=void 0;Array.isArray(x)?J=x[Y.index-U-Q]:J=x[Y.dataKey];var O={};typeof J=="object"&&!Array.isArray(J)&&(O=(J==null?void 0:J.styles)||{});var ee=X(W,Y,q,L,z,k,O),te=new c.Cell(J,ee,W);D[Y.dataKey]=te,D[Y.index]=te,P=te.colSpan-1,v[Y.index]={left:te.rowSpan-1,times:P}}else P--,U++;else v[Y.index].left--,P=v[Y.index].times,Q++}return new c.Row(x,q,W,D)});return K}function p(W,V){var R={};return W.forEach(function(z){if(z.raw!=null){var L=b(V,z.raw);L!=null&&(R[z.dataKey]=L)}}),Object.keys(R).length>0?R:null}function b(W,V){if(W==="head"){if(typeof V=="object")return V.header||V.title||null;if(typeof V=="string"||typeof V=="number")return V}else if(W==="foot"&&typeof V=="object")return V.footer;return null}function S(W){return W.map(function(V,R){var z,L,k;return typeof V=="object"?k=(L=(z=V.dataKey)!==null&&z!==void 0?z:V.key)!==null&&L!==void 0?L:R:k=R,new c.Column(k,V,R)})}function X(W,V,R,z,L,k,v){var K=(0,u.getTheme)(z),x;W==="head"?x=L.headStyles:W==="body"?x=L.bodyStyles:W==="foot"&&(x=L.footStyles);var q=(0,m.assign)({},K.table,K[W],L.styles,x),Q=L.columnStyles[V.dataKey]||L.columnStyles[V.index]||{},D=W==="body"?Q:{},U=W==="body"&&R%2===0?(0,m.assign)({},K.alternateRow,L.alternateRowStyles):{},P=(0,u.defaultStyles)(k),N=(0,m.assign)({},P,q,U,D);return(0,m.assign)(N,v)}},664:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var I=s(420),c=s(260),d=s(744),u=s(356),m=s(136),f=s(224);function y(Q,D){var U=D.settings,P=U.startY,N=U.margin,le={x:N.left,y:P},Y=D.getHeadHeight(D.columns)+D.getFootHeight(D.columns),J=P+N.bottom+Y;if(U.pageBreak==="avoid"){var O=D.body,ee=O.reduce(function(ce,re){return ce+re.height},0);J+=ee}var te=new d.DocHandler(Q);(U.pageBreak==="always"||U.startY!=null&&J>te.pageSize().height)&&(q(te),le.y=N.top),D.callWillDrawPageHooks(te,le);var se=(0,u.assign)({},le);D.startPageNumber=te.pageNumber(),U.horizontalPageBreak?h(te,D,se,le):(te.applyStyles(te.userStyles),(U.showHead==="firstPage"||U.showHead==="everyPage")&&D.head.forEach(function(ce){return L(te,D,ce,le,D.columns)}),te.applyStyles(te.userStyles),D.body.forEach(function(ce,re){var fe=re===D.body.length-1;z(te,D,ce,fe,se,le,D.columns)}),te.applyStyles(te.userStyles),(U.showFoot==="lastPage"||U.showFoot==="everyPage")&&D.foot.forEach(function(ce){return L(te,D,ce,le,D.columns)})),(0,I.addTableBorder)(te,D,se,le),D.callEndPageHooks(te,le),D.finalY=le.y,Q.lastAutoTable=D,Q.previousAutoTable=D,Q.autoTable&&(Q.autoTable.previous=D),te.applyStyles(te.userStyles)}l.drawTable=y;function h(Q,D,U,P){var N=(0,f.calculateAllColumnsCanFitInPage)(Q,D),le=D.settings;if(le.horizontalPageBreakBehaviour==="afterAllRows")N.forEach(function(ee,te){Q.applyStyles(Q.userStyles),te>0?x(Q,D,U,P,ee.columns,!0):p(Q,D,P,ee.columns),b(Q,D,U,P,ee.columns),X(Q,D,P,ee.columns)});else for(var Y=-1,J=N[0],O=function(){var ee=Y;if(J){Q.applyStyles(Q.userStyles);var te=J.columns;Y>=0?x(Q,D,U,P,te,!0):p(Q,D,P,te),ee=S(Q,D,Y+1,P,te),X(Q,D,P,te)}var se=ee-Y;N.slice(1).forEach(function(ce){Q.applyStyles(Q.userStyles),x(Q,D,U,P,ce.columns,!0),S(Q,D,Y+1,P,ce.columns,se),X(Q,D,P,ce.columns)}),Y=ee};Y<D.body.length-1;)O()}function p(Q,D,U,P){var N=D.settings;Q.applyStyles(Q.userStyles),(N.showHead==="firstPage"||N.showHead==="everyPage")&&D.head.forEach(function(le){return L(Q,D,le,U,P)})}function b(Q,D,U,P,N){Q.applyStyles(Q.userStyles),D.body.forEach(function(le,Y){var J=Y===D.body.length-1;z(Q,D,le,J,U,P,N)})}function S(Q,D,U,P,N,le){Q.applyStyles(Q.userStyles),le=le??D.body.length;var Y=Math.min(U+le,D.body.length),J=-1;return D.body.slice(U,Y).forEach(function(O,ee){var te=U+ee===D.body.length-1,se=K(Q,D,te,P);O.canEntireRowFit(se,N)&&(L(Q,D,O,P,N),J=U+ee)}),J}function X(Q,D,U,P){var N=D.settings;Q.applyStyles(Q.userStyles),(N.showFoot==="lastPage"||N.showFoot==="everyPage")&&D.foot.forEach(function(le){return L(Q,D,le,U,P)})}function W(Q,D,U){var P=U.getLineHeight(Q.styles.fontSize),N=Q.padding("vertical"),le=Math.floor((D-N)/P);return Math.max(0,le)}function V(Q,D,U,P){var N={};Q.spansMultiplePages=!0,Q.height=0;for(var le=0,Y=0,J=U.columns;Y<J.length;Y++){var O=J[Y],ee=Q.cells[O.index];if(ee){Array.isArray(ee.text)||(ee.text=[ee.text]);var te=new c.Cell(ee.raw,ee.styles,ee.section);te=(0,u.assign)(te,ee),te.text=[];var se=W(ee,D,P);ee.text.length>se&&(te.text=ee.text.splice(se,ee.text.length));var ce=P.scaleFactor(),re=P.getLineHeightFactor();ee.contentHeight=ee.getContentHeight(ce,re),ee.contentHeight>=D&&(ee.contentHeight=D,te.styles.minCellHeight-=D),ee.contentHeight>Q.height&&(Q.height=ee.contentHeight),te.contentHeight=te.getContentHeight(ce,re),te.contentHeight>le&&(le=te.contentHeight),N[O.index]=te}}var fe=new c.Row(Q.raw,-1,Q.section,N,!0);fe.height=le;for(var be=0,ue=U.columns;be<ue.length;be++){var O=ue[be],te=fe.cells[O.index];te&&(te.height=fe.height);var ee=Q.cells[O.index];ee&&(ee.height=Q.height)}return fe}function R(Q,D,U,P){var N=Q.pageSize().height,le=P.settings.margin,Y=le.top+le.bottom,J=N-Y;D.section==="body"&&(J-=P.getHeadHeight(P.columns)+P.getFootHeight(P.columns));var O=D.getMinimumRowHeight(P.columns,Q),ee=O<U;if(O>J)return console.error("Will not be able to print row ".concat(D.index," correctly since it's minimum height is larger than page height")),!0;if(!ee)return!1;var te=D.hasRowSpan(P.columns),se=D.getMaxCellHeight(P.columns)>J;return se?(te&&console.error("The content of row ".concat(D.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||P.settings.rowPageBreak==="avoid")}function z(Q,D,U,P,N,le,Y){var J=K(Q,D,P,le);if(U.canEntireRowFit(J,Y))L(Q,D,U,le,Y);else if(R(Q,U,J,D)){var O=V(U,J,D,Q);L(Q,D,U,le,Y),x(Q,D,N,le,Y),z(Q,D,O,P,N,le,Y)}else x(Q,D,N,le,Y),z(Q,D,U,P,N,le,Y)}function L(Q,D,U,P,N){P.x=D.settings.margin.left;for(var le=0,Y=N;le<Y.length;le++){var J=Y[le],O=U.cells[J.index];if(!O){P.x+=J.width;continue}Q.applyStyles(O.styles),O.x=P.x,O.y=P.y;var ee=D.callCellHooks(Q,D.hooks.willDrawCell,O,U,J,P);if(ee===!1){P.x+=J.width;continue}k(Q,O,P);var te=O.getTextPos();(0,m.default)(O.text,te.x,te.y,{halign:O.styles.halign,valign:O.styles.valign,maxWidth:Math.ceil(O.width-O.padding("left")-O.padding("right"))},Q.getDocument()),D.callCellHooks(Q,D.hooks.didDrawCell,O,U,J,P),P.x+=J.width}P.y+=U.height}function k(Q,D,U){var P=D.styles;if(Q.getDocument().setFillColor(Q.getDocument().getFillColor()),typeof P.lineWidth=="number"){var N=(0,I.getFillStyle)(P.lineWidth,P.fillColor);N&&Q.rect(D.x,U.y,D.width,D.height,N)}else typeof P.lineWidth=="object"&&(P.fillColor&&Q.rect(D.x,U.y,D.width,D.height,"F"),v(Q,D,U,P.lineWidth))}function v(Q,D,U,P){var N,le,Y,J;P.top&&(N=U.x,le=U.y,Y=U.x+D.width,J=U.y,P.right&&(Y+=.5*P.right),P.left&&(N-=.5*P.left),O(P.top,N,le,Y,J)),P.bottom&&(N=U.x,le=U.y+D.height,Y=U.x+D.width,J=U.y+D.height,P.right&&(Y+=.5*P.right),P.left&&(N-=.5*P.left),O(P.bottom,N,le,Y,J)),P.left&&(N=U.x,le=U.y,Y=U.x,J=U.y+D.height,P.top&&(le-=.5*P.top),P.bottom&&(J+=.5*P.bottom),O(P.left,N,le,Y,J)),P.right&&(N=U.x+D.width,le=U.y,Y=U.x+D.width,J=U.y+D.height,P.top&&(le-=.5*P.top),P.bottom&&(J+=.5*P.bottom),O(P.right,N,le,Y,J));function O(ee,te,se,ce,re){Q.getDocument().setLineWidth(ee),Q.getDocument().line(te,se,ce,re,"S")}}function K(Q,D,U,P){var N=D.settings.margin.bottom,le=D.settings.showFoot;return(le==="everyPage"||le==="lastPage"&&U)&&(N+=D.getFootHeight(D.columns)),Q.pageSize().height-P.y-N}function x(Q,D,U,P,N,le){N===void 0&&(N=[]),le===void 0&&(le=!1),Q.applyStyles(Q.userStyles),D.settings.showFoot==="everyPage"&&!le&&D.foot.forEach(function(J){return L(Q,D,J,P,N)}),D.callEndPageHooks(Q,P);var Y=D.settings.margin;(0,I.addTableBorder)(Q,D,U,P),q(Q),D.pageNumber++,D.pageCount++,P.x=Y.left,P.y=Y.top,U.y=Y.top,D.callWillDrawPageHooks(Q,P),D.settings.showHead==="everyPage"&&(D.head.forEach(function(J){return L(Q,D,J,P,N)}),Q.applyStyles(Q.userStyles))}l.addPage=x;function q(Q){var D=Q.pageNumber();Q.setPage(D+1);var U=Q.pageNumber();return U===D?(Q.addPage(),!0):!1}},224:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var I=s(420);function c(u,m,f){var y;f===void 0&&(f={});var h=(0,I.getPageAvailableWidth)(u,m),p=new Map,b=[],S=[],X=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?X=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(X=[m.settings.horizontalPageBreakRepeat]),X.forEach(function(z){var L=m.columns.find(function(k){return k.dataKey===z||k.index===z});L&&!p.has(L.index)&&(p.set(L.index,!0),b.push(L.index),S.push(m.columns[L.index]),h-=L.wrappedWidth)});for(var W=!0,V=(y=f==null?void 0:f.start)!==null&&y!==void 0?y:0;V<m.columns.length;){if(p.has(V)){V++;continue}var R=m.columns[V].wrappedWidth;if(W||h>=R)W=!1,b.push(V),S.push(m.columns[V]),h-=R;else break;V++}return{colIndexes:b,columns:S,lastIndex:V-1}}function d(u,m){for(var f=[],y=0;y<m.columns.length;y++){var h=c(u,m,{start:y});h.columns.length&&(f.push(h),y=h.lastIndex)}return f}l.calculateAllColumnsCanFitInPage=d},324:function(o,l,s){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var I=s(420);function c(b,S){d(b,S);var X=[],W=0;S.columns.forEach(function(R){var z=R.getMaxCustomCellWidth(S);z?R.width=z:(R.width=R.wrappedWidth,X.push(R)),W+=R.width});var V=S.getWidth(b.pageSize().width)-W;V&&(V=u(X,V,function(R){return Math.max(R.minReadableWidth,R.minWidth)})),V&&(V=u(X,V,function(R){return R.minWidth})),V=Math.abs(V),!S.settings.horizontalPageBreak&&V>.1/b.scaleFactor()&&(V=V<1?V:Math.round(V),console.warn("Of the table content, ".concat(V," units width could not fit page"))),f(S),y(S,b),m(S)}l.calculateWidths=c;function d(b,S){var X=b.scaleFactor(),W=S.settings.horizontalPageBreak,V=(0,I.getPageAvailableWidth)(b,S);S.allRows().forEach(function(R){for(var z=0,L=S.columns;z<L.length;z++){var k=L[z],v=R.cells[k.index];if(v){var K=S.hooks.didParseCell;S.callCellHooks(b,K,v,R,k,null);var x=v.padding("horizontal");v.contentWidth=(0,I.getStringWidth)(v.text,v.styles,b)+x;var q=(0,I.getStringWidth)(v.text.join(" ").split(/\s+/),v.styles,b);if(v.minReadableWidth=q+v.padding("horizontal"),typeof v.styles.cellWidth=="number")v.minWidth=v.styles.cellWidth,v.wrappedWidth=v.styles.cellWidth;else if(v.styles.cellWidth==="wrap"||W===!0)v.contentWidth>V?(v.minWidth=V,v.wrappedWidth=V):(v.minWidth=v.contentWidth,v.wrappedWidth=v.contentWidth);else{var Q=10/X;v.minWidth=v.styles.minCellWidth||Q,v.wrappedWidth=v.contentWidth,v.minWidth>v.wrappedWidth&&(v.wrappedWidth=v.minWidth)}}}}),S.allRows().forEach(function(R){for(var z=0,L=S.columns;z<L.length;z++){var k=L[z],v=R.cells[k.index];if(v&&v.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,v.wrappedWidth),k.minWidth=Math.max(k.minWidth,v.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,v.minReadableWidth);else{var K=S.styles.columnStyles[k.dataKey]||S.styles.columnStyles[k.index]||{},x=K.cellWidth||K.minCellWidth;x&&typeof x=="number"&&(k.minWidth=x,k.wrappedWidth=x)}v&&(v.colSpan>1&&!k.minWidth&&(k.minWidth=v.minWidth),v.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=v.minWidth))}})}function u(b,S,X){for(var W=S,V=b.reduce(function(Q,D){return Q+D.wrappedWidth},0),R=0;R<b.length;R++){var z=b[R],L=z.wrappedWidth/V,k=W*L,v=z.width+k,K=X(z),x=v<K?K:v;S-=x-z.width,z.width=x}if(S=Math.round(S*1e10)/1e10,S){var q=b.filter(function(Q){return S<0?Q.width>X(Q):!0});q.length&&(S=u(q,S,X))}return S}l.resizeColumns=u;function m(b){for(var S={},X=1,W=b.allRows(),V=0;V<W.length;V++)for(var R=W[V],z=0,L=b.columns;z<L.length;z++){var k=L[z],v=S[k.index];if(X>1)X--,delete R.cells[k.index];else if(v)v.cell.height+=R.height,X=v.cell.colSpan,delete R.cells[k.index],v.left--,v.left<=1&&delete S[k.index];else{var K=R.cells[k.index];if(!K)continue;if(K.height=R.height,K.rowSpan>1){var x=W.length-V,q=K.rowSpan>x?x:K.rowSpan;S[k.index]={cell:K,left:q,row:R}}}}}function f(b){for(var S=b.allRows(),X=0;X<S.length;X++)for(var W=S[X],V=null,R=0,z=0,L=0;L<b.columns.length;L++){var k=b.columns[L];if(z-=1,z>1&&b.columns[L+1])R+=k.width,delete W.cells[k.index];else if(V){var v=V;delete W.cells[k.index],V=null,v.width=k.width+R}else{var v=W.cells[k.index];if(!v)continue;if(z=v.colSpan,R=0,v.colSpan>1){V=v,R+=k.width;continue}v.width=k.width+R}}}function y(b,S){for(var X={count:0,height:0},W=0,V=b.allRows();W<V.length;W++){for(var R=V[W],z=0,L=b.columns;z<L.length;z++){var k=L[z],v=R.cells[k.index];if(v){S.applyStyles(v.styles,!0);var K=v.width-v.padding("horizontal");if(v.styles.overflow==="linebreak")v.text=S.splitTextToSize(v.text,K+1/S.scaleFactor(),{fontSize:v.styles.fontSize});else if(v.styles.overflow==="ellipsize")v.text=h(v.text,K,v.styles,S,"...");else if(v.styles.overflow==="hidden")v.text=h(v.text,K,v.styles,S,"");else if(typeof v.styles.overflow=="function"){var x=v.styles.overflow(v.text,K);typeof x=="string"?v.text=[x]:v.text=x}v.contentHeight=v.getContentHeight(S.scaleFactor(),S.getLineHeightFactor());var q=v.contentHeight/v.rowSpan;v.rowSpan>1&&X.count*X.height<q*v.rowSpan?X={height:q,count:v.rowSpan}:X&&X.count>0&&X.height>q&&(q=X.height),q>R.height&&(R.height=q)}}X.count--}}function h(b,S,X,W,V){return b.map(function(R){return p(R,S,X,W,V)})}l.ellipsize=h;function p(b,S,X,W,V){var R=1e4*W.scaleFactor();if(S=Math.ceil(S*R)/R,S>=(0,I.getStringWidth)(b,X,W))return b;for(;S<(0,I.getStringWidth)(b+V,X,W)&&!(b.length<=1);)b=b.substring(0,b.length-1);return b.trim()+V}},964:function(o){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=n}},r={};function i(o){var l=r[o];if(l!==void 0)return l.exports;var s=r[o]={exports:{}};return g[o].call(s.exports,s,s.exports,i),s.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=i(340),s=i(776),I=i(664),c=i(972),d=i(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return d.Table}});var u=i(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return u.CellHookData}});var m=i(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return m.Row}});function f(S){(0,l.default)(S)}o.applyPlugin=f;function y(S,X){var W=(0,s.parseInput)(S,X),V=(0,c.createTable)(S,W);(0,I.drawTable)(S,V)}function h(S,X){var W=(0,s.parseInput)(S,X);return(0,c.createTable)(S,W)}o.__createTable=h;function p(S,X){(0,I.drawTable)(S,X)}o.__drawTable=p;try{var b=i(964);b.jsPDF&&(b=b.jsPDF),f(b)}catch{}o.default=y}(),a}()})})(Q9);var ooe=Q9.exports;const loe=l0(ooe),soe=({rutina:e,generarPDF:t,eliminarRutina:n,manejarEdicionRutina:g})=>{const r=new Date(e.fechaCreacion).toLocaleDateString();return G.jsxs("div",{className:"rutinas-contenedor-ejercicio",children:[G.jsx("h3",{children:e.nombreRutina}),G.jsxs("p",{children:["Fecha de Creación: ",r]}),G.jsxs("table",{className:"rutinas-tabla",children:[G.jsx("thead",{children:G.jsxs("tr",{children:[G.jsx("th",{children:"#"}),G.jsx("th",{children:"Grupo"}),G.jsx("th",{children:"Ejercicio"}),G.jsx("th",{children:"Descripción"})]})}),G.jsx("tbody",{children:e.ejercicios.map((i,a)=>G.jsxs("tr",{children:[G.jsx("td",{children:a+1}),G.jsx("td",{children:i.grupo.charAt(0).toUpperCase()+i.grupo.slice(1)}),G.jsx("td",{children:i.ejercicio}),G.jsx("td",{children:i.descripcion})]},a))})]}),G.jsxs("div",{className:"rutinas-botones-accion",children:[G.jsx("button",{className:"rutinas-boton",onClick:()=>t(e),children:"Descargar PDF"}),G.jsx("button",{className:"rutinas-boton",onClick:()=>n(e.id),children:"Eliminar Rutina"}),G.jsx("button",{className:"rutinas-boton",onClick:()=>g(e),children:"Editar Rutina"})]})]})},Ioe=({rutinas:e,generarPDF:t,eliminarRutina:n,manejarEdicionRutina:g})=>G.jsxs(G.Fragment,{children:[G.jsx("h2",{children:"Mis Rutinas"}),G.jsxs("div",{className:"rutinas-aplicacion",children:[e.length>0?e.map(r=>G.jsx(soe,{rutina:r,generarPDF:t,eliminarRutina:n,manejarEdicionRutina:g},r.id)):G.jsx("p",{children:"No tienes rutinas guardadas."}),G.jsx("div",{className:"rutinas-botones-accion",children:G.jsx(Qn,{to:"/GenerarRutina",children:G.jsx("button",{className:"rutinas-boton",children:"Crear rutina"})})})]})]}),coe=({grupoSeleccionado:e,getEjerciciosByGrupo:t,manejarSeleccionEjercicio:n})=>{const g=t(e);return G.jsx("div",{children:g.map(r=>G.jsx("button",{onClick:()=>n(r),children:r.nombre},r.id))})},Coe=({rutinaEditando:e,grupos:t,ejercicios:n,setEjercicioSeleccionado:g,grupoSeleccionado:r,setGrupoSeleccionado:i,ejercicioSeleccionado:a,getEjerciciosByGrupo:o,añadirEjercicio:l,ejerciciosSeleccionados:s,eliminarEjercicio:I,guardarRutina:c,cancelarEdicion:d})=>G.jsxs("div",{className:"contenedor-editar-rutina",children:[G.jsx("h2",{children:"Editar mi rutina"}),G.jsx("h4",{children:"¿Qué vas a trabajar el día de hoy?"}),G.jsxs("div",{className:"aplicacion",children:[G.jsx("div",{className:"contenedor-botones",children:t.map(u=>G.jsx("button",{onClick:()=>i(u.nombre),children:u.nombre.charAt(0).toUpperCase()+u.nombre.slice(1)},u.id))}),G.jsxs("div",{className:"contenido",children:[G.jsx(coe,{grupoSeleccionado:r,getEjerciciosByGrupo:o,manejarSeleccionEjercicio:g,ejercicios:n}),G.jsx("div",{children:a&&G.jsxs(G.Fragment,{children:[G.jsx("h3",{children:a.nombre}),G.jsx("p",{children:a.descripcion})]})}),G.jsxs("div",{className:"lista-ejercicios",children:[s.length>0&&G.jsx("h4",{children:"Ejercicios Seleccionados:"}),G.jsx("ul",{children:s.map((u,m)=>G.jsxs("li",{children:[u.ejercicio," - ",u.grupo?u.grupo.charAt(0).toUpperCase()+u.grupo.slice(1):"",G.jsx("button",{onClick:()=>I(m),children:"Eliminar"})]},m))})]}),G.jsxs("div",{className:"botones-accion",children:[G.jsx("button",{onClick:l,children:"Añadir Ejercicio"}),G.jsx("button",{onClick:c,children:"Guardar Rutina"}),G.jsx("button",{onClick:d,children:"Cancelar"})]})]})]})]}),uoe=()=>{const[e,t]=_.useState([]),[n,g]=_.useState(null),[r,i]=_.useState([]),[a,o]=_.useState([]),[l,s]=_.useState(null),[I,c]=_.useState(null),[d,u]=_.useState([]);_.useEffect(()=>{const W=sessionStorage.getItem("usuarioId");(async()=>{try{const[R,z,L]=await Promise.all([fetch(`https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente?idCliente=${W}`),fetch("https://6668e270f53957909ff9675e.mockapi.io/rutinas"),fetch("https://6668e270f53957909ff9675e.mockapi.io/ejercicios")]);if(R.ok){const K=await R.json();t(K)}else if(R.status===404)t([]);else throw new Error(`Rutinas API error: ${R.statusText}`);if(!z.ok)throw new Error(`Grupos API error: ${z.statusText}`);if(!L.ok)throw new Error(`Ejercicios API error: ${L.statusText}`);const[k,v]=await Promise.all([z.json(),L.json()]);i(k),o(v)}catch(R){console.error("Error fetching data:",R)}})()},[]);const m=W=>{const V=r.find(R=>R.nombre===W);return V?V.idEjercicio.ejercicios.map(R=>a.find(z=>z.id===R.id)):[]},f=W=>{const V=new ot,R=new Date(W.fechaCreacion),z=`${R.getDate()}/${R.getMonth()+1}/${R.getFullYear()}`,L=W.nombreRutina,k=`${L} ${z}`;V.setFontSize(20),V.text(k,10,10),loe(V,{head:[["#","Grupo","Ejercicio","Descripción"]],body:W.ejercicios.map((v,K)=>[K+1,v.grupo.charAt(0).toUpperCase()+v.grupo.slice(1),v.ejercicio,v.descripcion]),startY:20}),V.save(`${L}.pdf`)},y=W=>{fetch(`https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente/${W}`,{method:"DELETE"}).then(()=>{t(e.filter(V=>V.id!==W))})},h=W=>{g(W),u(W.ejercicios)},p=()=>{I&&(u([...d,{grupo:l,ejercicio:I.nombre,descripcion:I.descripcion}]),c(null))},b=W=>{u(d.filter((V,R)=>R!==W))},S=()=>{if(d.length===0){alert("Debe agregar al menos un ejercicio antes de guardar la rutina.");return}const W={...n,ejercicios:d};fetch(`https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente/${W.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}).then(V=>V.json()).then(()=>{g(null),u([]),fetch(`https://6668e270f53957909ff9675e.mockapi.io/rutinasCliente?idCliente=${sessionStorage.getItem("usuarioId")}`).then(V=>V.json()).then(V=>t(V))})},X=()=>{g(null),u([])};return G.jsx("div",{className:"contenedor-rutinas",children:n?G.jsx(Coe,{rutinaEditando:n,grupos:r,ejercicios:a,setEjercicioSeleccionado:c,grupoSeleccionado:l,setGrupoSeleccionado:s,ejercicioSeleccionado:I,getEjerciciosByGrupo:m,añadirEjercicio:p,ejerciciosSeleccionados:d,eliminarEjercicio:b,guardarRutina:S,cancelarEdicion:X}):G.jsx(Ioe,{rutinas:e,generarPDF:f,eliminarRutina:y,manejarEdicionRutina:h})})},doe=()=>G.jsxs("div",{className:"contenedor-ver-rutinas",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(uoe,{}),G.jsx(Hg,{})]}),qk=({tipo:e,placeholder:t,valor:n,onChange:g})=>G.jsx("input",{type:e,placeholder:t,value:n,onChange:g,className:"campo-texto",required:!0}),Aoe=({placeholder:e,valor:t,onChange:n})=>G.jsx("textarea",{className:"campo-texto-area",placeholder:e,value:t,onChange:n}),P9=({options:e,selectedValues:t,onChange:n})=>{const g=r=>{const i=Array.isArray(t)&&t.includes(r)?t.filter(a=>a!==r):Array.isArray(t)?[...t,r]:[r];n(i)};return G.jsx("div",{className:"selector-multiple-container",children:e.map(r=>G.jsxs("label",{className:"selector-multiple-label",children:[G.jsx("input",{type:"checkbox",checked:Array.isArray(t)&&t.includes(r),onChange:()=>g(r)}),r]},r))})};function O9({entrenador:e,guardarCambios:t}){const[n,g]=_.useState((e==null?void 0:e.nombre)||""),[r,i]=_.useState((e==null?void 0:e.horario)||""),[a,o]=_.useState((e==null?void 0:e.descripcion)||""),[l,s]=_.useState((e==null?void 0:e.especialidad)||[]),I=["Pantorrillas","Pierna","Biceps","Triceps","Espalda","Pecho","Abdomen","Gluteos","Cardio","Flexibilidad","Fuerza","Ejercicios de bajo impacto"],c=d=>{d.preventDefault(),t({nombre:n,horario:r,descripcion:a,especialidad:l})};return G.jsxs("form",{className:"formulario-entrenador",onSubmit:c,children:[G.jsx("h4",{children:"Nombre"}),G.jsx(qk,{tipo:"text",placeholder:"Ingresa el nombre del entrenador",valor:n,onChange:d=>g(d.target.value)}),G.jsx("h4",{children:"Horario"}),G.jsx(qk,{tipo:"text",placeholder:"Ingresa el horario del entrenador",valor:r,onChange:d=>i(d.target.value)}),G.jsx("h4",{children:"Descripción"}),G.jsx(Aoe,{placeholder:"Ingresa una breve descripción del entrenador",valor:a,onChange:d=>o(d.target.value)}),G.jsx("h4",{children:"Especialidad"}),G.jsx(P9,{options:I,selectedValues:l,onChange:d=>s(d)}),G.jsx("button",{type:"submit",children:"Guardar"})]})}function hoe(){const[e,t]=_.useState(""),[n,g]=_.useState(!1),r=a=>{t("Entrenador registrado correctamente."),g(!0)},i=()=>{g(!1)};return G.jsxs("div",{className:"contenedor-registro-entrenador",children:[G.jsx(zg,{titulo:"Registrar Entrenador"}),G.jsx(O9,{guardarCambios:r}),e&&G.jsx(Modal,{mostrar:n,cerrar:i,children:G.jsx("p",{children:e})})]})}const moe=({options:e,onChange:t,placeholder:n,labelKey:g})=>{const[r,i]=_.useState(!1),[a,o]=_.useState(null),l=_.useRef(null),s=()=>{i(!r)},I=c=>{o(c),t(c),i(!1)};return _.useEffect(()=>{const c=d=>{l.current&&!l.current.contains(d.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),G.jsxs("div",{className:"dropdown-container",ref:l,children:[G.jsxs("div",{className:"dropdown-header",onClick:s,children:[a?a[g]:n,G.jsx(Ri,{icon:r?Wm:Hu,className:"dropdown-arrow"})]}),r&&G.jsx("ul",{className:"dropdown-list",children:e.map(c=>G.jsx("li",{onClick:()=>I(c),children:c[g]},c.id))})]})},$k=({children:e,onClick:t,disabled:n=!1})=>G.jsx("button",{className:"boton",onClick:t,disabled:n,children:e}),eR=({mostrar:e,cerrar:t,titulo:n,children:g})=>e?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"modal-header",children:G.jsx("h3",{children:n})}),G.jsx("button",{className:"modal-close",onClick:t,children:"Cancelar"}),G.jsx("div",{className:"modal-body",children:g})]}):null;function foe(){const[e,t]=_.useState([]),[n,g]=_.useState(null),[r,i]=_.useState(!1),[a,o]=_.useState(!1),[l,s]=_.useState(""),[I,c]=_.useState([]);_.useEffect(()=>{(async()=>{try{const p=await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/entrenadores");t(p.data)}catch(p){console.error("Error fetching trainers:",p)}})()},[]);const d=h=>{g(h),c(Object.values(h.especialidad||{}))},u=()=>{o(!0),i(!0)},m=async()=>{if(window.confirm("¿Está seguro de que desea eliminar este entrenador?"))try{await Zt.delete(`https://6668e270f53957909ff9675e.mockapi.io/entrenadores/${n.id}`),t(e.filter(h=>h.id!==n.id)),g(null),s("Entrenador eliminado correctamente."),i(!0)}catch(h){console.error("Error deleting trainer:",h),s("Error eliminando el entrenador."),i(!0)}},f=async h=>{if(a)try{const p=await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/entrenadores/${n.id}`,h);t(e.map(b=>b.id===n.id?{...b,...p.data}:b))}catch(p){console.error("Error updating trainer:",p),s("Error actualizando el entrenador."),i(!0);return}else try{const p=await Zt.post("https://6668e270f53957909ff9675e.mockapi.io/entrenadores",h);t([...e,p.data])}catch(p){console.error("Error creating trainer:",p),s("Error creando el entrenador."),i(!0);return}g(null),o(!1),i(!1),s("Cambios guardados correctamente."),i(!0)},y=()=>{i(!1),o(!1)};return G.jsxs("div",{className:"contenedor-administrar",children:[G.jsx(zg,{titulo:"Administrar Entrenador"}),G.jsxs("div",{className:"contenedor-administrar-entrenador",children:[G.jsx(moe,{options:e,onChange:d,placeholder:"Selecciona un entrenador",labelKey:"nombre"}),n&&G.jsxs("div",{className:"acciones-entrenador",children:[G.jsx($k,{onClick:u,children:"Editar"}),G.jsx($k,{onClick:m,children:"Eliminar"})]}),G.jsxs(eR,{mostrar:r&&a,cerrar:y,titulo:a?"Editar Entrenador":"Nuevo Entrenador",children:[G.jsx(O9,{entrenador:a?n:null,guardarCambios:f}),G.jsx(P9,{options:["Pantorrillas","Pierna","Espalda","Brazo","Pecho","Abdomen","Gluteos","Cardio","Flexibilidad"],selectedValues:I,onChange:c})]}),l&&G.jsx(eR,{mostrar:r&&!a,cerrar:y,children:G.jsx("p",{children:l})})]})]})}function poe(){return G.jsxs("div",{className:"contenedor-admin",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(foe,{}),G.jsx(hoe,{}),G.jsx(Hg,{})]})}const Bi=({children:e})=>JSON.parse(sessionStorage.getItem("usuario"))?e:G.jsx(vX,{to:"/IniciarSesionUsuario"}),tR=({children:e})=>{const t=JSON.parse(sessionStorage.getItem("usuario"));return t&&t.rol==="administrador"?e:G.jsx(vX,{to:"/"})},boe=({options:e,onChange:t,placeholder:n,labelKey:g})=>{const[r,i]=_.useState(!1),[a,o]=_.useState(null),l=_.useRef(null),s=()=>{i(!r)},I=d=>{o(d),t(d),i(!1)},c=d=>{l.current&&!l.current.contains(d.target)&&i(!1)};return _.useEffect(()=>(r?document.addEventListener("mousedown",c):document.removeEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}),[r]),G.jsxs("div",{className:"dropdown-container",ref:l,children:[G.jsxs("div",{className:"dropdown-header",onClick:s,children:[a?a[g]:n,G.jsx("span",{className:"dropdown-arrow"})]}),r&&G.jsx("ul",{className:"dropdown-list",children:e.map(d=>G.jsx("li",{onClick:()=>I(d),children:d[g]},d.id))})]})};function yoe(){const[e,t]=_.useState([]),[n,g]=_.useState(null),[r,i]=_.useState(null);_.useEffect(()=>{(async()=>{try{const d=await Zt.get("https://6668e270f53957909ff9675e.mockapi.io/cliente");t(d.data)}catch(d){console.error("Error fetching usuarios:",d)}})()},[]);const a=c=>{g(c)},o=async()=>{if(n.rol==="administrador"){i("No se puede eliminar un usuario con rol de administrador.");return}if(window.confirm("¿Está seguro de que desea eliminar este usuario?"))try{await Zt.delete(`https://6668e270f53957909ff9675e.mockapi.io/cliente/${n.id}`),t(e.filter(c=>c.id!==n.id)),g(null),i("Usuario eliminado correctamente.")}catch(c){console.error("Error deleting usuario:",c),i("Error al eliminar el usuario.")}},l=c=>{const{name:d,value:u}=c.target;g({...n,[d]:u})},s=c=>{const d=c.target.files[0];if(d){const u=new FileReader;u.onloadend=()=>{g({...n,foto:u.result})},u.readAsDataURL(d)}},I=async()=>{try{await Zt.put(`https://6668e270f53957909ff9675e.mockapi.io/cliente/${n.id}`,n),i("Usuario actualizado correctamente."),t(e.map(c=>c.id===n.id?n:c))}catch(c){console.error("Error updating usuario:",c),i("Error al actualizar el usuario.")}};return G.jsxs("div",{className:"contenedor-administrar",children:[G.jsx(zg,{titulo:"Administrar Usuario"}),G.jsxs("div",{className:"contenedor-administrar-usuario",children:[G.jsx(boe,{options:e,onChange:a,placeholder:"Selecciona un usuario",labelKey:"nombre"}),n&&G.jsxs("div",{className:"acciones-usuario",children:[G.jsxs("form",{className:"form-usuario",children:[n.foto&&G.jsx("img",{src:n.foto,alt:"Foto de perfil",className:"foto-perfil"}),G.jsxs("div",{children:[G.jsx("label",{children:"Nombre:"}),G.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Fecha de Nacimiento:"}),G.jsx("input",{type:"date",name:"fechaNacimiento",value:n.fechaNacimiento,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Dirección:"}),G.jsx("input",{type:"text",name:"direccion",value:n.direccion,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Número de Celular:"}),G.jsx("input",{type:"text",name:"numeroCelular",value:n.numeroCelular,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Email:"}),G.jsx("input",{type:"email",name:"email",value:n.email,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"CI:"}),G.jsx("input",{type:"text",name:"ci",value:n.ci,onChange:l})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Sexo:"}),G.jsxs("select",{name:"sexo",value:n.sexo,onChange:l,children:[G.jsx("option",{value:"Masculino",children:"Masculino"}),G.jsx("option",{value:"Femenino",children:"Femenino"}),G.jsx("option",{value:"Otro",children:"Otro"})]})]}),G.jsxs("div",{children:[G.jsx("label",{children:"Foto:"}),G.jsx("input",{type:"file",name:"foto",onChange:s})]}),G.jsx("div",{className:"boton-guardar",children:G.jsx("button",{type:"button",onClick:I,children:"Guardar Cambios"})}),G.jsx("div",{className:"boton-eliminar",children:G.jsx("button",{type:"button",onClick:o,children:"Eliminar"})})]}),r&&G.jsx("p",{className:"mensaje",children:r})]})]})]})}function Zoe(){return G.jsxs("div",{className:"contenedor-admin",children:[G.jsx(Ng,{}),G.jsx(Yg,{}),G.jsx(yoe,{}),G.jsx(Hg,{})]})}const Goe=()=>G.jsx(qK,{children:G.jsxs(UK,{children:[G.jsx(mg,{path:"/",element:G.jsx(AM,{})}),G.jsx(mg,{path:"/IniciarSesionUsuario",element:G.jsx(z4,{})}),G.jsx(mg,{path:"/RegistroUsuario",element:G.jsx(j4,{})}),G.jsx(mg,{path:"/Chat",element:G.jsx(Bi,{children:G.jsx(lQ,{})})}),G.jsx(mg,{path:"/Entrenadores",element:G.jsx(Bi,{children:G.jsx(CQ,{})})}),G.jsx(mg,{path:"/EvaluacionUsuario",element:G.jsx(Bi,{children:G.jsx(ote,{})})}),G.jsx(mg,{path:"/GenerarRutina",element:G.jsx(Bi,{children:G.jsx(Cte,{})})}),G.jsx(mg,{path:"/GenerarRutinaIA",element:G.jsx(Bi,{children:G.jsx(Ate,{})})}),G.jsx(mg,{path:"/Metas",element:G.jsx(Bi,{children:G.jsx(yte,{})})}),G.jsx(mg,{path:"/PerfilCliente",element:G.jsx(Bi,{children:G.jsx(Wie,{})})}),G.jsx(mg,{path:"/InfoMaquinasQR",element:G.jsx(Bi,{children:G.jsx(tae,{})})}),G.jsx(mg,{path:"/RegistroEvaluacion",element:G.jsx(Bi,{children:G.jsx(iae,{})})}),G.jsx(mg,{path:"/InfoMaquinas",element:G.jsx(Bi,{children:G.jsx(gae,{})})}),G.jsx(mg,{path:"/VerRutinas",element:G.jsx(Bi,{children:G.jsx(doe,{})})}),G.jsx(mg,{path:"/AdministrarEntrenador",element:G.jsx(tR,{children:G.jsx(poe,{})})}),G.jsx(mg,{path:"/AdministrarUsuario",element:G.jsx(tR,{children:G.jsx(Zoe,{})})})]})});function Boe(){return G.jsx(G.Fragment,{children:G.jsx(Goe,{})})}Vy.createRoot(document.getElementById("root")).render(G.jsx(I0.StrictMode,{children:G.jsx(Boe,{})}));export{Vie as _,EC as c,l0 as g};
